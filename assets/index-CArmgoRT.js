(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ka,Ve,$p,qr,Zd,zp,Hp,Up,tf,ou,su,Yp,La={},Xp=[],J1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Za=Array.isArray;function Zn(t,e){for(var n in e)t[n]=e[n];return t}function nf(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ri(t,e,n){var r,i,a,o={};for(a in e)a=="key"?r=e[a]:a=="ref"?i=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?Ka.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)o[a]===void 0&&(o[a]=t.defaultProps[a]);return Ca(t,o,r,i,null)}function Ca(t,e,n,r,i){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++$p,__i:-1,__u:0};return i==null&&Ve.vnode!=null&&Ve.vnode(a),a}function Jr(){return{current:null}}function St(t){return t.children}function sn(t,e){this.props=t,this.context=e}function Mi(t,e){if(e==null)return t.__?Mi(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Mi(t):null}function Gp(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Gp(t)}}function lu(t){(!t.__d&&(t.__d=!0)&&qr.push(t)&&!As.__r++||Zd!=Ve.debounceRendering)&&((Zd=Ve.debounceRendering)||zp)(As)}function As(){for(var t,e,n,r,i,a,o,s=1;qr.length;)qr.length>s&&qr.sort(Hp),t=qr.shift(),s=qr.length,t.__d&&(n=void 0,i=(r=(e=t).__v).__e,a=[],o=[],e.__P&&((n=Zn({},r)).__v=r.__v+1,Ve.vnode&&Ve.vnode(n),rf(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,a,i??Mi(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,Jp(a,n,o),n.__e!=i&&Gp(n)));As.__r=0}function qp(t,e,n,r,i,a,o,s,l,u,f){var d,p,x,R,O,A,P=r&&r.__k||Xp,S=e.length;for(l=K1(n,e,P,l,S),d=0;d<S;d++)(x=n.__k[d])!=null&&(p=x.__i==-1?La:P[x.__i]||La,x.__i=d,A=rf(t,x,p,i,a,o,s,l,u,f),R=x.__e,x.ref&&p.ref!=x.ref&&(p.ref&&af(p.ref,null,x),f.push(x.ref,x.__c||R,x)),O==null&&R!=null&&(O=R),4&x.__u||p.__k===x.__k?l=jp(x,l,t):typeof x.type=="function"&&A!==void 0?l=A:R&&(l=R.nextSibling),x.__u&=-7);return n.__e=O,l}function K1(t,e,n,r,i){var a,o,s,l,u,f=n.length,d=f,p=0;for(t.__k=new Array(i),a=0;a<i;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=a+p,(o=t.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Ca(null,o,null,null,null):Za(o)?Ca(St,{children:o},null,null,null):o.constructor==null&&o.__b>0?Ca(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,s=null,(u=o.__i=Z1(o,n,l,d))!=-1&&(d--,(s=n[u])&&(s.__u|=2)),s==null||s.__v==null?(u==-1&&(i>f?p--:i<f&&p++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?p--:u==l+1?p++:(u>l?p--:p++,o.__u|=4))):t.__k[a]=null;if(d)for(a=0;a<f;a++)(s=n[a])!=null&&(2&s.__u)==0&&(s.__e==r&&(r=Mi(s)),Zp(s,s));return r}function jp(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=jp(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Mi(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function xr(t,e){return e=e||[],t==null||typeof t=="boolean"||(Za(t)?t.some(function(n){xr(n,e)}):e.push(t)),e}function Z1(t,e,n,r){var i,a,o=t.key,s=t.type,l=e[n];if(l===null&&t.key==null||l&&o==l.key&&s==l.type&&(2&l.__u)==0)return n;if(r>(l!=null&&(2&l.__u)==0?1:0))for(i=n-1,a=n+1;i>=0||a<e.length;){if(i>=0){if((l=e[i])&&(2&l.__u)==0&&o==l.key&&s==l.type)return i;i--}if(a<e.length){if((l=e[a])&&(2&l.__u)==0&&o==l.key&&s==l.type)return a;a++}}return-1}function Qd(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||J1.test(e)?n:n+"px"}function Ro(t,e,n,r,i){var a,o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Qd(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Qd(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(Up,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?r?n.u=r.u:(n.u=tf,t.addEventListener(e,a?su:ou,a)):t.removeEventListener(e,a?su:ou,a);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function eg(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=tf++;else if(e.t<n.u)return;return n(Ve.event?Ve.event(e):e)}}}function rf(t,e,n,r,i,a,o,s,l,u){var f,d,p,x,R,O,A,P,S,D,N,k,W,Y,X,K,ie,ne=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=e.__e=n.__e]),(f=Ve.__b)&&f(e);e:if(typeof ne=="function")try{if(P=e.props,S="prototype"in ne&&ne.prototype.render,D=(f=ne.contextType)&&r[f.__c],N=f?D?D.props.value:f.__:r,n.__c?A=(d=e.__c=n.__c).__=d.__E:(S?e.__c=d=new ne(P,N):(e.__c=d=new sn(P,N),d.constructor=ne,d.render=ex),D&&D.sub(d),d.props=P,d.state||(d.state={}),d.context=N,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),S&&d.__s==null&&(d.__s=d.state),S&&ne.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Zn({},d.__s)),Zn(d.__s,ne.getDerivedStateFromProps(P,d.__s))),x=d.props,R=d.state,d.__v=e,p)S&&ne.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),S&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(S&&ne.getDerivedStateFromProps==null&&P!==x&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(P,N),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(P,d.__s,N)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(d.props=P,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(J){J&&(J.__=e)}),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(P,d.__s,N),S&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(x,R,O)})}if(d.context=N,d.props=P,d.__P=t,d.__e=!1,W=Ve.__r,Y=0,S){for(d.state=d.__s,d.__d=!1,W&&W(e),f=d.render(d.props,d.state,d.context),X=0;X<d._sb.length;X++)d.__h.push(d._sb[X]);d._sb=[]}else do d.__d=!1,W&&W(e),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++Y<25);d.state=d.__s,d.getChildContext!=null&&(r=Zn(Zn({},r),d.getChildContext())),S&&!p&&d.getSnapshotBeforeUpdate!=null&&(O=d.getSnapshotBeforeUpdate(x,R)),K=f,f!=null&&f.type===St&&f.key==null&&(K=Kp(f.props.children)),s=qp(t,Za(K)?K:[K],e,n,r,i,a,o,s,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),A&&(d.__E=d.__=null)}catch(J){if(e.__v=null,l||a!=null)if(J.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,e.__e=s}else for(ie=a.length;ie--;)nf(a[ie]);else e.__e=n.__e,e.__k=n.__k;Ve.__e(J,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=Q1(n.__e,e,n,r,i,a,o,l,u);return(f=Ve.diffed)&&f(e),128&e.__u?void 0:s}function Jp(t,e,n){for(var r=0;r<n.length;r++)af(n[r],n[++r],n[++r]);Ve.__c&&Ve.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(a){a.call(i)})}catch(a){Ve.__e(a,i.__v)}})}function Kp(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Za(t)?t.map(Kp):Zn({},t)}function Q1(t,e,n,r,i,a,o,s,l){var u,f,d,p,x,R,O,A=n.props,P=e.props,S=e.type;if(S=="svg"?i="http://www.w3.org/2000/svg":S=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((x=a[u])&&"setAttribute"in x==!!S&&(S?x.localName==S:x.nodeType==3)){t=x,a[u]=null;break}}if(t==null){if(S==null)return document.createTextNode(P);t=document.createElementNS(i,S,P.is&&P),s&&(Ve.__m&&Ve.__m(e,a),s=!1),a=null}if(S==null)A===P||s&&t.data==P||(t.data=P);else{if(a=a&&Ka.call(t.childNodes),A=n.props||La,!s&&a!=null)for(A={},u=0;u<t.attributes.length;u++)A[(x=t.attributes[u]).name]=x.value;for(u in A)if(x=A[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=x;else if(!(u in P)){if(u=="value"&&"defaultValue"in P||u=="checked"&&"defaultChecked"in P)continue;Ro(t,u,null,x,i)}}for(u in P)x=P[u],u=="children"?p=x:u=="dangerouslySetInnerHTML"?f=x:u=="value"?R=x:u=="checked"?O=x:s&&typeof x!="function"||A[u]===x||Ro(t,u,x,A[u],i);if(f)s||d&&(f.__html==d.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(d&&(t.innerHTML=""),qp(e.type=="template"?t.content:t,Za(p)?p:[p],e,n,r,S=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:n.__k&&Mi(n,0),s,l),a!=null)for(u=a.length;u--;)nf(a[u]);s||(u="value",S=="progress"&&R==null?t.removeAttribute("value"):R!=null&&(R!==t[u]||S=="progress"&&!R||S=="option"&&R!=A[u])&&Ro(t,u,R,A[u],i),u="checked",O!=null&&O!=t[u]&&Ro(t,u,O,A[u],i))}return t}function af(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){Ve.__e(i,n)}}function Zp(t,e,n){var r,i;if(Ve.unmount&&Ve.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||af(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Ve.__e(a,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Zp(r[i],e,n||typeof t.type!="function");n||nf(t.__e),t.__c=t.__=t.__e=void 0}function ex(t,e,n){return this.constructor(t,n)}function Ia(t,e,n){var r,i,a,o;e==document&&(e=document.documentElement),Ve.__&&Ve.__(t,e),i=(r=!1)?null:e.__k,a=[],o=[],rf(e,t=e.__k=Ri(St,null,[t]),i||La,La,e.namespaceURI,i?null:e.firstChild?Ka.call(e.childNodes):null,a,i?i.__e:e.firstChild,r,o),Jp(a,t,o)}function tx(t,e,n){var r,i,a,o,s=Zn({},t.props);for(a in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?i=e[a]:s[a]=e[a]===void 0&&o!=null?o[a]:e[a];return arguments.length>2&&(s.children=arguments.length>3?Ka.call(arguments,2):n),Ca(t.type,s,r||t.key,i||t.ref,null)}function gl(t){function e(n){var r,i;return this.getChildContext||(r=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&r.forEach(function(o){o.__e=!0,lu(o)})},this.sub=function(a){r.add(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),o&&o.call(a)}}),n.children}return e.__c="__cC"+Yp++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,r){return n.children(r)}).contextType=e,e}Ka=Xp.slice,Ve={__e:function(t,e,n,r){for(var i,a,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(s){t=s}throw t}},$p=0,sn.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Zn({},this.state),typeof t=="function"&&(t=t(Zn({},n),this.props)),t&&Zn(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),lu(this))},sn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),lu(this))},sn.prototype.render=St,qr=[],zp=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hp=function(t,e){return t.__v.__b-e.__v.__b},As.__r=0,Up=/(PointerCapture)$|Capture$/i,tf=0,ou=eg(!1),su=eg(!0),Yp=0;var nx=0;function C(t,e,n,r,i,a){e||(e={});var o,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?o=e[s]:l[s]=e[s];var u={type:t,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--nx,__i:-1,__u:0,__source:i,__self:a};if(typeof t=="function"&&(o=t.defaultProps))for(s in o)l[s]===void 0&&(l[s]=o[s]);return Ve.vnode&&Ve.vnode(u),u}const rx="_app_bq9vu_1",ix="_title_bq9vu_1",ax="_panels_bq9vu_1",ox="_category_bq9vu_156",sx="_dropdown_bq9vu_173",lx="_left_bq9vu_184",cx="_right_bq9vu_188",ux="_clicked_bq9vu_209",bt={app:rx,"top-bar":"_top-bar_bq9vu_1","title-button":"_title-button_bq9vu_1",title:ix,panels:ax,category:ox,dropdown:sx,left:lx,right:cx,clicked:ux,"panel-button":"_panel-button_bq9vu_213","layout-container":"_layout-container_bq9vu_1","tiling-layout":"_tiling-layout_bq9vu_1","on-drag":"_on-drag_bq9vu_226","block-pointer-events":"_block-pointer-events_bq9vu_239","speedscope-container":"_speedscope-container_bq9vu_1","welcome-message-code":"_welcome-message-code_bq9vu_247"};var ni,ht,Cc,tg,Ni=0,Qp=[],wt=Ve,ng=wt.__b,rg=wt.__r,ig=wt.diffed,ag=wt.__c,og=wt.unmount,sg=wt.__;function Qa(t,e){wt.__h&&wt.__h(ht,t,Ni||e),Ni=0;var n=ht.__H||(ht.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Pt(t){return Ni=1,fx(ev,t)}function fx(t,e,n){var r=Qa(ni++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):ev(void 0,e),function(s){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,s);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ht,!ht.__f)){var i=function(s,l,u){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!a||a.call(this,s,l,u);var d=r.__c.props!==s;return f.forEach(function(p){if(p.__N){var x=p.__[0];p.__=p.__N,p.__N=void 0,x!==p.__[0]&&(d=!0)}}),a&&a.call(this,s,l,u)||d};ht.__f=!0;var a=ht.shouldComponentUpdate,o=ht.componentWillUpdate;ht.componentWillUpdate=function(s,l,u){if(this.__e){var f=a;a=void 0,i(s,l,u),a=f}o&&o.call(this,s,l,u)},ht.shouldComponentUpdate=i}return r.__N||r.__}function Mt(t,e){var n=Qa(ni++,3);!wt.__s&&of(n.__H,e)&&(n.__=t,n.u=e,ht.__H.__h.push(n))}function Sn(t,e){var n=Qa(ni++,4);!wt.__s&&of(n.__H,e)&&(n.__=t,n.u=e,ht.__h.push(n))}function Te(t){return Ni=5,It(function(){return{current:t}},[])}function hx(t,e,n){Ni=6,Sn(function(){if(typeof t=="function"){var r=t(e());return function(){t(null),r&&typeof r=="function"&&r()}}if(t)return t.current=e(),function(){return t.current=null}},n==null?n:n.concat(t))}function It(t,e){var n=Qa(ni++,7);return of(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Qe(t,e){return Ni=8,It(function(){return t},e)}function Yi(t){var e=ht.context[t.__c],n=Qa(ni++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(ht)),e.props.value):t.__}function dx(){for(var t;t=Qp.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(hs),t.__H.__h.forEach(cu),t.__H.__h=[]}catch(e){t.__H.__h=[],wt.__e(e,t.__v)}}wt.__b=function(t){ht=null,ng&&ng(t)},wt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),sg&&sg(t,e)},wt.__r=function(t){rg&&rg(t),ni=0;var e=(ht=t.__c).__H;e&&(Cc===ht?(e.__h=[],ht.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(hs),e.__h.forEach(cu),e.__h=[],ni=0)),Cc=ht},wt.diffed=function(t){ig&&ig(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Qp.push(e)!==1&&tg===wt.requestAnimationFrame||((tg=wt.requestAnimationFrame)||gx)(dx)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Cc=ht=null},wt.__c=function(t,e){e.some(function(n){try{n.__h.forEach(hs),n.__h=n.__h.filter(function(r){return!r.__||cu(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],wt.__e(r,n.__v)}}),ag&&ag(t,e)},wt.unmount=function(t){og&&og(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{hs(r)}catch(i){e=i}}),n.__H=void 0,e&&wt.__e(e,n.__v))};var lg=typeof requestAnimationFrame=="function";function gx(t){var e,n=function(){clearTimeout(r),lg&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);lg&&(e=requestAnimationFrame(n))}function hs(t){var e=ht,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),ht=e}function cu(t){var e=ht;t.__c=t.__(),ht=e}function of(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function ev(t,e){return typeof e=="function"?e(t):e}function mx(t,e){for(var n in e)t[n]=e[n];return t}function uu(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function cg(t,e){this.props=t,this.context=e}function _t(t,e){function n(i){var a=this.props.ref,o=a==i.ref;return!o&&a&&(a.call?a(null):a.current=null),e?!e(this.props,i)||!o:uu(this.props,i)}function r(i){return this.shouldComponentUpdate=n,Ri(t,i)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(cg.prototype=new sn).isPureReactComponent=!0,cg.prototype.shouldComponentUpdate=function(t,e){return uu(this.props,t)||uu(this.state,e)};var ug=Ve.__b;Ve.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ug&&ug(t)};var fg=function(t,e){return t==null?null:xr(xr(t).map(e))},px={map:fg,forEach:fg,count:function(t){return t?xr(t).length:0},only:function(t){var e=xr(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:xr},vx=Ve.__e;Ve.__e=function(t,e,n,r){if(t.then){for(var i,a=e;a=a.__;)if((i=a.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}vx(t,e,n,r)};var hg=Ve.unmount;function tv(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=mx({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return tv(r,e,n)})),t}function nv(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return nv(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Rc(){this.__u=0,this.o=null,this.__b=null}function rv(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Mo(){this.i=null,this.l=null}Ve.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),hg&&hg(t)},(Rc.prototype=new sn).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var i=rv(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=o;var s=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=nv(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},Rc.prototype.componentWillUnmount=function(){this.o=[]},Rc.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=tv(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&Ri(St,null,t.fallback);return i&&(i.__u&=-33),[Ri(St,null,e.__a?null:t.children),i]};var dg=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function bx(t){return this.getChildContext=function(){return t.context},t.children}function _x(t){var e=this,n=t.h;if(e.componentWillUnmount=function(){Ia(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(i,a){this.childNodes.push(i),e.h.insertBefore(i,a)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}Ia(Ri(bx,{context:e.context},t.__v),e.v)}function Cs(t,e){var n=Ri(_x,{__v:t,h:e});return n.containerInfo=e,n}(Mo.prototype=new sn).__a=function(t){var e=this,n=rv(e.__v),r=e.l.get(t);return r[0]++,function(i){var a=function(){e.props.revealOrder?(r.push(i),dg(e,t,r)):i()};n?n(a):a()}},Mo.prototype.render=function(t){this.i=null,this.l=new Map;var e=xr(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Mo.prototype.componentDidUpdate=Mo.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){dg(t,n,e)})};var iv=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,yx=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,wx=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,xx=/[A-Z0-9]/g,Tx=typeof document<"u",Sx=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Ex(t,e,n){return e.__k==null&&(e.textContent=""),Ia(t,e),typeof n=="function"&&n(),t?t.__c:null}sn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(sn.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var gg=Ve.event;function Ax(){}function Cx(){return this.cancelBubble}function Rx(){return this.defaultPrevented}Ve.event=function(t){return gg&&(t=gg(t)),t.persist=Ax,t.isPropagationStopped=Cx,t.isDefaultPrevented=Rx,t.nativeEvent=t};var Mx={enumerable:!1,configurable:!0,get:function(){return this.class}},mg=Ve.vnode;Ve.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,i={},a=r.indexOf("-")===-1;for(var o in n){var s=n[o];if(!(o==="value"&&"defaultValue"in n&&s==null||Tx&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||Sx(n.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":wx.test(o)&&(o=l):l=o="oninput":a&&yx.test(o)?o=o.replace(xx,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[o=l]&&(o="oninputCapture"),i[o]=s}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=xr(n.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=xr(n.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",Mx)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),e.props=i}(t),t.$$typeof=iv,mg&&mg(t)};var pg=Ve.__r;Ve.__r=function(t){pg&&pg(t),t.__c};var vg=Ve.diffed;Ve.diffed=function(t){vg&&vg(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function Nx(t){return!!t&&t.$$typeof===iv}function Ox(t){return Nx(t)?tx.apply(null,arguments):t}function Dx(t){return!!t.__k&&(Ia(null,t),!0)}var av={version:"18.3.1",Children:px};class Et{constructor(e,n){this.state=e,this.observers=[],this.set=this.set.bind(this),this.get=this.get.bind(this)}set(e){this.state!==e&&(this.state=e,this.observers.forEach(n=>n()))}get(){return this.state}subscribe(e){this.observers.push(e)}unsubscribe(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}}function Ke(t){const[e,n]=Pt(t.get());return Sn(()=>{n(t.get());function r(){n(t.get())}return t.subscribe(r),()=>{t.unsubscribe(r)}},[t]),e}var xt=(t=>(t[t.CHRONO_FLAME_CHART=0]="CHRONO_FLAME_CHART",t[t.LEFT_HEAVY_FLAME_GRAPH=1]="LEFT_HEAVY_FLAME_GRAPH",t[t.SANDWICH_VIEW=2]="SANDWICH_VIEW",t))(xt||{});function Lx(t){switch(t){case"time-ordered":return xt.CHRONO_FLAME_CHART;case"left-heavy":return xt.LEFT_HEAVY_FLAME_GRAPH;case"sandwich":return xt.SANDWICH_VIEW;default:return null}}function Ix(t=window.location.hash){try{if(!t.startsWith("#"))return{};const e=t.substr(1).split("&"),n={};for(const r of e){let[i,a]=r.split("=");if(a=decodeURIComponent(a),i==="profileURL")n.profileURL=a;else if(i==="title")n.title=a;else if(i==="localProfilePath")n.localProfilePath=a;else if(i==="view"){const o=Lx(a);o!==null&&(n.viewMode=o)}}return n}catch{return{}}}function In(t,e,n){return t<e?e:t>n?n:t}const $t=class $t{constructor(e,n){this.x=e,this.y=n}withX(e){return new $t(e,this.y)}withY(e){return new $t(this.x,e)}plus(e){return new $t(this.x+e.x,this.y+e.y)}minus(e){return new $t(this.x-e.x,this.y-e.y)}times(e){return new $t(this.x*e,this.y*e)}timesPointwise(e){return new $t(this.x*e.x,this.y*e.y)}dividedByPointwise(e){return new $t(this.x/e.x,this.y/e.y)}dot(e){return this.x*e.x+this.y*e.y}equals(e){return this.x===e.x&&this.y===e.y}approxEquals(e,n=1e-9){return Math.abs(this.x-e.x)<n&&Math.abs(this.y-e.y)<n}length2(){return this.dot(this)}length(){return Math.sqrt(this.length2())}abs(){return new $t(Math.abs(this.x),Math.abs(this.y))}static min(e,n){return new $t(Math.min(e.x,n.x),Math.min(e.y,n.y))}static max(e,n){return new $t(Math.max(e.x,n.x),Math.max(e.y,n.y))}static clamp(e,n,r){return new $t(In(e.x,n.x,r.x),In(e.y,n.y,r.y))}flatten(){return[this.x,this.y]}};$t.zero=new $t(0,0),$t.unit=new $t(1,1);let Q=$t;class ke{constructor(e=1,n=0,r=0,i=0,a=1,o=0){this.m00=e,this.m01=n,this.m02=r,this.m10=i,this.m11=a,this.m12=o}withScale(e){let{m00:n,m01:r,m02:i,m10:a,m11:o,m12:s}=this;return n=e.x,o=e.y,new ke(n,r,i,a,o,s)}static withScale(e){return new ke().withScale(e)}scaledBy(e){return ke.withScale(e).times(this)}getScale(){return new Q(this.m00,this.m11)}withTranslation(e){let{m00:n,m01:r,m02:i,m10:a,m11:o,m12:s}=this;return i=e.x,s=e.y,new ke(n,r,i,a,o,s)}static withTranslation(e){return new ke().withTranslation(e)}getTranslation(){return new Q(this.m02,this.m12)}translatedBy(e){return ke.withTranslation(e).times(this)}static betweenRects(e,n){return ke.withTranslation(e.origin.times(-1)).scaledBy(new Q(n.size.x/e.size.x,n.size.y/e.size.y)).translatedBy(n.origin)}times(e){const n=this.m00*e.m00+this.m01*e.m10,r=this.m00*e.m01+this.m01*e.m11,i=this.m00*e.m02+this.m01*e.m12+this.m02,a=this.m10*e.m00+this.m11*e.m10,o=this.m10*e.m01+this.m11*e.m11,s=this.m10*e.m02+this.m11*e.m12+this.m12;return new ke(n,r,i,a,o,s)}equals(e){return this.m00==e.m00&&this.m01==e.m01&&this.m02==e.m02&&this.m10==e.m10&&this.m11==e.m11&&this.m12==e.m12}approxEquals(e,n=1e-9){return Math.abs(this.m00-e.m00)<n&&Math.abs(this.m01-e.m01)<n&&Math.abs(this.m02-e.m02)<n&&Math.abs(this.m10-e.m10)<n&&Math.abs(this.m11-e.m11)<n&&Math.abs(this.m12-e.m12)<n}timesScalar(e){const{m00:n,m01:r,m02:i,m10:a,m11:o,m12:s}=this;return new ke(e*n,e*r,e*i,e*a,e*o,e*s)}det(){const{m00:e,m01:n,m02:r,m10:i,m11:a,m12:o}=this,s=0,l=0,u=1;return e*(a*u-o*l)-n*(i*u-o*s)+r*(i*l-a*s)}adj(){const{m00:e,m01:n,m02:r,m10:i,m11:a,m12:o}=this,s=0,l=0,u=1,f=+(a*u-o*l),d=-(n*u-r*l),p=+(n*o-r*a),x=-(i*u-o*s),R=+(e*u-r*s),O=-(e*o-r*i);return new ke(f,d,p,x,R,O)}inverted(){const e=this.det();return e===0?null:this.adj().timesScalar(1/e)}transformVector(e){return new Q(e.x*this.m00+e.y*this.m01,e.x*this.m10+e.y*this.m11)}inverseTransformVector(e){const n=this.inverted();return n?n.transformVector(e):null}transformPosition(e){return new Q(e.x*this.m00+e.y*this.m01+this.m02,e.x*this.m10+e.y*this.m11+this.m12)}inverseTransformPosition(e){const n=this.inverted();return n?n.transformPosition(e):null}transformRect(e){const n=this.transformVector(e.size),r=this.transformPosition(e.origin);return n.x<0&&n.y<0?new Ne(r.plus(n),n.abs()):n.x<0?new Ne(r.withX(r.x+n.x),n.abs()):n.y<0?new Ne(r.withY(r.y+n.y),n.abs()):new Ne(r,n)}inverseTransformRect(e){const n=this.inverted();return n?n.transformRect(e):null}flatten(){return[this.m00,this.m10,0,this.m01,this.m11,0,this.m02,this.m12,1]}}var pn;let Ne=(pn=class{constructor(e,n){this.origin=e,this.size=n}isEmpty(){return this.width()==0||this.height()==0}width(){return this.size.x}height(){return this.size.y}left(){return this.origin.x}right(){return this.left()+this.width()}top(){return this.origin.y}bottom(){return this.top()+this.height()}topLeft(){return this.origin}topRight(){return this.origin.plus(new Q(this.width(),0))}bottomRight(){return this.origin.plus(this.size)}bottomLeft(){return this.origin.plus(new Q(0,this.height()))}withOrigin(e){return new pn(e,this.size)}withSize(e){return new pn(this.origin,e)}closestPointTo(e){return new Q(In(e.x,this.left(),this.right()),In(e.y,this.top(),this.bottom()))}distanceFrom(e){return e.minus(this.closestPointTo(e)).length()}contains(e){return this.distanceFrom(e)===0}hasIntersectionWith(e){const n=Math.max(this.top(),e.top());if(Math.max(n,Math.min(this.bottom(),e.bottom()))-n===0)return!1;const i=Math.max(this.left(),e.left());return Math.max(i,Math.min(this.right(),e.right()))-i!==0}intersectWith(e){const n=Q.max(this.topLeft(),e.topLeft()),r=Q.max(n,Q.min(this.bottomRight(),e.bottomRight()));return new pn(n,r.minus(n))}equals(e){return this.origin.equals(e.origin)&&this.size.equals(e.size)}approxEquals(e){return this.origin.approxEquals(e.origin)&&this.size.approxEquals(e.size)}area(){return this.size.x*this.size.y}},pn.empty=new pn(Q.zero,Q.zero),pn.unit=new pn(Q.zero,Q.unit),pn.NDC=new pn(new Q(-1,-1),new Q(2,2)),pn);function Ir(t){return t[t.length-1]||null}function ds(t,e){function n(r,i){const a=e(r),o=e(i);return a<o?-1:a>o?1:0}t.sort(n)}function X4(t,e,n){return t.has(e)||t.set(e,n(e)),t.get(e)}function G4(t,e,n){return t.has(e)?t.get(e):n(e)}function q4(t,e){if(!t.has(e))throw new Error(`Expected key ${e}`);return t.get(e)}class ov{constructor(){this.map=new Map}getOrInsert(e){const n=e.key,r=this.map.get(n);return r||(this.map.set(n,e),e)}forEach(e){this.map.forEach(e)}[Symbol.iterator](){return this.map.values()}}function*j4(t,e){for(let n of t)yield e(n)}function J4(t,e){for(let n of t)e(n)}function Px(t,e){return new Array(Math.max(e-t.length,0)+1).join("0")+t}function Oi(t){let e=`${t.toFixed(0)}%`;return t===100?e="100%":t>99?e=">99%":t<.01?e="<0.01%":t<1?e=`${t.toFixed(2)}%`:t<10&&(e=`${t.toFixed(1)}%`),e}function kx(t){return t-Math.floor(t)}function sv(t){return 2*Math.abs(kx(t)-.5)-1}function Bx(t,e,n,r,i=1){for(;;){if(e-t<=i)return[t,e];const a=(e+t)/2;n(a)<r?t=a:e=a}}function Fx(t,e){if(t.length===0)return-1;let n=0,r=t.length-1;for(;r!==n;){const i=Math.floor((n+r)/2);e(t[i])?r=i:n=i+1}return e(t[r])?r:-1}function sf(...t){}function lf(t,e){for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(t[n]!==e[n])return!1;return!0}function ar(t){let e=null;return n=>{let r;return e==null?(r=t(n),e={args:n,result:r},r):(lf(e.args,n)||(e.args=n,e.result=t(n)),e.result)}}function ml(t){let e=null;return n=>{let r;return e==null?(r=t(n),e={args:n,result:r},r):(e.args===n||(e.args=n,e.result=t(n)),e.result)}}function Vx(t){let e=null;return()=>(e==null&&(e={result:t()}),e.result)}const Wx=Vx(()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Map;for(let n=0;n<t.length;n++)e.set(t.charAt(n),n);return e.set("=",-1),e});function K4(t){const e=Wx();if(t.length%4!==0)throw new Error(`Invalid length for base64 encoded string. Expected length % 4 = 0, got length = ${t.length}`);const n=t.length/4;let r;t.length>=4&&t.charAt(t.length-1)==="="?t.charAt(t.length-2)==="="?r=n*3-2:r=n*3-1:r=n*3;const i=new Uint8Array(r);let a=0;for(let o=0;o<n;o++){const s=t.charAt(o*4+0),l=t.charAt(o*4+1),u=t.charAt(o*4+2),f=t.charAt(o*4+3),d=e.get(s),p=e.get(l),x=e.get(u),R=e.get(f);if(d==null||p==null||x==null||R==null)throw new Error(`Invalid quartet at indices ${o*4} .. ${o*4+3}: ${t.substring(o*4,o*4+3)}`);i[a++]=d<<2|p>>4,u!=="="&&(i[a++]=(p&15)<<4|x>>2),f!=="="&&(i[a++]=(x&7)<<6|R)}if(a!==r)throw new Error(`Expected to decode ${r} bytes, but only decoded ${a})`);return i}const lv=(t,e)=>{const n=t.x*1e3,r=Math.round(e.transformPosition(new Q(n,0)).x);return{configSpacePos:n,physicalSpacePos:r}};var eo=(t=>(t.LEFT_HEAVY="LEFT_HEAVY",t.CHRONO="CHRONO",t.SANDWICH_INVERTED_CALLERS="SANDWICH_INVERTED_CALLERS",t.SANDWICH_CALLEES="SANDWICH_CALLEES",t))(eo||{});let No={hover:null,selectedNode:null,configSpaceViewportRect:Ne.empty,logicalSpaceViewportSize:Q.zero};class $x extends Et{constructor(){super(...arguments),this.setProfileGroup=e=>{this.set({name:e.name,indexToView:e.indexToView,profiles:e.profiles.map(n=>({profile:n,chronoViewState:No,leftHeavyViewState:No,sandwichViewState:{callerCallee:null}}))})},this.setProfileIndexToView=e=>{this.state!=null&&(e=In(e,0,this.state.profiles.length-1),this.set({...this.state,indexToView:e}))},this.setSelectedFrame=e=>{this.state==null||this.getActiveProfile()==null||this.updateActiveSandwichViewState(r=>e==null?{callerCallee:null}:{callerCallee:{invertedCallerFlamegraph:No,calleeFlamegraph:No,selectedFrame:e}})}}set(e){const n=this.state;n!=null&&e!=null&&lf(n,e)||super.set(e)}getActiveProfile(){var e;return this.state==null?null:this.state.profiles[(e=this.state)==null?void 0:e.indexToView]||null}updateActiveProfileState(e){if(this.state==null)return;const{indexToView:n,profiles:r}=this.state;this.set({...this.state,profiles:r.map((i,a)=>a!=n?i:e(i))})}updateActiveSandwichViewState(e){this.updateActiveProfileState(n=>({...n,sandwichViewState:e(n.sandwichViewState)}))}updateFlamechartState(e,n){switch(e){case"CHRONO":{this.updateActiveProfileState(r=>({...r,chronoViewState:n(r.chronoViewState)}));break}case"LEFT_HEAVY":{this.updateActiveProfileState(r=>({...r,leftHeavyViewState:n(r.leftHeavyViewState)}));break}case"SANDWICH_CALLEES":{this.updateActiveSandwichViewState(r=>({...r,callerCallee:r.callerCallee==null?null:{...r.callerCallee,calleeFlamegraph:n(r.callerCallee.calleeFlamegraph)}}));break}case"SANDWICH_INVERTED_CALLERS":{this.updateActiveSandwichViewState(r=>({...r,callerCallee:r.callerCallee==null?null:{...r.callerCallee,invertedCallerFlamegraph:n(r.callerCallee.invertedCallerFlamegraph)}}));break}}}setFlamechartHoveredNode(e,n){this.updateFlamechartState(e,r=>({...r,hover:n}))}setSelectedNode(e,n){this.updateFlamechartState(e,r=>({...r,selectedNode:n}))}setConfigSpaceViewportRect(e,n){this.updateFlamechartState(e,r=>({...r,configSpaceViewportRect:n}))}setLogicalSpaceViewportSize(e,n){this.updateFlamechartState(e,r=>({...r,logicalSpaceViewportSize:n}))}clearHoverNode(){this.setFlamechartHoveredNode("CHRONO",null),this.setFlamechartHoveredNode("LEFT_HEAVY",null),this.setFlamechartHoveredNode("SANDWICH_CALLEES",null),this.setFlamechartHoveredNode("SANDWICH_INVERTED_CALLERS",null)}}const Pa=new Et(!1,"flattenRecursion"),Rs=new Et(!1,"searchIsActive"),Ms=new Et("","searchQueryAtom"),Qr=new Et(xt.CHRONO_FLAME_CHART,"viewMode"),an=new $x(null,"profileGroup");Qr.subscribe(()=>{an.clearHoverNode()});const cv=Ix(),zx=new Et(cv,"hashParams"),Ns=new Et(null,"glCanvas"),bg=new Et(!1,"dragActive"),_g=window.location.protocol,fu=_g==="http:"||_g==="https:",Hx=fu&&cv.profileURL!=null,yg=new Et(Hx,"loading"),wg=new Et(!1,"error"),bn=new Et(null,"metadata"),hu=new Et({},"welcomeMessage"),Ra=new Et(!1,"metadataOnlyProfile"),cf=new Et({},"toolbarConfig"),Os=new Et(null,"appRef"),Jn=new Et(null,"timestampHovered");var wn=(t=>(t[t.SYMBOL_NAME=0]="SYMBOL_NAME",t[t.SELF=1]="SELF",t[t.TOTAL=2]="TOTAL",t))(wn||{}),jn=(t=>(t[t.ASCENDING=0]="ASCENDING",t[t.DESCENDING=1]="DESCENDING",t))(jn||{});const du=new Et({field:1,direction:1},"tableSortMethod");function uv({color:t="#9E9EA4",up:e}){return C("svg",{style:e?{transformBox:"fill-box",transforOrigin:"center",transform:"rotate(180deg)"}:{},width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M4.00006 6L8.00006 10L12.0001 6",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})})}let gu;function Ux(){return gu}const Yx=_t(({component:t,tilingRef:e})=>{const n=Ke(t.available),r=Ke(t.instances),i=o=>{e!=null&&e.current&&e.current.addNode(t)},a=r>=t.maxInstances;return C("button",{className:bt["panel-button"],style:n?{}:{display:"none"},disabled:a,onClick:i,children:C("div",{onDragStart:()=>gu=t.title,onDragEnd:()=>gu=void 0,draggable:!a,children:t.title})})});function Oo(t,e,n){return(e=function(r){var i=function(a,o){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var l=s.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}(r,"string");return typeof i=="symbol"?i:i+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}var Xx=["children","onClickAway","focusEvent","mouseEvent","touchEvent"],Mc={click:"onClick",focusin:"onFocus",focusout:"onBlur",mousedown:"onMouseDown",mouseup:"onMouseUp",touchstart:"onTouchStart",touchend:"onTouchEnd"},Gx=parseInt(av.version.split(".")[0],10),fv=function(t){var e=t.children,n=t.onClickAway,r=t.focusEvent,i=r===void 0?"focusin":r,a=t.mouseEvent,o=a===void 0?"click":a,s=t.touchEvent,l=s===void 0?"touchend":s,u=function(k,W){if(k==null)return{};var Y,X,K=function(ne,J){if(ne==null)return{};var Z={};for(var $ in ne)if({}.hasOwnProperty.call(ne,$)){if(J.includes($))continue;Z[$]=ne[$]}return Z}(k,W);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(k);for(X=0;X<ie.length;X++)Y=ie[X],W.includes(Y)||{}.propertyIsEnumerable.call(k,Y)&&(K[Y]=k[Y])}return K}(t,Xx),f=Te(null),d=Te(null),p=Te(!1);Mt(function(){return setTimeout(function(){p.current=!0},0),function(){p.current=!1}},[]);var x,R=function(k){return function(W){d.current=W.target;var Y=e==null?void 0:e.props[k];Y&&Y(W)}},O=null;Gx>=19?O=((x=e.props)===null||x===void 0?void 0:x.ref)||null:"ref"in e&&(O=e.ref);var A,P=(A=[f,O],function(k){A.forEach(function(W){typeof W=="function"?W(k):W!=null&&(W.current=k)})});Mt(function(){var k,W,Y=(k=(W=f.current)===null||W===void 0?void 0:W.ownerDocument)!==null&&k!==void 0?k:document,X=function(K){p.current&&(f.current&&f.current.contains(K.target)||d.current===K.target||!Y.contains(K.target)||n(K))};return Y.addEventListener(o,X),Y.addEventListener(l,X),Y.addEventListener(i,X),function(){Y.removeEventListener(o,X),Y.removeEventListener(l,X),Y.removeEventListener(i,X)}},[i,o,n,l]);var S=Mc[o],D=Mc[l],N=Mc[i];return av.Children.only(Ox(e,function(k){for(var W=1;W<arguments.length;W++){var Y=arguments[W]!=null?arguments[W]:{};W%2?xg(Object(Y),!0).forEach(function(X){Oo(k,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(Y)):xg(Object(Y)).forEach(function(X){Object.defineProperty(k,X,Object.getOwnPropertyDescriptor(Y,X))})}return k}(Oo(Oo(Oo({ref:P},N,R(N)),S,R(S)),D,R(D)),u)))};fv.displayName="ClickAwayListener";const Tg=_t(({name:t,left:e,right:n,children:r,onClickAwayCallback:i})=>{const a=Te(null),o=Te(null),s=()=>{var u;(u=a.current)==null||u.classList.remove(bt.clicked),i&&i()};Mt(()=>{var u;for(const f of((u=o.current)==null?void 0:u.childNodes)??[])f instanceof HTMLButtonElement&&f.addEventListener("click",s)});const l=[bt.dropdown];return e&&l.push(bt.left),n&&l.push(bt.right),C(fv,{onClickAway:s,children:C("div",{ref:a,className:bt.category,children:[C("button",{onClick:()=>{var u;return(u=a.current)==null?void 0:u.classList.add(bt.clicked)},children:t}),C("div",{ref:o,className:l.join(" "),children:r})]})})}),qx="_icon_p6maq_7",jx={icon:qx};function pl({children:t}){return C("div",{className:jx.icon,children:t})}function Jx({size:t="14",color:e="#9F9FA3"}){return C(pl,{children:C("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M6.99999 1.75V8.75M6.99999 8.75L4.66666 6.41667M6.99999 8.75L9.33332 6.41667M4.66666 2.91667H2.33332C2.0239 2.91667 1.72716 3.03958 1.50837 3.25838C1.28957 3.47717 1.16666 3.77391 1.16666 4.08333V9.91667C1.16666 10.2261 1.28957 10.5228 1.50837 10.7416C1.72716 10.9604 2.0239 11.0833 2.33332 11.0833H11.6667C11.9761 11.0833 12.2728 10.9604 12.4916 10.7416C12.7104 10.5228 12.8333 10.2261 12.8333 9.91667V4.08333C12.8333 3.77391 12.7104 3.47717 12.4916 3.25838C12.2728 3.03958 11.9761 2.91667 11.6667 2.91667H9.33332",stroke:e,"stroke-width":"0.875","stroke-linecap":"round","stroke-linejoin":"round"})})})}function Kx({size:t="14",color:e="#9F9FA3"}){return C(pl,{children:C("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M2.33333 6.99999L2.33333 11.6667C2.33333 11.9761 2.45624 12.2728 2.67504 12.4916C2.89383 12.7104 3.19058 12.8333 3.49999 12.8333L10.5 12.8333C10.8094 12.8333 11.1062 12.7104 11.325 12.4916C11.5437 12.2728 11.6667 11.9761 11.6667 11.6667V6.99999M9.33333 3.49999L6.99999 1.16666M6.99999 1.16666L4.66666 3.49999M6.99999 1.16666L6.99999 8.74999",stroke:e,"stroke-linecap":"round","stroke-linejoin":"round"})})})}class Zx{constructor(e,n,r,i,a=1,o,s){this.title=e,this.component=n,this.available=r,this.instances=i,this.maxInstances=a,this.additionalProps=o,this.dataProvider=s,this.data=void 0}incrInstances(){this.instances.set(this.instances.get()+1)}decrInstances(){this.instances.set(this.instances.get()-1)}calculateData(){this.dataProvider&&(this.data=this.dataProvider()??void 0,this.available.set(!!this.data))}createJSONNode(){return{type:"tab",name:this.title,component:this.title,config:this.data,...this.additionalProps}}}const Ds={},vl="enable-overflow",Xi=(t,e,n={})=>{var a,o,s,l;if(e in Ds)return;n.additionalProps??(n.additionalProps={}),(a=n.additionalProps).minWidth??(a.minWidth=100),(o=n.additionalProps).minHeight??(o.minHeight=100),(s=n.additionalProps).enableClose??(s.enableClose=!0),(l=n.additionalProps).enableRename??(l.enableRename=!1);const r=n.dataProvider===void 0,i=new Zx(e,t,new Et(r,`${e}_available`),new Et(0,`${e}_instances`),n.maxInstances??1,n.additionalProps,n.dataProvider);return bn.subscribe(()=>{i.calculateData()}),Ds[e]=i,i};function Do(t){return Ds[t]}function mu(){return Object.values(Ds)}function Qx({color:t="#9E9EA4"}){return C(pl,{children:C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C("g",{"clip-path":"url(#clip0_32_7)",children:C("path",{d:"M5.33337 8.00001L10.6667 8.00001M8.00004 5.33334L8.00004 10.6667M14.6667 8.00001C14.6667 11.6819 11.6819 14.6667 8.00004 14.6667C4.31814 14.6667 1.33337 11.6819 1.33337 8.00001C1.33337 4.31811 4.31814 1.33334 8.00004 1.33334C11.6819 1.33334 14.6667 4.31811 14.6667 8.00001Z",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})}),C("defs",{children:C("clipPath",{id:"clip0_32_7",children:C("rect",{width:"16",height:"16",fill:"white"})})})]})})}const eT=_t(({tilingRef:t})=>{var l,u;const e=Ke(Os),[n,r]=Pt(!1);an.subscribe(()=>{var f;r((((f=an.get())==null?void 0:f.profiles.length)??0)>0)});const[i,a]=Pt(!1),o=C("div",{id:bt["title-button"],onClick:()=>a(!0),children:[C("div",{id:bt.title,children:["Zeppelin ",C("span",{children:"Trace Viewer"})]}),C("div",{children:C(uv,{up:i})})]}),s=C("div",{id:bt.panels,children:[C(Qx,{})," ",C("h2",{children:"Panels"})]});return C("div",{id:bt["top-bar"],children:[C("div",{children:C(Tg,{name:o,left:!0,onClickAwayCallback:()=>a(!1),children:[C("button",{onClick:(l=e==null?void 0:e.current)==null?void 0:l.browseForFile,children:[C(Jx,{}),C("p",{children:"Import trace"})]}),n?C("button",{onClick:(u=e==null?void 0:e.current)==null?void 0:u.saveFile,children:[C(Kx,{}),C("p",{children:"Export trace"})]}):null]})}),C("div",{children:e!=null&&e.current&&n?C(Tg,{name:s,right:!0,children:mu().map(f=>C(Yx,{component:f,tilingRef:t}))}):null})]})});var Ti=(t=>(t[t.SYSTEM=0]="SYSTEM",t[t.DARK=1]="DARK",t[t.LIGHT=2]="LIGHT",t))(Ti||{});const gs="speedscope-color-scheme";function tT(){const t=window.localStorage&&window.localStorage[gs];return t==="DARK"?1:t==="LIGHT"?2:0}function nT(){return matchMedia("(prefers-color-scheme: dark)")}function rT(t){if(nT().matches)switch(t){case 0:return 2;case 2:return 1;case 1:return 0}else switch(t){case 0:return 1;case 1:return 2;case 2:return 0}}class iT extends Et{constructor(){super(...arguments),this.cycleToNextColorScheme=()=>{this.set(rT(this.get()))}}}const ka=new iT(tT(),"colorScheme");ka.subscribe(()=>{const t=ka.get();switch(t){case 1:{window.localStorage[gs]="DARK";break}case 2:{window.localStorage[gs]="LIGHT";break}case 0:{delete window.localStorage[gs];break}default:return t}return t});let or=class ms{constructor(e=0,n=0,r=0,i=1){this.r=e,this.g=n,this.b=r,this.a=i}static fromLumaChromaHue(e,n,r){const i=r/60,a=n*(1-Math.abs(i%2-1)),[o,s,l]=i<1?[n,a,0]:i<2?[a,n,0]:i<3?[0,n,a]:i<4?[0,a,n]:i<5?[a,0,n]:[n,0,a],u=e-(.3*o+.59*s+.11*l);return new ms(In(o+u,0,1),In(s+u,0,1),In(l+u,0,1),1)}static fromCSSHex(e){if(e.length!==7||e[0]!=="#")throw new Error(`Invalid color input ${e}`);const n=parseInt(e.substr(1,2),16)/255,r=parseInt(e.substr(3,2),16)/255,i=parseInt(e.substr(5,2),16)/255;if(n<0||n>1||r<0||r>1||i<0||i>1)throw new Error(`Invalid color input ${e}`);return new ms(n,r,i)}withAlpha(e){return new ms(this.r,this.g,this.b,e)}toCSS(){return`rgba(${(255*this.r).toFixed()}, ${(255*this.g).toFixed()}, ${(255*this.b).toFixed()}, ${this.a.toFixed(2)})`}};const hv=.2,dv=.1,gv=.2,mv=.1,aT=t=>{const e=sv(30*t),n=360*(.9*t),r=hv+dv*e,i=gv-mv*e;return or.fromLumaChromaHue(i,r,n)},oT=`
  vec3 colorForBucket(float t) {
    float x = triangle(30.0 * t);
    float H = 360.0 * (0.9 * t);
    float C = ${hv.toFixed(1)} + ${dv.toFixed(1)} * x;
    float L = ${gv.toFixed(1)} - ${mv.toFixed(1)} * x;
    return hcl2rgb(H, C, L);
  }
`,Ls={fgPrimaryColor:"#D0D0D0",fgSecondaryColor:"#666666",bgPrimaryColor:"#060606",bgSecondaryColor:"#0C0C0C",altFgPrimaryColor:"#D0D0D0",altFgSecondaryColor:"#666666",altBgPrimaryColor:"#000000",altBgSecondaryColor:"#0C0C0C",selectionPrimaryColor:"#00769B",selectionSecondaryColor:"#004E75",weightColor:"#0F8A42",searchMatchTextColor:"#0C0C0C",searchMatchPrimaryColor:"#A66F1C",searchMatchSecondaryColor:"#D6AE24",colorForBucket:aT,colorForBucketGLSL:oT},pv=.25,vv=.2,bv=.8,_v=.15,sT=t=>{const e=sv(30*t),n=360*(.9*t),r=pv+vv*e,i=bv-_v*e;return or.fromLumaChromaHue(i,r,n)},lT=`
  vec3 colorForBucket(float t) {
    float x = triangle(30.0 * t);
    float H = 360.0 * (0.9 * t);
    float C = ${pv.toFixed(1)} + ${vv.toFixed(1)} * x;
    float L = ${bv.toFixed(1)} - ${_v.toFixed(1)} * x;
    return hcl2rgb(H, C, L);
  }
`,Ba={fgPrimaryColor:"#000000",fgSecondaryColor:"#BDBDBD",bgPrimaryColor:"#FFFFFF",bgSecondaryColor:"#F6F6F6",altFgPrimaryColor:"#FFFFFF",altFgSecondaryColor:"#BDBDBD",altBgPrimaryColor:"#000000",altBgSecondaryColor:"#222222",selectionPrimaryColor:"#2F80ED",selectionSecondaryColor:"#8EB7ED",weightColor:"#6FCF97",searchMatchTextColor:"#000000",searchMatchPrimaryColor:"#FFAC02",searchMatchSecondaryColor:"#FEDC62",colorForBucket:sT,colorForBucketGLSL:lT},yv=gl(Ba);function dt(){return Yi(yv)}function sr(t){return ml(t)}function Sg(){return matchMedia("(prefers-color-scheme: dark)")}function cT(t,e){switch(t){case Ti.SYSTEM:return e?Ls:Ba;case Ti.DARK:return Ls;case Ti.LIGHT:return Ba}}function uT(t){const[e,n]=Pt(()=>Sg().matches),r=Qe(s=>{n(s.matches)},[n]);Mt(()=>{const s=Sg();return s.addEventListener("change",r),()=>{s.removeEventListener("change",r)}},[r]);const i=Ke(ka);let a=cT(i,e);return Ke(Ra)&&(a=Object.assign({},a),a.colorForBucket=()=>new or(0,0,0,0),a.colorForBucketGLSL="vec3 colorForBucket(float t) {return vec3(0, 0, 0);}"),C(yv.Provider,{value:a,children:t.children})}function fT(t){return{render:function(e){Ex(e,t)},unmount:function(){Dx(t)}}}var hT=Object.defineProperty,dT=(t,e,n)=>e in t?hT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e,n)=>dT(t,typeof e!="symbol"?e+"":e,n);const Fa=class ps{constructor(e){q(this,"_name"),this._name=e}static flip(e){return e===ps.HORZ?ps.VERT:ps.HORZ}getName(){return this._name}toString(){return this._name}};q(Fa,"HORZ",new Fa("horz"));q(Fa,"VERT",new Fa("vert"));let Fe=Fa;class Re{constructor(e,n,r,i){q(this,"x"),q(this,"y"),q(this,"width"),q(this,"height"),this.x=e,this.y=n,this.width=r,this.height=i}static empty(){return new Re(0,0,0,0)}static fromJson(e){return new Re(e.x,e.y,e.width,e.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(e){this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this.width=Math.round(this.width/e)*e,this.height=Math.round(this.height/e)*e}static getBoundingClientRect(e){const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();return new Re(n,r,i,a)}static getContentRect(e){const n=e.getBoundingClientRect(),r=window.getComputedStyle(e),i=parseFloat(r.paddingLeft),a=parseFloat(r.paddingRight),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),l=parseFloat(r.borderLeftWidth),u=parseFloat(r.borderRightWidth),f=parseFloat(r.borderTopWidth),d=parseFloat(r.borderBottomWidth),p=n.width-l-i-a-u,x=n.height-f-o-s-d;return new Re(n.left+l+i,n.top+f+o,p,x)}static fromDomRect(e){return new Re(e.x,e.y,e.width,e.height)}relativeTo(e){return new Re(this.x-e.x,this.y-e.y,this.width,this.height)}clone(){return new Re(this.x,this.y,this.width,this.height)}equals(e){return this.x===(e==null?void 0:e.x)&&this.y===(e==null?void 0:e.y)&&this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}equalSize(e){return this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,n){this.styleWithPosition(e.style,n)}styleWithPosition(e,n="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=n,e}contains(e,n){return this.x<=e&&e<=this.getRight()&&this.y<=n&&n<=this.getBottom()}removeInsets(e){return new Re(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let n=this.width;return e===Fe.VERT&&(n=this.height),n}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}const Pn=class vt{constructor(e,n,r){q(this,"name"),q(this,"orientation"),q(this,"indexPlus"),this.name=e,this.orientation=n,this.indexPlus=r,vt.values.set(this.name,this)}static getByName(e){return vt.values.get(e)}static getLocation(e,n,r){if(n=(n-e.x)/e.width,r=(r-e.y)/e.height,n>=.25&&n<.75&&r>=.25&&r<.75)return vt.CENTER;const i=r>=n,a=r>=1-n;return i?a?vt.BOTTOM:vt.LEFT:a?vt.RIGHT:vt.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(e){return this===vt.TOP?new Re(e.x,e.y,e.width,e.height/2):this===vt.BOTTOM?new Re(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===vt.LEFT?new Re(e.x,e.y,e.width/2,e.height):this===vt.RIGHT?new Re(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,n){if(this===vt.TOP){const r=new Re(e.x,e.y,e.width,n),i=new Re(e.x,e.y+n,e.width,e.height-n);return{start:r,end:i}}else if(this===vt.LEFT){const r=new Re(e.x,e.y,n,e.height),i=new Re(e.x+n,e.y,e.width-n,e.height);return{start:r,end:i}}if(this===vt.RIGHT){const r=new Re(e.getRight()-n,e.y,n,e.height),i=new Re(e.x,e.y,e.width-n,e.height);return{start:r,end:i}}else{const r=new Re(e.x,e.getBottom()-n,e.width,n),i=new Re(e.x,e.y,e.width,e.height-n);return{start:r,end:i}}}reflect(){return this===vt.TOP?vt.BOTTOM:this===vt.LEFT?vt.RIGHT:this===vt.RIGHT?vt.LEFT:vt.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};q(Pn,"values",new Map);q(Pn,"TOP",new Pn("top",Fe.VERT,0));q(Pn,"BOTTOM",new Pn("bottom",Fe.VERT,1));q(Pn,"LEFT",new Pn("left",Fe.HORZ,0));q(Pn,"RIGHT",new Pn("right",Fe.HORZ,1));q(Pn,"CENTER",new Pn("center",Fe.VERT,0));let be=Pn;var en=(t=>(t.Close_Tab="Close",t.Close_Tabset="Close tab set",t.Active_Tabset="Active tab set",t.Move_Tabset="Move tab set",t.Move_Tabs="Move tabs(?)",t.Maximize="Maximize tab set",t.Restore="Restore tab set",t.Popout_Tab="Popout selected tab",t.Overflow_Menu_Tooltip="Hidden tabs",t.Error_rendering_component="Error rendering component",t.Error_rendering_component_retry="Retry",t))(en||{}),ee=(t=>(t.FLEXLAYOUT__BORDER="flexlayout__border",t.FLEXLAYOUT__BORDER_="flexlayout__border_",t.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",t.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",t.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",t.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",t.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",t.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",t.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",t.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",t.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",t.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",t.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",t.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",t.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",t.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",t.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",t.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",t.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",t.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",t.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",t.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",t.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",t.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",t.FLEXLAYOUT__LAYOUT="flexlayout__layout",t.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",t.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",t.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",t.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",t.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",t.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",t.FLEXLAYOUT__SPLITTER="flexlayout__splitter",t.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",t.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",t.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",t.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",t.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",t.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",t.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",t.FLEXLAYOUT__ROW="flexlayout__row",t.FLEXLAYOUT__TAB="flexlayout__tab",t.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",t.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",t.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",t.FLEXLAYOUT__TABSET="flexlayout__tabset",t.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",t.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",t.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",t.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",t.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",t.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",t.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",t.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",t.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",t.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",t.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",t.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",t.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",t.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",t.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",t.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",t.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",t.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",t.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",t.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",t.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",t.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",t.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",t.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",t.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",t.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",t.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",t.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",t.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",t.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",t))(ee||{});class qt{constructor(e,n){q(this,"type"),q(this,"data"),this.type=e,this.data=n}}const Yt=class Wt{static addNode(e,n,r,i,a){return new qt(Wt.ADD_NODE,{json:e,toNode:n,location:r.getName(),index:i,select:a})}static moveNode(e,n,r,i,a){return new qt(Wt.MOVE_NODE,{fromNode:e,toNode:n,location:r.getName(),index:i,select:a})}static deleteTab(e){return new qt(Wt.DELETE_TAB,{node:e})}static deleteTabset(e){return new qt(Wt.DELETE_TABSET,{node:e})}static renameTab(e,n){return new qt(Wt.RENAME_TAB,{node:e,text:n})}static selectTab(e){return new qt(Wt.SELECT_TAB,{tabNode:e})}static setActiveTabset(e,n){return new qt(Wt.SET_ACTIVE_TABSET,{tabsetNode:e,windowId:n})}static adjustWeights(e,n){return new qt(Wt.ADJUST_WEIGHTS,{nodeId:e,weights:n})}static adjustBorderSplit(e,n){return new qt(Wt.ADJUST_BORDER_SPLIT,{node:e,pos:n})}static maximizeToggle(e,n){return new qt(Wt.MAXIMIZE_TOGGLE,{node:e,windowId:n})}static updateModelAttributes(e){return new qt(Wt.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,n){return new qt(Wt.UPDATE_NODE_ATTRIBUTES,{node:e,json:n})}static popoutTab(e){return new qt(Wt.POPOUT_TAB,{node:e})}static popoutTabset(e){return new qt(Wt.POPOUT_TABSET,{node:e})}static closeWindow(e){return new qt(Wt.CLOSE_WINDOW,{windowId:e})}static createWindow(e,n){return new qt(Wt.CREATE_WINDOW,{layout:e,rect:n})}};q(Yt,"ADD_NODE","FlexLayout_AddNode");q(Yt,"MOVE_NODE","FlexLayout_MoveNode");q(Yt,"DELETE_TAB","FlexLayout_DeleteTab");q(Yt,"DELETE_TABSET","FlexLayout_DeleteTabset");q(Yt,"RENAME_TAB","FlexLayout_RenameTab");q(Yt,"SELECT_TAB","FlexLayout_SelectTab");q(Yt,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset");q(Yt,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights");q(Yt,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit");q(Yt,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle");q(Yt,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes");q(Yt,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes");q(Yt,"POPOUT_TAB","FlexLayout_PopoutTab");q(Yt,"POPOUT_TABSET","FlexLayout_PopoutTabset");q(Yt,"CLOSE_WINDOW","FlexLayout_CloseWindow");q(Yt,"CREATE_WINDOW","FlexLayout_CreateWindow");let Pe=Yt;class le{constructor(e,n,r,i){q(this,"name"),q(this,"alias"),q(this,"modelName"),q(this,"pairedAttr"),q(this,"pairedType"),q(this,"defaultValue"),q(this,"alwaysWriteJson"),q(this,"type"),q(this,"required"),q(this,"fixed"),q(this,"description"),this.name=e,this.alias=void 0,this.modelName=n,this.defaultValue=r,this.alwaysWriteJson=i,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setAlias(e){return this.alias=e,this}setDescription(e){this.description=e}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(e){this.pairedAttr=e}setPairedType(e){this.pairedType=e}}q(le,"NUMBER","number");q(le,"STRING","string");q(le,"BOOLEAN","boolean");class to{constructor(){q(this,"attributes"),q(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(e,n,r,i){const a=new le(e,n,r,i);return this.attributes.push(a),this.nameToAttribute.set(e,a),a}addInherited(e,n){return this.addWithAll(e,n,void 0,!1)}add(e,n,r){return this.addWithAll(e,void 0,n,r)}getAttributes(){return this.attributes}getModelName(e){const n=this.nameToAttribute.get(e);if(n!==void 0)return n.modelName}toJson(e,n){for(const r of this.attributes){const i=n[r.name];(r.alwaysWriteJson||i!==r.defaultValue)&&(e[r.name]=i)}}fromJson(e,n){for(const r of this.attributes){let i=e[r.name];i===void 0&&r.alias&&(i=e[r.alias]),i===void 0?n[r.name]=r.defaultValue:n[r.name]=i}}update(e,n){for(const r of this.attributes)if(Object.prototype.hasOwnProperty.call(e,r.name)){const i=e[r.name];i===void 0?delete n[r.name]:n[r.name]=i}}setDefaults(e){for(const n of this.attributes)e[n.name]=n.defaultValue}pairAttributes(e,n){for(const r of n.attributes)if(r.modelName&&this.nameToAttribute.has(r.modelName)){const i=this.nameToAttribute.get(r.modelName);i.setpairedAttr(r),r.setpairedAttr(i),i.setPairedType(e)}}toTypescriptInterface(e,n){var r,i;const a=[],o=this.attributes.sort((s,l)=>s.name.localeCompare(l.name));a.push("export interface I"+e+"Attributes {");for(let s=0;s<o.length;s++){const l=o[s];let u=l.type,f,d=l,p;d.defaultValue!==void 0?f=d.defaultValue:d.modelName!==void 0&&n!==void 0&&n.nameToAttribute.get(d.modelName)!==void 0&&(p=d.modelName,d=n.nameToAttribute.get(p),f=d.defaultValue,u=d.type);const x=JSON.stringify(f),R=d.required?"":"?";let O=`	/**
	  `;l.description?O+=l.description:l.pairedType&&((r=l.pairedAttr)!=null&&r.description)&&(O+=`Value for ${l.pairedType} attribute ${l.pairedAttr.name} if not overridden`,O+=`

	  `,O+=(i=l.pairedAttr)==null?void 0:i.description),O+=`

	  `,l.fixed?O+=`Fixed value: ${x}`:p?O+=`Default: inherited from Global attribute ${l.modelName} (default ${x})`:O+=`Default: ${x}`,O+=`
	 */`,a.push(O),a.push("	"+l.name+R+": "+u+`;
`)}return a.push("}"),a.join(`
`)}}class nn{constructor(e,n,r,i,a){q(this,"node"),q(this,"rect"),q(this,"location"),q(this,"index"),q(this,"className"),this.node=e,this.rect=n,this.location=r,this.index=i,this.className=a}}class Is{constructor(e){q(this,"borders"),q(this,"borderMap"),q(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(e,n){const r=new Is(n);r.borders=e.map(i=>rn.fromJson(i,n));for(const i of r.borders)r.borderMap.set(i.getLocation(),i);return r}toJson(){return this.borders.map(e=>e.toJson())}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(e){for(const n of this.borders){e(n,0);for(const r of n.getChildren())r.forEachNode(e,1)}}setPaths(){for(const e of this.borders){const n="/border/"+e.getLocation().getName();e.setPath(n);let r=0;for(const i of e.getChildren())i.setPath(n+"/t"+r),r++}}findDropTargetNode(e,n,r){for(const i of this.borders)if(i.isShowing()){const a=i.canDrop(e,n,r);if(a!==void 0)return a}}}class bl{constructor(e){q(this,"model"),q(this,"attributes"),q(this,"parent"),q(this,"children"),q(this,"rect"),q(this,"path"),q(this,"listeners"),this.model=e,this.attributes={},this.children=[],this.rect=Re.empty(),this.listeners=new Map,this.path=""}getId(){let e=this.attributes.id;return e!==void 0||(e=this.model.nextUniqueId(),this.setId(e)),e}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return this.parent===void 0?this.model.isRootOrientationVertical()?Fe.VERT:Fe.HORZ:Fe.flip(this.parent.getOrientation())}setEventListener(e,n){this.listeners.set(e,n)}removeEventListener(e){this.listeners.delete(e)}setId(e){this.attributes.id=e}fireEvent(e,n){this.listeners.has(e)&&this.listeners.get(e)(n)}getAttr(e){let n=this.attributes[e];if(n===void 0){const r=this.getAttributeDefinitions().getModelName(e);r!==void 0&&(n=this.model.getAttribute(r))}return n}forEachNode(e,n){e(this,n),n++;for(const r of this.children)r.forEachNode(e,n)}setPaths(e){let n=0;for(const r of this.children){let i=e;r.getType()==="row"?i+="/r"+n:r.getType()==="tabset"?i+="/ts"+n:r.getType()==="tab"&&(i+="/t"+n),r.path=i,r.setPaths(i),n++}}setParent(e){this.parent=e}setRect(e){this.rect=e}setPath(e){this.path=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}findDropTargetNode(e,n,r,i){let a;if(this.rect.contains(r,i)){if(this.model.getMaximizedTabset(e)!==void 0)a=this.model.getMaximizedTabset(e).canDrop(n,r,i);else if(a=this.canDrop(n,r,i),a===void 0&&this.children.length!==0){for(const o of this.children)if(a=o.findDropTargetNode(e,n,r,i),a!==void 0)break}}return a}canDrop(e,n,r){}canDockInto(e,n){if(n!=null){if(n.location===be.CENTER&&n.node.isEnableDrop()===!1||n.location===be.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||n.location!==be.CENTER&&n.node.isEnableDivide()===!1)return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(e,n)}return!0}removeChild(e){const n=this.children.indexOf(e);return n!==-1&&this.children.splice(n,1),n}addChild(e,n){return n!=null?this.children.splice(n,0,e):(this.children.push(e),n=this.children.length-1),e.parent=this,n}removeAll(){this.children=[]}styleWithPosition(e){return e==null&&(e={}),this.rect.styleWithPosition(e)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"	")}}const Ps=class Dr extends bl{constructor(e,n,r=!0){super(e),q(this,"tabRect",Re.empty()),q(this,"moveableElement"),q(this,"tabStamp"),q(this,"renderedName"),q(this,"extra"),q(this,"visible"),q(this,"rendered"),q(this,"scrollTop"),q(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,Dr.attributeDefinitions.fromJson(n,this.attributes),r===!0&&e.addNode(this)}static fromJson(e,n,r=!0){return new Dr(n,e,r)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof at?this.parent.getWindowId():xn.MAIN_WINDOW_ID}getWindow(){const e=this.model.getwindowsMap().get(this.getWindowId());if(e)return e.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==xn.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){const e={};return Dr.attributeDefinitions.toJson(e,this.attributes),e}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame(()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)})}setRect(e){e.equals(this.rect)||(this.fireEvent("resize",{rect:e}),this.rect=e)}setVisible(e){e!==this.visible&&(this.visible=e,this.fireEvent("visibility",{visible:e}))}getScrollTop(){return this.scrollTop}setScrollTop(e){this.scrollTop=e}getScrollLeft(){return this.scrollLeft}setScrollLeft(e){this.scrollLeft=e}isRendered(){return this.rendered}setRendered(e){this.rendered=e}getTabRect(){return this.tabRect}setTabRect(e){this.tabRect=e}getTabStamp(){return this.tabStamp}setTabStamp(e){this.tabStamp=e}getMoveableElement(){return this.moveableElement}setMoveableElement(e){this.moveableElement=e}setRenderedName(e){this.renderedName=e}getNameForOverflowMenu(){const e=this.getAttr("altName");return e!==void 0?e:this.renderedName}setName(e){this.attributes.name=e}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(e){Dr.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return Dr.attributeDefinitions}setBorderWidth(e){this.attributes.borderWidth=e}setBorderHeight(e){this.attributes.borderHeight=e}static getAttributeDefinitions(){return Dr.attributeDefinitions}static createAttributeDefinitions(){const e=new to;return e.add("type",Dr.TYPE,!0).setType(le.STRING).setFixed(),e.add("id",void 0).setType(le.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),e.add("name","[Unnamed Tab]").setType(le.STRING).setDescription("name of tab to be displayed in the tab button"),e.add("altName",void 0).setType(le.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),e.add("helpText",void 0).setType(le.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),e.add("component",void 0).setType(le.STRING).setDescription("string identifying which component to run (for factory)"),e.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),e.add("tabsetClassName",void 0).setType(le.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),e.add("enableWindowReMount",!1).setType(le.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),e.addInherited("enableClose","tabEnableClose").setType(le.BOOLEAN).setDescription("allow user to close tab via close button"),e.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(le.BOOLEAN).setDescription("allow user to drag tab to new location"),e.addInherited("enableRename","tabEnableRename").setType(le.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),e.addInherited("className","tabClassName").setType(le.STRING).setDescription("class applied to tab button"),e.addInherited("contentClassName","tabContentClassName").setType(le.STRING).setDescription("class applied to tab content"),e.addInherited("icon","tabIcon").setType(le.STRING).setDescription("the tab icon"),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(le.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),e.addInherited("enablePopout","tabEnablePopout").setType(le.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),e.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(le.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),e.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(le.BOOLEAN).setDescription(`if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)
            then enabling this option will gray out this tab`),e.addInherited("borderWidth","tabBorderWidth").setType(le.NUMBER).setDescription("width when added to border, -1 will use border size"),e.addInherited("borderHeight","tabBorderHeight").setType(le.NUMBER).setDescription("height when added to border, -1 will use border size"),e.addInherited("minWidth","tabMinWidth").setType(le.NUMBER).setDescription("the min width of this tab"),e.addInherited("minHeight","tabMinHeight").setType(le.NUMBER).setDescription("the min height of this tab"),e.addInherited("maxWidth","tabMaxWidth").setType(le.NUMBER).setDescription("the max width of this tab"),e.addInherited("maxHeight","tabMaxHeight").setType(le.NUMBER).setDescription("the max height of this tab"),e}};q(Ps,"TYPE","tab");q(Ps,"attributeDefinitions",Ps.createAttributeDefinitions());let ct=Ps;function wv(){return typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function uf(t,e,n){let r;const i=e.getName(),a=e.getName();n===void 0&&(n=0),r===void 0&&e.getIcon()!==void 0&&(n!==0?r=C("img",{style:{width:"1em",height:"1em",transform:"rotate("+n+"deg)"},src:e.getIcon(),alt:"leadingContent"}):r=C("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const s={leading:r,content:i,name:a,buttons:[]};return t.customizeTab(e,s),e.setRenderedName(s.name),s}function Va(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(t.nativeEvent.button!==0||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}function pu(t,e){const n=[...Eg("iframe",e),...Eg("webview",e)];for(const r of n)r.style.pointerEvents=t?"auto":"none"}function Eg(t,e){return[...e.getElementsByTagName(t)]}function xv(t,e,n,r,i){e.preventDefault();const a=l=>{l.preventDefault(),n(l.clientX,l.clientY)},o=l=>{l.preventDefault(),i()},s=()=>{t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",s),t.removeEventListener("pointercancel",o),r()};t.addEventListener("pointermove",a),t.addEventListener("pointerup",s),t.addEventListener("pointercancel",o)}function Tv(t){if(t instanceof ct)return t.isEnablePopout();if(t instanceof at){for(const e of t.getChildren())if(e.isEnablePopout()===!1)return!1;return!0}return!1}function Ag(t,e){const n=t.getAttribute("style"),r=e.getAttribute("style");return n===r?!1:(n?e.setAttribute("style",n):e.removeAttribute("style"),!0)}function gT(){const t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}function ks(t,e){if(t!==void 0&&(t instanceof at||t instanceof rn)){const n=t.getSelected();n!==-1&&(e===n&&t.getChildren().length>0?e>=t.getChildren().length&&t.setSelected(t.getChildren().length-1):e<n?t.setSelected(n-1):e>n||t.setSelected(-1))}}function ga(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}const Bs=class qn extends bl{constructor(e,n){super(e),q(this,"tabStripRect",Re.empty()),q(this,"contentRect",Re.empty()),q(this,"calculatedMinHeight"),q(this,"calculatedMinWidth"),q(this,"calculatedMaxHeight"),q(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,qn.attributeDefinitions.fromJson(n,this.attributes),e.addNode(this)}static fromJson(e,n,r){const i=new qn(n,e);if(e.children!=null)for(const a of e.children){const o=ct.fromJson(a,n);i.addChild(o)}return i.children.length===0&&i.setSelected(-1),e.maximized&&e.maximized===!0&&(r.maximizedTabSet=i),e.active&&e.active===!0&&(r.activeTabSet=i),i}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){const e=this.attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this.children[e]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(e){return e===Fe.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(e){return e===Fe.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){const e={};return qn.attributeDefinitions.toJson(e,this.attributes),e.children=this.children.map(n=>n.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}calcMinMaxSize(){this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth();for(const e of this.children){const n=e;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,n.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,n.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,n.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,n.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset(this.getWindowId())===this?!0:!(this.getParent()===this.getModel().getRoot(this.getWindowId())&&this.getModel().getRoot(this.getWindowId()).getChildren().length===1):!1}setContentRect(e){this.contentRect=e}getContentRect(){return this.contentRect}setTabStripRect(e){this.tabStripRect=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}getWindowId(){return this.parent.getWindowId()}canDrop(e,n,r){let i;if(e===this){const a=be.CENTER,o=this.tabStripRect;i=new nn(this,o,a,-1,ee.FLEXLAYOUT__OUTLINE_RECT)}else{if(this.getWindowId()!==xn.MAIN_WINDOW_ID&&!Tv(e))return;if(this.contentRect.contains(n,r)){let a=be.CENTER;this.model.getMaximizedTabset(this.parent.getWindowId())===void 0&&(a=be.getLocation(this.contentRect,n,r));const o=a.getDockRect(this.rect);i=new nn(this,o,a,-1,ee.FLEXLAYOUT__OUTLINE_RECT)}else if(this.tabStripRect!=null&&this.tabStripRect.contains(n,r)){let a,o,s;if(this.children.length===0)a=this.tabStripRect.clone(),o=a.y+3,s=a.height-4,a.width=2;else{let l=this.children[0];a=l.getTabRect(),o=a.y,s=a.height;let u=this.tabStripRect.x,f=0;for(let d=0;d<this.children.length;d++){if(l=this.children[d],a=l.getTabRect(),a.y!==o&&(o=a.y,u=this.tabStripRect.x),f=a.x+a.width/2,u<=n&&n<f&&a.y<r&&r<a.getBottom()){const p=be.CENTER,x=new Re(a.x-2,a.y,3,a.height);if(this.rect.x<a.x&&a.x<this.rect.getRight()){i=new nn(this,x,p,d,ee.FLEXLAYOUT__OUTLINE_RECT);break}else return}u=f}}if(i==null&&a.getRight()<this.rect.getRight()){const l=be.CENTER,u=new Re(a.getRight()-2,o,3,s);i=new nn(this,u,l,this.children.length,ee.FLEXLAYOUT__OUTLINE_RECT)}}}if(e.canDockInto(e,i))return i}delete(){this.parent.removeChild(this)}remove(e){const n=this.removeChild(e);this.model.tidy(),ks(this,n)}drop(e,n,r,i){const a=n;if(this===e)return;let o=e.getParent(),s=0;if(o!==void 0&&(s=o.removeChild(e),o instanceof rn&&o.getSelected()===s?o.setSelected(-1):ks(o,s)),e instanceof ct&&o===this&&s<r&&r>0&&r--,a===be.CENTER){let l=r;if(l===-1&&(l=this.children.length),e instanceof ct)this.addChild(e,l),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(l);else if(e instanceof zt)e.forEachNode((u,f)=>{u instanceof ct&&(this.addChild(u,l),l++)},0);else{for(let u=0;u<e.getChildren().length;u++){const f=e.getChildren()[u];this.addChild(f,l),l++}this.getSelected()===-1&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let l=e;if(e instanceof ct){const d=this.model.getOnCreateTabSet();l=new qn(this.model,d?d(e):{}),l.addChild(e),o=l}else if(e instanceof zt){const d=this.getParent();if(e.getOrientation()===d.getOrientation()&&(n.getOrientation()===d.getOrientation()||n===be.CENTER)){const p=new zt(this.model,this.getWindowId(),{});p.addChild(e),l=p}}else l=e;const u=this.parent,f=u.getChildren().indexOf(this);if(u.getOrientation()===a.orientation)l.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),u.addChild(l,f+a.indexPlus);else{const d=new zt(this.model,this.getWindowId(),{});d.setWeight(this.getWeight()),d.addChild(this),this.setWeight(50),l.setWeight(50),d.addChild(l,a.indexPlus),u.removeChild(this),u.addChild(d,f)}l instanceof qn&&this.model.setActiveTabset(l,this.getWindowId())}this.model.tidy()}updateAttrs(e){qn.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return qn.attributeDefinitions}static getAttributeDefinitions(){return qn.attributeDefinitions}static createAttributeDefinitions(){const e=new to;return e.add("type",qn.TYPE,!0).setType(le.STRING).setFixed(),e.add("id",void 0).setType(le.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),e.add("weight",100).setType(le.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),e.add("selected",0).setType(le.NUMBER).setDescription("index of selected/visible tab in tabset"),e.add("name",void 0).setType(le.STRING),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),e.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),e.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),e.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),e.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),e.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),e.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),e.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),e.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),e.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),e.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),e.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),e.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(le.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),e.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(le.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),e.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(le.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};q(Bs,"TYPE","tabset");q(Bs,"attributeDefinitions",Bs.createAttributeDefinitions());let at=Bs;const Fs=class Dt extends bl{constructor(e,n,r){super(e),q(this,"windowId"),q(this,"minHeight"),q(this,"minWidth"),q(this,"maxHeight"),q(this,"maxWidth"),this.windowId=n,this.minHeight=pr,this.minWidth=pr,this.maxHeight=vr,this.maxWidth=vr,Dt.attributeDefinitions.fromJson(r,this.attributes),this.normalizeWeights(),e.addNode(this)}static fromJson(e,n,r){const i=new Dt(n,r.windowId,e);if(e.children!=null)for(const a of e.children)if(a.type===at.TYPE){const o=at.fromJson(a,n,r);i.addChild(o)}else{const o=Dt.fromJson(a,n,r);i.addChild(o)}return i}getWeight(){return this.attributes.weight}toJson(){const e={};Dt.attributeDefinitions.toJson(e,this.attributes),e.children=[];for(const n of this.children)e.children.push(n.toJson());return e}getWindowId(){return this.windowId}setWindowId(e){this.windowId=e}setWeight(e){this.attributes.weight=e}getSplitterBounds(e){const n=this.getOrientation()===Fe.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=r[0].getRect(),o=r[r.length-1].getRect();let s=n?[a.x,o.getRight()]:[a.y,o.getBottom()];const l=n?[a.x,o.getRight()]:[a.y,o.getBottom()];for(let u=0;u<e;u++){const f=r[u];s[0]+=n?f.getMinWidth():f.getMinHeight(),l[0]+=n?f.getMaxWidth():f.getMaxHeight(),u>0&&(s[0]+=i,l[0]+=i)}for(let u=r.length-1;u>=e;u--){const f=r[u];s[1]-=(n?f.getMinWidth():f.getMinHeight())+i,l[1]-=(n?f.getMaxWidth():f.getMaxHeight())+i}return s=[Math.max(l[1],s[0]),Math.min(l[0],s[1])],s}getSplitterInitials(e){const n=this.getOrientation()===Fe.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=[];let o=0;for(let u=0;u<r.length;u++){const d=r[u].getRect(),p=n?d.width:d.height;a.push(p),o+=p}const s=r[e].getRect(),l=(n?s.x:s.y)-i;return{initialSizes:a,sum:o,startPosition:l}}calculateSplit(e,n,r,i,a){const o=this.getOrientation()===Fe.HORZ,s=this.getChildren(),l=s[e],u=o?l.getMaxWidth():l.getMaxHeight(),f=[...r];if(n<a){let p=a-n,x=0;f[e]+p>u?(x=f[e]+p-u,f[e]=u):f[e]+=p;for(let R=e-1;R>=0;R--){const O=s[R],A=o?O.getMinWidth():O.getMinHeight();if(f[R]-p>A){f[R]-=p;break}else p-=f[R]-A,f[R]=A}for(let R=e+1;R<s.length;R++){const O=s[R],A=o?O.getMaxWidth():O.getMaxHeight();if(f[R]+x<A){f[R]+=x;break}else x-=A-f[R],f[R]=A}}else{let p=n-a,x=0;f[e-1]+p>u?(x=f[e-1]+p-u,f[e-1]=u):f[e-1]+=p;for(let R=e;R<s.length;R++){const O=s[R],A=o?O.getMinWidth():O.getMinHeight();if(f[R]-p>A){f[R]-=p;break}else p-=f[R]-A,f[R]=A}for(let R=e-1;R>=0;R--){const O=s[R],A=o?O.getMaxWidth():O.getMaxHeight();if(f[R]+x<A){f[R]+=x;break}else x-=A-f[R],f[R]=A}}return f.map(p=>Math.max(.1,p)*100/i)}getMinSize(e){return e===Fe.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(e){return e===Fe.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=pr,this.minWidth=pr,this.maxHeight=vr,this.maxWidth=vr;let e=!0;for(const n of this.children){const r=n;r.calcMinMaxSize(),this.getOrientation()===Fe.VERT?(this.minHeight+=r.getMinHeight(),this.maxHeight+=r.getMaxHeight(),e||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,r.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,r.getMaxWidth())):(this.minWidth+=r.getMinWidth(),this.maxWidth+=r.getMaxWidth(),e||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,r.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,r.getMaxHeight())),e=!1}}tidy(){let e=0;for(;e<this.children.length;){const n=this.children[e];if(n instanceof Dt){n.tidy();const r=n.getChildren();if(r.length===0)this.removeChild(n);else if(r.length===1){const i=r[0];if(this.removeChild(n),i instanceof Dt){let a=0;const o=i.getChildren();for(const s of o)a+=s.getWeight();for(let s=0;s<o.length;s++){const l=o[s];l.setWeight(n.getWeight()*l.getWeight()/a),this.addChild(l,e+s)}}else i.setWeight(n.getWeight()),this.addChild(i,e)}else e++}else n instanceof at&&n.getChildren().length===0&&n.isEnableDeleteWhenEmpty()?(this.removeChild(n),n===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):e++}if(this===this.model.getRoot(this.windowId)&&this.children.length===0){const n=this.model.getOnCreateTabSet();let r=n?n():{};r={...r,selected:-1};const i=new at(this.model,r);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(e,n,r){const i=r-this.rect.y,a=n-this.rect.x,o=this.rect.width,s=this.rect.height,l=10,u=50;let f;if(!(this.getWindowId()!==xn.MAIN_WINDOW_ID&&!Tv(e))){if(this.model.isEnableEdgeDock()&&this.parent===void 0){if(n<this.rect.x+l&&i>s/2-u&&i<s/2+u){const d=be.LEFT,p=d.getDockRect(this.rect);p.width=p.width/2,f=new nn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this.rect.getRight()-l&&i>s/2-u&&i<s/2+u){const d=be.RIGHT,p=d.getDockRect(this.rect);p.width=p.width/2,p.x+=p.width,f=new nn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r<this.rect.y+l&&a>o/2-u&&a<o/2+u){const d=be.TOP,p=d.getDockRect(this.rect);p.height=p.height/2,f=new nn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r>this.rect.getBottom()-l&&a>o/2-u&&a<o/2+u){const d=be.BOTTOM,p=d.getDockRect(this.rect);p.height=p.height/2,p.y+=p.height,f=new nn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(f!==void 0&&!e.canDockInto(e,f))return}return f}}drop(e,n,r){const i=n,a=e.getParent();a&&a.removeChild(e),a!==void 0&&a instanceof at&&a.setSelected(0),a!==void 0&&a instanceof rn&&a.setSelected(-1);let o;if(e instanceof at||e instanceof Dt)o=e,o instanceof Dt&&o.getOrientation()===this.getOrientation()&&(n.getOrientation()===this.getOrientation()||n===be.CENTER)&&(o=new Dt(this.model,this.windowId,{}),o.addChild(e));else{const u=this.model.getOnCreateTabSet();o=new at(this.model,u?u(e):{}),o.addChild(e)}let s=this.children.reduce((u,f)=>u+f.getWeight(),0);s===0&&(s=100),o.setWeight(s/3);const l=!this.model.isRootOrientationVertical();if(i===be.CENTER)r===-1?this.addChild(o,this.children.length):this.addChild(o,r);else if(l&&i===be.LEFT||!l&&i===be.TOP)this.addChild(o,0);else if(l&&i===be.RIGHT||!l&&i===be.BOTTOM)this.addChild(o);else if(l&&i===be.TOP||!l&&i===be.LEFT){const u=new Dt(this.model,this.windowId,{}),f=new Dt(this.model,this.windowId,{});f.setWeight(75),o.setWeight(25);for(const d of this.children)f.addChild(d);this.removeAll(),u.addChild(o),u.addChild(f),this.addChild(u)}else if(l&&i===be.BOTTOM||!l&&i===be.RIGHT){const u=new Dt(this.model,this.windowId,{}),f=new Dt(this.model,this.windowId,{});f.setWeight(75),o.setWeight(25);for(const d of this.children)f.addChild(d);this.removeAll(),u.addChild(f),u.addChild(o),this.addChild(u)}o instanceof at&&this.model.setActiveTabset(o,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return Dt.attributeDefinitions}updateAttrs(e){Dt.attributeDefinitions.update(e,this.attributes)}static getAttributeDefinitions(){return Dt.attributeDefinitions}normalizeWeights(){let e=0;for(const n of this.children)e+=n.getWeight();e===0&&(e=1);for(const n of this.children){const r=n;r.setWeight(Math.max(.001,100*r.getWeight()/e))}}static createAttributeDefinitions(){const e=new to;return e.add("type",Dt.TYPE,!0).setType(le.STRING).setFixed(),e.add("id",void 0).setType(le.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),e.add("weight",100).setType(le.NUMBER).setDescription("relative weight for sizing of this row in parent row"),e}};q(Fs,"TYPE","row");q(Fs,"attributeDefinitions",Fs.createAttributeDefinitions());let zt=Fs;class jr{constructor(e,n){q(this,"_windowId"),q(this,"_layout"),q(this,"_rect"),q(this,"_window"),q(this,"_root"),q(this,"_maximizedTabSet"),q(this,"_activeTabSet"),q(this,"_toScreenRectFunction"),this._windowId=e,this._rect=n,this._toScreenRectFunction=r=>r}visitNodes(e){this.root.forEachNode(e,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(e){this._rect=e}set layout(e){this._layout=e}set window(e){this._window=e}set root(e){this._root=e}set maximizedTabSet(e){this._maximizedTabSet=e}set activeTabSet(e){this._activeTabSet=e}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(e){this._toScreenRectFunction=e}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new Re(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(e,n,r){const i=n.getwindowsMap().size,a=e.rect?Re.fromJson(e.rect):new Re(50+50*i,50+50*i,600,400);a.snap(10);const o=new jr(r,a);return o.root=zt.fromJson(e.layout,n,o),o}}const pr=0,vr=99999,Vs=class rt{constructor(){q(this,"attributes"),q(this,"idMap"),q(this,"changeListeners"),q(this,"borders"),q(this,"onAllowDrop"),q(this,"onCreateTabSet"),q(this,"windows"),q(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new Is(this),this.windows=new Map,this.rootWindow=new jr(rt.MAIN_WINDOW_ID,Re.empty()),this.windows.set(rt.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(e){var n;let r;switch(e.type){case Pe.ADD_NODE:{const i=new ct(this,e.data.json,!0),a=this.idMap.get(e.data.toNode);(a instanceof at||a instanceof rn||a instanceof zt)&&(a.drop(i,be.getByName(e.data.location),e.data.index,e.data.select),r=i);break}case Pe.MOVE_NODE:{const i=this.idMap.get(e.data.fromNode);if(i instanceof ct||i instanceof at||i instanceof zt){if(i===this.getMaximizedTabset(i.getWindowId())){const o=this.windows.get(i.getWindowId());o.maximizedTabSet=void 0}const a=this.idMap.get(e.data.toNode);(a instanceof at||a instanceof rn||a instanceof zt)&&a.drop(i,be.getByName(e.data.location),e.data.index,e.data.select)}this.removeEmptyWindows();break}case Pe.DELETE_TAB:{const i=this.idMap.get(e.data.node);i instanceof ct&&i.delete(),this.removeEmptyWindows();break}case Pe.DELETE_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof at){const a=[...i.getChildren()];for(let o=0;o<a.length;o++){const s=a[o];s.isEnableClose()&&s.delete()}i.getChildren().length===0&&i.delete(),this.tidy()}this.removeEmptyWindows();break}case Pe.POPOUT_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof at){const a=i.isMaximized(),o=this.windows.get(i.getWindowId()),s=ga(),l=new jr(s,o.toScreenRectFunction(i.getRect())),u={type:"row",children:[]},f=zt.fromJson(u,this,l);l.root=f,this.windows.set(s,l),f.drop(i,be.CENTER,0),a&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case Pe.POPOUT_TAB:{const i=this.idMap.get(e.data.node);if(i instanceof ct){const a=ga();let o=Re.empty();i.getParent()instanceof at?o=i.getParent().getRect():o=i.getParent().getContentRect();const s=this.windows.get(i.getWindowId()),l=new jr(a,s.toScreenRectFunction(o)),u=ga(),f={type:"row",children:[{type:"tabset",id:u}]},d=zt.fromJson(f,this,l);l.root=d,this.windows.set(a,l),this.idMap.get(u).drop(i,be.CENTER,0,!0)}this.removeEmptyWindows();break}case Pe.CLOSE_WINDOW:{const i=this.windows.get(e.data.windowId);i&&((n=this.rootWindow.root)==null||n.drop(i.root,be.CENTER,-1),this.rootWindow.visitNodes((a,o)=>{a instanceof zt&&a.setWindowId(rt.MAIN_WINDOW_ID)}),this.windows.delete(e.data.windowId));break}case Pe.CREATE_WINDOW:{const i=ga(),a=new jr(i,Re.fromJson(e.data.rect)),o=zt.fromJson(e.data.layout,this,a);a.root=o,this.windows.set(i,a),r=i;break}case Pe.RENAME_TAB:{const i=this.idMap.get(e.data.node);i instanceof ct&&i.setName(e.data.text);break}case Pe.SELECT_TAB:{const i=this.idMap.get(e.data.tabNode),a=e.data.windowId?e.data.windowId:rt.MAIN_WINDOW_ID,o=this.windows.get(a);if(i instanceof ct){const s=i.getParent(),l=s.getChildren().indexOf(i);s instanceof rn?s.getSelected()===l?s.setSelected(-1):s.setSelected(l):s instanceof at&&(s.getSelected()!==l&&s.setSelected(l),o.activeTabSet=s)}break}case Pe.SET_ACTIVE_TABSET:{const i=e.data.windowId?e.data.windowId:rt.MAIN_WINDOW_ID,a=this.windows.get(i);if(e.data.tabsetNode===void 0)a.activeTabSet=void 0;else{const o=this.idMap.get(e.data.tabsetNode);o instanceof at&&(a.activeTabSet=o)}break}case Pe.ADJUST_WEIGHTS:{const a=this.idMap.get(e.data.nodeId).getChildren();for(let o=0;o<a.length;o++)a[o].setWeight(e.data.weights[o]);break}case Pe.ADJUST_BORDER_SPLIT:{const i=this.idMap.get(e.data.node);i instanceof rn&&i.setSize(e.data.pos);break}case Pe.MAXIMIZE_TOGGLE:{const i=e.data.windowId?e.data.windowId:rt.MAIN_WINDOW_ID,a=this.windows.get(i),o=this.idMap.get(e.data.node);o instanceof at&&(o===a.maximizedTabSet?a.maximizedTabSet=void 0:(a.maximizedTabSet=o,a.activeTabSet=o));break}case Pe.UPDATE_MODEL_ATTRIBUTES:{this.updateAttrs(e.data.json);break}case Pe.UPDATE_NODE_ATTRIBUTES:{this.idMap.get(e.data.node).updateAttrs(e.data.json);break}}this.updateIdMap();for(const i of this.changeListeners)i(e);return r}getActiveTabset(e=rt.MAIN_WINDOW_ID){const n=this.windows.get(e);if(n&&n.activeTabSet&&this.getNodeById(n.activeTabSet.getId()))return n.activeTabSet}getMaximizedTabset(e=rt.MAIN_WINDOW_ID){return this.windows.get(e).maximizedTabSet}getRoot(e=rt.MAIN_WINDOW_ID){return this.windows.get(e).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(e){this.borders.forEachNode(e);for(const[n,r]of this.windows)r.root.forEachNode(e,0)}visitWindowNodes(e,n){this.windows.has(e)&&(e===rt.MAIN_WINDOW_ID&&this.borders.forEachNode(n),this.windows.get(e).visitNodes(n))}getNodeById(e){return this.idMap.get(e)}getFirstTabSet(e=this.windows.get(rt.MAIN_WINDOW_ID).root){const n=e.getChildren()[0];return n instanceof at?n:this.getFirstTabSet(n)}static fromJson(e){const n=new rt;if(rt.attributeDefinitions.fromJson(e.global,n.attributes),e.borders&&(n.borders=Is.fromJson(e.borders,n)),e.popouts)for(const r in e.popouts){const i=e.popouts[r],a=jr.fromJson(i,n,r);n.windows.set(r,a)}return n.rootWindow.root=zt.fromJson(e.layout,n,n.getwindowsMap().get(rt.MAIN_WINDOW_ID)),n.tidy(),n}toJson(){const e={};rt.attributeDefinitions.toJson(e,this.attributes),this.visitNodes(r=>{r.fireEvent("save",{})});const n={};for(const[r,i]of this.windows)r!==rt.MAIN_WINDOW_ID&&(n[r]=i.toJson());return{global:e,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:n}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(e){this.onAllowDrop=e}setOnCreateTabSet(e){this.onCreateTabSet=e}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){const n=this.changeListeners.findIndex(r=>r===e);n!==-1&&this.changeListeners.splice(n,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){const e=new Set;for(const[n]of this.windows)if(n!==rt.MAIN_WINDOW_ID){let r=0;this.visitWindowNodes(n,i=>{i instanceof ct&&r++}),r===0&&e.add(n)}for(const n of e)this.windows.delete(n)}setActiveTabset(e,n){const r=this.windows.get(n);r&&(e?r.activeTabSet=e:r.activeTabSet=void 0)}setMaximizedTabset(e,n){const r=this.windows.get(n);r&&(e?r.maximizedTabSet=e:r.maximizedTabSet=void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes(e=>{this.idMap.set(e.getId(),e)})}addNode(e){const n=e.getId();if(this.idMap.has(n))throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);this.idMap.set(n,e)}findDropTargetNode(e,n,r,i){let a=this.windows.get(e).root.findDropTargetNode(e,n,r,i);return a===void 0&&e===rt.MAIN_WINDOW_ID&&(a=this.borders.findDropTargetNode(n,r,i)),a}tidy(){for(const[e,n]of this.windows)n.root.tidy()}updateAttrs(e){rt.attributeDefinitions.update(e,this.attributes)}nextUniqueId(){return"#"+ga()}getAttribute(e){return this.attributes[e]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){rt.attributeDefinitions.pairAttributes("RowNode",zt.getAttributeDefinitions()),rt.attributeDefinitions.pairAttributes("TabSetNode",at.getAttributeDefinitions()),rt.attributeDefinitions.pairAttributes("TabNode",ct.getAttributeDefinitions()),rt.attributeDefinitions.pairAttributes("BorderNode",rn.getAttributeDefinitions());const e=[];e.push(rt.attributeDefinitions.toTypescriptInterface("Global",void 0)),e.push(zt.getAttributeDefinitions().toTypescriptInterface("Row",rt.attributeDefinitions)),e.push(at.getAttributeDefinitions().toTypescriptInterface("TabSet",rt.attributeDefinitions)),e.push(ct.getAttributeDefinitions().toTypescriptInterface("Tab",rt.attributeDefinitions)),e.push(rn.getAttributeDefinitions().toTypescriptInterface("Border",rt.attributeDefinitions))}static createAttributeDefinitions(){const e=new to;return e.add("enableEdgeDock",!0).setType(le.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),e.add("rootOrientationVertical",!1).setType(le.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),e.add("enableRotateBorderIcons",!0).setType(le.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),e.add("splitterSize",8).setType(le.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),e.add("splitterExtra",0).setType(le.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),e.add("splitterEnableHandle",!1).setType(le.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),e.add("tabEnableClose",!0).setType(le.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnablePopout",!1).setType(le.BOOLEAN).setAlias("tabEnableFloat"),e.add("tabEnablePopoutIcon",!0).setType(le.BOOLEAN),e.add("tabEnablePopoutOverlay",!1).setType(le.BOOLEAN),e.add("tabEnableDrag",!0).setType(le.BOOLEAN),e.add("tabEnableRename",!0).setType(le.BOOLEAN),e.add("tabContentClassName",void 0).setType(le.STRING),e.add("tabClassName",void 0).setType(le.STRING),e.add("tabIcon",void 0).setType(le.STRING),e.add("tabEnableRenderOnDemand",!0).setType(le.BOOLEAN),e.add("tabDragSpeed",.3).setType(le.NUMBER),e.add("tabBorderWidth",-1).setType(le.NUMBER),e.add("tabBorderHeight",-1).setType(le.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(le.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(le.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(le.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(le.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(le.BOOLEAN),e.add("tabSetEnableClose",!1).setType(le.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(le.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(le.BOOLEAN),e.add("tabSetEnableActiveIcon",!1).setType(le.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(le.STRING),e.add("tabSetEnableTabStrip",!0).setType(le.BOOLEAN),e.add("tabSetEnableTabWrap",!1).setType(le.BOOLEAN),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabMinWidth",pr).setType(le.NUMBER),e.add("tabMinHeight",pr).setType(le.NUMBER),e.add("tabSetMinWidth",pr).setType(le.NUMBER),e.add("tabSetMinHeight",pr).setType(le.NUMBER),e.add("tabMaxWidth",vr).setType(le.NUMBER),e.add("tabMaxHeight",vr).setType(le.NUMBER),e.add("tabSetMaxWidth",vr).setType(le.NUMBER),e.add("tabSetMaxHeight",vr).setType(le.NUMBER),e.add("tabSetEnableTabScrollbar",!1).setType(le.BOOLEAN),e.add("borderSize",200).setType(le.NUMBER),e.add("borderMinSize",pr).setType(le.NUMBER),e.add("borderMaxSize",vr).setType(le.NUMBER),e.add("borderEnableDrop",!0).setType(le.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(le.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(le.BOOLEAN),e.add("borderClassName",void 0).setType(le.STRING),e.add("borderEnableAutoHide",!1).setType(le.BOOLEAN),e.add("borderEnableTabScrollbar",!1).setType(le.BOOLEAN),e}};q(Vs,"MAIN_WINDOW_ID","__main_window_id__");q(Vs,"attributeDefinitions",Vs.createAttributeDefinitions());let xn=Vs;const Ws=class dr extends bl{constructor(e,n,r){super(r),q(this,"contentRect",Re.empty()),q(this,"tabHeaderRect",Re.empty()),q(this,"location"),this.location=e,this.attributes.id=`border_${e.getName()}`,dr.attributeDefinitions.fromJson(n,this.attributes),r.addNode(this)}static fromJson(e,n){const r=be.getByName(e.location),i=new dr(r,e,n);return e.children&&(i.children=e.children.map(a=>{const o=ct.fromJson(a,n);return o.setParent(i),o})),i}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===Fe.HORZ}getSize(){const e=this.getAttr("size"),n=this.getSelected();if(n===-1)return e;{const r=this.children[n],i=this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight");return i===-1?e:i}}getMinSize(){const e=this.getSelectedNode();let n=this.getAttr("minSize");if(e){const r=this.isHorizontal()?e.getMinWidth():e.getMinHeight();n=Math.max(n,r)}return n}getMaxSize(){const e=this.getSelectedNode();let n=this.getAttr("maxSize");if(e){const r=this.isHorizontal()?e.getMaxWidth():e.getMaxHeight();n=Math.min(n,r)}return n}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(this.getSelected()!==-1)return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){const e={};return dr.attributeDefinitions.toJson(e,this.attributes),e.location=this.location.getName(),e.children=this.children.map(n=>n.toJson()),e}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(e){this.attributes.selected=e}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(e){this.tabHeaderRect=e}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(e){this.contentRect=e}isEnableDrop(){return this.getAttr("enableDrop")}setSize(e){const n=this.getSelected();if(n===-1)this.attributes.size=e;else{const r=this.children[n];(this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight"))===-1?this.attributes.size=e:this.isHorizontal()?r.setBorderWidth(e):r.setBorderHeight(e)}}updateAttrs(e){dr.attributeDefinitions.update(e,this.attributes)}remove(e){const n=this.removeChild(e);this.getSelected()!==-1&&ks(this,n)}canDrop(e,n,r){if(!(e instanceof ct))return;let i;const a=be.CENTER;if(this.tabHeaderRect.contains(n,r)){if(this.location.orientation===Fe.VERT)if(this.children.length>0){let o=this.children[0],s=o.getTabRect();const l=s.y,u=s.height;let f=this.tabHeaderRect.x,d=0;for(let p=0;p<this.children.length;p++){if(o=this.children[p],s=o.getTabRect(),d=s.x+s.width/2,n>=f&&n<d){const x=new Re(s.x-2,l,3,u);i=new nn(this,x,a,p,ee.FLEXLAYOUT__OUTLINE_RECT);break}f=d}if(i==null){const p=new Re(s.getRight()-2,l,3,u);i=new nn(this,p,a,this.children.length,ee.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Re(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);i=new nn(this,o,a,0,ee.FLEXLAYOUT__OUTLINE_RECT)}else if(this.children.length>0){let o=this.children[0],s=o.getTabRect();const l=s.x,u=s.width;let f=this.tabHeaderRect.y,d=0;for(let p=0;p<this.children.length;p++){if(o=this.children[p],s=o.getTabRect(),d=s.y+s.height/2,r>=f&&r<d){const x=new Re(l,s.y-2,u,3);i=new nn(this,x,a,p,ee.FLEXLAYOUT__OUTLINE_RECT);break}f=d}if(i==null){const p=new Re(l,s.getBottom()-2,u,3);i=new nn(this,p,a,this.children.length,ee.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Re(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);i=new nn(this,o,a,0,ee.FLEXLAYOUT__OUTLINE_RECT)}if(!e.canDockInto(e,i))return}else if(this.getSelected()!==-1&&this.contentRect.contains(n,r)){const o=this.contentRect;if(i=new nn(this,o,a,-1,ee.FLEXLAYOUT__OUTLINE_RECT),!e.canDockInto(e,i))return}return i}drop(e,n,r,i){let a=0;const o=e.getParent();o!==void 0&&(a=o.removeChild(e),o!==this&&o instanceof dr&&o.getSelected()===a?o.setSelected(-1):ks(o,a)),e instanceof ct&&o===this&&a<r&&r>0&&r--;let s=r;s===-1&&(s=this.children.length),e instanceof ct&&this.addChild(e,s),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(s),this.model.tidy()}getSplitterBounds(e,n=!1){const r=[0,0],i=n?this.getMinSize():0,a=n?this.getMaxSize():99999,o=this.model.getRoot(xn.MAIN_WINDOW_ID),s=o.getRect(),l=this.model.getSplitterSize();if(this.location===be.TOP){r[0]=this.tabHeaderRect.getBottom()+i;const u=this.tabHeaderRect.getBottom()+a;r[1]=Math.max(r[0],s.getBottom()-o.getMinHeight()-l),r[1]=Math.min(r[1],u)}else if(this.location===be.LEFT){r[0]=this.tabHeaderRect.getRight()+i;const u=this.tabHeaderRect.getRight()+a;r[1]=Math.max(r[0],s.getRight()-o.getMinWidth()-l),r[1]=Math.min(r[1],u)}else if(this.location===be.BOTTOM){r[1]=this.tabHeaderRect.y-i-l;const u=this.tabHeaderRect.y-a-l;r[0]=Math.min(r[1],s.y+o.getMinHeight()),r[0]=Math.max(r[0],u)}else if(this.location===be.RIGHT){r[1]=this.tabHeaderRect.x-i-l;const u=this.tabHeaderRect.x-a-l;r[0]=Math.min(r[1],s.x+o.getMinWidth()),r[0]=Math.max(r[0],u)}return r}calculateSplit(e,n){const r=this.getSplitterBounds(n);return this.location===be.BOTTOM||this.location===be.RIGHT?Math.max(0,r[1]-n):Math.max(0,n-r[0])}getAttributeDefinitions(){return dr.attributeDefinitions}static getAttributeDefinitions(){return dr.attributeDefinitions}static createAttributeDefinitions(){const e=new to;return e.add("type",dr.TYPE,!0).setType(le.STRING).setFixed(),e.add("selected",-1).setType(le.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),e.add("show",!0).setType(le.BOOLEAN).setDescription("show/hide this border"),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDrop","borderEnableDrop").setType(le.BOOLEAN).setDescription("whether tabs can be dropped into this border"),e.addInherited("className","borderClassName").setType(le.STRING).setDescription("class applied to tab button"),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(le.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(le.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),e.addInherited("size","borderSize").setType(le.NUMBER).setDescription("size of the tab area when selected"),e.addInherited("minSize","borderMinSize").setType(le.NUMBER).setDescription("the minimum size of the tab area"),e.addInherited("maxSize","borderMaxSize").setType(le.NUMBER).setDescription("the maximum size of the tab area"),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(le.BOOLEAN).setDescription("hide border if it has zero tabs"),e.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(le.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};q(Ws,"TYPE","border");q(Ws,"attributeDefinitions",Ws.createAttributeDefinitions());let rn=Ws,Ma=!1;const vu=t=>{const{layout:e,node:n,index:r,horizontal:i}=t,[a,o]=Pt(!1),s=Te(null),l=Te(null),u=Te([]),f=Te(void 0),d=Te(void 0),p=Te(0),x=Te(0),R=Te({initialSizes:[],sum:0,startPosition:0}),O=n.getModel().getSplitterSize();let A=n.getModel().getSplitterExtra();wv()||(A=Math.max(20,A+O)-O),Mt(()=>{var J,Z;return(J=s.current)==null||J.addEventListener("touchstart",P,{passive:!1}),(Z=l.current)==null||Z.addEventListener("touchstart",P,{passive:!1}),()=>{var $,te;($=s.current)==null||$.removeEventListener("touchstart",P),(te=l.current)==null||te.removeEventListener("touchstart",P)}},[]);const P=J=>{J.preventDefault(),J.stopImmediatePropagation()},S=J=>{var Z;J.stopPropagation(),n instanceof zt&&(R.current=n.getSplitterInitials(r)),pu(!1,e.getCurrentDocument()),xv(J.currentTarget.ownerDocument,J,N,k,D),u.current=n.getSplitterBounds(r,!0);const $=e.getRootDiv();f.current=e.getCurrentDocument().createElement("div"),f.current.style.flexDirection=i?"row":"column",f.current.className=e.getClassName(ee.FLEXLAYOUT__SPLITTER_DRAG),f.current.style.cursor=n.getOrientation()===Fe.VERT?"ns-resize":"ew-resize",n.getModel().isSplitterEnableHandle()&&(d.current=e.getCurrentDocument().createElement("div"),d.current.className=X(ee.FLEXLAYOUT__SPLITTER_HANDLE)+" "+X(i?ee.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:ee.FLEXLAYOUT__SPLITTER_HANDLE_VERT),f.current.appendChild(d.current));const te=(Z=s.current)==null?void 0:Z.getBoundingClientRect(),G=new Re(te.x-e.getDomRect().x,te.y-e.getDomRect().y,te.width,te.height);p.current=J.clientX-te.x,x.current=J.clientY-te.y,G.positionElement(f.current),$&&$.appendChild(f.current),o(!0),Ma=!0},D=()=>{const J=e.getRootDiv();J&&f.current&&J.removeChild(f.current),f.current=void 0,o(!1),Ma=!1},N=(J,Z)=>{if(f.current){const $=e.getDomRect();if(!$)return;n.getOrientation()===Fe.VERT?f.current.style.top=Y(Z-$.y-x.current)+"px":f.current.style.left=Y(J-$.x-p.current)+"px",e.isRealtimeResize()&&W()}},k=()=>{if(f.current){W();const J=e.getRootDiv();J&&f.current&&J.removeChild(f.current),f.current=void 0}pu(!0,e.getCurrentDocument()),o(!1),Ma=!1},W=J=>{(()=>{if(f.current){let $=0;if(n.getOrientation()===Fe.VERT?$=f.current.offsetTop:$=f.current.offsetLeft,n instanceof rn){const te=n.calculateSplit(n,$);e.doAction(Pe.adjustBorderSplit(n.getId(),te))}else{const te=R.current,G=n.calculateSplit(r,$,te.initialSizes,te.sum,te.startPosition);e.doAction(Pe.adjustWeights(n.getId(),G))}}})()},Y=J=>{const Z=u.current;let $=J;return J<Z[0]&&($=Z[0]),J>Z[1]&&($=Z[1]),$},X=e.getClassName,K={cursor:i?"ew-resize":"ns-resize",flexDirection:i?"column":"row"};let ie=X(ee.FLEXLAYOUT__SPLITTER)+" "+X(ee.FLEXLAYOUT__SPLITTER_+n.getOrientation().getName());n instanceof rn?ie+=" "+X(ee.FLEXLAYOUT__SPLITTER_BORDER):n.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(K.display="none"),i?(K.width=O+"px",K.minWidth=O+"px"):(K.height=O+"px",K.minHeight=O+"px");let ne;if(!a&&n.getModel().isSplitterEnableHandle()&&(ne=C("div",{className:X(ee.FLEXLAYOUT__SPLITTER_HANDLE)+" "+X(i?ee.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:ee.FLEXLAYOUT__SPLITTER_HANDLE_VERT)})),A===0)return C("div",{className:ie,style:K,ref:s,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:S,children:ne});{const J={};n.getOrientation()===Fe.HORZ?(J.height="100%",J.width=O+A+"px",J.cursor="ew-resize"):(J.height=O+A+"px",J.width="100%",J.cursor="ns-resize");const Z=X(ee.FLEXLAYOUT__SPLITTER_EXTRA);return C("div",{className:ie,style:K,ref:s,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:S,children:C("div",{style:J,ref:l,className:Z,onPointerDown:S})})}};function mT(t){const{layout:e,border:n,show:r}=t,i=Te(null),a=Te(void 0);Sn(()=>{const u=e.getBoundingClientRect(i.current);!isNaN(u.x)&&u.width>0&&(n.getContentRect().equals(u)||(n.setContentRect(u),Ma?(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e.redrawInternal("border content rect "+u),a.current=void 0},50)):e.redrawInternal("border content rect "+u)))});let o=!0;const s={};n.getOrientation()===Fe.HORZ?(s.width=n.getSize(),s.minWidth=n.getMinSize(),s.maxWidth=n.getMaxSize()):(s.height=n.getSize(),s.minHeight=n.getMinSize(),s.maxHeight=n.getMaxSize(),o=!1),s.display=r?"flex":"none";const l=e.getClassName(ee.FLEXLAYOUT__BORDER_TAB_CONTENTS);return n.getLocation()===be.LEFT||n.getLocation()===be.TOP?C(St,{children:[C("div",{ref:i,style:s,className:l}),r&&C(vu,{layout:e,node:n,index:0,horizontal:o})]}):C(St,{children:[r&&C(vu,{layout:e,node:n,index:0,horizontal:o}),C("div",{ref:i,style:s,className:l})]})}var Wa=(t=>(t[t.Visible=1]="Visible",t[t.Always=2]="Always",t[t.Selected=3]="Selected",t))(Wa||{});const pT=t=>{const{layout:e,node:n,selected:r,border:i,icons:a,path:o}=t,s=Te(null),l=Te(null),u=K=>{n.isEnableDrag()?(K.stopPropagation(),e.setDragNode(K.nativeEvent,n)):K.preventDefault()},f=K=>{K.stopPropagation(),e.clearDragMain()},d=K=>{Va(K)&&e.auxMouseClick(n,K)},p=K=>{e.showContextMenu(n,K)},x=()=>{e.doAction(Pe.selectTab(n.getId()))},R=()=>{const K=n.getCloseType();return!!(r||K===Wa.Always||K===Wa.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},O=K=>{R()&&(e.doAction(Pe.deleteTab(n.getId())),K.stopPropagation())},A=K=>{K.stopPropagation()};Sn(()=>{n.setTabRect(e.getBoundingClientRect(s.current)),e.getEditingTab()===n&&l.current.select()});const P=K=>{K.stopPropagation()},S=K=>{K.code==="Escape"?e.setEditingTab(void 0):(K.code==="Enter"||K.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Pe.renameTab(n.getId(),K.target.value)))},D=e.getClassName;let N=D(ee.FLEXLAYOUT__BORDER_BUTTON)+" "+D(ee.FLEXLAYOUT__BORDER_BUTTON_+i);r?N+=" "+D(ee.FLEXLAYOUT__BORDER_BUTTON__SELECTED):N+=" "+D(ee.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),n.getClassName()!==void 0&&(N+=" "+n.getClassName());let k=0;n.getModel().isEnableRotateBorderIcons()===!1&&(i==="left"?k=90:i==="right"&&(k=-90));const W=uf(e,n,k);let Y=W.content?C("div",{className:D(ee.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:W.content}):null;const X=W.leading?C("div",{className:D(ee.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:W.leading}):null;if(e.getEditingTab()===n&&(Y=C("input",{ref:l,className:D(ee.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":o+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:S,onPointerDown:P})),n.isEnableClose()){const K=e.i18nName(en.Close_Tab);W.buttons.push(C("div",{"data-layout-path":o+"/button/close",title:K,className:D(ee.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:A,onClick:O,children:typeof a.close=="function"?a.close(n):a.close},"close"))}return C("div",{ref:s,"data-layout-path":o,className:N,onClick:x,onAuxClick:d,onContextMenu:p,title:n.getHelpText(),draggable:!0,onDragStart:u,onDragEnd:f,children:[X,Y,W.buttons]})},$s=t=>{const{layout:e,node:n}=t,r=e.getClassName,i=r(ee.FLEXLAYOUT__TAB_BUTTON_STAMP),a=uf(e,n),o=a.content?C("div",{className:r(ee.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:a.content}):n.getNameForOverflowMenu(),s=a.leading?C("div",{className:r(ee.FLEXLAYOUT__TAB_BUTTON_LEADING),children:a.leading}):null;return C("div",{className:i,title:n.getHelpText(),children:[s,o]})};function Sv(t,e,n,r,i){const a=i.getRootDiv(),o=i.getClassName,s=t.ownerDocument,l=t.getBoundingClientRect(),u=(a==null?void 0:a.getBoundingClientRect())??new DOMRect(0,0,100,100),f=s.createElement("div");f.className=o(ee.FLEXLAYOUT__POPUP_MENU_CONTAINER),l.left<u.left+u.width/2?f.style.left=l.left-u.left+"px":f.style.right=u.right-l.right+"px",l.top<u.top+u.height/2?f.style.top=l.top-u.top+"px":f.style.bottom=u.bottom-l.bottom+"px",i.showOverlay(!0),a&&a.appendChild(f);const d=()=>{i.hideControlInPortal(),i.showOverlay(!1),a&&a.removeChild(f),f.removeEventListener("pointerdown",p),s.removeEventListener("pointerdown",x)},p=R=>{R.stopPropagation()},x=R=>{d()};f.addEventListener("pointerdown",p),s.addEventListener("pointerdown",x),i.showControlInPortal(C(vT,{currentDocument:s,parentNode:e,onSelect:r,onHide:d,items:n,classNameMapper:o,layout:i}),f)}const vT=t=>{const{parentNode:e,items:n,onHide:r,onSelect:i,classNameMapper:a,layout:o}=t,s=Te(null);Mt(()=>{s.current&&s.current.focus()},[]);const l=(x,R)=>{i(x),r(),R.stopPropagation()},u=(x,R)=>{x.stopPropagation(),o.setDragNode(x.nativeEvent,R),setTimeout(()=>{r()},0)},f=x=>{o.clearDragMain()},d=x=>{x.key==="Escape"&&r()},p=n.map((x,R)=>{let O=a(ee.FLEXLAYOUT__POPUP_MENU_ITEM);return e.getSelected()===x.index&&(O+=" "+a(ee.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),C("div",{className:O,"data-layout-path":"/popup-menu/tb"+R,onClick:A=>l(x,A),draggable:!0,onDragStart:A=>u(A,x.node),onDragEnd:f,title:x.node.getHelpText(),children:C($s,{node:x.node,layout:o})},x.index)});return C("div",{className:a(ee.FLEXLAYOUT__POPUP_MENU),ref:s,tabIndex:0,onKeyDown:d,"data-layout-path":"/popup-menu",children:p})},Ev=(t,e,n,r,i,a)=>{const[o,s]=Pt([]),[l,u]=Pt(!1),[f,d]=Pt(!1),p=Te(null),x=Te(!1),R=Te(void 0),O=Te([]),A=Te(0),P=Te(!1);O.current=o,Sn(()=>{r.current&&he(0)},[e.getId()]),Sn(()=>{x.current=!1},[e.getSelectedNode(),e.getRect().width,e.getRect().height]),Sn(()=>{ne(),x.current===!1&&D(),N(),k()}),Mt(()=>{var re;return(re=p.current)==null||re.addEventListener("wheel",S,{passive:!1}),()=>{var ue;(ue=p.current)==null||ue.removeEventListener("wheel",S)}},[p.current]);const S=re=>{re.preventDefault()};function D(){const re=e.getSelectedNode();if(re&&r.current){const ue=t.getBoundingClientRect(r.current),de=re.getTabRect();let ve=$(ue)-$(de);ve>0||oe(de)>oe(ue)?(he(pe(r.current)-ve),P.current=!0):(ve=te(de)-te(ue),ve>0&&(he(pe(r.current)+ve),P.current=!0))}}const N=()=>{if(r.current&&i.current){const re=r.current,ue=i.current,de=G(re),ve=ge(re),Me=pe(re);if(ve>de&&ve>0){let Oe=de*de/ve,Ae=0;Oe<20&&(Ae=20-Oe,Oe=20);const Ie=Me*(de-Ae)/ve;n===Fe.HORZ?(ue.style.width=Oe+"px",ue.style.left=Ie+"px"):(ue.style.height=Oe+"px",ue.style.top=Ie+"px"),ue.style.display="block"}else ue.style.display="none";n===Fe.HORZ?ue.style.bottom="0px":ue.style.right="0px"}},k=()=>{const ue=J().length>0;ue!==l&&u(ue),R.current===void 0&&(R.current=setTimeout(()=>{const de=J();bT(de,O.current)||s(de),R.current=void 0},100))},W=()=>{P.current||(x.current=!0),P.current=!1,N(),k()},Y=re=>{var ue;re.stopPropagation(),i.current.setPointerCapture(re.pointerId);const de=(ue=i.current)==null?void 0:ue.getBoundingClientRect();n===Fe.HORZ?A.current=re.clientX-de.x:A.current=re.clientY-de.y,xv(re.currentTarget.ownerDocument,re,X,K,ie)},X=(re,ue)=>{if(r.current&&i.current){const de=r.current,ve=i.current,Me=G(de),Oe=ge(de),Ae=G(ve),Ie=de.getBoundingClientRect();let me=0;if(n===Fe.HORZ?me=re-Ie.x-A.current:me=ue-Ie.y-A.current,me=Math.max(0,Math.min(Oe-Ae,me)),Me>0){const Ee=me*Oe/Me;he(Ee)}}},K=()=>{},ie=()=>{},ne=()=>{if(r.current){const ue=r.current.firstElementChild,de=f?10:0,ve=G(ue)+de>G(r.current);ve!==f&&d(ve)}},J=()=>{const re=[];if(r.current){const ue=r.current,de=ue.getBoundingClientRect(),ve=$(de)-1,Me=te(de)+1,Oe=ue.firstElementChild;let Ae=0;Array.from(Oe.children).forEach(Ie=>{const me=Ie.getBoundingClientRect();Ie.classList.contains(a)&&(($(me)<ve||te(me)>Me)&&re.push(Ae),Ae++)})}return re},Z=re=>{if(r.current){if(e.getChildren().length===0)return;let ue=0;if(Math.abs(re.deltaY)>0){ue=-re.deltaY,re.deltaMode===1&&(ue*=40);const de=pe(r.current)-ue,ve=ge(r.current)-G(r.current),Me=Math.max(0,Math.min(ve,de));he(Me),re.stopPropagation()}}},$=re=>n===Fe.HORZ?re.x:re.y,te=re=>n===Fe.HORZ?re.right:re.bottom,G=re=>n===Fe.HORZ?re.clientWidth:re.clientHeight,oe=re=>n===Fe.HORZ?re.width:re.height,ge=re=>n===Fe.HORZ?re.scrollWidth:re.scrollHeight,he=re=>{n===Fe.HORZ?r.current.scrollLeft=re:r.current.scrollTop=re},pe=re=>n===Fe.HORZ?re.scrollLeft:re.scrollTop;return{selfRef:p,userControlledPositionRef:x,onScroll:W,onScrollPointerDown:Y,hiddenTabs:o,onMouseWheel:Z,isDockStickyButtons:f,isShowHiddenTabs:l}};function bT(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])}const _T=t=>{const{border:e,layout:n,size:r}=t,i=Te(null),a=Te(null),o=Te(null),s=Te(null),l=Te(null),u=n.getIcons();Sn(()=>{e.setTabHeaderRect(n.getBoundingClientRect(f.current))});const{selfRef:f,userControlledPositionRef:d,onScroll:p,onScrollPointerDown:x,hiddenTabs:R,onMouseWheel:O,isDockStickyButtons:A,isShowHiddenTabs:P}=Ev(n,e,Fe.flip(e.getOrientation()),l,a,n.getClassName(ee.FLEXLAYOUT__BORDER_BUTTON)),S=de=>{Va(de)&&n.auxMouseClick(e,de)},D=de=>{n.showContextMenu(e,de)},N=de=>{de.stopPropagation()},k=de=>{const ve=n.getShowOverflowMenu(),Me=R.map(Oe=>({index:Oe,node:e.getChildren()[Oe]}));if(ve!==void 0)ve(e,de,Me,W);else{const Oe=o.current;Sv(Oe,e,Me,W,n)}de.stopPropagation()},W=de=>{n.doAction(Pe.selectTab(de.node.getId())),d.current=!1},Y=de=>{const ve=e.getChildren()[e.getSelected()];ve!==void 0&&n.doAction(Pe.popoutTab(ve.getId())),de.stopPropagation()},X=n.getClassName,K=[],ie=de=>{const ve=e.getSelected()===de,Me=e.getChildren()[de];K.push(C(pT,{layout:n,border:e.getLocation().getName(),node:Me,path:e.getPath()+"/tb"+de,selected:ve,icons:u},Me.getId())),de<e.getChildren().length-1&&K.push(C("div",{className:X(ee.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+de))};for(let de=0;de<e.getChildren().length;de++)ie(de);let ne=X(ee.FLEXLAYOUT__BORDER)+" "+X(ee.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(ne+=" "+e.getClassName());let J,Z=[],$=[];const te={leading:J,buttons:Z,stickyButtons:$,overflowPosition:void 0};if(n.customizeTabSet(e,te),J=te.leading,$=te.stickyButtons,Z=te.buttons,te.overflowPosition===void 0&&(te.overflowPosition=$.length),$.length>0&&(A?Z=[...$,...Z]:K.push(C("div",{ref:s,onPointerDown:N,onDragStart:de=>{de.preventDefault()},className:X(ee.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:$},"sticky_buttons_container"))),P){const de=n.i18nName(en.Overflow_Menu_Tooltip);let ve;if(typeof u.more=="function"){const Me=R.map(Oe=>({index:Oe,node:e.getChildren()[Oe]}));ve=u.more(e,Me)}else ve=C(St,{children:[u.more,C("div",{className:X(ee.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:R.length>0?R.length:""})]});Z.splice(Math.min(te.overflowPosition,Z.length),0,C("button",{ref:o,className:X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:de,onClick:k,onPointerDown:N,children:ve},"overflowbutton"))}const G=e.getSelected();if(G!==-1){const de=e.getChildren()[G];if(de!==void 0&&n.isSupportsPopout()&&de.isEnablePopout()){const ve=n.i18nName(en.Popout_Tab);Z.push(C("button",{title:ve,className:X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:Y,onPointerDown:N,children:typeof u.popout=="function"?u.popout(de):u.popout},"popout"))}}const oe=C("div",{ref:i,className:X(ee.FLEXLAYOUT__BORDER_TOOLBAR)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName()),children:Z},"toolbar");let ge={},he={};const pe=r-1;e.getLocation()===be.LEFT?(ge={right:"100%",top:0},he={width:pe,overflowY:"auto"}):e.getLocation()===be.RIGHT?(ge={left:"100%",top:0},he={width:pe,overflowY:"auto"}):(ge={left:0},he={height:pe,overflowX:"auto"});let re;e.isEnableTabScrollbar()&&(re=C("div",{ref:a,className:X(ee.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:x}));let ue;return J&&(ue=C("div",{className:X(ee.FLEXLAYOUT__BORDER_LEADING),children:J})),C("div",{ref:f,style:{display:"flex",flexDirection:e.getOrientation()===Fe.VERT?"row":"column"},className:ne,"data-layout-path":e.getPath(),onClick:S,onAuxClick:S,onContextMenu:D,onWheel:O,children:[ue,C("div",{className:X(ee.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[C("div",{ref:l,className:X(ee.FLEXLAYOUT__BORDER_INNER)+" "+X(ee.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName()),style:he,onScroll:p,children:C("div",{style:ge,className:X(ee.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+X(ee.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName()),children:K})}),re]}),oe]})},yT=t=>{const{layout:e,node:n}=t,r=Te(null);Mt(()=>{n.setTabStamp(r.current)},[n,r.current]);const i=e.getClassName,a=i(ee.FLEXLAYOUT__DRAG_RECT);return C("div",{ref:r,className:a,children:C($s,{layout:e,node:n},n.getId())})},wT=t=>{const{title:e,layout:n,layoutWindow:r,url:i,onCloseWindow:a,onSetWindow:o,children:s}=t,l=Te(null),[u,f]=Pt(void 0),d=new Map;return Sn(()=>{if(!l.current){const p=r.windowId,x=r.rect;l.current=window.open(i,p,`left=${x.x},top=${x.y},width=${x.width},height=${x.height}`),l.current?(r.window=l.current,o(r,l.current),window.addEventListener("beforeunload",()=>{if(l.current){const R=l.current;l.current=null,R.close()}}),l.current.addEventListener("load",()=>{if(l.current){l.current.focus(),l.current.resizeTo(x.width,x.height),l.current.moveTo(x.x,x.y);const R=l.current.document;R.title=e;const O=R.createElement("div");O.className=ee.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,R.body.appendChild(O),TT(R,d).then(()=>{f(O)});const A=new MutationObserver(P=>xT(P,R,d));A.observe(document.head,{childList:!0}),l.current.addEventListener("beforeunload",()=>{l.current&&(a(r),l.current=null,A.disconnect())})}})):a(r)}return()=>{var p;n.getModel().getwindowsMap().has(r.windowId)||((p=l.current)==null||p.close(),l.current=null)}},[]),u!==void 0?Cs(s,u):null};function xT(t,e,n){for(const r of t)if(r.type==="childList"){for(const i of r.addedNodes)(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement)&&Av(e,i,n);for(const i of r.removedNodes)if(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement){const a=n.get(i);a&&e.head.removeChild(a)}}}function TT(t,e){const n=[],r=document.querySelectorAll('style, link[rel="stylesheet"]');for(const i of r)Av(t,i,e,n);return Promise.all(n)}function Av(t,e,n,r){if(e instanceof HTMLLinkElement){const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i),r&&r.push(new Promise(a=>{i.onload=()=>a(!0)}))}else if(e instanceof HTMLStyleElement)try{const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i)}catch{}}const Gi={width:"1em",height:"1em",display:"flex",alignItems:"center"},Cg=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Gi,viewBox:"0 0 24 24",children:[C("path",{fill:"none",d:"M0 0h24v24H0z"}),C("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),ST=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Gi,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[C("path",{d:"M0 0h24v24H0z",fill:"none"}),C("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),ET=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Gi,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[C("path",{d:"M0 0h24v24H0z",fill:"none"}),C("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),AT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:C("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),CT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Gi,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[C("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),C("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),RT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Gi,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[C("path",{d:"M0 0h24v24H0z",fill:"none"}),C("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),MT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Gi,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:C("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),NT=t=>{const{layout:e,show:n}=t;return C("div",{className:e.getClassName(ee.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:n?"flex":"none"}})},OT=t=>{const{layout:e,node:n,selected:r,path:i}=t,a=Te(null),o=Te(null),s=e.getIcons();Sn(()=>{n.setTabRect(e.getBoundingClientRect(a.current)),e.getEditingTab()===n&&o.current.select()});const l=Z=>{n.isEnableDrag()?(Z.stopPropagation(),e.setDragNode(Z.nativeEvent,n)):Z.preventDefault()},u=Z=>{e.clearDragMain()},f=Z=>{Va(Z)&&e.auxMouseClick(n,Z)},d=Z=>{e.showContextMenu(n,Z)},p=()=>{e.doAction(Pe.selectTab(n.getId()))},x=Z=>{n.isEnableRename()&&(R(),Z.stopPropagation())},R=()=>{e.setEditingTab(n),e.getCurrentDocument().body.addEventListener("pointerdown",O)},O=Z=>{Z.target!==o.current&&(e.getCurrentDocument().body.removeEventListener("pointerdown",O),e.setEditingTab(void 0))},A=()=>{const Z=n.getCloseType();return!!(r||Z===Wa.Always||Z===Wa.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},P=Z=>{A()&&(e.doAction(Pe.deleteTab(n.getId())),Z.stopPropagation())},S=Z=>{Z.stopPropagation()},D=Z=>{Z.stopPropagation()},N=Z=>{Z.code==="Escape"?e.setEditingTab(void 0):(Z.code==="Enter"||Z.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Pe.renameTab(n.getId(),Z.target.value)))},k=e.getClassName,W=n.getParent(),Y=W.isEnableSingleTabStretch()&&W.getChildren().length===1,X=Y?ee.FLEXLAYOUT__TAB_BUTTON_STRETCH:ee.FLEXLAYOUT__TAB_BUTTON;let K=k(X);K+=" "+k(X+"_"+W.getTabLocation()),Y||(r?K+=" "+k(X+"--selected"):K+=" "+k(X+"--unselected")),n.getClassName()!==void 0&&(K+=" "+n.getClassName());const ie=uf(e,n);let ne=ie.content?C("div",{className:k(ee.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:ie.content}):null;const J=ie.leading?C("div",{className:k(ee.FLEXLAYOUT__TAB_BUTTON_LEADING),children:ie.leading}):null;if(e.getEditingTab()===n&&(ne=C("input",{ref:o,className:k(ee.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":i+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:N,onPointerDown:D})),n.isEnableClose()&&!Y){const Z=e.i18nName(en.Close_Tab);ie.buttons.push(C("div",{"data-layout-path":i+"/button/close",title:Z,className:k(ee.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:S,onClick:P,children:typeof s.close=="function"?s.close(n):s.close},"close"))}return C("div",{ref:a,"data-layout-path":i,className:K,onClick:p,onAuxClick:f,onContextMenu:d,title:n.getHelpText(),draggable:!0,onDragStart:l,onDragEnd:u,onDoubleClick:x,children:[J,ne,ie.buttons]})},DT=t=>{const{node:e,layout:n}=t,r=Te(null),i=Te(null),a=Te(null),o=Te(null),s=Te(null),l=Te(null),u=Te(null),f=Te(void 0),d=n.getIcons();Sn(()=>{e.setRect(n.getBoundingClientRect(p.current)),r.current&&e.setTabStripRect(n.getBoundingClientRect(r.current));const fe=n.getBoundingClientRect(o.current);!e.getContentRect().equals(fe)&&!isNaN(fe.x)&&(e.setContentRect(fe),Ma?(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{n.redrawInternal("border content rect "+fe),f.current=void 0},50)):n.redrawInternal("border content rect "+fe))});const{selfRef:p,userControlledPositionRef:x,onScroll:R,onScrollPointerDown:O,hiddenTabs:A,onMouseWheel:P,isDockStickyButtons:S,isShowHiddenTabs:D}=Ev(n,e,Fe.HORZ,a,i,n.getClassName(ee.FLEXLAYOUT__TAB_BUTTON)),N=fe=>{const tt=n.getShowOverflowMenu(),it=A.map(_e=>({index:_e,node:e.getChildren()[_e]}));if(tt!==void 0)tt(e,fe,it,k);else{const _e=l.current;Sv(_e,e,it,k,n)}fe.stopPropagation()},k=fe=>{n.doAction(Pe.selectTab(fe.node.getId())),x.current=!1},W=fe=>{n.getEditingTab()?fe.preventDefault():e.isEnableDrag()?(fe.stopPropagation(),n.setDragNode(fe.nativeEvent,e)):fe.preventDefault()},Y=fe=>{Va(fe)||n.doAction(Pe.setActiveTabset(e.getId(),n.getWindowId()))},X=fe=>{Va(fe)&&n.auxMouseClick(e,fe)},K=fe=>{n.showContextMenu(e,fe)},ie=fe=>{fe.stopPropagation()},ne=fe=>{e.canMaximize()&&n.maximize(e),fe.stopPropagation()},J=fe=>{n.doAction(Pe.deleteTabset(e.getId())),fe.stopPropagation()},Z=fe=>{n.doAction(Pe.deleteTab(e.getChildren()[0].getId())),fe.stopPropagation()},$=fe=>{oe!==void 0&&n.doAction(Pe.popoutTab(oe.getId())),fe.stopPropagation()},te=fe=>{e.canMaximize()&&n.maximize(e)},G=n.getClassName,oe=e.getSelectedNode(),ge=e.getPath(),he=[];if(e.isEnableTabStrip())for(let fe=0;fe<e.getChildren().length;fe++){const tt=e.getChildren()[fe],it=e.getSelected()===fe;he.push(C(OT,{layout:n,node:tt,path:ge+"/tb"+fe,selected:it},tt.getId())),fe<e.getChildren().length-1&&he.push(C("div",{className:G(ee.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+fe))}let pe,re=[],ue=[];const de={leading:pe,stickyButtons:re,buttons:ue,overflowPosition:void 0};n.customizeTabSet(e,de),pe=de.leading,re=de.stickyButtons,ue=de.buttons;const ve=e.isEnableSingleTabStretch()&&e.getChildren().length===1,Me=ve&&e.getChildren()[0].isEnableClose()||e.isEnableClose();if(de.overflowPosition===void 0&&(de.overflowPosition=re.length),re.length>0&&(!e.isEnableTabWrap()&&(S||ve)?ue=[...re,...ue]:he.push(C("div",{ref:u,onPointerDown:ie,onDragStart:fe=>{fe.preventDefault()},className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:re},"sticky_buttons_container"))),!e.isEnableTabWrap()&&D){const fe=n.i18nName(en.Overflow_Menu_Tooltip);let tt;if(typeof d.more=="function"){const it=A.map(_e=>({index:_e,node:e.getChildren()[_e]}));tt=d.more(e,it)}else tt=C(St,{children:[d.more,C("div",{className:G(ee.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:A.length>0?A.length:""})]});ue.splice(Math.min(de.overflowPosition,ue.length),0,C("button",{"data-layout-path":ge+"/button/overflow",ref:l,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:fe,onClick:N,onPointerDown:ie,children:tt},"overflowbutton"))}if(oe!==void 0&&n.isSupportsPopout()&&oe.isEnablePopout()&&oe.isEnablePopoutIcon()){const fe=n.i18nName(en.Popout_Tab);ue.push(C("button",{"data-layout-path":ge+"/button/popout",title:fe,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:$,onPointerDown:ie,children:typeof d.popout=="function"?d.popout(oe):d.popout},"popout"))}if(e.canMaximize()){const fe=n.i18nName(en.Restore),tt=n.i18nName(en.Maximize);ue.push(C("button",{"data-layout-path":ge+"/button/max",title:e.isMaximized()?fe:tt,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:ne,onPointerDown:ie,children:e.isMaximized()?typeof d.restore=="function"?d.restore(e):d.restore:typeof d.maximize=="function"?d.maximize(e):d.maximize},"max"))}if(!e.isMaximized()&&Me){const fe=ve?n.i18nName(en.Close_Tab):n.i18nName(en.Close_Tabset);ue.push(C("button",{"data-layout-path":ge+"/button/close",title:fe,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:ve?Z:J,onPointerDown:ie,children:typeof d.closeTabset=="function"?d.closeTabset(e):d.closeTabset},"close"))}if(e.isActive()&&e.isEnableActiveIcon()){const fe=n.i18nName(en.Active_Tabset);ue.push(C("div",{"data-layout-path":ge+"/button/active",title:fe,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:typeof d.activeTabset=="function"?d.activeTabset(e):d.activeTabset},"active"))}const Oe=C("div",{ref:s,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:ie,onDragStart:fe=>{fe.preventDefault()},children:ue},"buttonbar");let Ae,Ie=G(ee.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Ie+=" "+e.getClassNameTabStrip()),Ie+=" "+ee.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&(Ie+=" "+G(ee.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(Ie+=" "+G(ee.FLEXLAYOUT__TABSET_MAXIMIZED)),ve){const fe=e.getChildren()[0];fe.getTabSetClassName()!==void 0&&(Ie+=" "+fe.getTabSetClassName())}let me;if(pe&&(me=C("div",{className:G(ee.FLEXLAYOUT__TABSET_LEADING),children:pe})),e.isEnableTabWrap())e.isEnableTabStrip()&&(Ae=C("div",{className:Ie,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:r,"data-layout-path":ge+"/tabstrip",onPointerDown:Y,onDoubleClick:te,onContextMenu:K,onClick:X,onAuxClick:X,draggable:!0,onDragStart:W,children:[me,he,C("div",{style:{flexGrow:1}}),Oe]}));else if(e.isEnableTabStrip()){let fe;e.isEnableTabScrollbar()&&(fe=C("div",{ref:i,className:G(ee.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:O})),Ae=C("div",{className:Ie,ref:r,"data-layout-path":ge+"/tabstrip",onPointerDown:Y,onDoubleClick:te,onContextMenu:K,onClick:X,onAuxClick:X,draggable:!0,onWheel:P,onDragStart:W,children:[me,C("div",{className:G(ee.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[C("div",{ref:a,className:G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:R,children:C("div",{style:{width:ve?"100%":"none"},className:G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation()),children:he})}),fe]}),Oe]})}let Ee;if(e.getChildren().length===0){const fe=n.getTabSetPlaceHolderCallback();fe&&(Ee=fe(e))}let De=C("div",{ref:o,className:G(ee.FLEXLAYOUT__TABSET_CONTENT),children:Ee});e.getTabLocation()==="top"?De=C(St,{children:[Ae,De]}):De=C(St,{children:[De,Ae]});const ce={flexGrow:Math.max(1,e.getWeight()*1e3),minWidth:e.getMinWidth(),minHeight:e.getMinHeight(),maxWidth:e.getMaxWidth(),maxHeight:e.getMaxHeight()};e.getModel().getMaximizedTabset(n.getWindowId())!==void 0&&!e.isMaximized()&&(ce.display="none");const et=C("div",{ref:p,className:G(ee.FLEXLAYOUT__TABSET_CONTAINER),style:ce,children:C("div",{className:G(ee.FLEXLAYOUT__TABSET),"data-layout-path":ge,children:De})});return e.isMaximized()&&n.getMainElement()?Cs(C("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:et}),n.getMainElement()):et},Cv=t=>{const{layout:e,node:n}=t,r=Te(null),i=n.getOrientation()===Fe.HORZ;Sn(()=>{n.setRect(e.getBoundingClientRect(r.current))});const a=[];let o=0;for(const l of n.getChildren())o>0&&a.push(C(vu,{layout:e,node:n,index:o,horizontal:i},"splitter"+o)),l instanceof zt?a.push(C(Cv,{layout:e,node:l},l.getId())):l instanceof at&&a.push(C(DT,{layout:e,node:l},l.getId())),o++;const s={flexGrow:Math.max(1,n.getWeight()*1e3),minWidth:n.getMinWidth(),minHeight:n.getMinHeight(),maxWidth:n.getMaxWidth(),maxHeight:n.getMaxHeight()};return i?s.flexDirection="row":s.flexDirection="column",C("div",{ref:r,className:e.getClassName(ee.FLEXLAYOUT__ROW),style:s,children:a})},LT=t=>{const{layout:e,selected:n,node:r,path:i}=t,a=Te(null),o=Te(!0),s=r.getParent(),l=s.getContentRect();Sn(()=>{const R=r.getMoveableElement();a.current.appendChild(R),r.setMoveableElement(R);const O=()=>{r.saveScrollPosition()};return R.addEventListener("scroll",O),a.current.addEventListener("pointerdown",u),()=>{R.removeEventListener("scroll",O),a.current&&a.current.removeEventListener("pointerdown",u),r.setVisible(!1)}},[]),Mt(()=>{r.isSelected()&&o.current&&(r.restoreScrollPosition(),o.current=!1)});const u=()=>{const R=r.getParent();R instanceof at&&(R.isActive()||e.doAction(Pe.setActiveTabset(R.getId(),e.getWindowId())))};r.setRect(l);const f=e.getClassName,d={};l.styleWithPosition(d);let p=null;if(n){if(r.setVisible(!0),document.hidden&&r.isEnablePopoutOverlay()){const R={};l.styleWithPosition(R),p=C("div",{style:R,className:f(ee.FLEXLAYOUT__TAB_OVERLAY)})}}else d.display="none",r.setVisible(!1);s instanceof at&&r.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(s.isMaximized()?d.zIndex=10:d.display="none"),s instanceof rn&&(s.isShowing()||(d.display="none"));let x=f(ee.FLEXLAYOUT__TAB);return s instanceof rn&&(x+=" "+f(ee.FLEXLAYOUT__TAB_BORDER),x+=" "+f(ee.FLEXLAYOUT__TAB_BORDER_+s.getLocation().getName())),r.getContentClassName()!==void 0&&(x+=" "+r.getContentClassName()),C(St,{children:[p,C("div",{ref:a,style:d,className:x,"data-layout-path":i})]})};class IT extends sn{constructor(e){super(e),q(this,"retry",()=>{this.setState({hasError:!1})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){}render(){return this.state.hasError?C("div",{className:ee.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:C("div",{className:ee.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:C("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,C("p",{children:C("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}const PT=_t(({layout:t,node:e})=>C(IT,{message:t.i18nName(en.Error_rendering_component),retryText:t.i18nName(en.Error_rendering_component_retry),children:t.props.factory(e)}),kT);function kT(t,e){return!(e.visible&&(!t.rect.equalSize(e.rect)||t.forceRevision!==e.forceRevision||t.tabsRevision!==e.tabsRevision))}class BT extends sn{constructor(e){super(e),q(this,"selfRef"),q(this,"revision"),this.selfRef=Jr(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(e,n){return this.selfRef.current.addTabToTabSet(e,n)}addTabWithDragAndDrop(e,n,r){this.selfRef.current.addTabWithDragAndDrop(e,n,r)}moveTabWithDragAndDrop(e,n){this.selfRef.current.moveTabWithDragAndDrop(e,n)}addTabToActiveTabSet(e){return this.selfRef.current.addTabToActiveTabSet(e)}setDragComponent(e,n,r,i){this.selfRef.current.setDragComponent(e,n,r,i)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return C(FT,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}const Rv=class dn extends sn{constructor(e){super(e),q(this,"selfRef"),q(this,"moveablesRef"),q(this,"findBorderBarSizeRef"),q(this,"mainRef"),q(this,"previousModel"),q(this,"orderedTabIds"),q(this,"orderedTabMoveableIds"),q(this,"moveableElementMap",new Map),q(this,"dropInfo"),q(this,"outlineDiv"),q(this,"currentDocument"),q(this,"currentWindow"),q(this,"supportsPopout"),q(this,"popoutURL"),q(this,"icons"),q(this,"resizeObserver"),q(this,"dragEnterCount",0),q(this,"dragging",!1),q(this,"windowId"),q(this,"layoutWindow"),q(this,"mainLayout"),q(this,"isMainWindow"),q(this,"isDraggingOverWindow"),q(this,"styleObserver"),q(this,"popoutWindowName"),q(this,"updateLayoutMetrics",()=>{if(this.findBorderBarSizeRef.current){const n=this.findBorderBarSizeRef.current.getBoundingClientRect().height;n!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:n})}}),q(this,"onModelChange",n=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,n)}),q(this,"updateRect",()=>{if(this.selfRef.current){const n=Re.fromDomRect(this.selfRef.current.getBoundingClientRect());!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&(this.setState({rect:n}),this.windowId!==xn.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}}),q(this,"getClassName",n=>this.props.classNameMapper===void 0?n:this.props.classNameMapper(n)),q(this,"onCloseWindow",n=>{this.doAction(Pe.closeWindow(n.windowId))}),q(this,"onSetWindow",(n,r)=>{}),q(this,"showControlInPortal",(n,r)=>{const i=Cs(n,r);this.setState({portal:i})}),q(this,"hideControlInPortal",()=>{this.setState({portal:void 0})}),q(this,"getIcons",()=>this.icons),q(this,"setDragNode",(n,r)=>{if(dn.dragState=new Oc(this.mainLayout,"internal",r,void 0,void 0),n.dataTransfer.setData("text/plain","--flexlayout--"),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.dropEffect="move",this.dragEnterCount=0,r instanceof at){let i=!1,a=this.i18nName(en.Move_Tabset);if(r.getChildren().length>0&&(a=this.i18nName(en.Move_Tabs).replace("?",String(r.getChildren().length))),this.props.onRenderDragRect){const o=this.props.onRenderDragRect(a,r,void 0);o&&(this.setDragComponent(n,o,10,10),i=!0)}i||this.setDragComponent(n,a,10,10)}else{const a=n.target.getBoundingClientRect(),o=n.clientX-a.left,s=n.clientY-a.top,l=r==null?void 0:r.getParent(),u=l instanceof rn&&l.getOrientation()===Fe.HORZ,f=u?10:o,d=u?10:s;let p=!1;if(this.props.onRenderDragRect){const x=C($s,{layout:this,node:r},r.getId()),R=this.props.onRenderDragRect(x,r,void 0);R&&(this.setDragComponent(n,R,f,d),p=!0)}p||(gT()?this.setDragComponent(n,C($s,{node:r,layout:this}),f,d):n.dataTransfer.setDragImage(r.getTabStamp(),f,d))}}),q(this,"onDragEnterRaw",n=>{this.dragEnterCount++,this.dragEnterCount===1&&this.onDragEnter(n)}),q(this,"onDragLeaveRaw",n=>{this.dragEnterCount--,this.dragEnterCount===0&&this.onDragLeave(n)}),q(this,"onDragEnter",n=>{if(!dn.dragState&&this.props.onExternalDrag){const r=this.props.onExternalDrag(n);if(r){const i=ct.fromJson(r.json,this.props.model,!1);dn.dragState=new Oc(this.mainLayout,"external",i,r.json,r.onDrop)}}if(dn.dragState){if(this.windowId!==xn.MAIN_WINDOW_ID&&dn.dragState.mainLayout===this.mainLayout&&dn.dragState.mainLayout.setDraggingOverWindow(!0),dn.dragState.mainLayout!==this.mainLayout)return;n.preventDefault(),this.dropInfo=void 0;const r=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(ee.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";const i=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${i}s, left ${i}s, width ${i}s, height ${i}s`,r.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),!this.isDraggingOverWindow&&this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()});const a=this.selfRef.current.getBoundingClientRect();new Re(n.clientX-a.left,n.clientY-a.top,1,1).positionElement(this.outlineDiv)}}),q(this,"onDragOver",n=>{var r;if(this.dragging&&!this.isDraggingOverWindow){n.preventDefault();const i=(r=this.selfRef.current)==null?void 0:r.getBoundingClientRect(),a={x:n.clientX-((i==null?void 0:i.left)??0),y:n.clientY-((i==null?void 0:i.top)??0)};this.checkForBorderToShow(a.x,a.y);const o=this.props.model.findDropTargetNode(this.windowId,dn.dragState.dragNode,a.x,a.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}}),q(this,"onDragLeave",n=>{this.dragging&&(this.windowId!==xn.MAIN_WINDOW_ID&&dn.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())}),q(this,"onDrop",n=>{if(this.dragging){n.preventDefault();const r=dn.dragState;if(this.dropInfo)if(r.dragJson!==void 0){const i=this.doAction(Pe.addNode(r.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));r.fnNewNodeDropped!==void 0&&r.fnNewNodeDropped(i,n)}else r.dragNode!==void 0&&this.doAction(Pe.moveNode(r.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0}),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=Jr(),this.moveablesRef=Jr(),this.mainRef=Jr(),this.findBorderBarSizeRef=Jr(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:WT,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...VT,...e.icons},this.windowId=e.windowId?e.windowId:xn.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:Re.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:be.CENTER},this.isMainWindow=this.windowId===xn.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{this.updateRect()})}),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",()=>{this.updateRect()});const e=this.props.mainLayout.getRootDiv(),n=this.selfRef.current;Ag(e,n),this.styleObserver=new MutationObserver(()=>{Ag(e,n)&&this.redraw("mutation observer")}),this.styleObserver.observe(e,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",()=>{for(const[e,n]of this.props.model.getwindowsMap())n.layout&&this.redraw("visibility change")})}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var e,n;this.selfRef.current&&((e=this.resizeObserver)==null||e.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),(n=this.styleObserver)==null||n.disconnect()}render(){if(!this.selfRef.current)return C("div",{ref:this.selfRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT),children:[C("div",{ref:this.moveablesRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});const e=this.props.model;e.getRoot(this.windowId).calcMinMaxSize(),e.getRoot(this.windowId).setPaths(""),e.getBorderSet().setPaths();const n=this.renderLayout(),r=this.renderBorders(n),i=this.renderTabs(),a=this.reorderComponents(i,this.orderedTabIds);let o=null,s=null,l=null,u=null;if(this.isMainWindow){o=this.renderWindows(),u=this.renderMetricsElements();const f=this.renderTabMoveables();s=this.reorderComponents(f,this.orderedTabMoveableIds),l=C("div",{className:this.getClassName(ee.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return C("div",{ref:this.selfRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[C("div",{ref:this.moveablesRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),u,C(NT,{layout:this,show:this.state.showOverlay},"__overlay__"),r,a,s,l,this.state.portal,o]})}renderBorders(e){const n=this.getClassName(ee.FLEXLAYOUT__LAYOUT_MAIN),r=this.props.model.getBorderSet().getBorderMap();if(this.isMainWindow&&r.size>0){e=C("div",{className:n,ref:this.mainRef,children:e});const i=new Map,a=new Map;for(const[l,u]of be.values){const f=r.get(u);f&&f.isShowing()&&(!f.isAutoHide()||f.isAutoHide()&&(f.getChildren().length>0||this.state.showHiddenBorder===u))&&(i.set(u,C(_T,{layout:this,border:f,size:this.state.calculatedBorderBarSize})),a.set(u,C(mT,{layout:this,border:f,show:f.getSelected()!==-1})))}const o=this.getClassName(ee.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),s=this.getClassName(ee.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){const l=C("div",{className:s,style:{flexDirection:"column"},children:[a.get(be.TOP),C("div",{className:s,style:{flexDirection:"row"},children:[a.get(be.LEFT),e,a.get(be.RIGHT)]}),a.get(be.BOTTOM)]});return C("div",{className:o,style:{flexDirection:"column"},children:[i.get(be.TOP),C("div",{className:s,style:{flexDirection:"row"},children:[i.get(be.LEFT),l,i.get(be.RIGHT)]}),i.get(be.BOTTOM)]})}else{const l=C("div",{className:s,style:{flexDirection:"row"},children:[a.get(be.LEFT),C("div",{className:s,style:{flexDirection:"column"},children:[a.get(be.TOP),e,a.get(be.BOTTOM)]}),a.get(be.RIGHT)]});return C("div",{className:o,style:{flexDirection:"row"},children:[i.get(be.LEFT),C("div",{className:s,style:{flexDirection:"column"},children:[i.get(be.TOP),l,i.get(be.BOTTOM)]}),i.get(be.RIGHT)]})}}else return C("div",{className:n,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:e})}renderLayout(){return C(St,{children:[C(Cv,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){const e=[],n=this.icons.edgeArrow;if(this.state.showEdges){const r=this.props.model.getRoot(this.windowId).getRect(),i=Nc,a=Rg,o=Nc/2,s=this.getClassName(ee.FLEXLAYOUT__EDGE_RECT),l=50;e.push(C("div",{style:{top:0,left:r.width/2-o,width:i,height:a,borderBottomLeftRadius:l,borderBottomRightRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_TOP),children:C("div",{style:{transform:"rotate(180deg)"},children:n})},"North")),e.push(C("div",{style:{top:r.height/2-o,left:0,width:a,height:i,borderTopRightRadius:l,borderBottomRightRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_LEFT),children:C("div",{style:{transform:"rotate(90deg)"},children:n})},"West")),e.push(C("div",{style:{top:r.height-a,left:r.width/2-o,width:i,height:a,borderTopLeftRadius:l,borderTopRightRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:C("div",{children:n})},"South")),e.push(C("div",{style:{top:r.height/2-o,left:r.width-a,width:a,height:i,borderTopLeftRadius:l,borderBottomLeftRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_RIGHT),children:C("div",{style:{transform:"rotate(-90deg)"},children:n})},"East"))}return e}renderWindows(){const e=[];if(this.supportsPopout){const n=this.props.model.getwindowsMap();let r=1;for(const[i,a]of n)i!==xn.MAIN_WINDOW_ID&&(e.push(C(wT,{layout:this,title:this.popoutWindowName+" "+r,layoutWindow:a,url:this.popoutURL+"?id="+i,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:C("div",{className:this.props.popoutClassName,children:C(dn,{...this.props,windowId:i,mainLayout:this})})},i)),r++)}return e}renderTabMoveables(){const e=new Map;return this.props.model.visitNodes(n=>{if(n instanceof ct){const r=n,i=this.getMoveableElement(r.getId());r.setMoveableElement(i);const a=r.isSelected(),o=r.getParent().getContentRect(),s=a||!r.isEnableRenderOnDemand(),l=r.isRendered()||s&&o.width>0&&o.height>0;if(l){const u=r.getId()+(r.isEnableWindowReMount()?r.getWindowId():"");e.set(n.getId(),Cs(C(PT,{layout:this,node:r,rect:o,visible:s,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},u),i)),r.setRendered(l)}}}),e}renderTabStamps(){const e=[];return this.props.model.visitNodes(n=>{if(n instanceof ct){const r=n;e.push(C(yT,{layout:this,node:r},r.getId()))}}),e}renderTabs(){const e=new Map;return this.props.model.visitWindowNodes(this.windowId,n=>{if(n instanceof ct){const r=n,i=r.isSelected(),a=r.getPath();(r.isRendered()||i||!r.isEnableRenderOnDemand())&&e.set(r.getId(),C(LT,{layout:this,path:a,node:r,selected:i},r.getId()))}}),e}renderMetricsElements(){return C("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(ee.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(e,n){const r=this.getBoundingClientRect(this.mainRef.current),i=r.getCenter(),a=Rg,o=Nc/2;let s=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===be.CENTER&&(n>i.y-o&&n<i.y+o||e>i.x-o&&e<i.x+o)&&(s=!0);let l=be.CENTER;s||(e<=r.x+a?l=be.LEFT:e>=r.getRight()-a?l=be.RIGHT:n<=r.y+a?l=be.TOP:n>=r.getBottom()-a&&(l=be.BOTTOM)),l!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:l})}tidyMoveablesMap(){const e=new Map;this.props.model.visitNodes((n,r)=>{n instanceof ct&&e.set(n.getId(),n)});for(const[n,r]of this.moveableElementMap)e.has(n)||(r.remove(),this.moveableElementMap.delete(n))}reorderComponents(e,n){const r=[],i=new Set;let a=[];for(const o of n)e.get(o)&&(r.push(o),i.add(o));n.splice(0,n.length,...r);for(const[o,s]of e)i.has(o)||n.push(o);return a=n.map(o=>e.get(o)),a}redraw(e){this.mainLayout.setState((n,r)=>({forceRevision:n.forceRevision+1}))}redrawInternal(e){this.mainLayout.setState((n,r)=>({layoutRevision:n.layoutRevision+1}))}doAction(e){if(this.props.onAction!==void 0){const n=this.props.onAction(e);return n!==void 0?this.props.model.doAction(n):void 0}else return this.props.model.doAction(e)}getBoundingClientRect(e){const n=this.getDomRect();return n?Re.getBoundingClientRect(e).relativeTo(n):Re.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(e){let n=this.moveableElementMap.get(e);return n===void 0&&(n=document.createElement("div"),this.moveablesRef.current.appendChild(n),n.className=ee.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(e,n)),n}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?Re.fromDomRect(this.selfRef.current.getBoundingClientRect()):Re.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(e){const n=e.clone(),r=this.getDomRect(),i=60,a=2;return n.x=this.currentWindow.screenX+this.currentWindow.scrollX+a/2+r.x+n.x,n.y=this.currentWindow.screenY+this.currentWindow.scrollY+(i-a/2)+r.y+n.y,n.height+=i,n.width+=a,n}addTabToTabSet(e,n){if(this.props.model.getNodeById(e)!==void 0)return this.doAction(Pe.addNode(n,e,be.CENTER,-1))}addTabToActiveTabSet(e){const n=this.props.model.getActiveTabset(this.windowId);if(n!==void 0)return this.doAction(Pe.addNode(e,n.getId(),be.CENTER,-1))}maximize(e){this.doAction(Pe.maximizeToggle(e.getId(),this.getWindowId()))}customizeTab(e,n){this.props.onRenderTab&&this.props.onRenderTab(e,n)}customizeTabSet(e,n){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,n)}i18nName(e,n){let r;return this.props.i18nMapper&&(r=this.props.i18nMapper(e,n)),r===void 0&&(r=e+(n===void 0?"":n)),r}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,n){this.props.onContextMenu&&this.props.onContextMenu(e,n)}auxMouseClick(e,n){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,n)}showOverlay(e){this.setState({showOverlay:e}),pu(!e,this.currentDocument)}addTabWithDragAndDrop(e,n,r){const i=ct.fromJson(n,this.props.model,!1);dn.dragState=new Oc(this.mainLayout,"add",i,n,r)}moveTabWithDragAndDrop(e,n){this.setDragNode(e,n)}setDragComponent(e,n,r,i){const a=C("div",{style:{position:"unset"},className:this.getClassName(ee.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(ee.FLEXLAYOUT__DRAG_RECT),children:n}),o=this.currentDocument.createElement("div");o.setAttribute("data-layout-path","/drag-rectangle"),o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",this.currentDocument.body.appendChild(o),fT(o).render(a),e.dataTransfer.setDragImage(o,r,i),setTimeout(()=>{this.currentDocument.body.removeChild(o)},0)}setDraggingOverWindow(e){this.isDraggingOverWindow!==e&&(this.outlineDiv&&(this.outlineDiv.style.visibility=e?"hidden":"visible"),e?this.setState({showEdges:!1}):this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=e)}clearDragMain(){dn.dragState=void 0,this.windowId===xn.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1);for(const[,e]of this.props.model.getwindowsMap())e.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};q(Rv,"dragState");let FT=Rv;const VT={close:C(Cg,{}),closeTabset:C(Cg,{}),popout:C(CT,{}),maximize:C(ST,{}),restore:C(RT,{}),more:C(ET,{}),edgeArrow:C(AT,{}),activeTabset:C(MT,{})},WT=wv(),Nc=100,Rg=10;class Oc{constructor(e,n,r,i,a){q(this,"mainLayout"),q(this,"dragSource"),q(this,"dragNode"),q(this,"dragJson"),q(this,"fnNewNodeDropped"),this.mainLayout=e,this.dragSource=n,this.dragNode=r,this.dragJson=i,this.fnNewNodeDropped=a}}class $T{constructor(e){this.data=e,this.prev=null,this.next=null}}class Mg{constructor(){this.head=null,this.tail=null,this.size=0}getHead(){return this.head}getTail(){return this.tail}getSize(){return this.size}append(e){this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,this.size++}prepend(e){return this.head?(this.head.prev=e,e.next=this.head,this.head=e):this.head=this.tail=e,this.size++,e}pop(){if(this.tail){const e=this.tail;return e.prev?(this.tail=e.prev,this.tail.next=null):this.head=this.tail=null,this.size--,e.prev=null,e}else return null}dequeue(){if(this.head){const e=this.head;return e.next?(this.head=e.next,this.head.prev=null):this.head=this.tail=null,this.size--,e.next=null,e}else return null}remove(e){e.prev==null?this.dequeue():e.next==null?this.pop():(e.next.prev=e.prev,e.prev.next=e.next,e.next=null,e.prev=null,this.size--)}}class zT{constructor(e){this.capacity=e,this.list=new Mg,this.map=new Map}has(e){return this.map.has(e)}get(e){const n=this.map.get(e);return n?(this.list.remove(n.listNode),this.list.prepend(n.listNode),n?n.value:null):null}getSize(){return this.list.getSize()}getCapacity(){return this.capacity}insert(e,n){const r=this.map.get(e);for(r&&this.list.remove(r.listNode);this.list.getSize()>=this.capacity;)this.map.delete(this.list.pop().data);const i=this.list.prepend(new $T(e));this.map.set(e,{value:n,listNode:i})}getOrInsert(e,n){let r=this.get(e);return r==null&&(r=n(e),this.insert(e,r)),r}removeLRU(){const e=this.list.pop();if(!e)return null;const n=e.data,r=this.map.get(n).value;return this.map.delete(n),[n,r]}clear(){this.list=new Mg,this.map=new Map}}var HT={};const bu=typeof process<"u"&&HT&&!0;function $e(t){if(!bu&&!t)throw new Error("Assertion failed.")}function UT(t,e){t.indexOf(e)===-1&&t.push(e)}function YT(t,e){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}function XT(t,e){return $e(e>=0&&e<=31),t.TEXTURE0+e}var Ze;(t=>{class e{constructor(p=0,x=0,R=0,O=0){this.x=p,this.y=x,this.width=R,this.height=O}set(p,x,R,O){this.x=p,this.y=x,this.width=R,this.height=O}equals(p){return this.x===p.x&&this.y===p.y&&this.width===p.width&&this.height===p.height}}t.Rect=e;const u=class u{constructor(p,x,R,O){this.redF=p,this.greenF=x,this.blueF=R,this.alphaF=O}equals(p){return this.redF===p.redF&&this.greenF===p.greenF&&this.blueF===p.blueF&&this.alphaF===p.alphaF}};u.TRANSPARENT=new u(0,0,0,0);let n=u;t.Color=n,(d=>{d[d.ZERO=0]="ZERO",d[d.ONE=1]="ONE",d[d.SOURCE_COLOR=2]="SOURCE_COLOR",d[d.TARGET_COLOR=3]="TARGET_COLOR",d[d.INVERSE_SOURCE_COLOR=4]="INVERSE_SOURCE_COLOR",d[d.INVERSE_TARGET_COLOR=5]="INVERSE_TARGET_COLOR",d[d.SOURCE_ALPHA=6]="SOURCE_ALPHA",d[d.TARGET_ALPHA=7]="TARGET_ALPHA",d[d.INVERSE_SOURCE_ALPHA=8]="INVERSE_SOURCE_ALPHA",d[d.INVERSE_TARGET_ALPHA=9]="INVERSE_TARGET_ALPHA",d[d.CONSTANT=10]="CONSTANT",d[d.INVERSE_CONSTANT=11]="INVERSE_CONSTANT"})(t.BlendOperation||(t.BlendOperation={})),(d=>{d[d.TRIANGLES=0]="TRIANGLES",d[d.TRIANGLE_STRIP=1]="TRIANGLE_STRIP"})(t.Primitive||(t.Primitive={}));class r{constructor(){this.resizeEventHandlers=new Set}setCopyBlendState(){this.setBlendState(1,0)}setAddBlendState(){this.setBlendState(1,1)}setPremultipliedBlendState(){this.setBlendState(1,8)}setUnpremultipliedBlendState(){this.setBlendState(6,8)}addAfterResizeEventHandler(p){this.resizeEventHandlers.add(p)}removeAfterResizeEventHandler(p){this.resizeEventHandlers.delete(p)}}t.Context=r,(d=>{d[d.FLOAT=0]="FLOAT",d[d.BYTE=1]="BYTE"})(t.AttributeType||(t.AttributeType={}));function i(d){return d==0?4:1}t.attributeByteLength=i;class a{constructor(p,x,R,O){this.name=p,this.type=x,this.count=R,this.byteOffset=O}}t.Attribute=a;class o{constructor(){this._attributes=[],this._stride=0}get attributes(){return this._attributes}get stride(){return this._stride}add(p,x,R){return this.attributes.push(new a(p,x,R,this.stride)),this._stride+=R*i(x),this}}t.VertexFormat=o;class s{uploadFloat32Array(p){this.upload(new Uint8Array(p.buffer),0)}uploadFloats(p){this.uploadFloat32Array(new Float32Array(p))}}t.VertexBuffer=s,(d=>{d[d.NEAREST=0]="NEAREST",d[d.LINEAR=1]="LINEAR"})(t.PixelFilter||(t.PixelFilter={})),(d=>{d[d.REPEAT=0]="REPEAT",d[d.CLAMP=1]="CLAMP"})(t.PixelWrap||(t.PixelWrap={}));const f=class f{constructor(p,x,R){this.minFilter=p,this.magFilter=x,this.wrap=R}};f.LINEAR_CLAMP=new f(1,1,1),f.LINEAR_MIN_NEAREST_MAG_CLAMP=new f(1,0,1),f.NEAREST_CLAMP=new f(0,0,1);let l=f;t.TextureFormat=l})(Ze||(Ze={}));var _u;(t=>{const R=class R extends Ze.Context{constructor(S=document.createElement("canvas")){super(),this._attributeCount=0,this._blendOperations=0,this._contextResetHandlers=[],this._currentClearColor=Ze.Color.TRANSPARENT,this._currentRenderTarget=null,this._defaultViewport=new Ze.Rect,this._forceStateUpdate=!0,this._generation=1,this._height=0,this._oldBlendOperations=0,this._oldRenderTarget=null,this._oldViewport=new Ze.Rect,this._width=0,this.handleWebglContextRestored=()=>{this._attributeCount=0,this._currentClearColor=Ze.Color.TRANSPARENT,this._forceStateUpdate=!0,this._generation++;for(let k of this._contextResetHandlers)k()},this.ANGLE_instanced_arrays=null,this.ANGLE_instanced_arrays_generation=-1;let D=S.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1});if(D==null)throw new Error("Setup failure");this._gl=D;let N=S.style;S.width=0,S.height=0,N.width=N.height="0",S.addEventListener("webglcontextlost",k=>{k.preventDefault()}),S.addEventListener("webglcontextrestored",this.handleWebglContextRestored),this._blendOperationMap={0:this._gl.ZERO,1:this._gl.ONE,2:this._gl.SRC_COLOR,3:this._gl.DST_COLOR,4:this._gl.ONE_MINUS_SRC_COLOR,5:this._gl.ONE_MINUS_DST_COLOR,6:this._gl.SRC_ALPHA,7:this._gl.DST_ALPHA,8:this._gl.ONE_MINUS_SRC_ALPHA,9:this._gl.ONE_MINUS_DST_ALPHA,10:this._gl.CONSTANT_COLOR,11:this._gl.ONE_MINUS_CONSTANT_COLOR}}get widthInPixels(){return this._width}get heightInPixels(){return this._height}testContextLoss(){this.handleWebglContextRestored()}get gl(){return this._gl}get generation(){return this._generation}addContextResetHandler(S){UT(this._contextResetHandlers,S)}removeContextResetHandler(S){YT(this._contextResetHandlers,S)}get currentRenderTarget(){return this._currentRenderTarget}beginFrame(){this.setRenderTarget(null)}endFrame(){}setBlendState(S,D){this._blendOperations=R._packBlendModes(S,D)}setViewport(S,D,N,k){(this._currentRenderTarget!=null?this._currentRenderTarget.viewport:this._defaultViewport).set(S,D,N,k)}get viewport(){return this._currentRenderTarget!=null?this._currentRenderTarget.viewport:this._defaultViewport}get renderTargetWidthInPixels(){return this._currentRenderTarget!=null?this._currentRenderTarget.viewport.width:this._width}get renderTargetHeightInPixels(){return this._currentRenderTarget!=null?this._currentRenderTarget.viewport.height:this._height}draw(S,D,N){this._updateRenderTargetAndViewport(),f.from(D).prepare(),d.from(N).prepare(),this._updateFormat(D.format),this._updateBlendState(),this._gl.drawArrays(S==0?this._gl.TRIANGLES:this._gl.TRIANGLE_STRIP,0,Math.floor(N.byteCount/D.format.stride)),this._forceStateUpdate=!1}resize(S,D,N,k){let W=this._gl.canvas;const Y=W.getBoundingClientRect();if(this._width===S&&this._height===D&&Y.width===N&&Y.height===k)return;let X=W.style;W.width=S,W.height=D,X.width=`${N}px`,X.height=`${k}px`,this.setViewport(0,0,S,D),this._width=S,this._height=D,this.resizeEventHandlers.forEach(K=>K())}clear(S){this._updateRenderTargetAndViewport(),this._updateBlendState(),S.equals(this._currentClearColor)||(this._gl.clearColor(S.redF,S.greenF,S.blueF,S.alphaF),this._currentClearColor=S),this._gl.clear(this._gl.COLOR_BUFFER_BIT)}setRenderTarget(S){this._currentRenderTarget=x.from(S)}createMaterial(S,D,N){let k=new f(this,S,D,N);return k.program,k}createVertexBuffer(S){return $e(S>0&&S%4==0),new d(this,S)}createTexture(S,D,N,k){return new p(this,S,D,N,k)}createRenderTarget(S){return new x(this,p.from(S))}getANGLE_instanced_arrays(){if(this.ANGLE_instanced_arrays_generation!==this._generation&&(this.ANGLE_instanced_arrays=null),!this.ANGLE_instanced_arrays&&(this.ANGLE_instanced_arrays=this.gl.getExtension("ANGLE_instanced_arrays"),!this.ANGLE_instanced_arrays))throw new Error("Failed to get extension ANGLE_instanced_arrays");return this.ANGLE_instanced_arrays}_updateRenderTargetAndViewport(){let S=this._currentRenderTarget,D=S!=null?S.viewport:this._defaultViewport,N=this._gl;(this._forceStateUpdate||this._oldRenderTarget!=S)&&(N.bindFramebuffer(N.FRAMEBUFFER,S?S.framebuffer:null),this._oldRenderTarget=S),(this._forceStateUpdate||!this._oldViewport.equals(D))&&(N.viewport(D.x,this.renderTargetHeightInPixels-D.y-D.height,D.width,D.height),this._oldViewport.set(D.x,D.y,D.width,D.height))}_updateBlendState(){if(this._forceStateUpdate||this._oldBlendOperations!=this._blendOperations){let S=this._gl,D=this._blendOperations,N=this._oldBlendOperations,k=D&15,W=D>>4;$e(k in this._blendOperationMap),$e(W in this._blendOperationMap),D==R.COPY_BLEND_OPERATIONS?S.disable(S.BLEND):((this._forceStateUpdate||N==R.COPY_BLEND_OPERATIONS)&&S.enable(S.BLEND),S.blendFunc(this._blendOperationMap[k],this._blendOperationMap[W])),this._oldBlendOperations=D}}_updateFormat(S){let D=this._gl,N=S.attributes,k=N.length;for(let W=0;W<k;W++){let Y=N[W],X=Y.type==1;D.vertexAttribPointer(W,Y.count,X?D.UNSIGNED_BYTE:D.FLOAT,X,S.stride,Y.byteOffset)}for(;this._attributeCount<k;)D.enableVertexAttribArray(this._attributeCount),this._attributeCount++;for(;this._attributeCount>k;)this._attributeCount--,D.disableVertexAttribArray(this._attributeCount);this._attributeCount=k}getWebGLInfo(){const S=this.gl.getExtension("WEBGL_debug_renderer_info"),D=S?this.gl.getParameter(S.UNMASKED_RENDERER_WEBGL):null,N=S?this.gl.getParameter(S.UNMASKED_VENDOR_WEBGL):null,k=this.gl.getParameter(this.gl.VERSION);return{renderer:D,vendor:N,version:k}}static from(S){return $e(S==null||S instanceof R),S}static _packBlendModes(S,D){return S|D<<4}};R.COPY_BLEND_OPERATIONS=R._packBlendModes(1,0);let e=R;t.Context=e;class n{constructor(S,D,N=0,k=null,W=!0){this._material=S,this._name=D,this._generation=N,this._location=k,this._isDirty=W}get location(){let S=e.from(this._material.context);if(this._generation!=S.generation&&(this._location=S.gl.getUniformLocation(this._material.program,this._name),this._generation=S.generation,!bu)){let D=this._material.program,N=S.gl;for(let k=0,W=N.getProgramParameter(D,N.ACTIVE_UNIFORMS);k<W;k++){let Y=N.getActiveUniform(D,k);if(Y&&Y.name==this._name)switch($e(Y.size==1),Y.type){case N.FLOAT:{$e(this instanceof r);break}case N.FLOAT_MAT3:{$e(this instanceof l);break}case N.FLOAT_VEC2:{$e(this instanceof a);break}case N.FLOAT_VEC3:{$e(this instanceof o);break}case N.FLOAT_VEC4:{$e(this instanceof s);break}case N.INT:{$e(this instanceof i);break}case N.SAMPLER_2D:{$e(this instanceof u);break}default:$e(!1)}}}if(!this._location)throw new Error("Failed to get uniform location");return this._location}}class r extends n{constructor(){super(...arguments),this._x=0}set(S){S!=this._x&&(this._x=S,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform1f(this.location,this._x),this._isDirty=!1)}}class i extends n{constructor(){super(...arguments),this._x=0}set(S){S!=this._x&&(this._x=S,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform1i(this.location,this._x),this._isDirty=!1)}}class a extends n{constructor(){super(...arguments),this._x=0,this._y=0}set(S,D){(S!=this._x||D!=this._y)&&(this._x=S,this._y=D,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform2f(this.location,this._x,this._y),this._isDirty=!1)}}class o extends n{constructor(){super(...arguments),this._x=0,this._y=0,this._z=0}set(S,D,N){(S!=this._x||D!=this._y||N!=this._z)&&(this._x=S,this._y=D,this._z=N,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform3f(this.location,this._x,this._y,this._z),this._isDirty=!1)}}class s extends n{constructor(){super(...arguments),this._x=0,this._y=0,this._z=0,this._w=0}set(S,D,N,k){(S!=this._x||D!=this._y||N!=this._z||k!=this._w)&&(this._x=S,this._y=D,this._z=N,this._w=k,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform4f(this.location,this._x,this._y,this._z,this._w),this._isDirty=!1)}}const O=class O extends n{constructor(){super(...arguments),this._values=[1,0,0,0,1,0,0,0,1]}set(S,D,N,k,W,Y,X,K,ie){O._cachedValues[0]=S,O._cachedValues[1]=k,O._cachedValues[2]=X,O._cachedValues[3]=D,O._cachedValues[4]=W,O._cachedValues[5]=K,O._cachedValues[6]=N,O._cachedValues[7]=Y,O._cachedValues[8]=ie;for(let ne=0;ne<9;ne++)if(O._cachedValues[ne]!=this._values[ne]){let J=this._values;this._values=O._cachedValues,O._cachedValues=J,this._isDirty=!0;break}}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniformMatrix3fv(this.location,!1,this._values),this._isDirty=!1)}};O._cachedValues=[1,0,0,0,1,0,0,0,1];let l=O;class u extends n{constructor(){super(...arguments),this._texture=null,this._index=-1}set(S,D){(this._texture!=S||this._index!=D)&&(this._texture=p.from(S),this._index=D,this._isDirty=!0)}prepare(){let S=e.from(this._material.context),D=S.gl;$e(this._texture==null||S.currentRenderTarget==null||this._texture!=S.currentRenderTarget.texture),(this._generation!=S.generation||this._isDirty)&&(D.uniform1i(this.location,this._index),this._isDirty=!1),D.activeTexture(XT(D,this._index)),D.bindTexture(D.TEXTURE_2D,this._texture!=null&&this._texture.width>0&&this._texture.height>0?this._texture.texture:null)}}class f{constructor(S,D,N,k,W={},Y=[],X=0,K=null){this._context=S,this._format=D,this._vertexSource=N,this._fragmentSource=k,this._uniformsMap=W,this._uniformsList=Y,this._generation=X,this._program=K}get context(){return this._context}get format(){return this._format}get vertexSource(){return this._vertexSource}get fragmentSource(){return this._fragmentSource}setUniformFloat(S,D){let N=this._uniformsMap[S]||null;N==null&&(N=new r(this,S),this._uniformsMap[S]=N,this._uniformsList.push(N)),$e(N instanceof r),N.set(D)}setUniformInt(S,D){let N=this._uniformsMap[S]||null;N==null&&(N=new i(this,S),this._uniformsMap[S]=N,this._uniformsList.push(N)),$e(N instanceof i),N.set(D)}setUniformVec2(S,D,N){let k=this._uniformsMap[S]||null;k==null&&(k=new a(this,S),this._uniformsMap[S]=k,this._uniformsList.push(k)),$e(k instanceof a),k.set(D,N)}setUniformVec3(S,D,N,k){let W=this._uniformsMap[S]||null;W==null&&(W=new o(this,S),this._uniformsMap[S]=W,this._uniformsList.push(W)),$e(W instanceof o),W.set(D,N,k)}setUniformVec4(S,D,N,k,W){let Y=this._uniformsMap[S]||null;Y==null&&(Y=new s(this,S),this._uniformsMap[S]=Y,this._uniformsList.push(Y)),$e(Y instanceof s),Y.set(D,N,k,W)}setUniformMat3(S,D,N,k,W,Y,X,K,ie,ne){let J=this._uniformsMap[S]||null;J==null&&(J=new l(this,S),this._uniformsMap[S]=J,this._uniformsList.push(J)),$e(J instanceof l),J.set(D,N,k,W,Y,X,K,ie,ne)}setUniformSampler(S,D,N){let k=this._uniformsMap[S]||null;k==null&&(k=new u(this,S),this._uniformsMap[S]=k,this._uniformsList.push(k)),$e(k instanceof u),k.set(D,N)}get program(){let S=this._context.gl;if(this._generation!=this._context.generation){this._program=S.createProgram(),this._compileShader(S,S.VERTEX_SHADER,this.vertexSource),this._compileShader(S,S.FRAGMENT_SHADER,this.fragmentSource);let D=this.format.attributes;for(let N=0;N<D.length;N++)S.bindAttribLocation(this._program,N,D[N].name);if(S.linkProgram(this._program),!S.getProgramParameter(this._program,S.LINK_STATUS))throw new Error(`${S.getProgramInfoLog(this._program)}`);if(this._generation=this._context.generation,!bu)for(let N of D)for(let k=0,W=S.getProgramParameter(this.program,S.ACTIVE_ATTRIBUTES);k<W;k++){let Y=S.getActiveAttrib(this.program,k);if(Y&&Y.name==N.name)switch($e(Y.size==1),N.count){case 1:{$e(Y.type==S.FLOAT);break}case 2:{$e(Y.type==S.FLOAT_VEC2);break}case 3:{$e(Y.type==S.FLOAT_VEC3);break}case 4:{$e(Y.type==S.FLOAT_VEC4);break}default:$e(!1)}}}return this._program}prepare(){this._context.gl.useProgram(this.program);for(let S of this._uniformsList)S.prepare()}_compileShader(S,D,N){let k=S.createShader(D);if(!k)throw new Error("Failed to create shader");if(S.shaderSource(k,N),S.compileShader(k),!S.getShaderParameter(k,S.COMPILE_STATUS))throw new Error(`${S.getShaderInfoLog(k)}`);if(!this._program)throw new Error("Tried to attach shader before program was created");S.attachShader(this._program,k)}static from(S){return $e(S==null||S instanceof f),S}}const A=class A extends Ze.VertexBuffer{constructor(S,D){super(),this._generation=0,this._buffer=null,this._bytes=null,this._isDirty=!0,this._dirtyMin=A.INT_MAX,this._dirtyMax=0,this._totalMin=A.INT_MAX,this._totalMax=0,this._byteCount=0,this._context=S,this._byteCount=D,this._bytes=new Uint8Array(D)}get context(){return this._context}get byteCount(){return this._byteCount}move(S,D,N){$e(N>=0),$e(0<=S&&S+N<=this._byteCount),$e(0<=D&&D+N<=this._byteCount),this._bytes&&S!=D&&N!=0&&(this._bytes.set(this._bytes.subarray(S,this._byteCount),D),this._growDirtyRegion(Math.min(S,D),Math.max(S,D)+N))}upload(S,D=0){$e(0<=D&&D+S.length<=this._byteCount),$e(this._bytes!=null),this._bytes.set(S,D),this._growDirtyRegion(D,D+S.length)}free(){this._buffer&&this._context.gl.deleteBuffer(this._buffer),this._generation=0}prepare(){let S=this._context.gl;this._generation!==this._context.generation&&(this._buffer=S.createBuffer(),this._generation=this._context.generation,this._isDirty=!0),S.bindBuffer(S.ARRAY_BUFFER,this._buffer),this._isDirty&&(S.bufferData(S.ARRAY_BUFFER,this._byteCount,S.DYNAMIC_DRAW),this._dirtyMin=this._totalMin,this._dirtyMax=this._totalMax,this._isDirty=!1),this._dirtyMin<this._dirtyMax&&(S.bufferSubData(S.ARRAY_BUFFER,this._dirtyMin,this._bytes.subarray(this._dirtyMin,this._dirtyMax)),this._dirtyMin=A.INT_MAX,this._dirtyMax=0)}_growDirtyRegion(S,D){this._dirtyMin=Math.min(this._dirtyMin,S),this._dirtyMax=Math.max(this._dirtyMax,D),this._totalMin=Math.min(this._totalMin,S),this._totalMax=Math.max(this._totalMax,D)}static from(S){return $e(S==null||S instanceof A),S}};A.INT_MAX=2147483647;let d=A;class p{constructor(S,D,N,k,W=null,Y=null,X=0,K=!0,ie=!0){this._context=S,this._format=D,this._width=N,this._height=k,this._pixels=W,this._texture=Y,this._generation=X,this._isFormatDirty=K,this._isContentDirty=ie}get context(){return this._context}get format(){return this._format}get width(){return this._width}get height(){return this._height}resize(S,D,N=null){this._width=S,this._height=D,this._pixels=N,this._isContentDirty=!0}setFormat(S){this._format!=S&&(this._format=S,this._isFormatDirty=!0)}get texture(){let S=this._context.gl;return this._generation!=this._context.generation&&(this._texture=S.createTexture(),this._generation=this._context.generation,this._isFormatDirty=!0,this._isContentDirty=!0),this._isFormatDirty&&(S.bindTexture(S.TEXTURE_2D,this._texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.format.magFilter==0?S.NEAREST:S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.format.minFilter==0?S.NEAREST:S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this.format.wrap==0?S.REPEAT:S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this.format.wrap==0?S.REPEAT:S.CLAMP_TO_EDGE),this._isFormatDirty=!1),this._isContentDirty&&(S.bindTexture(S.TEXTURE_2D,this._texture),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,this._width,this._height,0,S.RGBA,S.UNSIGNED_BYTE,this._pixels),this._isContentDirty=!1),this._texture}free(){this.texture&&(this._context.gl.deleteTexture(this.texture),this._generation=0)}static from(S){return $e(S==null||S instanceof p),S}}class x{constructor(S,D,N=null,k=0,W=!0,Y=new Ze.Rect){this._context=S,this._texture=D,this._framebuffer=N,this._generation=k,this._isDirty=W,this._viewport=Y}get context(){return this._context}get texture(){return this._texture}get viewport(){return this._viewport}setColor(S){this._texture!=S&&(this._texture=p.from(S),this._isDirty=!0)}get framebuffer(){let S=this._context.gl,D=this._texture.texture;return this._generation!=this._context.generation&&(this._framebuffer=S.createFramebuffer(),this._generation=this._context.generation,this._isDirty=!0),this._isDirty&&(S.bindFramebuffer(S.FRAMEBUFFER,this._framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,D,0),$e(S.checkFramebufferStatus(S.FRAMEBUFFER)==S.FRAMEBUFFER_COMPLETE),this._isDirty=!1),this._framebuffer}free(){this._framebuffer&&(this._context.gl.deleteFramebuffer(this._framebuffer),this._generation=0)}static from(S){return $e(S==null||S instanceof x),S}}})(_u||(_u={}));function Di(t,e,n){let{m00:r,m01:i,m02:a,m10:o,m11:s,m12:l}=n;t.setUniformMat3(e,r,i,a,o,s,l,0,0,1)}function Ng(t,e,n){t.setUniformVec2(e,n.x,n.y)}function Mv(t,e,n){t.setRenderTarget(e),t.setViewport(0,0,e.texture.width,e.texture.height),n(),t.setRenderTarget(null)}const _l=new Ze.VertexFormat;_l.add("configSpacePos",Ze.AttributeType.FLOAT,2);_l.add("color",Ze.AttributeType.FLOAT,3);const GT=`
  uniform mat3 configSpaceToNDC;

  attribute vec2 configSpacePos;
  attribute vec3 color;
  varying vec3 vColor;

  void main() {
    vColor = color;
    vec2 position = (configSpaceToNDC * vec3(configSpacePos, 1)).xy;
    gl_Position = vec4(position, 1, 1);
  }
`,qT=`
  precision mediump float;
  varying vec3 vColor;

  void main() {
    gl_FragColor = vec4(vColor.rgb, 1);
  }
`;class yu{constructor(e){this.gl=e,this.rects=[],this.colors=[],this.buffer=null}getRectCount(){return this.rects.length}getBuffer(){if(this.buffer)return this.buffer;const e=[[0,0],[1,0],[0,1],[1,0],[0,1],[1,1]],n=new Uint8Array(_l.stride*e.length*this.rects.length),r=new Float32Array(n.buffer);let i=0;for(let a=0;a<this.rects.length;a++){const o=this.rects[a],s=this.colors[a];for(let l of e)r[i++]=o.origin.x+l[0]*o.size.x,r[i++]=o.origin.y+l[1]*o.size.y,r[i++]=s.r,r[i++]=s.g,r[i++]=s.b}if(i!==r.length)throw new Error("Buffer expected to be full but wasn't");return this.buffer=this.gl.createVertexBuffer(n.length),this.buffer.upload(n),this.buffer}addRect(e,n){this.rects.push(e),this.colors.push(n),this.buffer&&(this.buffer.free(),this.buffer=null)}free(){this.buffer&&(this.buffer.free(),this.buffer=null)}}class jT{constructor(e){this.gl=e,this.material=e.createMaterial(_l,GT,qT)}render(e){Di(this.material,"configSpaceToNDC",(()=>{const n=ke.betweenRects(e.configSpaceSrcRect,e.physicalSpaceDstRect),r=new Q(this.gl.viewport.width,this.gl.viewport.height);return ke.withTranslation(new Q(-1,1)).times(ke.withScale(new Q(2,-2).dividedByPointwise(r))).times(n)})()),this.gl.setUnpremultipliedBlendState(),this.gl.draw(Ze.Primitive.TRIANGLES,this.material,e.batch.getBuffer())}}class JT{constructor(e,n,r){this.gl=e,this.rectangleBatchRenderer=n,this.textureRenderer=r,this.texture=e.createTexture(Ze.TextureFormat.NEAREST_CLAMP,4096,4096),this.renderTarget=e.createRenderTarget(this.texture),this.rowCache=new zT(this.texture.height),this.clearLineBatch=new yu(e),this.clearLineBatch.addRect(Ne.unit,new or(0,0,0,0)),e.addContextResetHandler(()=>{this.rowCache.clear()})}has(e){return this.rowCache.has(e)}getResolution(){return this.texture.width}getCapacity(){return this.texture.height}allocateLine(e){if(this.rowCache.getSize()<this.rowCache.getCapacity()){const n=this.rowCache.getSize();return this.rowCache.insert(e,n),n}else{const[,n]=this.rowCache.removeLRU();return this.rowCache.insert(e,n),n}}writeToAtlasIfNeeded(e,n){Mv(this.gl,this.renderTarget,()=>{for(let r of e){let i=this.rowCache.get(r);if(i!=null)continue;i=this.allocateLine(r);const a=new Ne(new Q(0,i),new Q(this.texture.width,1));this.rectangleBatchRenderer.render({batch:this.clearLineBatch,configSpaceSrcRect:Ne.unit,physicalSpaceDstRect:a}),n(a,r)}})}renderViaAtlas(e,n){let r=this.rowCache.get(e);if(r==null)return!1;const i=new Ne(new Q(0,r),new Q(this.texture.width,1));return this.textureRenderer.render({texture:this.texture,srcRect:i,dstRect:n}),!0}}const KT=`
  uniform mat3 uvTransform;
  uniform mat3 positionTransform;

  attribute vec2 position;
  attribute vec2 uv;
  varying vec2 vUv;

  void main() {
    vUv = (uvTransform * vec3(uv, 1)).xy;
    gl_Position = vec4((positionTransform * vec3(position, 1)).xy, 0, 1);
  }
`,ZT=`
  precision mediump float;

  varying vec2 vUv;
  uniform sampler2D texture;

  void main() {
   gl_FragColor = texture2D(texture, vUv);
  }
`;class QT{constructor(e){this.gl=e;const n=new Ze.VertexFormat;n.add("position",Ze.AttributeType.FLOAT,2),n.add("uv",Ze.AttributeType.FLOAT,2);const r=[{pos:[-1,1],uv:[0,1]},{pos:[1,1],uv:[1,1]},{pos:[-1,-1],uv:[0,0]},{pos:[1,-1],uv:[1,0]}],i=[];for(let a of r)i.push(a.pos[0]),i.push(a.pos[1]),i.push(a.uv[0]),i.push(a.uv[1]);this.buffer=e.createVertexBuffer(n.stride*r.length),this.buffer.upload(new Uint8Array(new Float32Array(i).buffer)),this.material=e.createMaterial(n,KT,ZT)}render(e){this.material.setUniformSampler("texture",e.texture,0),Di(this.material,"uvTransform",(()=>{const{srcRect:n,texture:r}=e,a=ke.withTranslation(new Q(0,1)).times(ke.withScale(new Q(1,-1))).times(ke.betweenRects(new Ne(Q.zero,new Q(r.width,r.height)),Ne.unit)).transformRect(n);return ke.betweenRects(Ne.unit,a)})()),Di(this.material,"positionTransform",(()=>{const{dstRect:n}=e,{viewport:r}=this.gl,i=new Q(r.width,r.height),o=ke.withScale(new Q(1,-1)).times(ke.betweenRects(new Ne(Q.zero,i),Ne.NDC)).transformRect(n);return ke.betweenRects(Ne.NDC,o)})()),this.gl.setUnpremultipliedBlendState(),this.gl.draw(Ze.Primitive.TRIANGLE_STRIP,this.material,this.buffer)}}const wu=new Ze.VertexFormat;wu.add("position",Ze.AttributeType.FLOAT,2);const eS=`
  attribute vec2 position;

  void main() {
    gl_Position = vec4(position, 0, 1);
  }
`,tS=t=>{const{r:e,g:n,b:r}=or.fromCSSHex(t.fgSecondaryColor),i=`${e.toFixed(1)}, ${n.toFixed(1)}, ${r.toFixed(1)}`;return`
    precision mediump float;

    uniform mat3 configSpaceToPhysicalViewSpace;
    uniform vec2 physicalSize;
    uniform vec2 physicalOrigin;
    uniform vec2 configSpaceViewportOrigin;
    uniform vec2 configSpaceViewportSize;
    uniform float framebufferHeight;

    void main() {
      vec2 origin = (configSpaceToPhysicalViewSpace * vec3(configSpaceViewportOrigin, 1.0)).xy;
      vec2 size = (configSpaceToPhysicalViewSpace * vec3(configSpaceViewportSize, 0.0)).xy;

      vec2 halfSize = physicalSize / 2.0;

      float borderWidth = 2.0;

      origin = floor(origin * halfSize) / halfSize + borderWidth * vec2(1.0, 1.0);
      size = floor(size * halfSize) / halfSize - 2.0 * borderWidth * vec2(1.0, 1.0);

      vec2 coord = gl_FragCoord.xy;
      coord.x = coord.x - physicalOrigin.x;
      coord.y = framebufferHeight - coord.y - physicalOrigin.y;
      vec2 clamped = clamp(coord, origin, origin + size);
      vec2 gap = clamped - coord;
      float maxdist = max(abs(gap.x), abs(gap.y));

      // TOOD(jlfwong): Could probably optimize this to use mix somehow.
      if (maxdist == 0.0) {
        // Inside viewport rectangle
        gl_FragColor = vec4(0, 0, 0, 0);
      } else if (maxdist < borderWidth) {
        // Inside viewport rectangle at border
        gl_FragColor = vec4(${i}, 0.8);
      } else {
        // Outside viewport rectangle
        gl_FragColor = vec4(${i}, 0.5);
      }
    }
  `};class nS{constructor(e,n){this.gl=e;const r=[[-1,1],[1,1],[-1,-1],[1,-1]],i=[];for(let a of r)i.push(a[0]),i.push(a[1]);this.buffer=e.createVertexBuffer(wu.stride*r.length),this.buffer.upload(new Uint8Array(new Float32Array(i).buffer)),this.material=e.createMaterial(wu,eS,tS(n))}render(e){Di(this.material,"configSpaceToPhysicalViewSpace",e.configSpaceToPhysicalViewSpace),Ng(this.material,"configSpaceViewportOrigin",e.configSpaceViewportRect.origin),Ng(this.material,"configSpaceViewportSize",e.configSpaceViewportRect.size);const n=this.gl.viewport;this.material.setUniformVec2("physicalOrigin",n.x,n.y),this.material.setUniformVec2("physicalSize",n.width,n.height),this.material.setUniformFloat("framebufferHeight",this.gl.renderTargetHeightInPixels),this.gl.setBlendState(Ze.BlendOperation.SOURCE_ALPHA,Ze.BlendOperation.INVERSE_SOURCE_ALPHA),this.gl.draw(Ze.Primitive.TRIANGLE_STRIP,this.material,this.buffer)}}const zs=new Ze.VertexFormat;zs.add("position",Ze.AttributeType.FLOAT,2);zs.add("uv",Ze.AttributeType.FLOAT,2);const rS=`
  uniform mat3 uvTransform;
  uniform mat3 positionTransform;

  attribute vec2 position;
  attribute vec2 uv;
  varying vec2 vUv;

  void main() {
    vUv = (uvTransform * vec3(uv, 1)).xy;
    gl_Position = vec4((positionTransform * vec3(position, 1)).xy, 0, 1);
  }
`,iS=t=>`
  precision mediump float;

  uniform vec2 uvSpacePixelSize;
  uniform float renderOutlines;

  varying vec2 vUv;
  uniform sampler2D colorTexture;

  // https://en.wikipedia.org/wiki/HSL_and_HSV#From_luma/chroma/hue
  vec3 hcl2rgb(float H, float C, float L) {
    float hPrime = H / 60.0;
    float X = C * (1.0 - abs(mod(hPrime, 2.0) - 1.0));
    vec3 RGB =
      hPrime < 1.0 ? vec3(C, X, 0) :
      hPrime < 2.0 ? vec3(X, C, 0) :
      hPrime < 3.0 ? vec3(0, C, X) :
      hPrime < 4.0 ? vec3(0, X, C) :
      hPrime < 5.0 ? vec3(X, 0, C) :
      vec3(C, 0, X);

    float m = L - dot(RGB, vec3(0.30, 0.59, 0.11));
    return RGB + vec3(m, m, m);
  }

  float triangle(float x) {
    return 2.0 * abs(fract(x) - 0.5) - 1.0;
  }

  ${t}

  void main() {
    vec4 here = texture2D(colorTexture, vUv);

    if (here.z == 0.0) {
      // Background color
      gl_FragColor = vec4(0, 0, 0, 0);
      return;
    }

    // Sample the 4 surrounding pixels in the depth texture to determine
    // if we should draw a boundary here or not.
    vec4 N = texture2D(colorTexture, vUv + vec2(0, uvSpacePixelSize.y));
    vec4 E = texture2D(colorTexture, vUv + vec2(uvSpacePixelSize.x, 0));
    vec4 S = texture2D(colorTexture, vUv + vec2(0, -uvSpacePixelSize.y));
    vec4 W = texture2D(colorTexture, vUv + vec2(-uvSpacePixelSize.x, 0));

    // NOTE: For outline checks, we intentionally check both the right
    // and the left to determine if we're an edge. If a rectangle is a single
    // pixel wide, we don't want to render it as an outline, so this method
    // of checking ensures that we don't outline single physical-space
    // pixel width rectangles.
    if (
      renderOutlines > 0.0 &&
      (
        here.y == N.y && here.y != S.y || // Top edge
        here.y == S.y && here.y != N.y || // Bottom edge
        here.x == E.x && here.x != W.x || // Left edge
        here.x == W.x && here.x != E.x
      )
    ) {
      // We're on an edge! Draw transparent.
      gl_FragColor = vec4(0, 0, 0, 0);
    } else {
      // Not on an edge. Draw the appropriate color.
      gl_FragColor = vec4(colorForBucket(here.z), here.a);
    }
  }
`;class aS{constructor(e,n){this.gl=e;const r=[{pos:[-1,1],uv:[0,1]},{pos:[1,1],uv:[1,1]},{pos:[-1,-1],uv:[0,0]},{pos:[1,-1],uv:[1,0]}],i=[];for(let a of r)i.push(a.pos[0]),i.push(a.pos[1]),i.push(a.uv[0]),i.push(a.uv[1]);this.buffer=e.createVertexBuffer(zs.stride*r.length),this.buffer.uploadFloats(i),this.updateMaterial(e,n)}updateMaterial(e,n){this.material=e.createMaterial(zs,rS,iS(n.colorForBucketGLSL))}render(e){const{srcRect:n,rectInfoTexture:r}=e,a=ke.withTranslation(new Q(0,1)).times(ke.withScale(new Q(1,-1))).times(ke.betweenRects(new Ne(Q.zero,new Q(r.width,r.height)),Ne.unit)).transformRect(n),o=ke.betweenRects(Ne.unit,a),{dstRect:s}=e,l=new Q(this.gl.viewport.width,this.gl.viewport.height),f=ke.withScale(new Q(1,-1)).times(ke.betweenRects(new Ne(Q.zero,l),Ne.NDC)).transformRect(s),d=ke.betweenRects(Ne.NDC,f),p=Q.unit.dividedByPointwise(new Q(e.rectInfoTexture.width,e.rectInfoTexture.height));this.material.setUniformSampler("colorTexture",e.rectInfoTexture,0),Di(this.material,"uvTransform",o),this.material.setUniformFloat("renderOutlines",e.renderOutlines?1:0),this.material.setUniformVec2("uvSpacePixelSize",p.x,p.y),Di(this.material,"positionTransform",d),this.gl.setUnpremultipliedBlendState(),this.gl.draw(Ze.Primitive.TRIANGLE_STRIP,this.material,this.buffer)}}class oS{constructor(e,n){this.animationFrameRequest=null,this.beforeFrameHandlers=new Set,this.onBeforeFrame=()=>{this.animationFrameRequest=null,this.gl.setViewport(0,0,this.gl.renderTargetWidthInPixels,this.gl.renderTargetHeightInPixels);const r=or.fromCSSHex(this.theme.bgPrimaryColor);this.gl.clear(new Ze.Color(r.r,r.g,r.b,r.a));for(const i of this.beforeFrameHandlers)i()},this.gl=new _u.Context(e),this.rectangleBatchRenderer=new jT(this.gl),this.textureRenderer=new QT(this.gl),this.viewportRectangleRenderer=new nS(this.gl,n),this.flamechartColorPassRenderer=new aS(this.gl,n),this.theme=n,this.gl.addAfterResizeEventHandler(this.onBeforeFrame),this.gl.getWebGLInfo(),window.testContextLoss=()=>{this.gl.testContextLoss()}}addBeforeFrameHandler(e){this.beforeFrameHandlers.add(e)}removeBeforeFrameHandler(e){this.beforeFrameHandlers.delete(e)}requestFrame(){this.animationFrameRequest||(this.animationFrameRequest=requestAnimationFrame(this.onBeforeFrame))}setViewport(e,n){const{origin:r,size:i}=e;let a=this.gl.viewport;this.gl.setViewport(r.x,r.y,i.x,i.y),n();let{x:o,y:s,width:l,height:u}=a;this.gl.setViewport(o,s,l,u)}renderBehind(e,n){const r=e.getBoundingClientRect(),i=new Ne(new Q(r.left*window.devicePixelRatio,r.top*window.devicePixelRatio),new Q(r.width*window.devicePixelRatio,r.height*window.devicePixelRatio));this.setViewport(i,n)}}const no=ml(t=>e=>t.get(e.key)||0),ro=ar(({theme:t,frameToColorBucket:e})=>{const n=no(e);return r=>{const i=n(r)/255;return t.colorForBucket(i).toCSS()}}),io=ar(({theme:t,canvas:e})=>new oS(e,t)),sS=ml(t=>new JT(t.gl,t.rectangleBatchRenderer,t.textureRenderer)),lS=ar(({profile:t,flattenRecursion:e})=>e?t.getProfileWithRecursionFlattened():t),ao=ml(t=>{const e=[];t.forEachFrame(a=>e.push(a));function n(a){return(a.file||"")+a.name}function r(a,o){return n(a)>n(o)?1:-1}e.sort(r);const i=new Map;for(let a=0;a<e.length;a++)i.set(e[a].key,Math.floor(255*a/e.length));return i});function Nv(){const t=Ke(Pa),e=Ke(an);if(!e||e.indexToView>=e.profiles.length)return null;const n=e.indexToView,r=e.profiles[n];return{...e.profiles[e.indexToView],profile:lS({profile:r.profile,flattenRecursion:t}),index:e.indexToView}}var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function En(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Lo={exports:{}},Io={exports:{}},Dg;function qi(){return Dg||(Dg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=/-webkit-|-moz-|-ms-/;function r(i){return typeof i=="string"&&n.test(i)}t.exports=e.default}(Io,Io.exports)),Io.exports}var Lg;function cS(){return Lg||(Lg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=qi(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-","-moz-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("calc(")>-1)return a.map(function(u){return l.replace(/calc\(/g,u+"calc(")})}t.exports=e.default}(Lo,Lo.exports)),Lo.exports}var uS=cS();const fS=cn(uS);var Po={exports:{}},Ig;function hS(){return Ig||(Ig=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=qi(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("cross-fade(")>-1)return a.map(function(u){return l.replace(/cross-fade\(/g,u+"cross-fade(")})}t.exports=e.default}(Po,Po.exports)),Po.exports}var dS=hS();const gS=cn(dS);var ko={exports:{}},Pg;function mS(){return Pg||(Pg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function i(a,o){if(a==="cursor"&&r.hasOwnProperty(o))return n.map(function(s){return s+o})}t.exports=e.default}(ko,ko.exports)),ko.exports}var pS=mS();const vS=cn(pS);var Bo={exports:{}},kg;function bS(){return kg||(kg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=qi(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("filter(")>-1)return a.map(function(u){return l.replace(/filter\(/g,u+"filter(")})}t.exports=e.default}(Bo,Bo.exports)),Bo.exports}var _S=bS();const yS=cn(_S);var Fo={exports:{}},Bg;function wS(){return Bg||(Bg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function r(i,a){if(i==="display"&&n.hasOwnProperty(a))return n[a]}t.exports=e.default}(Fo,Fo.exports)),Fo.exports}var xS=wS();const TS=cn(xS);var Vo={exports:{}},Fg;function SS(){return Fg||(Fg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},r={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};function i(a,o,s){r.hasOwnProperty(a)&&(s[r[a]]=n[o]||o)}t.exports=e.default}(Vo,Vo.exports)),Vo.exports}var ES=SS();const AS=cn(ES);var Wo={exports:{}},Vg;function CS(){return Vg||(Vg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};function i(a,o,s){a==="flexDirection"&&typeof o=="string"&&(o.indexOf("column")>-1?s.WebkitBoxOrient="vertical":s.WebkitBoxOrient="horizontal",o.indexOf("reverse")>-1?s.WebkitBoxDirection="reverse":s.WebkitBoxDirection="normal"),r.hasOwnProperty(a)&&(s[r[a]]=n[o]||o)}t.exports=e.default}(Wo,Wo.exports)),Wo.exports}var RS=CS();const MS=cn(RS);var $o={exports:{}},Wg;function NS(){return Wg||(Wg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=qi(),r=i(n);function i(l){return l&&l.__esModule?l:{default:l}}var a=["-webkit-","-moz-",""],o=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;function s(l,u){if(typeof u=="string"&&!(0,r.default)(u)&&o.test(u))return a.map(function(f){return u.replace(o,function(d){return f+d})})}t.exports=e.default}($o,$o.exports)),$o.exports}var OS=NS();const DS=cn(OS);var zo={exports:{}},$g;function LS(){return $g||($g=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=qi(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("image-set(")>-1)return a.map(function(u){return l.replace(/image-set\(/g,u+"image-set(")})}t.exports=e.default}(zo,zo.exports)),zo.exports}var IS=LS();const PS=cn(IS);var Ho={exports:{}},zg;function kS(){return zg||(zg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(r==="position"&&i==="sticky")return["-webkit-sticky","sticky"]}t.exports=e.default}(Ho,Ho.exports)),Ho.exports}var BS=kS();const FS=cn(BS);var Uo={exports:{}},Hg;function VS(){return Hg||(Hg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function a(o,s){if(r.hasOwnProperty(o)&&i.hasOwnProperty(s))return n.map(function(l){return l+s})}t.exports=e.default}(Uo,Uo.exports)),Uo.exports}var WS=VS();const $S=cn(WS);var Yo={exports:{}},Xo={exports:{}},zS=/[A-Z]/g,HS=/^ms-/,Dc={};function US(t){return"-"+t.toLowerCase()}function YS(t){if(Dc.hasOwnProperty(t))return Dc[t];var e=t.replace(zS,US);return Dc[t]=HS.test(e)?"-"+e:e}const XS=Object.freeze(Object.defineProperty({__proto__:null,default:YS},Symbol.toStringTag,{value:"Module"})),GS=En(XS);var Ug;function qS(){return Ug||(Ug=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=GS,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function a(o){return(0,r.default)(o)}t.exports=e.default}(Xo,Xo.exports)),Xo.exports}var Go={exports:{}},Yg;function Ov(){return Yg||(Yg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return r.charAt(0).toUpperCase()+r.slice(1)}t.exports=e.default}(Go,Go.exports)),Go.exports}var Xg;function jS(){return Xg||(Xg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var n=qS(),r=l(n),i=qi(),a=l(i),o=Ov(),s=l(o);function l(x){return x&&x.__esModule?x:{default:x}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},f={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function d(x,R){if((0,a.default)(x))return x;for(var O=x.split(/,(?![^()]*(?:\([^()]*\))?\))/g),A=0,P=O.length;A<P;++A){var S=O[A],D=[S];for(var N in R){var k=(0,r.default)(N);if(S.indexOf(k)>-1&&k!=="order")for(var W=R[N],Y=0,X=W.length;Y<X;++Y)D.unshift(S.replace(k,f[W[Y]]+k))}O[A]=D.join(",")}return O.join(",")}function p(x,R,O,A){if(typeof R=="string"&&u.hasOwnProperty(x)){var P=d(R,A),S=P.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(N){return!/-moz-|-ms-/.test(N)}).join(",");if(x.indexOf("Webkit")>-1)return S;var D=P.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(N){return!/-webkit-|-ms-/.test(N)}).join(",");return x.indexOf("Moz")>-1?D:(O["Webkit"+(0,s.default)(x)]=S,O["Moz"+(0,s.default)(x)]=D,P)}}t.exports=e.default}(Yo,Yo.exports)),Yo.exports}var JS=jS();const KS=cn(JS);var Lc,Gg;function ZS(){if(Gg)return Lc;Gg=1;function t(e){for(var n=5381,r=e.length;r;)n=n*33^e.charCodeAt(--r);return n>>>0}return Lc=t,Lc}var QS=ZS();const eE=cn(QS);var qo={exports:{}},jo={exports:{}},qg;function tE(){return qg||(qg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=Ov(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,s,l){if(o.hasOwnProperty(s)){for(var u={},f=o[s],d=(0,r.default)(s),p=Object.keys(l),x=0;x<p.length;x++){var R=p[x];if(R===s)for(var O=0;O<f.length;O++)u[f[O]+d]=l[s];u[R]=l[R]}return u}return l}t.exports=e.default}(jo,jo.exports)),jo.exports}var Jo={exports:{}},jg;function nE(){return jg||(jg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i,a,o,s){for(var l=0,u=r.length;l<u;++l){var f=r[l](i,a,o,s);if(f)return f}}t.exports=e.default}(Jo,Jo.exports)),Jo.exports}var Ko={exports:{}},Jg;function rE(){return Jg||(Jg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function n(i,a){i.indexOf(a)===-1&&i.push(a)}function r(i,a){if(Array.isArray(a))for(var o=0,s=a.length;o<s;++o)n(i,a[o]);else n(i,a)}t.exports=e.default}(Ko,Ko.exports)),Ko.exports}var Zo={exports:{}},Kg;function iE(){return Kg||(Kg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return r instanceof Object&&!Array.isArray(r)}t.exports=e.default}(Zo,Zo.exports)),Zo.exports}var Zg;function aE(){return Zg||(Zg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var n=tE(),r=f(n),i=nE(),a=f(i),o=rE(),s=f(o),l=iE(),u=f(l);function f(p){return p&&p.__esModule?p:{default:p}}function d(p){var x=p.prefixMap,R=p.plugins;function O(A){for(var P in A){var S=A[P];if((0,u.default)(S))A[P]=O(S);else if(Array.isArray(S)){for(var D=[],N=0,k=S.length;N<k;++N){var W=(0,a.default)(R,P,S[N],A,x);(0,s.default)(D,W||S[N])}D.length>0&&(A[P]=D)}else{var Y=(0,a.default)(R,P,S,A,x);Y&&(A[P]=Y),A=(0,r.default)(x,P,A)}}return A}return O}t.exports=e.default}(qo,qo.exports)),qo.exports}var oE=aE();const sE=cn(oE);var Ic,Qg;function lE(){if(Qg)return Ic;Qg=1,Ic=t;function t(f){e.length||n(),e[e.length]=f}var e=[],n,r=0,i=1024;function a(){for(;r<e.length;){var f=r;if(r=r+1,e[f].call(),r>i){for(var d=0,p=e.length-r;d<p;d++)e[d]=e[d+r];e.length-=r,r=0}}e.length=0,r=0}var o=typeof Og<"u"?Og:self,s=o.MutationObserver||o.WebKitMutationObserver;typeof s=="function"?n=l(a):n=u(a),t.requestFlush=n;function l(f){var d=1,p=new s(f),x=document.createTextNode("");return p.observe(x,{characterData:!0}),function(){d=-d,x.data=d}}function u(f){return function(){var p=setTimeout(R,0),x=setInterval(R,50);function R(){clearTimeout(p),clearInterval(x),f()}}}return t.makeRequestCallFromTimer=u,Ic}var Pc,em;function cE(){if(em)return Pc;em=1;var t=lE(),e=[],n=[],r=t.makeRequestCallFromTimer(i);function i(){if(n.length)throw n.shift()}Pc=a;function a(s){var l;e.length?l=e.pop():l=new o,l.task=s,t(l)}function o(){this.task=null}return o.prototype.call=function(){try{this.task.call()}catch(s){a.onerror?a.onerror(s):(n.push(s),r())}finally{this.task=null,e[e.length]=this}},Pc}var uE=cE();const fE=cn(uE);var xe=["Webkit"],kc=["Moz"],pt=["ms"],jt=["Webkit","Moz"],Ot=["Webkit","ms"],ma=["Webkit","Moz","ms"],hE={plugins:[fS,gS,vS,yS,TS,AS,MS,DS,PS,FS,$S,KS],prefixMap:{transform:Ot,transformOrigin:Ot,transformOriginX:Ot,transformOriginY:Ot,backfaceVisibility:xe,perspective:xe,perspectiveOrigin:xe,transformStyle:xe,transformOriginZ:xe,animation:xe,animationDelay:xe,animationDirection:xe,animationFillMode:xe,animationDuration:xe,animationIterationCount:xe,animationName:xe,animationPlayState:xe,animationTimingFunction:xe,appearance:jt,userSelect:ma,fontKerning:xe,textEmphasisPosition:xe,textEmphasis:xe,textEmphasisStyle:xe,textEmphasisColor:xe,boxDecorationBreak:xe,clipPath:xe,maskImage:xe,maskMode:xe,maskRepeat:xe,maskPosition:xe,maskClip:xe,maskOrigin:xe,maskSize:xe,maskComposite:xe,mask:xe,maskBorderSource:xe,maskBorderMode:xe,maskBorderSlice:xe,maskBorderWidth:xe,maskBorderOutset:xe,maskBorderRepeat:xe,maskBorder:xe,maskType:xe,textDecorationStyle:jt,textDecorationSkip:jt,textDecorationLine:jt,textDecorationColor:jt,filter:xe,fontFeatureSettings:jt,breakAfter:ma,breakBefore:ma,breakInside:ma,columnCount:jt,columnFill:jt,columnGap:jt,columnRule:jt,columnRuleColor:jt,columnRuleStyle:jt,columnRuleWidth:jt,columns:jt,columnSpan:jt,columnWidth:jt,writingMode:Ot,flex:Ot,flexBasis:xe,flexDirection:Ot,flexGrow:xe,flexFlow:Ot,flexShrink:xe,flexWrap:Ot,alignContent:xe,alignItems:xe,alignSelf:xe,justifyContent:xe,order:xe,transitionDelay:xe,transitionDuration:xe,transitionProperty:xe,transitionTimingFunction:xe,backdropFilter:xe,scrollSnapType:Ot,scrollSnapPointsX:Ot,scrollSnapPointsY:Ot,scrollSnapDestination:Ot,scrollSnapCoordinate:Ot,shapeImageThreshold:xe,shapeImageMargin:xe,shapeImageOutside:xe,hyphens:ma,flowInto:Ot,flowFrom:Ot,regionFragment:Ot,boxSizing:kc,textAlignLast:kc,tabSize:kc,wrapFlow:pt,wrapThrough:pt,wrapMargin:pt,touchAction:pt,gridTemplateColumns:pt,gridTemplateRows:pt,gridTemplateAreas:pt,gridTemplate:pt,gridAutoColumns:pt,gridAutoRows:pt,gridAutoFlow:pt,grid:pt,gridRowStart:pt,gridColumnStart:pt,gridRowEnd:pt,gridRow:pt,gridColumn:pt,gridColumnEnd:pt,gridColumnGap:pt,gridRowGap:pt,gridArea:pt,gridGap:pt,textSizeAdjust:Ot,borderImage:xe,borderImageOutset:xe,borderImageRepeat:xe,borderImageSlice:xe,borderImageSource:xe,borderImageWidth:xe}},dE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gE=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function mE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var tm=typeof Map<"u",xu=function(){function t(){mE(this,t),this.elements={},this.keyOrder=[]}return gE(t,[{key:"forEach",value:function(){function e(n){for(var r=0;r<this.keyOrder.length;r++)n(this.elements[this.keyOrder[r]],this.keyOrder[r])}return e}()},{key:"set",value:function(){function e(n,r,i){if(!this.elements.hasOwnProperty(n))this.keyOrder.push(n);else if(i){var a=this.keyOrder.indexOf(n);this.keyOrder.splice(a,1),this.keyOrder.push(n)}if(r==null){this.elements[n]=r;return}if(tm&&r instanceof Map||r instanceof t){var o=this.elements.hasOwnProperty(n)?this.elements[n]:new t;r.forEach(function(f,d){o.set(d,f,i)}),this.elements[n]=o;return}if(!Array.isArray(r)&&(typeof r>"u"?"undefined":dE(r))==="object"){for(var s=this.elements.hasOwnProperty(n)?this.elements[n]:new t,l=Object.keys(r),u=0;u<l.length;u+=1)s.set(l[u],r[l[u]],i);this.elements[n]=s;return}this.elements[n]=r}return e}()},{key:"get",value:function(){function e(n){return this.elements[n]}return e}()},{key:"has",value:function(){function e(n){return this.elements.hasOwnProperty(n)}return e}()},{key:"addStyleType",value:function(){function e(n){var r=this;if(tm&&n instanceof Map||n instanceof t)n.forEach(function(o,s){r.set(s,o,!0)});else for(var i=Object.keys(n),a=0;a<i.length;a++)this.set(i[a],n[i[a]],!0)}return e}()}]),t}(),pE=/([A-Z])/g,vE=function(e){return"-"+String(e.toLowerCase())},bE=function(e){var n=e.replace(pE,vE);return n[0]==="m"&&n[1]==="s"&&n[2]==="-"?"-"+String(n):n},vs={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function _E(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var yE=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(t){yE.forEach(function(e){vs[_E(e,t)]=vs[t]})});var Dv=function(e,n){return typeof n=="number"?vs[e]?""+n:n+"px":""+n},wE=function(e,n){return TE(Dv(e,n))},oo=function(e,n){return eE(e).toString(36)},xE=function(e){return oo(JSON.stringify(e))},TE=function(e){return e[e.length-10]==="!"&&e.slice(-11)===" !important"?e:String(e)+" !important"};function SE(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var EE=sE(hE),AE=[function(){function t(e,n,r){return e[0]!==":"?null:r(n+e)}return t}(),function(){function t(e,n,r){if(e[0]!=="@")return null;var i=r(n);return[String(e)+"{"+String(i.join(""))+"}"]}return t}()],Tu=function t(e,n,r,i,a){for(var o=new xu,s=0;s<n.length;s++)o.addStyleType(n[s]);var l=new xu,u=[];o.forEach(function(d,p){var x=r.some(function(R){var O=R(p,e,function(A){return t(A,[d],r,i,a)});if(O!=null)return Array.isArray(O)?u.push.apply(u,SE(O)):u.push("@media all {"+String(O)+"}"),!0});x||l.set(p,d,!0)});var f=ME(e,l,i,a,r);return f&&u.unshift(f),u},CE=function(e,n,r){if(n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];e.has(o)&&e.set(o,n[o](e.get(o),r),!1)}},nm=function(e,n,r){return String(bE(e))+":"+String(r(e,n))+";"},RE=function(e,n){return e[n]=!0,e},ME=function(e,n,r,i,a){CE(n,r,a);var o=Object.keys(n.elements).reduce(RE,Object.create(null)),s=EE(n.elements),l=Object.keys(s);if(l.length!==n.keyOrder.length){for(var u=0;u<l.length;u++)if(!o[l[u]]){var f=void 0;if(l[u][0]==="W"?f=l[u][6].toLowerCase()+l[u].slice(7):l[u][1]==="o"?f=l[u][3].toLowerCase()+l[u].slice(4):f=l[u][2].toLowerCase()+l[u].slice(3),f&&o[f]){var d=n.keyOrder.indexOf(f);n.keyOrder.splice(d,0,l[u])}else n.keyOrder.unshift(l[u])}}for(var p=i===!1?Dv:wE,x=[],R=0;R<n.keyOrder.length;R++){var O=n.keyOrder[R],A=s[O];if(Array.isArray(A))for(var P=0;P<A.length;P++)x.push(nm(O,A[P],p));else x.push(nm(O,A,p))}return x.length?String(e)+"{"+String(x.join(""))+"}":""},rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function NE(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var On=null,OE=function(e){if(On==null&&(On=document.querySelector("style[data-aphrodite]"),On==null)){var n=document.head||document.getElementsByTagName("head")[0];On=document.createElement("style"),On.type="text/css",On.setAttribute("data-aphrodite",""),n.appendChild(On)}var r=On.styleSheet||On.sheet;if(r.insertRule){var i=r.cssRules.length;e.forEach(function(a){try{r.insertRule(a,i),i+=1}catch{}})}else On.innerText=(On.innerText||"")+e.join("")},Su={fontFamily:function(){function t(e){return Array.isArray(e)?e.map(t).join(","):(typeof e>"u"?"undefined":rm(e))==="object"?(Iv(e.src,"@font-face",[e],!1),'"'+String(e.fontFamily)+'"'):e}return t}(),animationName:function(){function t(e,n){if(Array.isArray(e))return e.map(function(a){return t(a,n)}).join(",");if((typeof e>"u"?"undefined":rm(e))==="object"){var r="keyframe_"+String(xE(e)),i="@keyframes "+r+"{";return e instanceof xu?e.forEach(function(a,o){i+=Tu(o,[a],n,Su,!1).join("")}):Object.keys(e).forEach(function(a){i+=Tu(a,[e[a]],n,Su,!1).join("")}),i+="}",Lv(r,[i]),r}else return e}return t}()},Li={},Hs=[],Ii=!1,Lv=function(e,n){var r;if(!Li[e]){if(!Ii){if(typeof document>"u")throw new Error("Cannot automatically buffer without a document");Ii=!0,fE(PE)}(r=Hs).push.apply(r,NE(n)),Li[e]=!0}},Iv=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[];if(!Li[e]){var o=Tu(n,r,a,Su,i);Lv(e,o)}},DE=function(){Hs=[],Li={},Ii=!1,On=null},LE=function(){if(Ii)throw new Error("Cannot buffer while already buffering");Ii=!0},Pv=function(){Ii=!1;var e=Hs;return Hs=[],e},IE=function(){return Pv().join("")},PE=function(){var e=Pv();e.length>0&&OE(e)},kE=function(){return Object.keys(Li)},BE=function(e){e.forEach(function(n){Li[n]=!0})},FE=function t(e,n,r,i){for(var a=0;a<e.length;a+=1)e[a]&&(Array.isArray(e[a])?i+=t(e[a],n,r,i):(n.push(e[a]._name),r.push(e[a]._definition),i+=e[a]._len));return i},VE=function(e,n,r){var i=[],a=[],o=FE(n,i,a,0);if(i.length===0)return"";var s=void 0;return s=i.length===1?"_"+String(i[0]):"_"+String(oo(i.join()))+String((o%36).toString(36)),Iv(s,"."+String(s),a,e,r),s},WE=function(e,n){return String(n)+"_"+String(oo(e))},$E=function(){return oo},kv=$E(),zE={create:function(){function t(e){for(var n={},r=Object.keys(e),i=0;i<r.length;i+=1){var a=r[i],o=e[a],s=JSON.stringify(o);n[a]={_len:s.length,_name:kv(s,a),_definition:o}}return n}return t}(),rehydrate:function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];BE(e)}return t}()},HE=typeof window<"u"?null:{renderStatic:function(){function t(e){DE(),LE();var n=e(),r=IE();return{html:n,css:{content:r,renderedClassNames:kE()}}}return t}()},UE=null;function Bv(t,e){return{StyleSheet:Object.assign({},zE,{extend:function(){function n(r){var i=r.map(function(a){return a.selectorHandler}).filter(function(a){return a});return Bv(t,e.concat(i))}return n}()}),StyleSheetServer:HE,StyleSheetTestUtils:UE,minify:function(){function n(r){kv=r?oo:WE}return n}(),css:function(){function n(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return VE(t,i,e)}return n}()}}var YE=!0,so=Bv(YE,AE),zn=so.StyleSheet;so.StyleSheetServer;so.StyleSheetTestUtils;var se=so.css;so.minify;var ji=(t=>(t.MONOSPACE='"Source Code Pro", Courier, monospace',t))(ji||{}),Rt=(t=>(t[t.LABEL=10]="LABEL",t[t.TITLE=12]="TITLE",t[t.BIG_BUTTON=36]="BIG_BUTTON",t))(Rt||{}),ze=(t=>(t[t.MINIMAP_HEIGHT=100]="MINIMAP_HEIGHT",t[t.DETAIL_VIEW_HEIGHT=150]="DETAIL_VIEW_HEIGHT",t[t.TOOLTIP_WIDTH_MAX=900]="TOOLTIP_WIDTH_MAX",t[t.TOOLTIP_HEIGHT_MAX=80]="TOOLTIP_HEIGHT_MAX",t[t.SEPARATOR_HEIGHT=2]="SEPARATOR_HEIGHT",t[t.FRAME_HEIGHT=20]="FRAME_HEIGHT",t[t.TOOLBAR_HEIGHT=26]="TOOLBAR_HEIGHT",t[t.TOOLBAR_TAB_HEIGHT=18]="TOOLBAR_TAB_HEIGHT",t[t.TIMESTAMP_INDICATOR_WIDTH=3]="TIMESTAMP_INDICATOR_WIDTH",t))(ze||{}),Us=(t=>(t.HOVER_CHANGE="0.07s",t))(Us||{}),ff=(t=>(t[t.PROFILE_SELECT=1]="PROFILE_SELECT",t[t.HOVERTIP=2]="HOVERTIP",t))(ff||{});const Tn=zn.create({fillY:{height:"100%"},fillX:{width:"100%"},hbox:{display:"flex",flexDirection:"row",position:"relative",overflow:"hidden"},vbox:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}});function XE(t,e){const n=t.toLocaleLowerCase(),r=e.toLocaleLowerCase();let i=0;const a=[];for(;;){let o=n.indexOf(r,i);if(o===-1)return a;a.push([o,o+e.length]),i=o+e.length}}class GE{constructor(e,n){this.profile=e,this.searchQuery=n,this.matches=null}getMatchForFrame(e){return this.matches||(this.matches=new Map,this.profile.forEachFrame(n=>{const r=XE(n.name,this.searchQuery);this.matches.set(n,r.length===0?null:r)})),this.matches.get(e)||null}}class qE{constructor(e,n){this.flamechart=e,this.profileResults=n,this.matches=null}getResults(){if(this.matches==null){const e=[],n=new Map,r=(a,o)=>{const{node:s}=a;if(this.profileResults.getMatchForFrame(s.frame)){const l=new Ne(new Q(a.start,o),new Q(a.end-a.start,1));n.set(s,e.length),e.push({configSpaceBounds:l,node:s})}a.children.forEach(l=>{r(l,o+1)})},i=this.flamechart.getLayers();i.length>0&&i[0].forEach(a=>r(a,0)),this.matches={matches:e,indexForNode:n}}return this.matches}count(){return this.getResults().matches.length}indexOf(e){const n=this.getResults().indexForNode.get(e);return n===void 0?null:n}at(e){const n=this.getResults().matches;if(e<0||e>=n.length)throw new Error(`Index ${e} out of bounds in list of ${n.length} matches.`);return n[e]}}function im(t){t.stopPropagation()}const yl=gl(null),jE=({children:t})=>{const e=Nv(),n=e?e.profile:null,r=Ke(Rs),i=Ke(Ms),a=It(()=>!n||!r||i.length===0?null:new GE(n,i),[r,i,n]);return C(yl.Provider,{value:a,children:t})},Fv=_t(({numResults:t,resultIndex:e,selectNext:n,selectPrev:r})=>{const i=dt(),a=JE(i),o=Ke(Rs),s=Ke(Ms),l=Ms.set,u=Rs.set,f=Qe(O=>{const A=O.target.value;l(A)},[l]),d=Te(null),p=Qe(()=>u(!1),[u]),x=Qe(O=>{O.shiftKey?r():n()},[r,n]),R=Qe(O=>{O.stopPropagation(),O.key==="Escape"&&u(!1),O.key==="Enter"&&x(O),O.key=="f"&&(O.metaKey||O.ctrlKey)&&(d.current&&d.current.select(),O.preventDefault())},[u,x]);return Mt(()=>{const O=A=>{A.key=="f"&&(A.metaKey||A.ctrlKey)&&(A.preventDefault(),d.current?d.current.select():(u(!0),requestAnimationFrame(()=>{d.current&&d.current.select()})))};return window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)}},[u]),o?C("div",{className:se(a.searchView),children:[C("span",{className:se(a.icon),children:"🔍"}),C("span",{className:se(a.inputContainer),children:C("input",{className:se(a.input),value:s,onInput:f,onKeyDown:R,onKeyUp:im,onKeyPress:im,ref:d})}),t!=null&&C(St,{children:[C("span",{className:se(a.resultCount),children:[e==null?"?":e+1,"/",t]}),C("button",{className:se(a.icon,a.button),onClick:r,children:"⬅️"}),C("button",{className:se(a.icon,a.button),onClick:n,children:"➡️"})]}),C("svg",{className:se(a.icon),onClick:p,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M4.99999 4.16217L11.6427 10.8048M11.6427 4.16217L4.99999 10.8048",stroke:i.altFgSecondaryColor})})]}):null}),JE=sr(t=>zn.create({searchView:{position:"absolute",top:0,right:10,height:ze.TOOLBAR_HEIGHT,width:16*13,borderWidth:2,borderColor:t.altFgPrimaryColor,borderStyle:"solid",fontSize:Rt.LABEL,boxSizing:"border-box",background:t.altBgSecondaryColor,color:t.altFgPrimaryColor,display:"flex",alignItems:"center"},inputContainer:{flexShrink:1,flexGrow:1,display:"flex"},input:{width:"100%",border:"none",background:"none",fontSize:Rt.LABEL,lineHeight:`${ze.TOOLBAR_HEIGHT}px`,color:t.altFgPrimaryColor,":focus":{border:"none",outline:"none"},"::selection":{color:t.altFgPrimaryColor,background:t.selectionPrimaryColor}},resultCount:{verticalAlign:"middle"},icon:{flexShrink:0,verticalAlign:"middle",height:"100%",margin:"0px 2px 0px 2px",fontSize:Rt.LABEL},button:{display:"inline",background:"none",border:"none",padding:0,":focus":{outline:"none"}}})),KE="modulepreload",ZE=function(t,e){return new URL(t,e).href},am={},lo=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(f=>{if(f=ZE(f,r),f in am)return;am[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!r)for(let O=s.length-1;O>=0;O--){const A=s[O];if(A.href===f&&(!d||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${p}`))return;const R=document.createElement("link");if(R.rel=d?"stylesheet":KE,d||(R.as="script"),R.crossOrigin="",R.href=f,u&&R.setAttribute("nonce",u),document.head.appendChild(R),d)return new Promise((O,A)=>{R.addEventListener("load",O),R.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};class hf{constructor(){this.unit="none"}format(e){return e.toLocaleString()}}class QE{constructor(e){this.unit=e,e==="nanoseconds"?this.multiplier=1e-9:e==="microseconds"?this.multiplier=1e-6:e==="milliseconds"?this.multiplier=.001:this.multiplier=1}formatUnsigned(e){const n=e*this.multiplier;if(n/60>=1){const r=Math.floor(n/60),i=Math.floor(n-r*60).toString();return`${r}:${Px(i,2)}`}return n/1>=1?`${n.toFixed(2)}s`:n/.001>=1?`${(n/.001).toFixed(2)}ms`:n/1e-6>=1?`${(n/1e-6).toFixed(2)}µs`:`${(n/1e-9).toFixed(2)}ns`}format(e){return`${e<0?"-":""}${this.formatUnsigned(Math.abs(e))}`}}class e2{constructor(){this.unit="bytes"}format(e){return e<1024?`${e.toFixed(0)} B`:(e/=1024,e<1024?`${e.toFixed(2)} KB`:(e/=1024,e<1024?`${e.toFixed(2)} MB`:(e/=1024,`${e.toFixed(2)} GB`)))}}class Vv{constructor(){this.selfWeight=0,this.totalWeight=0}getSelfWeight(){return this.selfWeight}getTotalWeight(){return this.totalWeight}addToTotalWeight(e){this.totalWeight+=e}addToSelfWeight(e){this.selfWeight+=e}overwriteWeightWith(e){this.selfWeight=e.selfWeight,this.totalWeight=e.totalWeight}}const Da=class Da extends Vv{constructor(e){super(),this.key=e.key,this.name=e.name,this.file=e.file,this.line=e.line,this.col=e.col,this.args=e.args}static getOrInsert(e,n){return e.getOrInsert(new Da(n))}};Da.root=new Da({key:"(speedscope root)",name:"(speedscope root)"});let Qt=Da;class Ys extends Vv{constructor(e,n){super(),this.frame=e,this.parent=n,this.children=[],this.frozen=!1}isRoot(){return this.frame===Qt.root}isFrozen(){return this.frozen}freeze(){this.frozen=!0}}class wl{constructor(e=0){this.name="",this.frames=new ov,this.appendOrderCalltreeRoot=new Ys(Qt.root,null),this.groupedCalltreeRoot=new Ys(Qt.root,null),this.samples=[],this.weights=[],this.valueFormatter=new hf,this.totalNonIdleWeight=null,this.totalWeight=e}getAppendOrderCalltreeRoot(){return this.appendOrderCalltreeRoot}getGroupedCalltreeRoot(){return this.groupedCalltreeRoot}shallowClone(){const e=new wl(this.totalWeight);return Object.assign(e,this),e}formatValue(e){return this.valueFormatter.format(e)}setValueFormatter(e){this.valueFormatter=e}getWeightUnit(){return this.valueFormatter.unit}getName(){return this.name}setName(e){this.name=e}getTotalWeight(){return this.totalWeight}getTotalNonIdleWeight(){return this.totalNonIdleWeight===null&&(this.totalNonIdleWeight=this.groupedCalltreeRoot.children.reduce((e,n)=>e+n.getTotalWeight(),0)),this.totalNonIdleWeight}sortGroupedCallTree(){function e(n){n.children.sort((r,i)=>-(r.getTotalWeight()-i.getTotalWeight())),n.children.forEach(e)}e(this.groupedCalltreeRoot)}forEachCallGrouped(e,n){function r(i,a){i.frame!==Qt.root&&e(i,a);let o=0;i.children.forEach(function(s){r(s,a+o),o+=s.getTotalWeight()}),i.frame!==Qt.root&&n(i,a+i.getTotalWeight())}r(this.groupedCalltreeRoot,0)}forEachCall(e,n){let r=[],i=0,a=0;for(let o of this.samples){let s=null;for(s=o;s&&s.frame!=Qt.root&&r.indexOf(s)===-1;s=s.parent);for(;r.length>0&&Ir(r)!=s;){const u=r.pop();n(u,i)}const l=[];for(let u=o;u&&u.frame!=Qt.root&&u!=s;u=u.parent)l.push(u);l.reverse();for(let u of l)e(u,i);r=r.concat(l),i+=this.weights[a++]}for(let o=r.length-1;o>=0;o--)n(r[o],i)}forEachFrame(e){this.frames.forEach(e)}getProfileWithRecursionFlattened(){const e=new df,n=[],r=new Set;function i(s,l){r.has(s.frame)?n.push(null):(r.add(s.frame),n.push(s),e.enterFrame(s.frame,l))}function a(s,l){const u=n.pop();u&&(r.delete(u.frame),e.leaveFrame(u.frame,l))}this.forEachCall(i,a);const o=e.build();return o.name=this.name,o.valueFormatter=this.valueFormatter,this.forEachFrame(s=>{o.frames.getOrInsert(s).overwriteWeightWith(s)}),o}getInvertedProfileForCallersOf(e){const n=Qt.getOrInsert(this.frames,e),r=new Eu,i=[];function a(s){if(s.frame===n)i.push(s);else for(let l of s.children)a(l)}a(this.appendOrderCalltreeRoot);for(let s of i){const l=[];for(let u=s;u!=null&&u.frame!==Qt.root;u=u.parent)l.push(u.frame);r.appendSampleWithWeight(l,s.getTotalWeight())}const o=r.build();return o.name=this.name,o.valueFormatter=this.valueFormatter,o}getProfileForCalleesOf(e){const n=Qt.getOrInsert(this.frames,e),r=new Eu;function i(s){const l=[];function u(f){l.push(f.frame),r.appendSampleWithWeight(l,f.getSelfWeight());for(let d of f.children)u(d);l.pop()}u(s)}function a(s){if(s.frame===n)i(s);else for(let l of s.children)a(l)}a(this.appendOrderCalltreeRoot);const o=r.build();return o.name=this.name,o.valueFormatter=this.valueFormatter,o}async demangle(){let e=null;for(let n of this.frames)(n.name.startsWith("__Z")||n.name.startsWith("_R")||n.name.startsWith("_Z"))&&(e||(e=await(await lo(()=>import("./index-DA4yW5Kz.js"),[],import.meta.url)).loadDemangling()),n.name=e(n.name))}remapSymbols(e){for(let n of this.frames){const r=e(n);if(r==null)continue;const{name:i,file:a,line:o,col:s}=r;i!=null&&(n.name=i),a!=null&&(n.file=a),o!=null&&(n.line=o),s!=null&&(n.col=s)}}}class Eu extends wl{constructor(){super(...arguments),this.pendingSample=null}_appendSample(e,n,r){if(isNaN(n))throw new Error("invalid weight");let i=r?this.appendOrderCalltreeRoot:this.groupedCalltreeRoot,a=new Set;for(let o of e){const s=r?Ir(i.children):i.children.find(l=>l.frame===o);if(s&&!s.isFrozen()&&s.frame==o)i=s;else{const l=i;i=new Ys(o,i),l.children.push(i)}i.addToTotalWeight(n),a.add(i.frame)}if(i.addToSelfWeight(n),r)for(let o of i.children)o.freeze();if(r){i.frame.addToSelfWeight(n);for(let o of a)o.addToTotalWeight(n);i===Ir(this.samples)?this.weights[this.weights.length-1]+=n:(this.samples.push(i),this.weights.push(n))}}appendSampleWithWeight(e,n){if(n===0)return;if(n<0)throw new Error("Samples must have positive weights");const r=e.map(i=>Qt.getOrInsert(this.frames,i));this._appendSample(r,n,!0),this._appendSample(r,n,!1)}appendSampleWithTimestamp(e,n){if(this.pendingSample){if(n<this.pendingSample.centralTimestamp)throw new Error("Timestamps received out of order");const r=(n+this.pendingSample.centralTimestamp)/2;this.appendSampleWithWeight(this.pendingSample.stack,r-this.pendingSample.startTimestamp),this.pendingSample={stack:e,startTimestamp:r,centralTimestamp:n}}else this.pendingSample={stack:e,startTimestamp:n,centralTimestamp:n}}build(){return this.pendingSample&&(this.samples.length>0?this.appendSampleWithWeight(this.pendingSample.stack,this.pendingSample.centralTimestamp-this.pendingSample.startTimestamp):(this.appendSampleWithWeight(this.pendingSample.stack,1),this.setValueFormatter(new hf))),this.totalWeight=Math.max(this.totalWeight,this.weights.reduce((e,n)=>e+n,0)),this.sortGroupedCallTree(),this}}class df extends wl{constructor(){super(...arguments),this.appendOrderStack=[this.appendOrderCalltreeRoot],this.groupedOrderStack=[this.groupedCalltreeRoot],this.framesInStack=new Map,this.stack=[],this.lastValue=0}addWeightsToFrames(e){const n=e-this.lastValue;for(let i of this.framesInStack.keys())i.addToTotalWeight(n);const r=Ir(this.stack);r&&r.addToSelfWeight(n)}addWeightsToNodes(e,n){const r=e-this.lastValue;for(let a of n)a.addToTotalWeight(r);const i=Ir(n);i&&i.addToSelfWeight(r)}_enterFrame(e,n,r){let i=r?this.appendOrderStack:this.groupedOrderStack;this.addWeightsToNodes(n,i);let a=Ir(i);if(a){if(r){const l=n-this.lastValue;if(l>0)this.samples.push(a),this.weights.push(n-this.lastValue);else if(l<0)throw new Error(`Samples must be provided in increasing order of cumulative value. Last sample was ${this.lastValue}, this sample was ${n}`)}const o=r?Ir(a.children):a.children.find(l=>l.frame===e);let s;o&&!o.isFrozen()&&o.frame==e?s=o:(s=new Ys(e,a),a.children.push(s)),i.push(s)}}enterFrame(e,n){const r=Qt.getOrInsert(this.frames,e);this.addWeightsToFrames(n),this._enterFrame(r,n,!0),this._enterFrame(r,n,!1),this.stack.push(r);const i=this.framesInStack.get(r)||0;this.framesInStack.set(r,i+1),this.lastValue=n,this.totalWeight=Math.max(this.totalWeight,this.lastValue)}_leaveFrame(e,n,r){let i=r?this.appendOrderStack:this.groupedOrderStack;if(this.addWeightsToNodes(n,i),r){const a=this.appendOrderStack.pop();if(a==null)throw new Error(`Trying to leave ${e.key} when stack is empty`);if(this.lastValue==null)throw new Error(`Trying to leave a ${e.key} before any have been entered`);if(a.freeze(),a.frame.key!==e.key)throw new Error(`Tried to leave frame "${e.name}" while frame "${a.frame.name}" was at the top at ${n}`);const o=n-this.lastValue;if(o>0)this.samples.push(a),this.weights.push(n-this.lastValue);else if(o<0)throw new Error(`Samples must be provided in increasing order of cumulative value. Last sample was ${this.lastValue}, this sample was ${n}`)}else this.groupedOrderStack.pop()}leaveFrame(e,n){const r=Qt.getOrInsert(this.frames,e);this.addWeightsToFrames(n),this._leaveFrame(r,n,!0),this._leaveFrame(r,n,!1),this.stack.pop();const i=this.framesInStack.get(r);i!=null&&(i===1?this.framesInStack.delete(r):this.framesInStack.set(r,i-1),this.lastValue=n,this.totalWeight=Math.max(this.totalWeight,this.lastValue))}build(){if(this.appendOrderStack.length>1||this.groupedOrderStack.length>1)throw new Error("Tried to complete profile construction with a non-empty stack");return this.sortGroupedCallTree(),this}updateFrameArgs(e,n){const r=Qt.getOrInsert(this.frames,e);r.args={...r.args,...n}}}function om(t){return t.replace(/\\([a-fA-F0-9]{2})/g,(e,n)=>{const r=parseInt(n,16);return String.fromCharCode(r)})}function t2(t){const e=t.split(`
`);if(!e.length||(e[e.length-1]===""&&e.pop(),!e.length))return null;const n=new Map,r=/^(\d+):(.+)$/,i=/^([\$\w]+):([\$\w-]+)$/;for(const a of e){const o=r.exec(a);if(o){n.set(`wasm-function[${o[1]}]`,om(o[2]));continue}const s=i.exec(a);if(s){n.set(s[1],om(s[2]));continue}return null}return a=>n.has(a.name)?{name:n.get(a.name)}:null}var br;(t=>{(e=>{e.EVENTED="evented",e.SAMPLED="sampled"})(t.ProfileType||(t.ProfileType={})),(e=>{e.OPEN_FRAME="O",e.CLOSE_FRAME="C"})(t.EventType||(t.EventType={}))})(br||(br={}));const n2="1.22.2";function r2(t){const e=[],n=new Map;function r(o){let s=n.get(o);if(s==null){const l={name:o.name};o.file!=null&&(l.file=o.file),o.line!=null&&(l.line=o.line),o.col!=null&&(l.col=o.col),s=e.length,n.set(o,s),e.push(l)}return s}const i={exporter:`speedscope@${n2}`,name:t.name,activeProfileIndex:t.indexToView,$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:e},profiles:[]},a=bn.get();a&&(i.metadata=a);for(let o of t.profiles)i.profiles.push(i2(o,r));return i}function i2(t,e){const n={type:br.ProfileType.EVENTED,name:t.getName(),unit:t.getWeightUnit(),startValue:0,endValue:t.getTotalWeight(),events:[]},r=(a,o)=>{n.events.push({type:br.EventType.OPEN_FRAME,frame:e(a.frame),at:o})},i=(a,o)=>{n.events.push({type:br.EventType.CLOSE_FRAME,frame:e(a.frame),at:o})};return t.forEachCall(r,i),n}function a2(t,e){function n(a){const{name:o,unit:s}=t;switch(s){case"nanoseconds":case"microseconds":case"milliseconds":case"seconds":a.setValueFormatter(new QE(s));break;case"bytes":a.setValueFormatter(new e2);break;case"none":a.setValueFormatter(new hf);break}a.setName(o)}function r(a){const{startValue:o,endValue:s,events:l}=a,u=new df(s-o);n(u);const f=e.map((d,p)=>({key:p,...d}));for(let d of l)switch(d.type){case br.EventType.OPEN_FRAME:{u.enterFrame(f[d.frame],d.at-o);break}case br.EventType.CLOSE_FRAME:{u.leaveFrame(f[d.frame],d.at-o);break}}return u.build()}function i(a){const{startValue:o,endValue:s,samples:l,weights:u}=a,f=new Eu(s-o);n(f);const d=e.map((p,x)=>({key:x,...p}));if(l.length!==u.length)throw new Error(`Expected samples.length (${l.length}) to equal weights.length (${u.length})`);for(let p=0;p<l.length;p++){const x=l[p],R=u[p];f.appendSampleWithWeight(x.map(O=>d[O]),R)}return f.build()}switch(t.type){case br.ProfileType.EVENTED:return r(t);case br.ProfileType.SAMPLED:return i(t)}}function Z4(t){return t.metadata&&bn.set(t.metadata),{name:t.name||t.profiles[0].name||"profile",indexToView:t.activeProfileIndex||0,profiles:t.profiles.map(e=>a2(e,t.shared.frames))}}function o2(t){const e=r2(t),n=new Blob([JSON.stringify(e)],{type:"text/json"}),i=`${(e.name?e.name.split(".")[0]:"profile").replace(/\W+/g,"_")}.speedscope.json`,a=document.createElement("a");a.download=i,a.href=window.URL.createObjectURL(n),a.dataset.downloadurl=["text/json",a.download,a.href].join(":"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}class xl{constructor(e){this.source=e,this.layers=[],this.totalWeight=0,this.minFrameWidth=1;const n=[],r=(a,o)=>{const s=Ir(n),l={node:a,parent:s,children:[],start:o,end:o};s&&s.children.push(l),n.push(l)};this.minFrameWidth=1/0;const i=(a,o)=>{const s=n.pop();if(s.end=o,s.end-s.start===0)return;const l=n.length;for(;this.layers.length<=l;)this.layers.push([]);this.layers[l].push(s),this.minFrameWidth=Math.min(this.minFrameWidth,s.end-s.start)};this.totalWeight=e.getTotalWeight(),e.forEachCall(r,i),isFinite(this.minFrameWidth)||(this.minFrameWidth=1)}getTotalWeight(){return this.totalWeight}getLayers(){return this.layers}getColorBucketForFrame(e){return this.source.getColorBucketForFrame(e)}getMinFrameWidth(){return this.minFrameWidth}formatValue(e){return this.source.formatValue(e)}getClampedViewportWidth(e){const n=this.getTotalWeight(),r=Math.pow(2,40),i=In(3*this.getMinFrameWidth(),n/r,n);return In(e,i,n)}getClampedConfigSpaceViewportRect({configSpaceViewportRect:e,renderInverted:n}){const r=new Q(this.getTotalWeight(),this.getLayers().length),i=this.getClampedViewportWidth(e.size.x),a=e.size.withX(i),o=Q.clamp(e.origin,new Q(0,n?0:-1),Q.max(Q.zero,r.minus(a).plus(new Q(0,1))));return new Ne(o,e.size.withX(i))}}const s2=1e4;class sm{constructor(e,n,r){this.batch=e,this.bounds=n,this.numPrecedingRectanglesInRow=r,this.children=[]}getBatch(){return this.batch}getBounds(){return this.bounds}getRectCount(){return this.batch.getRectCount()}getChildren(){return this.children}getParity(){return this.numPrecedingRectanglesInRow%2}forEachLeafNodeWithinBounds(e,n){this.bounds.hasIntersectionWith(e)&&n(this)}}class l2{constructor(e){if(this.children=e,this.rectCount=0,e.length===0)throw new Error("Empty interior node");let n=1/0,r=-1/0,i=1/0,a=-1/0;for(let o of e){this.rectCount+=o.getRectCount();const s=o.getBounds();n=Math.min(n,s.left()),r=Math.max(r,s.right()),i=Math.min(i,s.top()),a=Math.max(a,s.bottom())}this.bounds=new Ne(new Q(n,i),new Q(r-n,a-i))}getBounds(){return this.bounds}getRectCount(){return this.rectCount}getChildren(){return this.children}forEachLeafNodeWithinBounds(e,n){if(this.bounds.hasIntersectionWith(e))for(let r of this.children)r.forEachLeafNodeWithinBounds(e,n)}}class Xs{get key(){return`${this.stackDepth}_${this.index}_${this.zoomLevel}`}constructor(e){this.stackDepth=e.stackDepth,this.zoomLevel=e.zoomLevel,this.index=e.index}static getOrInsert(e,n){return e.getOrInsert(new Xs(n))}}class c2{constructor(e,n,r,i,a,o={inverted:!1}){this.gl=e,this.rowAtlas=n,this.flamechart=r,this.rectangleBatchRenderer=i,this.colorPassRenderer=a,this.options=o,this.layers=[],this.rectInfoTexture=null,this.rectInfoRenderTarget=null,this.atlasKeys=new ov;const s=r.getLayers().length;for(let l=0;l<s;l++){const u=[],f=o.inverted?s-1-l:l;let d=1/0,p=-1/0,x=new yu(this.gl),R=0;const O=r.getLayers()[l];for(let A=0;A<O.length;A++){const P=O[A];x.getRectCount()>=s2&&(u.push(new sm(x,new Ne(new Q(d,f),new Q(p-d,1)),R)),d=1/0,p=-1/0,x=new yu(this.gl));const S=new Ne(new Q(P.start,f),new Q(P.end-P.start,1));d=Math.min(d,S.left()),p=Math.max(p,S.right());const D=new or((1+A%255)/256,(1+l%255)/256,(1+this.flamechart.getColorBucketForFrame(P.node.frame))/256);x.addRect(S,D),R++}x.getRectCount()>0&&u.push(new sm(x,new Ne(new Q(d,f),new Q(p-d,1)),R)),this.layers.push(new l2(u))}}getRectInfoTexture(e,n){if(this.rectInfoTexture){const r=this.rectInfoTexture;(r.width!=e||r.height!=n)&&r.resize(e,n)}else this.rectInfoTexture=this.gl.createTexture(Ze.TextureFormat.NEAREST_CLAMP,e,n);return this.rectInfoTexture}getRectInfoRenderTarget(e,n){const r=this.getRectInfoTexture(e,n);return this.rectInfoRenderTarget&&this.rectInfoRenderTarget.texture!=r&&(this.rectInfoRenderTarget.texture.free(),this.rectInfoRenderTarget.setColor(r)),this.rectInfoRenderTarget||(this.rectInfoRenderTarget=this.gl.createRenderTarget(r)),this.rectInfoRenderTarget}free(){this.rectInfoRenderTarget&&this.rectInfoRenderTarget.free(),this.rectInfoTexture&&this.rectInfoTexture.free()}configSpaceBoundsForKey(e){const{stackDepth:n,zoomLevel:r,index:i}=e,o=this.flamechart.getTotalWeight()/Math.pow(2,r),s=this.flamechart.getLayers().length,l=this.options.inverted?s-1-n:n;return new Ne(new Q(o*i,l),new Q(o,1))}render(e){const{configSpaceSrcRect:n,physicalSpaceDstRect:r}=e,i=[],a=ke.betweenRects(n,r);if(n.isEmpty())return;let o=0;for(;;){const D=Xs.getOrInsert(this.atlasKeys,{stackDepth:0,zoomLevel:o,index:0}),N=this.configSpaceBoundsForKey(D);if(a.transformRect(N).width()<this.rowAtlas.getResolution())break;o++}const s=Math.max(0,Math.floor(n.top())),l=Math.min(this.layers.length,Math.ceil(n.bottom())),u=this.flamechart.getTotalWeight(),f=Math.pow(2,o),d=Math.floor(f*n.left()/u),p=Math.ceil(f*n.right()/u),x=this.flamechart.getLayers().length;for(let D=s;D<l;D++)for(let N=d;N<=p;N++){const k=this.options.inverted?x-1-D:D,W=Xs.getOrInsert(this.atlasKeys,{stackDepth:k,zoomLevel:o,index:N});this.configSpaceBoundsForKey(W).hasIntersectionWith(n)&&i.push(W)}const R=this.rowAtlas.getCapacity(),O=i.slice(0,R),A=i.slice(R);this.rowAtlas.writeToAtlasIfNeeded(O,(D,N)=>{const k=this.configSpaceBoundsForKey(N);this.layers[N.stackDepth].forEachLeafNodeWithinBounds(k,W=>{this.rectangleBatchRenderer.render({batch:W.getBatch(),configSpaceSrcRect:k,physicalSpaceDstRect:D})})});const P=this.getRectInfoRenderTarget(r.width(),r.height());Mv(this.gl,P,()=>{this.gl.clear(new Ze.Color(0,0,0,0));const D=new Ne(Q.zero,new Q(this.gl.viewport.width,this.gl.viewport.height)),N=ke.betweenRects(n,D);for(let k of O){const W=this.configSpaceBoundsForKey(k);this.rowAtlas.renderViaAtlas(k,N.transformRect(W))}for(let k of A){const W=this.configSpaceBoundsForKey(k),Y=N.transformRect(W);this.layers[k.stackDepth].forEachLeafNodeWithinBounds(W,X=>{this.rectangleBatchRenderer.render({batch:X.getBatch(),configSpaceSrcRect:W,physicalSpaceDstRect:Y})})}});const S=this.getRectInfoTexture(r.width(),r.height());this.colorPassRenderer.render({rectInfoTexture:S,srcRect:new Ne(Q.zero,new Q(S.width,S.height)),dstRect:r,renderOutlines:e.renderOutlines})}}const Ji=sr(t=>zn.create({hoverCount:{color:t.weightColor},fill:{width:"100%",height:"100%",position:"absolute",left:0,top:0},minimap:{height:ze.MINIMAP_HEIGHT,borderBottom:`${ze.SEPARATOR_HEIGHT}px solid ${t.fgSecondaryColor}`},panZoomView:{flex:1},detailView:{display:"grid",height:ze.DETAIL_VIEW_HEIGHT,overflow:"hidden",gridTemplateColumns:"120px 120px 1fr",gridTemplateRows:"repeat(4, 1fr)",borderTop:`${ze.SEPARATOR_HEIGHT}px solid ${t.fgSecondaryColor}`,fontSize:Rt.LABEL,position:"absolute",background:t.bgPrimaryColor,width:"100vw",bottom:0},stackTraceViewPadding:{padding:5},stackTraceView:{height:ze.DETAIL_VIEW_HEIGHT,lineHeight:`${Rt.LABEL+2}px`,overflow:"auto","::-webkit-scrollbar":{background:t.bgPrimaryColor},"::-webkit-scrollbar-thumb":{background:t.fgSecondaryColor,borderRadius:20,border:`3px solid ${t.bgPrimaryColor}`,":hover":{background:t.fgPrimaryColor}}},stackLine:{whiteSpace:"nowrap"},stackFileLine:{color:t.fgSecondaryColor},statsTable:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:`repeat(3, ${Rt.LABEL+10}px)`,gridGap:"1px 1px",textAlign:"center",paddingRight:1},statsTableHeader:{gridColumn:"1 / 3"},statsTableCell:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},thisInstanceCell:{background:t.selectionPrimaryColor,color:t.altFgPrimaryColor},allInstancesCell:{background:t.selectionSecondaryColor,color:t.altFgPrimaryColor},barDisplay:{position:"absolute",top:0,left:0,background:"rgba(0, 0, 0, 0.2)",width:"100%"}})),Wv="…",Qo=new Map;let lm=-1;function Kr(t,e){return window.devicePixelRatio!==lm&&(Qo.clear(),lm=window.devicePixelRatio),Qo.has(e)||Qo.set(e,t.measureText(e).width),Qo.get(e)}let es=null,cm=-1;function u2(t,e){if(window.devicePixelRatio!==cm&&(es=null,cm=window.devicePixelRatio),!es){const n=t.measureText(e);es=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}return es}function Bc(t,e){if(t.length<=e)return{trimmedString:t,trimmedLength:t.length,prefixLength:t.length,suffixLength:0,originalString:t,originalLength:t.length};let n=Math.floor(e/2);const r=e-n-1,i=t.substring(0,n),a=t.substring(t.length-r,t.length),o=i+Wv+a;return{trimmedString:o,trimmedLength:o.length,prefixLength:i.length,suffixLength:a.length,originalString:t,originalLength:t.length}}function f2(t,e,n){if(Kr(t,e)<=n)return Bc(e,e.length);const[r]=Bx(0,e.length,i=>Kr(t,Bc(e,Math.floor(i)).trimmedString),n);return Bc(e,Math.floor(r))}function um(t,e){return e<t.prefixLength?0:e<t.originalLength-t.suffixLength?2:1}function h2(t,e){const n=[],r=t.originalLength-t.trimmedLength;let i=!1;for(let[a,o]of e){let s=um(t,a),l=um(t,o-1);switch(s){case 0:{switch(l){case 0:{n.push([a,o]);break}case 2:{n.push([a,t.prefixLength+1]),i=!0;break}case 1:{n.push([a,o-r]);break}}break}case 2:{switch(l){case 0:throw new Error("Unexpected highlight range starts in elided and ends in prefix");case 2:{i||(n.push([t.prefixLength,t.prefixLength+1]),i=!0);break}case 1:{i?n.push([t.trimmedLength-t.suffixLength,o-r]):(n.push([t.prefixLength,o-r]),i=!0);break}}break}case 1:{switch(l){case 0:throw new Error("Unexpected highlight range starts in suffix and ends in prefix");case 2:throw new Error("Unexpected highlight range starts in suffix and ends in elided");case 1:{n.push([a-r,o-r]);break}}break}}}return n}class d2 extends sn{constructor(){super(...arguments),this.container=null,this.containerRef=e=>{this.container=e||null},this.overlayCanvas=null,this.overlayCtx=null,this.onWindowResize=()=>{this.onBeforeFrame()},this.onBeforeFrame=()=>{this.maybeClearInteractionLock(),this.resizeOverlayCanvasIfNeeded(),this.renderRects(),this.renderOverlays()},this.renderCanvas=()=>{this.props.canvasContext.requestFrame()},this.frameHadWheelEvent=!1,this.framesWithoutWheelEvents=0,this.interactionLock=null,this.maybeClearInteractionLock=()=>{this.interactionLock&&(this.frameHadWheelEvent||(this.framesWithoutWheelEvents++,this.framesWithoutWheelEvents>=2&&(this.interactionLock=null,this.framesWithoutWheelEvents=0)),this.props.canvasContext.requestFrame()),this.frameHadWheelEvent=!1},this.onWheel=e=>{if(e.preventDefault(),this.frameHadWheelEvent=!0,(e.metaKey||e.ctrlKey)&&this.interactionLock!=="pan"){let r=1+e.deltaY/100;e.ctrlKey&&(r=1+e.deltaY/40),r=In(r,.1,10),this.zoom(r)}else this.interactionLock!=="zoom"&&this.pan(new Q(e.deltaX,e.deltaY));this.renderCanvas()},this.dragStartConfigSpaceMouse=null,this.dragConfigSpaceViewportOffset=null,this.draggingMode=null,this.onMouseDown=e=>{const n=this.configSpaceMouse(e);n&&(this.props.configSpaceViewportRect.contains(n)?(this.draggingMode=1,this.dragConfigSpaceViewportOffset=n.minus(this.props.configSpaceViewportRect.origin)):this.draggingMode=0,this.dragStartConfigSpaceMouse=n,window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("mouseup",this.onWindowMouseUp),this.updateCursor(n))},this.onWindowMouseMove=e=>{if(!this.dragStartConfigSpaceMouse)return;let n=this.configSpaceMouse(e);if(n){if(this.updateCursor(n),n=new Ne(new Q(0,0),this.configSpaceSize()).closestPointTo(n),this.draggingMode===0){const r=this.dragStartConfigSpaceMouse;let i=n;if(!r||!i)return;const a=Math.min(r.x,i.x),s=Math.max(r.x,i.x)-a,l=this.props.configSpaceViewportRect.height();this.props.setConfigSpaceViewportRect(new Ne(new Q(a,i.y-l/2),new Q(s,l)))}else if(this.draggingMode===1){if(!this.dragConfigSpaceViewportOffset)return;const r=n.minus(this.dragConfigSpaceViewportOffset);this.props.setConfigSpaceViewportRect(this.props.configSpaceViewportRect.withOrigin(r))}}},this.updateCursor=e=>{this.draggingMode===1?(document.body.style.cursor="grabbing",document.body.style.cursor="-webkit-grabbing"):this.draggingMode===0?document.body.style.cursor="col-resize":this.props.configSpaceViewportRect.contains(e)?(document.body.style.cursor="grab",document.body.style.cursor="-webkit-grab"):document.body.style.cursor="col-resize"},this.onMouseLeave=()=>{this.draggingMode==null&&(document.body.style.cursor="default")},this.onMouseMove=e=>{const n=this.configSpaceMouse(e);n&&this.updateCursor(n)},this.onWindowMouseUp=e=>{this.draggingMode=null,window.removeEventListener("mousemove",this.onWindowMouseMove),window.removeEventListener("mouseup",this.onWindowMouseUp);const n=this.configSpaceMouse(e);n&&this.updateCursor(n)},this.overlayCanvasRef=e=>{e?(this.overlayCanvas=e,this.overlayCtx=this.overlayCanvas.getContext("2d"),this.renderCanvas()):(this.overlayCanvas=null,this.overlayCtx=null)}}physicalViewSize(){return new Q(this.overlayCanvas?this.overlayCanvas.width:0,this.overlayCanvas?this.overlayCanvas.height:0)}getStyle(){return Ji(this.props.theme)}minimapOrigin(){return new Q(0,ze.FRAME_HEIGHT*window.devicePixelRatio)}configSpaceSize(){return new Q(this.props.flamechart.getTotalWeight(),this.props.flamechart.getLayers().length)}configSpaceToPhysicalViewSpace(){const e=this.minimapOrigin();return ke.betweenRects(new Ne(new Q(0,0),this.configSpaceSize()),new Ne(e,this.physicalViewSize().minus(e)))}logicalToPhysicalViewSpace(){return ke.withScale(new Q(window.devicePixelRatio,window.devicePixelRatio))}windowToLogicalViewSpace(){if(!this.container)return new ke;const e=this.container.getBoundingClientRect();return ke.withTranslation(new Q(-e.left,-e.top))}renderRects(){this.container&&(this.physicalViewSize().x<2||this.props.canvasContext.renderBehind(this.container,()=>{this.props.flamechartRenderer.render({configSpaceSrcRect:new Ne(new Q(0,0),this.configSpaceSize()),physicalSpaceDstRect:new Ne(this.minimapOrigin(),this.physicalViewSize().minus(this.minimapOrigin())),renderOutlines:!1}),this.props.canvasContext.viewportRectangleRenderer.render({configSpaceViewportRect:this.props.configSpaceViewportRect,configSpaceToPhysicalViewSpace:this.configSpaceToPhysicalViewSpace()})}))}renderOverlays(){const e=this.overlayCtx;if(!e)return;const n=this.physicalViewSize();e.clearRect(0,0,n.x,n.y);const r=this.configSpaceToPhysicalViewSpace(),i=0,a=this.configSpaceSize().x,s=(this.configSpaceToPhysicalViewSpace().inverted()||new ke).times(this.logicalToPhysicalViewSpace()).transformVector(new Q(200,1)).x,l=ze.FRAME_HEIGHT*window.devicePixelRatio,u=Rt.LABEL*window.devicePixelRatio,f=(l-u)/2;e.font=`${u}px/${l}px ${ji.MONOSPACE}`,e.textBaseline="top";let p=Math.pow(10,Math.floor(Math.log10(s)));s/p>5?p*=5:s/p>2&&(p*=2);const x=this.props.theme;{e.fillStyle=or.fromCSSHex(x.bgPrimaryColor).withAlpha(.8).toCSS(),e.fillRect(0,0,n.x,l),e.textBaseline="top";for(let A=Math.ceil(i/p)*p;A<a;A+=p){const P=Math.round(r.transformPosition(new Q(A,0)).x),S=this.props.flamechart.formatValue(A),D=Math.ceil(Kr(e,S));e.fillStyle=x.fgPrimaryColor,e.fillText(S,P-D-f,f),e.fillStyle=x.fgSecondaryColor,e.fillRect(P,0,1,n.y)}}const R=Jn.get();if(!this.props.enableTimestampPointer||!R)return;const{physicalSpacePos:O}=lv(R,r);0>O||n.x<O||(e.fillStyle=x.fgSecondaryColor,e.fillRect(O,l,ze.TIMESTAMP_INDICATOR_WIDTH,n.y))}componentWillReceiveProps(e){this.props.flamechart!==e.flamechart?this.renderCanvas():this.props.configSpaceViewportRect!=e.configSpaceViewportRect?this.renderCanvas():this.props.canvasContext!==e.canvasContext&&(this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame),e.canvasContext&&(e.canvasContext.addBeforeFrameHandler(this.onBeforeFrame),e.canvasContext.requestFrame()))}componentDidMount(){window.addEventListener("resize",this.onWindowResize),this.props.canvasContext.addBeforeFrameHandler(this.onBeforeFrame)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize),this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame)}resizeOverlayCanvasIfNeeded(){if(!this.overlayCanvas)return;let{width:e,height:n}=this.overlayCanvas.getBoundingClientRect();if(e=Math.floor(e),n=Math.floor(n),e===0||n===0)return;const r=e*window.devicePixelRatio,i=n*window.devicePixelRatio;r===this.overlayCanvas.width&&i===this.overlayCanvas.height||(this.overlayCanvas.width=r,this.overlayCanvas.height=i)}pan(e){this.interactionLock="pan";const n=this.logicalToPhysicalViewSpace().transformVector(e),r=this.configSpaceToPhysicalViewSpace().inverseTransformVector(n);r&&this.props.transformViewport(ke.withTranslation(r))}zoom(e){this.interactionLock="zoom";const n=this.props.configSpaceViewportRect,r=n.origin.plus(n.size.times(1/2));if(!r)return;const i=ke.withTranslation(r.times(-1)).scaledBy(new Q(e,1)).translatedBy(r);this.props.transformViewport(i)}configSpaceMouse(e){const n=this.windowToLogicalViewSpace().transformPosition(new Q(e.clientX,e.clientY)),r=this.logicalToPhysicalViewSpace().transformPosition(n);return this.configSpaceToPhysicalViewSpace().inverseTransformPosition(r)}render(){const e=this.getStyle();return C("div",{ref:this.containerRef,onWheel:this.onWheel,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,className:se(e.minimap,Tn.vbox),children:C("canvas",{width:1,height:1,ref:this.overlayCanvasRef,className:se(e.fill)})})}}function $v(t){const e=g2(dt());return C("span",{className:se(e.stackChit),style:{backgroundColor:t.color}})}const g2=sr(t=>zn.create({stackChit:{position:"relative",top:-1,display:"inline-block",verticalAlign:"middle",marginRight:"0.5em",border:`1px solid ${t.fgSecondaryColor}`,width:Rt.LABEL-2,height:Rt.LABEL-2}}));function fm(t){const e=Ji(dt()),n=t.formatter(t.selectedTotal),r=t.formatter(t.selectedSelf),i=100*t.selectedTotal/t.grandTotal,a=100*t.selectedSelf/t.grandTotal;return C("div",{className:se(e.statsTable),children:[C("div",{className:se(t.cellStyle,e.statsTableCell,e.statsTableHeader),children:t.title}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:"Total"}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:"Self"}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:n}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:r}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:[Oi(i),C("div",{className:se(e.barDisplay),style:{height:`${i}%`}})]}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:[Oi(a),C("div",{className:se(e.barDisplay),style:{height:`${a}%`}})]})]})}function m2(t){const e=Ji(dt()),n=[];let r=t.node;for(;r&&!r.isRoot();r=r.parent){const i=[],{frame:a}=r;if(i.push(C($v,{color:t.getFrameColor(a)})),n.length&&i.push(C("span",{className:se(e.stackFileLine),children:"> "})),i.push(a.name),a.file){let o=a.file;a.line!=null&&(o+=`:${a.line}`,a.col!=null&&(o+=`:${a.col}`)),i.push(C("span",{className:se(e.stackFileLine),children:[" (",o,")"]}))}n.push(C("div",{className:se(e.stackLine),children:i}))}return C("div",{className:se(e.stackTraceView),children:C("div",{className:se(e.stackTraceViewPadding),children:n})})}function p2(t){const e=Ji(dt()),{flamechart:n,selectedNode:r}=t,{frame:i}=r;return C("div",{className:se(e.detailView),children:[C(fm,{title:"This Instance",cellStyle:e.thisInstanceCell,grandTotal:n.getTotalWeight(),selectedTotal:r.getTotalWeight(),selectedSelf:r.getSelfWeight(),formatter:n.formatValue.bind(n)}),C(fm,{title:"All Instances",cellStyle:e.allInstancesCell,grandTotal:n.getTotalWeight(),selectedTotal:i.getTotalWeight(),selectedSelf:i.getSelfWeight(),formatter:n.formatValue.bind(n)}),C(m2,{node:r,getFrameColor:t.getCSSColorForFrame})]})}class hm{constructor(){this.argsBatch=[]}text(e){this.argsBatch.push(e)}fill(e,n){if(this.argsBatch.length!==0){e.fillStyle=n;for(let r of this.argsBatch)e.fillText(r.text,r.x,r.y);this.argsBatch=[]}}}class ts{constructor(){this.argsBatch=[]}rect(e){this.argsBatch.push(e)}drawPath(e){e.beginPath();for(let n of this.argsBatch)e.rect(n.x,n.y,n.w,n.h);e.closePath(),this.argsBatch=[]}fill(e,n){this.argsBatch.length!==0&&(e.fillStyle=n,this.drawPath(e),e.fill())}stroke(e,n,r){this.argsBatch.length!==0&&(e.strokeStyle=n,e.lineWidth=r,this.drawPath(e),e.stroke())}}class zv extends sn{constructor(){super(...arguments),this.container=null,this.containerRef=e=>{this.container=e||null},this.overlayCanvas=null,this.overlayCtx=null,this.hoveredLabel=null,this.overlayCanvasRef=e=>{e?(this.overlayCanvas=e,this.overlayCtx=this.overlayCanvas.getContext("2d"),this.renderCanvas()):(this.overlayCanvas=null,this.overlayCtx=null)},this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT=ze.FRAME_HEIGHT,this.onWindowResize=()=>{this.updateConfigSpaceViewport(),this.onBeforeFrame()},this.frameHadWheelEvent=!1,this.framesWithoutWheelEvents=0,this.interactionLock=null,this.maybeClearInteractionLock=()=>{this.interactionLock&&(this.frameHadWheelEvent||(this.framesWithoutWheelEvents++,this.framesWithoutWheelEvents>=2&&(this.interactionLock=null,this.framesWithoutWheelEvents=0)),this.props.canvasContext.requestFrame()),this.frameHadWheelEvent=!1},this.onBeforeFrame=()=>{this.resizeOverlayCanvasIfNeeded(),this.renderRects(),this.renderOverlays(),this.maybeClearInteractionLock()},this.renderCanvas=()=>{this.props.canvasContext.requestFrame()},this.lastDragPos=null,this.mouseDownPos=null,this.onMouseDown=e=>{this.mouseDownPos=this.lastDragPos=new Q(e.offsetX,e.offsetY),this.updateCursor(),window.addEventListener("mouseup",this.onWindowMouseUp)},this.onMouseDrag=e=>{if(!this.lastDragPos)return;const n=new Q(e.offsetX,e.offsetY);this.pan(this.lastDragPos.minus(n)),this.lastDragPos=n,this.hoveredLabel&&this.props.onNodeHover(null)},this.onDblClick=e=>{if(this.hoveredLabel){const n=this.hoveredLabel.configSpaceBounds,r=new Ne(n.origin.minus(new Q(0,1)),n.size.withY(this.props.configSpaceViewportRect.height()));this.setConfigSpaceViewportRect(r)}},this.onClick=e=>{const n=new Q(e.offsetX,e.offsetY),r=this.mouseDownPos;this.mouseDownPos=null,!(r&&n.minus(r).length()>5)&&(this.hoveredLabel?(this.props.onNodeSelect(this.hoveredLabel.node),this.renderCanvas()):this.props.onNodeSelect(null))},this.onWindowMouseUp=e=>{this.lastDragPos=null,this.updateCursor(),window.removeEventListener("mouseup",this.onWindowMouseUp)},this.setTimestampHoveredAtom=e=>{this.props.enableTimestampPointer&&(Jn.unsubscribe(this.renderCanvas),Jn.set(e),Jn.subscribe(this.renderCanvas))},this.onMouseMove=e=>{this.updateCursor();const n=new Q(e.offsetX,e.offsetY),r=this.logicalToPhysicalViewSpace().transformPosition(n),i=this.configSpaceToPhysicalViewSpace().inverseTransformPosition(r);if(i&&this.setTimestampHoveredAtom({x:i.x/1e3,yProc:.5}),this.lastDragPos){e.preventDefault(),this.onMouseDrag(e);return}if(!i)return;const a=(s,l=0)=>{const u=s.end-s.start,f=this.props.renderInverted?this.configSpaceSize().y-1-l:l,d=new Ne(new Q(s.start,f),new Q(u,1));if(i.x<d.left()||i.x>d.right())return null;d.contains(i)&&(this.hoveredLabel={configSpaceBounds:d,node:s.node});for(let p of s.children)a(p,l+1)};(()=>{this.hoveredLabel=null})();for(let s of this.props.flamechart.getLayers()[0]||[])a(s);this.hoveredLabel?this.props.onNodeHover({node:this.hoveredLabel.node,event:e}):this.props.onNodeHover(null),this.renderCanvas()},this.onMouseLeave=e=>{this.hoveredLabel=null,this.setTimestampHoveredAtom(null),this.props.onNodeHover(null),this.renderCanvas()},this.onWheel=e=>{e.preventDefault(),this.frameHadWheelEvent=!0;const n=e.metaKey||e.ctrlKey;let r=e.deltaY,i=e.deltaX;if(e.deltaMode===e.DOM_DELTA_LINE&&(r*=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT,i*=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT),n&&this.interactionLock!=="pan"){let a=1+r/100;e.ctrlKey&&(a=1+r/40),a=In(a,.1,10),this.zoom(new Q(e.offsetX,e.offsetY),a)}else this.interactionLock!=="zoom"&&this.pan(new Q(i,r));this.renderCanvas()},this.onWindowKeyPress=e=>{if(!this.container)return;const{width:n,height:r}=this.container.getBoundingClientRect();e.key==="="||e.key==="+"?(this.zoom(new Q(n/2,r/2),.5),e.preventDefault()):(e.key==="-"||e.key==="_")&&(this.zoom(new Q(n/2,r/2),2),e.preventDefault()),!(e.ctrlKey||e.shiftKey||e.metaKey)&&(e.key==="0"?this.zoom(new Q(n/2,r/2),1e9):e.key==="ArrowRight"||e.code==="KeyD"?this.pan(new Q(100,0)):e.key==="ArrowLeft"||e.code==="KeyA"?this.pan(new Q(-100,0)):e.key==="ArrowUp"||e.code==="KeyW"?this.pan(new Q(0,-100)):e.key==="ArrowDown"||e.code==="KeyS"?this.pan(new Q(0,100)):e.key==="Escape"&&(this.props.onNodeSelect(null),this.renderCanvas()))}}getStyle(){return Ji(this.props.theme)}setConfigSpaceViewportRect(e){this.props.setConfigSpaceViewportRect(e)}configSpaceSize(){return new Q(this.props.flamechart.getTotalWeight(),this.props.flamechart.getLayers().length)}physicalViewSize(){return new Q(this.overlayCanvas?this.overlayCanvas.width:0,this.overlayCanvas?this.overlayCanvas.height:0)}physicalBounds(){if(this.props.renderInverted){const e=this.physicalViewSize().y,n=(this.configSpaceSize().y+1)*this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT*window.devicePixelRatio;if(n<e)return new Ne(new Q(0,e-n),this.physicalViewSize())}return new Ne(new Q(0,0),this.physicalViewSize())}configSpaceToPhysicalViewSpace(){return ke.betweenRects(this.props.configSpaceViewportRect,this.physicalBounds())}logicalToPhysicalViewSpace(){return ke.withScale(new Q(window.devicePixelRatio,window.devicePixelRatio))}resizeOverlayCanvasIfNeeded(){if(!this.overlayCanvas)return;let{width:e,height:n}=this.overlayCanvas.getBoundingClientRect();if(e=Math.floor(e),n=Math.floor(n),e===0||n===0)return;const r=e*window.devicePixelRatio,i=n*window.devicePixelRatio;r===this.overlayCanvas.width&&i===this.overlayCanvas.height||(this.overlayCanvas.width=r,this.overlayCanvas.height=i)}renderOverlays(){const e=this.overlayCtx;if(!e||this.props.configSpaceViewportRect.isEmpty())return;const n=this.configSpaceToPhysicalViewSpace(),r=Rt.LABEL*window.devicePixelRatio,i=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT*window.devicePixelRatio,a=this.physicalViewSize();e.clearRect(0,0,a.x,a.y),e.font=`${r}px/${i}px ${ji.MONOSPACE}`,e.textBaseline="alphabetic";const o=Kr(e,"M"+Wv+"M"),s=(n.inverseTransformVector(new Q(o,0))||new Q(0,0)).x,l=5*window.devicePixelRatio,u=new hm,f=new hm,d=new ts,p=new ts,x=new ts,R=new ts,O=(N,k=0)=>{var K;const W=N.end-N.start,Y=this.props.renderInverted?this.configSpaceSize().y-1-k:k,X=new Ne(new Q(N.start,Y),new Q(W,1));if(!(W<s)&&!(X.left()>this.props.configSpaceViewportRect.right())&&!(X.right()<this.props.configSpaceViewportRect.left())){if(this.props.renderInverted){if(X.bottom()<this.props.configSpaceViewportRect.top())return}else if(X.top()>this.props.configSpaceViewportRect.bottom())return;if(X.hasIntersectionWith(this.props.configSpaceViewportRect)){let ie=n.transformRect(X);if(ie.left()<0&&(ie=ie.withOrigin(ie.origin.withX(0)).withSize(ie.size.withX(ie.size.x+ie.left()))),ie.right()>a.x&&(ie=ie.withSize(ie.size.withX(a.x-ie.left()))),ie.width()>o){const ne=(K=this.props.searchResults)==null?void 0:K.getMatchForFrame(N.node.frame),J=f2(e,N.node.frame.name,ie.width()-2*l);if(ne){const $=h2(J,ne);let te=0,G=ie.left()+l;const oe=(i-r)/2-2;for(let[ge,he]of $){G+=Kr(e,J.trimmedString.substring(te,ge));const pe=Kr(e,J.trimmedString.substring(ge,he));d.rect({x:G,y:ie.top()+oe,w:pe,h:i-2*oe}),G+=pe,te=he}}(this.props.searchResults!=null&&!ne?f:u).text({text:J.trimmedString,x:ie.left()+l,y:Math.round(ie.bottom()-(i-r)/2)})}}for(let ie of N.children)O(ie,k+1)}},A=2*window.devicePixelRatio;e.strokeStyle=this.props.theme.selectionSecondaryColor;const P=(n.inverseTransformVector(new Q(1,0))||new Q(0,0)).x,S=(N,k=0)=>{var K;if(!this.props.selectedNode&&this.props.searchResults==null)return;const W=N.end-N.start,Y=this.props.renderInverted?this.configSpaceSize().y-1-k:k,X=new Ne(new Q(N.start,Y),new Q(W,1));if(!(W<P)&&!(X.left()>this.props.configSpaceViewportRect.right())&&!(X.right()<this.props.configSpaceViewportRect.left())&&!(X.top()>this.props.configSpaceViewportRect.bottom())){if(X.hasIntersectionWith(this.props.configSpaceViewportRect)){if((K=this.props.searchResults)!=null&&K.getMatchForFrame(N.node.frame)){const ie=n.transformRect(X);R.rect({x:Math.round(ie.left()+A/2),y:Math.round(ie.top()+A/2),w:Math.round(Math.max(0,ie.width()-A)),h:Math.round(Math.max(0,ie.height()-A))})}if(this.props.selectedNode!=null&&N.node.frame===this.props.selectedNode.frame){let ie=N.node===this.props.selectedNode?p:x;const ne=n.transformRect(X);ie.rect({x:Math.round(ne.left()+1+A/2),y:Math.round(ne.top()+1+A/2),w:Math.round(Math.max(0,ne.width()-2-A)),h:Math.round(Math.max(0,ne.height()-2-A))})}}for(let ie of N.children)S(ie,k+1)}};for(let N of this.props.flamechart.getLayers()[0]||[])S(N);for(let N of this.props.flamechart.getLayers()[0]||[])O(N);const D=this.props.theme;if(R.fill(e,D.searchMatchPrimaryColor),d.fill(e,D.searchMatchSecondaryColor),f.fill(e,D.fgSecondaryColor),u.fill(e,this.props.searchResults!=null?D.searchMatchTextColor:D.fgPrimaryColor),x.stroke(e,D.selectionSecondaryColor,A),p.stroke(e,D.selectionPrimaryColor,A),this.hoveredLabel){let N=D.fgPrimaryColor;this.props.selectedNode===this.hoveredLabel.node&&(N=D.selectionPrimaryColor),e.lineWidth=2*devicePixelRatio,e.strokeStyle=N;const k=n.transformRect(this.hoveredLabel.configSpaceBounds);e.strokeRect(Math.round(k.left()),Math.round(k.top()),Math.round(Math.max(0,k.width())),Math.round(Math.max(0,k.height())))}this.renderTimeIndicators()}renderTimeIndicators(){const e=this.overlayCtx;if(!e)return;const n=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT*window.devicePixelRatio,r=this.physicalViewSize(),i=this.configSpaceToPhysicalViewSpace(),a=Rt.LABEL*window.devicePixelRatio,o=(n-a)/2,s=this.props.configSpaceViewportRect.left(),l=this.props.configSpaceViewportRect.right(),f=(this.configSpaceToPhysicalViewSpace().inverted()||new ke).times(this.logicalToPhysicalViewSpace()).transformVector(new Q(200,1)).x;let p=Math.pow(10,Math.floor(Math.log10(f)));f/p>5?p*=5:f/p>2&&(p*=2);const x=this.props.theme;{const D=this.props.renderInverted?r.y-n:0;e.fillStyle=or.fromCSSHex(x.bgPrimaryColor).withAlpha(.8).toCSS(),e.fillRect(0,D,r.x,n),e.textBaseline="top";for(let N=Math.ceil(s/p)*p;N<l;N+=p){const k=Math.round(i.transformPosition(new Q(N,0)).x),W=this.props.flamechart.formatValue(N),Y=Kr(e,W);e.fillStyle=x.fgPrimaryColor,e.fillText(W,k-Y-o,D+o),e.fillStyle=x.fgSecondaryColor,e.fillRect(k,0,1,r.y)}}const R=Jn.get();if(!this.props.enableTimestampPointer||!R)return;const{configSpacePos:O,physicalSpacePos:A}=lv(R,i);if(0>A||r.x<A)return;const P=this.props.flamechart.formatValue(O),S=e.measureText(P).width;e.fillStyle=x.fgPrimaryColor,e.fillText(P,A+2*o+S<r.x?A+o:A-S-o,r.y-o-u2(e,P)-(this.props.selectedNode?ze.DETAIL_VIEW_HEIGHT*window.devicePixelRatio:0)),e.fillStyle=x.fgSecondaryColor,e.fillRect(A,0,ze.TIMESTAMP_INDICATOR_WIDTH,r.y)}updateConfigSpaceViewport(){if(!this.container)return;const{logicalSpaceViewportSize:e}=this.props,n=this.container.getBoundingClientRect(),{width:r,height:i}=n;if(r<2||i<2)return;if(this.props.configSpaceViewportRect.isEmpty()){const o=i/this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT;this.props.renderInverted?this.setConfigSpaceViewportRect(new Ne(new Q(0,this.configSpaceSize().y-o+1),new Q(this.configSpaceSize().x,o))):this.setConfigSpaceViewportRect(new Ne(new Q(0,-1),new Q(this.configSpaceSize().x,o)))}else!e.equals(Q.zero)&&(e.x!==r||e.y!==i)&&this.setConfigSpaceViewportRect(this.props.configSpaceViewportRect.withSize(this.props.configSpaceViewportRect.size.timesPointwise(new Q(r/e.x,i/e.y))));const a=new Q(r,i);a.equals(e)||this.props.setLogicalSpaceViewportSize(a)}renderRects(){this.container&&(this.updateConfigSpaceViewport(),!this.props.configSpaceViewportRect.isEmpty()&&this.props.canvasContext.renderBehind(this.container,()=>{this.props.flamechartRenderer.render({physicalSpaceDstRect:this.physicalBounds(),configSpaceSrcRect:this.props.configSpaceViewportRect,renderOutlines:!0})}))}pan(e){this.interactionLock="pan";const n=this.logicalToPhysicalViewSpace().transformVector(e),r=this.configSpaceToPhysicalViewSpace().inverseTransformVector(n);this.hoveredLabel&&this.props.onNodeHover(null),r&&this.props.transformViewport(ke.withTranslation(r))}zoom(e,n){this.interactionLock="zoom";const r=this.logicalToPhysicalViewSpace().transformPosition(e),i=this.configSpaceToPhysicalViewSpace().inverseTransformPosition(r);if(!i)return;const a=ke.withTranslation(i.times(-1)).scaledBy(new Q(n,1)).translatedBy(i);this.props.transformViewport(a)}updateCursor(){this.lastDragPos?(document.body.style.cursor="grabbing",document.body.style.cursor="-webkit-grabbing"):document.body.style.cursor="default"}shouldComponentUpdate(){return!1}componentWillReceiveProps(e){this.props.flamechart!==e.flamechart?(this.hoveredLabel=null,this.renderCanvas()):this.props.searchResults!==e.searchResults?this.renderCanvas():this.props.selectedNode!==e.selectedNode?this.renderCanvas():this.props.configSpaceViewportRect!==e.configSpaceViewportRect?this.renderCanvas():this.props.canvasContext!==e.canvasContext&&(this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame),e.canvasContext&&(e.canvasContext.addBeforeFrameHandler(this.onBeforeFrame),e.canvasContext.requestFrame()))}componentDidMount(){this.props.canvasContext.addBeforeFrameHandler(this.onBeforeFrame),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keydown",this.onWindowKeyPress)}componentWillUnmount(){this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keydown",this.onWindowKeyPress)}render(){const e=this.getStyle();return this.props.enableTimestampPointer&&Jn.subscribe(this.renderCanvas),C("div",{className:se(e.panZoomView,Tn.vbox),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this.onClick,onDblClick:this.onDblClick,onWheel:this.onWheel,ref:this.containerRef,children:C("canvas",{width:1,height:1,ref:this.overlayCanvasRef,className:se(e.fill)})})}}function Hv(t){const e=v2(dt()),{containerSize:n,offset:r}=t,i=n.x,a=n.y,o=7,s=Qe(l=>{if(!l)return;const u=l.getBoundingClientRect();let f=r.x+o;f+u.width>i-1&&(f=i-u.width-1,f<1&&(f=1)),l.style.left=`${f}px`;let d=r.y+o;d+u.height>a-1&&(d=r.y-u.height-1,d<1&&(d=1)),l.style.top=`${d}px`},[i,a,r.x,r.y]);return C("div",{className:se(e.hoverTip),ref:s,children:C("div",{className:se(e.hoverTipRow),children:t.children})})}const ns=2,v2=sr(t=>zn.create({hoverTip:{position:"absolute",background:t.bgPrimaryColor,border:"1px solid black",maxWidth:ze.TOOLTIP_WIDTH_MAX,paddingTop:ns,paddingBottom:ns,pointerEvents:"none",userSelect:"none",fontSize:Rt.LABEL,fontFamily:ji.MONOSPACE,zIndex:ff.HOVERTIP},hoverTipRow:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflowX:"hidden",paddingLeft:ns,paddingRight:ns,maxWidth:ze.TOOLTIP_WIDTH_MAX}})),Uv=gl(null),Yv=({flamechart:t,selectedNode:e,setSelectedNode:n,configSpaceViewportRect:r,setConfigSpaceViewportRect:i,children:a})=>{const o=Yi(yl),s=It(()=>o==null?null:new qE(t,o),[t,o]);return C(Uv.Provider,{value:{results:s,flamechart:t,selectedNode:e,setSelectedNode:n,configSpaceViewportRect:r,setConfigSpaceViewportRect:i},children:a})},b2=_t(()=>{const t=Yi(Uv),e=t==null?null:t.results,n=t==null?null:t.selectedNode,r=t==null?null:t.setSelectedNode,i=t==null?null:t.configSpaceViewportRect,a=t==null?null:t.setConfigSpaceViewportRect,o=t==null?null:t.flamechart,s=e==null?null:e.count(),l=It(()=>e==null||n==null?null:e.indexOf(n),[e,n]),u=Qe(p=>{if(!r||!o||!i||!a)return;const x=p.configSpaceBounds,R=new Ne(x.origin.minus(new Q(0,1)),x.size.withY(i.height()));r(p.node),a(o.getClampedConfigSpaceViewportRect({configSpaceViewportRect:R}))},[i,a,r,o]),{selectPrev:f,selectNext:d}=It(()=>s==null||s===0||e==null?{selectPrev:()=>{},selectNext:()=>{}}:{selectPrev:()=>{if(!(e!=null&&e.at)||s==null||s===0)return;let p=l==null?s-1:l-1;p<0&&(p=s-1);const x=e.at(p);u(x)},selectNext:()=>{if(!(e!=null&&e.at)||s==null||s===0)return;let p=l==null?0:l+1;p>=s&&(p=0);const x=e.at(p);u(x)}},[s,l,e,u]);return C(Fv,{resultIndex:l,numResults:s,selectPrev:f,selectNext:d})});class Ki extends sn{}class Xv extends Ki{constructor(){super(...arguments),this.setConfigSpaceViewportRect=e=>{if(this.props.configSpaceViewportRect.approxEquals(e))return;const n=ze.DETAIL_VIEW_HEIGHT/ze.FRAME_HEIGHT,r=this.configSpaceSize(),i=this.props.flamechart.getClampedViewportWidth(e.size.x),a=e.size.withX(i),o=Q.clamp(e.origin,new Q(0,-1),Q.max(Q.zero,r.minus(a).plus(new Q(0,n+1)))),s=new Ne(o,e.size.withX(i));this.props.configSpaceViewportRect.approxEquals(s)||this.props.setConfigSpaceViewportRect(s)},this.setLogicalSpaceViewportSize=e=>{this.props.setLogicalSpaceViewportSize(e)},this.transformViewport=e=>{const n=e.transformRect(this.props.configSpaceViewportRect);this.setConfigSpaceViewportRect(n)},this.onNodeHover=e=>{this.props.setNodeHover(e)},this.onNodeClick=e=>{this.props.setSelectedNode(e)},this.container=null,this.containerRef=e=>{this.container=e||null}}getStyle(){return Ji(this.props.theme)}configSpaceSize(){return new Q(this.props.flamechart.getTotalWeight(),this.props.flamechart.getLayers().length)}formatValue(e){const n=this.props.flamechart.getTotalWeight(),r=100*e/n,i=Oi(r);return`${this.props.flamechart.formatValue(e)} (${i})`}renderTooltip(){if(!this.container)return null;const{hover:e}=this.props;if(!e)return null;const{width:n,height:r,left:i,top:a}=this.container.getBoundingClientRect(),o=new Q(e.event.clientX-i,e.event.clientY-a),s=e.node.frame,l=this.getStyle();return C(Hv,{containerSize:new Q(n,r),offset:o,children:[C("span",{className:se(l.hoverCount),children:this.formatValue(e.node.getTotalWeight())})," ",s.name,s.file?C("div",{children:[s.file,":",s.line]}):void 0]})}render(){const e=this.getStyle();return C("div",{className:se(e.fill,Tn.vbox),ref:this.containerRef,children:[C(d2,{theme:this.props.theme,configSpaceViewportRect:this.props.configSpaceViewportRect,transformViewport:this.transformViewport,flamechart:this.props.flamechart,flamechartRenderer:this.props.flamechartRenderer,canvasContext:this.props.canvasContext,setConfigSpaceViewportRect:this.setConfigSpaceViewportRect,enableTimestampPointer:this.props.enableTimestampPointer}),C(yl.Consumer,{children:n=>C(St,{children:[C(zv,{theme:this.props.theme,canvasContext:this.props.canvasContext,flamechart:this.props.flamechart,flamechartRenderer:this.props.flamechartRenderer,renderInverted:!1,onNodeHover:this.onNodeHover,onNodeSelect:this.onNodeClick,selectedNode:this.props.selectedNode,transformViewport:this.transformViewport,configSpaceViewportRect:this.props.configSpaceViewportRect,setConfigSpaceViewportRect:this.setConfigSpaceViewportRect,logicalSpaceViewportSize:this.props.logicalSpaceViewportSize,setLogicalSpaceViewportSize:this.setLogicalSpaceViewportSize,searchResults:n,enableTimestampPointer:this.props.enableTimestampPointer}),C(b2,{})]})}),this.renderTooltip(),this.props.selectedNode&&C(p2,{flamechart:this.props.flamechart,getCSSColorForFrame:this.props.getCSSColorForFrame,selectedNode:this.props.selectedNode})]})}}function Tl(t){return{setNodeHover:Qe(e=>{an.setFlamechartHoveredNode(t,e)},[t]),setLogicalSpaceViewportSize:Qe(e=>{an.setLogicalSpaceViewportSize(t,e)},[t]),setConfigSpaceViewportRect:Qe(e=>{an.setConfigSpaceViewportRect(t,e)},[t]),setSelectedNode:Qe(e=>{an.setSelectedNode(t,e)},[t])}}const _2=ar(({profile:t,getColorBucketForFrame:e})=>new xl({getTotalWeight:t.getTotalWeight.bind(t),forEachCall:t.forEachCall.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),Sl=t=>ar(({canvasContext:e,flamechart:n})=>new c2(e.gl,sS(e),n,e.rectangleBatchRenderer,e.flamechartColorPassRenderer,t)),y2=Sl(),w2=_t(t=>{const{activeProfileState:e,glCanvas:n}=t,{profile:r,chronoViewState:i}=e,a=Ke(Ra),o=dt(),s=io({theme:o,canvas:n}),l=ao(r),u=no(l),f=ro({theme:o,frameToColorBucket:l}),d=_2({profile:r,getColorBucketForFrame:u}),p=y2({canvasContext:s,flamechart:d}),x=Tl(eo.CHRONO);return C(Yv,{flamechart:d,selectedNode:i.selectedNode,setSelectedNode:x.setSelectedNode,configSpaceViewportRect:i.configSpaceViewportRect,setConfigSpaceViewportRect:x.setConfigSpaceViewportRect,children:C(Xv,{theme:o,renderInverted:!1,flamechart:d,flamechartRenderer:p,canvasContext:s,getCSSColorForFrame:f,enableTimestampPointer:!a,...i,...x})})}),x2=ar(({profile:t,getColorBucketForFrame:e})=>new xl({getTotalWeight:t.getTotalNonIdleWeight.bind(t),forEachCall:t.forEachCallGrouped.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),T2=Sl(),S2=_t(t=>{const{activeProfileState:e,glCanvas:n}=t,{profile:r,leftHeavyViewState:i}=e,a=dt(),o=io({theme:a,canvas:n}),s=ao(r),l=no(s),u=ro({theme:a,frameToColorBucket:s}),f=x2({profile:r,getColorBucketForFrame:l}),d=T2({canvasContext:o,flamechart:f}),p=Tl(eo.LEFT_HEAVY);return C(Yv,{flamechart:f,selectedNode:i.selectedNode,setSelectedNode:p.setSelectedNode,configSpaceViewportRect:i.configSpaceViewportRect,setConfigSpaceViewportRect:p.setConfigSpaceViewportRect,children:C(Xv,{theme:a,renderInverted:!1,flamechart:f,flamechartRenderer:d,canvasContext:o,getCSSColorForFrame:u,enableTimestampPointer:!1,...i,...p})})});function E2(t,e){return M2(t,e)}const Au=97,Gv=122,qv=65,A2=90,C2=48,R2=57;function dm(t){const e=t.charCodeAt(0);return Au<=e&&e<=Gv?1:qv<=e&&e<=A2?2:C2<=e&&e<=R2?3:0}function Cu(t,e){if(t===e)return!0;const n=e.charCodeAt(0);return Au<=n&&n<=Gv?t.charCodeAt(0)===n-Au+qv:!1}function M2(t,e){if(e.length==0)return{matchedRanges:[],score:0};let n=0,r=-1,i=-1,a=t.length,o=e.length;for(let s=0;s<a;s++){let l=t[s],u=e[n];if(Cu(l,u)&&(r<0&&(r=s),n++,n==o)){i=s+1;break}}if(i==-1)return null;n--;for(let s=i-1;s>=r;s--){const l=t[s],u=e[n];if(Cu(l,u)&&(n--,n<0))return r=s,k2(t,e,r,i)}throw new Error("Implementation error. This must be a bug in fzfFuzzyMatchV1")}const gf=16,N2=-3,jv=-1,mf=gf/2,O2=gf/2,D2=mf+jv,L2=4,I2=2;function P2(t,e){return t===0&&e!==0?mf:t===1&&e==2||t!==3&&e==3?D2:e===0?O2:0}function k2(t,e,n,r){let i=0,a=0,o=!1,s=0,l=0,u=new Array(e.length),f=0;n>0&&(f=dm(t[n-1]));for(let p=n;p<r;p++){let x=t[p],R=dm(x);if(Cu(x,e[i])){u[i]=p,a+=gf;let O=P2(f,R);s==0?l=O:(O===mf&&(l=O),O=Math.max(O,l,L2)),i===0?a+=O*I2:a+=O,o=!1,s++,i++}else o?a+=jv:a+=N2,o=!0,s=0,l=0;f=R}if(i!==e.length)throw new Error("fzfCalculateScore should only be called when pattern is found between sidx and eidx");let d=[[u[0],u[0]+1]];for(let p=1;p<u.length;p++){const x=u[p],R=d[d.length-1];R[1]===x?R[1]=x+1:d.push([x,x+1])}return{score:a,matchedRanges:d}}function B2({color:t="#9E9EA4"}){return C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M13.9999 14L11.1332 11.1333M12.6666 7.33333C12.6666 10.2789 10.2788 12.6667 7.33325 12.6667C4.38773 12.6667 1.99992 10.2789 1.99992 7.33333C1.99992 4.38781 4.38773 2 7.33325 2C10.2788 2 12.6666 4.38781 12.6666 7.33333Z",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})})}function F2({color:t="#D5D5D5"}){return C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M13.3333 4L5.99996 11.3333L2.66663 8",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})})}function V2(t,e,n){const r=[];let i=0;for(let a of e)r.push(t.slice(i,a[0])),r.push(C("span",{className:n,children:t.slice(a[0],a[1])})),i=a[1];return r.push(t.slice(i)),C("span",{children:r})}function W2({setProfileIndexToView:t,setHoveredProfileIndex:e,profile:n,selected:r,hovered:i,profileCount:a,nodeRef:o,closeProfileSelect:s,indexInProfileGroup:l,matchedRanges:u,indexInFilteredListView:f}){const d=Jv(dt()),p=Qe(()=>{s(),t(l)},[s,t,l]),x=Qe(S=>{e(l)},[e,l]),R=n.getName(),O=1+Math.floor(Math.log10(a)),A=se(d.highlighted),P=It(()=>V2(R,u,A),[R,u,A]);return C("div",{ref:o,onMouseUp:p,onMouseEnter:x,title:R,className:se(d.profileRow,f%2===0&&d.profileRowEven,r&&d.profileRowSelected,i&&d.profileRowHovered),children:[r?C(F2,{}):C("div",{style:{width:"16px"}}),C("span",{className:se(d.profileIndex,r&&d.profileIndexSelected),style:{width:O+"em"},children:[l+1,":"]})," ",P]})}function gm(t){t.stopPropagation()}function $2(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=E2(i.getName(),e);a&&n.push({indexInProfileGroup:r,profile:i,...a})}return ds(n,r=>-r.score),n}function z2({profiles:t,closeProfileSelect:e,indexToView:n,visible:r,setProfileIndexToView:i}){const a=Jv(dt()),[o,s]=Pt(""),l=Qe(D=>{const N=D.target.value;s(N)},[s]),u=Qe(D=>{D&&(r?D.select():D.blur())},[r]),f=It(()=>$2(t,o),[t,o]),[d,p]=Pt(0),x=Te(null);Mt(()=>{r&&(p(null),x.current!==null&&x.current.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"}))},[r]);const R=Qe(D=>{D.stopPropagation();let N=null;switch(D.key){case"Enter":{d!=null&&(e(),i(d));break}case"Escape":{e();break}case"ArrowDown":{if(D.preventDefault(),N=0,d!=null){const k=f.findIndex(W=>W.indexInProfileGroup===d);k!==-1&&(N=k+1)}break}case"ArrowUp":{if(D.preventDefault(),N=f.length-1,d!=null){const k=f.findIndex(W=>W.indexInProfileGroup===d);k!==-1&&(N=k-1)}break}}if(N!=null&&N>=0&&N<f.length){const k=f[N].indexInProfileGroup;p(k),A(!0)}},[e,i,d,f]),[O,A]=Pt(!1);Mt(()=>{f.length>0&&(p(f[0].indexInProfileGroup),A(!0))},[p,f]);const P=Qe(D=>{O&&D&&(D.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"}),A(!1))},[O,A]),S=Qe(D=>{x.current=D,P(D)},[x,P]);return C("div",{className:se(a.profileSelectOuter),children:[C("div",{className:se(a.caret)}),C("div",{className:se(a.profileSelectBox),children:[C("div",{className:se(a.filterInputContainer),children:[C(B2,{}),C("input",{type:"text",className:se(a.filterInput),ref:u,placeholder:"Filter...",value:o,onInput:l,onKeyDown:R,onKeyUp:gm,onKeyPress:gm})]}),C("div",{className:se(a.filterBorder)}),C("div",{className:se(a.profileSelectScrolling),children:[f.map(({profile:D,matchedRanges:N,indexInProfileGroup:k},W)=>{let Y;const X=k===n,K=k===d;return X&&K?Y=S:X?Y=x:K&&(Y=P),C(W2,{setHoveredProfileIndex:p,indexInProfileGroup:k,indexInFilteredListView:W,hovered:k==d,selected:k===n,profile:D,profileCount:t.length,nodeRef:Y,matchedRanges:N,setProfileIndexToView:i,closeProfileSelect:e})}),f.length===0?C("div",{className:se(a.profileRow),children:['No results match filter "',o,'"']}):null]})]})]})}const mm=10,Jv=sr(t=>zn.create({filterInputContainer:{display:"flex",flexDirection:"row",padding:"0px 8px",alignItems:"center",gap:"6px"},filterInput:{flexGrow:1,color:t.altFgPrimaryColor,background:t.altBgSecondaryColor,border:"none",borderRadius:5,padding:5,":focus":{border:"none",outline:"none"},"::selection":{color:t.altFgPrimaryColor,background:t.selectionPrimaryColor}},filterBorder:{margin:"4px 0",borderTop:"1px solid var(--colors-gray-1, #242424)"},caret:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"5px solid black"},highlighted:{background:t.selectionSecondaryColor},padding:{height:mm,background:t.altBgPrimaryColor},profileRow:{height:ze.FRAME_HEIGHT-2,border:"1px solid transparent",textAlign:"left",padding:"0px 8px",background:t.altBgPrimaryColor,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",gap:10,color:"var(--colors-gray-6, #D5D5D5)"},profileRowHovered:{backgroundColor:"var(--colors-gray-1, #242424)"},profileRowSelected:{color:"var(--colors-white, #FFFFFF)"},profileRowEven:{background:t.altBgSecondaryColor},profileSelectScrolling:{maxHeight:`min(calc(100vh - ${ze.TOOLBAR_HEIGHT-2*mm}px), ${20*ze.FRAME_HEIGHT}px)`,overflow:"auto","::-webkit-scrollbar":{background:t.altBgPrimaryColor},"::-webkit-scrollbar-thumb":{background:t.altFgSecondaryColor,borderRadius:20,border:`3px solid ${t.altBgPrimaryColor}`,":hover":{background:t.altBgPrimaryColor}}},profileSelectBox:{width:"100%",paddingBottom:10,background:t.altBgPrimaryColor,color:t.altFgPrimaryColor},profileSelectOuter:{width:"100%",maxWidth:480,margin:"0 auto",position:"absolute",top:"calc(100% - 3px)",left:"-4px",zIndex:ff.PROFILE_SELECT,alignItems:"center",display:"flex",flexDirection:"column"},profileIndex:{textAlign:"right",display:"inline-block",color:t.altFgSecondaryColor},profileIndexSelected:{color:t.altFgPrimaryColor}}));function Fc(t,e){return Qe(()=>t(e),[t,e])}function H2(t){const e=pf(dt()),n=Fc(Qr.set,xt.CHRONO_FLAME_CHART),r=Fc(Qr.set,xt.LEFT_HEAVY_FLAME_GRAPH),i=Fc(Qr.set,xt.SANDWICH_VIEW);return t.activeProfileState?C("div",{className:se(e.toolbarLeft),children:[C("div",{className:se(e.toolbarTab,t.viewMode===xt.CHRONO_FLAME_CHART&&e.toolbarTabActive),onClick:n,children:"Time Order"}),C("div",{className:se(e.toolbarTab,t.viewMode===xt.LEFT_HEAVY_FLAME_GRAPH&&e.toolbarTabActive),onClick:r,children:"Left Heavy"}),C("div",{className:se(e.toolbarTab,t.viewMode===xt.SANDWICH_VIEW&&e.toolbarTabActive),onClick:i,children:"Sandwich"})]}):null}const U2=(()=>{let t=null;return e=>{let n=(e==null?void 0:e.profiles.map(r=>r.profile))||null;return(t===null||n!=null&&!lf(t,n))&&(t=n),t}})();function Y2(t){const e=pf(dt()),{activeProfileState:n,profileGroup:r}=t,i=U2(r),[a,o]=Pt(!1),s=Qe(()=>{o(!0)},[o]),l=Qe(()=>{o(!1)},[o]);return Mt(()=>{const u=f=>{f.key==="t"&&(f.preventDefault(),o(!0))};return window.addEventListener("keypress",u),()=>{window.removeEventListener("keypress",u)}},[o]),Mt(()=>{const u=f=>{f.key==="t"&&(f.preventDefault(),o(!0))};return window.addEventListener("keypress",u),()=>{window.removeEventListener("keypress",u)}},[o]),n&&r&&i?r.profiles.length===1?C(St,{children:n.profile.getName()}):C("div",{className:se(e.toolbarCenter),onMouseLeave:l,children:[C("span",{className:se(e.toolbarProfileName),onMouseOver:s,children:[n.profile.getName()," ",C("span",{className:se(e.toolbarProfileIndex),children:["(",n.index+1,"/",r.profiles.length,")"]}),C(uv,{up:a})]}),C("div",{style:{display:a?"block":"none"},children:C(z2,{setProfileIndexToView:t.setProfileIndexToView,indexToView:r.indexToView,profiles:i,closeProfileSelect:l,visible:a})})]}):C(St,{children:Ke(cf).title??"🔬speedscope"})}function X2(t){const e=pf(dt());return C("div",{className:se(e.toolbar),children:[C(Y2,{...t}),C(H2,{...t})]})}const pf=sr(t=>zn.create({toolbar:{height:ze.TOOLBAR_HEIGHT-1,border:"1px solid var(--colors-gray-2, #2D2D2D)",flexShrink:0,background:t.altBgPrimaryColor,color:t.altFgPrimaryColor,textAlign:"center",fontFamily:ji.MONOSPACE,fontSize:Rt.TITLE,lineHeight:`${ze.TOOLBAR_TAB_HEIGHT}px`,userSelect:"none",padding:"2px 4px"},toolbarLeft:{height:"fit-content",overflow:"hidden",margin:"auto 0",marginRight:2,textAlign:"center",border:"1px solid var(--colors-gray-1, #242424)",borderRadius:"4px",position:"absolute",right:0,top:(ze.TOOLBAR_HEIGHT-ze.TOOLBAR_TAB_HEIGHT)/2+1.5},toolbarCenter:{padding:"2px 4px",height:"22px",textAlign:"left",position:"relative",left:0},toolbarProfileName:{display:"flex",flexDirection:"row",alignItems:"center",gap:"7px",height:"100%",whiteSpace:"nowrap"},toolbarRight:{height:ze.TOOLBAR_HEIGHT,overflow:"hidden",position:"absolute",top:0,right:0,marginRight:2,textAlign:"right"},toolbarProfileIndex:{color:t.altFgSecondaryColor},toolbarTab:{background:t.altBgSecondaryColor,height:ze.TOOLBAR_TAB_HEIGHT,lineHeight:`${ze.TOOLBAR_TAB_HEIGHT}px`,display:"inline-block",padding:"0px 8px",transition:`all ${Us.HOVER_CHANGE} ease-in`,":hover":{background:t.selectionSecondaryColor},":not(:first-child)":{borderLeft:"1px solid var(--colors-gray-1, #242424)"}},toolbarTabActive:{background:t.selectionPrimaryColor,":hover":{background:t.selectionPrimaryColor}},toolbarTabColorSchemeToggle:{display:"inline-block",textAlign:"center",minWidth:"50px"},emoji:{display:"inline-block",verticalAlign:"middle",paddingTop:"0px",marginRight:"0.3em"},noLinkStyle:{textDecoration:"none",color:"inherit"}})),G2=lo(()=>import("./source-map-CcMSLTY7.js").then(t=>t.s),[],import.meta.url);async function q2(t,e){const n=await G2;let r=null,i=null;try{i=JSON.parse(t),r=new n.SourceMapConsumer(i)}catch{return null}const a=[];r.eachMapping(function(s){a.push({...s,generatedColumn:s.generatedColumn+1,originalColumn:s.originalColumn+1})},{},n.SourceMapConsumer.GENERATED_ORDER);const o=e.replace(/\.[^/]*$/,"");return s=>{var p;let l=!1;if((i!=null&&i.file&&(i==null?void 0:i.file)===s.file||("/"+((p=s.file)==null?void 0:p.replace(/\.[^/]*$/,""))).endsWith("/"+o))&&(l=!0),!l||s.line==null||s.col==null)return null;let u=Fx(a,x=>x.generatedLine>s.line?!0:x.generatedLine<s.line?!1:x.generatedColumn>=s.col);if(u===-1)u=a.length-1;else{if(u===0)return null;u--}const f=a[u],d={};if(f.name!=null)d.name=f.name;else if(f.source!=null){const x=r==null?void 0:r.sourceContentFor(f.source,!0);if(x){const O=x.split(`
`)[f.originalLine-1];if(O){const A=/\w+/.exec(O.substr(f.originalColumn-1));A&&(d.name=A[0])}}}switch(d.name){case"constructor":{d.name=s.name+" constructor";break}case"function":{d.name=s.name;break}case"const":case"export":{d.name=s.name;break}}return d.name&&s.name.includes(d.name)&&(d.name=s.name),f.source!=null&&(d.file=f.source,d.line=f.originalLine,d.col=f.originalColumn),d}}const j2=({items:t,axis:e,renderItems:n,className:r,initialIndexInView:i})=>{const[a,o]=Pt(null),[s,l]=Pt(0),u=Te(null),f=e==="x"?"width":"height",d=e==="x"?"left":"top",p=e==="x"?"scrollLeft":"scrollTop",x=i?t.reduce((k,W,Y)=>Y<i?k+W.size:k,0):0,R=Te(x),O=Qe(k=>{k?requestAnimationFrame(()=>{o(k.getBoundingClientRect()[f]),R.current!=null&&(k.scrollTo({[d]:R.current}),R.current=null)}):o(null),u.current=k},[o,f,d]),A=It(()=>{if(u.current==null||a==null||s==null)return null;const k=s-a/4,W=s+a+a/4;let Y=0,X=0,K=0;for(;K<t.length;K++){const J=t[K];if(X=Y,Y+=J.size,Y>=k)break}const ie=K;for(;K<t.length;K++){const J=t[K];if(Y+=J.size,Y>=W)break}const ne=Math.min(K,t.length-1);return{firstVisibleIndex:ie,lastVisibleIndex:ne,invisiblePrefixSize:X}},[a,s,t]),P=It(()=>t.reduce((k,W)=>k+W.size,0),[t]),S=Qe(()=>{u.current!=null&&l(u.current[p])},[p]);Mt(()=>{const k=()=>{u.current!=null&&o(u.current.getBoundingClientRect()[f])};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k)}},[f]);const D=It(()=>A?n(A.firstVisibleIndex,A.lastVisibleIndex):null,[n,A]),N=It(()=>C("div",{style:{height:P},children:C("div",{style:{transform:`translateY(${(A==null?void 0:A.invisiblePrefixSize)||0}px)`},children:D})}),[A,D,P]);return C("div",{className:r,ref:O,onScroll:S,children:N})};function pm(t){const e=El(dt());return C("div",{className:se(e.hBarDisplay),children:C("div",{className:se(e.hBarDisplayFilled),style:{width:`${t.perc}%`}})})}function Vc(t){const e=dt(),n=El(e),{activeDirection:r}=t,i=r===jn.ASCENDING?e.fgPrimaryColor:e.fgSecondaryColor,a=r===jn.DESCENDING?e.fgPrimaryColor:e.fgSecondaryColor;return C("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:se(n.sortIcon),children:[C("path",{d:"M0 4L4 0L8 4H0Z",fill:i}),C("path",{d:"M0 4L4 0L8 4H0Z",transform:"translate(0 10) scale(1 -1)",fill:a})]})}function J2(t,e,n){const r=[];let i=0;for(let a of e)r.push(t.slice(i,a[0])),r.push(C("span",{className:n,children:t.slice(a[0],a[1])})),i=a[1];return r.push(t.slice(i)),C("span",{children:r})}const K2=({frame:t,matchedRanges:e,profile:n,index:r,selectedFrame:i,setSelectedFrame:a,getCSSColorForFrame:o})=>{const s=El(dt()),l=t.getTotalWeight(),u=t.getSelfWeight(),f=100*l/n.getTotalNonIdleWeight(),d=100*u/n.getTotalNonIdleWeight(),p=t===i;return C("tr",{onClick:a.bind(null,t),className:se(s.tableRow,r%2==0&&s.tableRowEven,p&&s.tableRowSelected),children:[C("td",{className:se(s.numericCell),children:[n.formatValue(l)," (",Oi(f),")",C(pm,{perc:f})]}),C("td",{className:se(s.numericCell),children:[n.formatValue(u)," (",Oi(d),")",C(pm,{perc:d})]}),C("td",{title:t.file,className:se(s.textCell),children:[C($v,{color:o(t)}),e?J2(t.name,e,se(s.matched,p&&s.matchedSelected)):t.name]})]},`${r}`)},Z2=_t(({profile:t,sortMethod:e,setSortMethod:n,selectedFrame:r,setSelectedFrame:i,getCSSColorForFrame:a,searchQuery:o,searchIsActive:s})=>{const l=El(dt()),u=Qe((A,P)=>{if(P.preventDefault(),e.field==A)n({field:A,direction:e.direction===jn.ASCENDING?jn.DESCENDING:jn.ASCENDING});else switch(A){case wn.SYMBOL_NAME:{n({field:A,direction:jn.ASCENDING});break}case wn.SELF:{n({field:A,direction:jn.DESCENDING});break}case wn.TOTAL:{n({field:A,direction:jn.DESCENDING});break}}},[e,n]),f=Yi(vf),d=Qe((A,P)=>{if(!f)return null;const S=[];for(let D=A;D<=P;D++){const N=f.rowList[D],k=f.getSearchMatchForFrame(N);S.push(K2({frame:N,matchedRanges:k??null,index:D,profile:t,selectedFrame:r,setSelectedFrame:i,getCSSColorForFrame:a}))}return S.length===0&&(s?S.push(C("tr",{children:C("td",{className:se(l.emptyState),children:['No symbol names match query "',o,'".']})})):S.push(C("tr",{children:C("td",{className:se(l.emptyState),children:"No symbols found."})}))),C("table",{className:se(l.tableView),children:S})},[f,t,r,i,a,s,o,l.emptyState,l.tableView]),p=It(()=>f==null?[]:f.rowList.map(A=>({size:ze.FRAME_HEIGHT})),[f]),x=Qe(A=>u(wn.TOTAL,A),[u]),R=Qe(A=>u(wn.SELF,A),[u]),O=Qe(A=>u(wn.SYMBOL_NAME,A),[u]);return C("div",{className:se(Tn.vbox,l.profileTableView),children:[C("table",{className:se(l.tableView),children:C("thead",{className:se(l.tableHeader),children:C("tr",{children:[C("th",{className:se(l.numericCell),onClick:x,children:[C(Vc,{activeDirection:e.field===wn.TOTAL?e.direction:null}),"Total"]}),C("th",{className:se(l.numericCell),onClick:R,children:[C(Vc,{activeDirection:e.field===wn.SELF?e.direction:null}),"Self"]}),C("th",{className:se(l.textCell),onClick:O,children:[C(Vc,{activeDirection:e.field===wn.SYMBOL_NAME?e.direction:null}),"Symbol Name"]})]})})}),C(j2,{axis:"y",items:p,className:se(l.scrollView),renderItems:d,initialIndexInView:r==null?null:f==null?void 0:f.getIndexForFrame(r)})]})}),El=sr(t=>zn.create({profileTableView:{background:t.bgPrimaryColor,height:"100%"},scrollView:{overflowY:"auto",overflowX:"hidden",flexGrow:1,"::-webkit-scrollbar":{background:t.bgPrimaryColor},"::-webkit-scrollbar-thumb":{background:t.fgSecondaryColor,borderRadius:20,border:`3px solid ${t.bgPrimaryColor}`,":hover":{background:t.fgPrimaryColor}}},tableView:{width:"100%",fontSize:Rt.LABEL,background:t.bgPrimaryColor},tableHeader:{borderBottom:`2px solid ${t.bgSecondaryColor}`,textAlign:"left",color:t.fgPrimaryColor,userSelect:"none"},sortIcon:{position:"relative",top:1,marginRight:ze.FRAME_HEIGHT/4},tableRow:{background:t.bgPrimaryColor,height:ze.FRAME_HEIGHT},tableRowEven:{background:t.bgSecondaryColor},tableRowSelected:{background:t.selectionPrimaryColor,color:t.altFgPrimaryColor},numericCell:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",position:"relative",textAlign:"right",paddingRight:ze.FRAME_HEIGHT,width:6*ze.FRAME_HEIGHT,minWidth:6*ze.FRAME_HEIGHT},textCell:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",maxWidth:0,textAlign:"start"},hBarDisplay:{position:"absolute",background:or.fromCSSHex(t.weightColor).withAlpha(.2).toCSS(),bottom:2,height:2,width:`calc(100% - ${2*ze.FRAME_HEIGHT}px)`,right:ze.FRAME_HEIGHT},hBarDisplayFilled:{height:"100%",position:"absolute",background:t.weightColor,right:0},matched:{borderBottom:`2px solid ${t.fgPrimaryColor}`},matchedSelected:{borderColor:t.altFgPrimaryColor},emptyState:{textAlign:"center",fontWeight:"bold"}})),Q2=_t(t=>{const{activeProfileState:e}=t,{profile:n,sandwichViewState:r}=e;if(!n)throw new Error("profile missing");const i=Ke(du),a=dt(),{callerCallee:o}=r,s=o?o.selectedFrame:null,l=ao(n),u=ro({theme:a,frameToColorBucket:l}),f=Qe(x=>{an.setSelectedFrame(x)},[]),d=Ke(Rs),p=Ke(Ms);return C(Z2,{profile:n,selectedFrame:s,getCSSColorForFrame:u,sortMethod:i,setSelectedFrame:f,setSortMethod:du.set,searchIsActive:d,searchQuery:p})});class Kv extends Ki{constructor(){super(...arguments),this.setConfigSpaceViewportRect=e=>{this.props.setConfigSpaceViewportRect(this.clampViewportToFlamegraph(e))},this.setLogicalSpaceViewportSize=e=>{this.props.setLogicalSpaceViewportSize(e)},this.transformViewport=e=>{this.setConfigSpaceViewportRect(e.transformRect(this.props.configSpaceViewportRect))},this.container=null,this.containerRef=e=>{this.container=e||null},this.setNodeHover=e=>{this.props.setNodeHover(e)}}clampViewportToFlamegraph(e){const{flamechart:n,renderInverted:r}=this.props;return n.getClampedConfigSpaceViewportRect({configSpaceViewportRect:e,renderInverted:r})}formatValue(e){const n=this.props.flamechart.getTotalWeight(),r=100*e/n,i=Oi(r);return`${this.props.flamechart.formatValue(e)} (${i})`}renderTooltip(){if(!this.container)return null;const{hover:e}=this.props;if(!e)return null;const{width:n,height:r,left:i,top:a}=this.container.getBoundingClientRect(),o=new Q(e.event.clientX-i,e.event.clientY-a),s=eA(this.props.theme),l=e.node.frame;return C(Hv,{containerSize:new Q(n,r),offset:o,children:[C("span",{className:se(s.hoverCount),children:this.formatValue(e.node.getTotalWeight())})," ",l.name,l.file?C("div",{children:[l.file,":",l.line]}):void 0]})}render(){return C("div",{className:se(Tn.fillY,Tn.fillX,Tn.vbox),ref:this.containerRef,children:[C(zv,{theme:this.props.theme,selectedNode:null,onNodeHover:this.setNodeHover,onNodeSelect:sf,configSpaceViewportRect:this.props.configSpaceViewportRect,setConfigSpaceViewportRect:this.setConfigSpaceViewportRect,transformViewport:this.transformViewport,flamechart:this.props.flamechart,flamechartRenderer:this.props.flamechartRenderer,canvasContext:this.props.canvasContext,renderInverted:this.props.renderInverted,logicalSpaceViewportSize:this.props.logicalSpaceViewportSize,setLogicalSpaceViewportSize:this.setLogicalSpaceViewportSize,searchResults:null,enableTimestampPointer:!1}),this.renderTooltip()]})}}const eA=sr(t=>zn.create({hoverCount:{color:t.weightColor}})),tA=ar(({profile:t,frame:e,flattenRecursion:n})=>{let r=t.getInvertedProfileForCallersOf(e);return n?r.getProfileWithRecursionFlattened():r}),nA=ar(({invertedCallerProfile:t,getColorBucketForFrame:e})=>new xl({getTotalWeight:t.getTotalNonIdleWeight.bind(t),forEachCall:t.forEachCallGrouped.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),rA=Sl({inverted:!0}),iA=_t(t=>{const{activeProfileState:e}=t;let{profile:n,sandwichViewState:r}=e;const i=Ke(Pa),a=Ke(Ns),o=dt();if(!n)throw new Error("profile missing");if(!a)throw new Error("glCanvas missing");const{callerCallee:s}=r;if(!s)throw new Error("callerCallee missing");const{selectedFrame:l}=s,u=ao(n),f=no(u),d=ro({theme:o,frameToColorBucket:u}),p=io({theme:o,canvas:a}),x=nA({invertedCallerProfile:tA({profile:n,frame:l,flattenRecursion:i}),getColorBucketForFrame:f}),R=rA({canvasContext:p,flamechart:x});return C(Kv,{theme:o,renderInverted:!0,flamechart:x,flamechartRenderer:R,canvasContext:p,getCSSColorForFrame:d,...Tl(eo.SANDWICH_INVERTED_CALLERS),...s.invertedCallerFlamegraph,setSelectedNode:sf})}),aA=ar(({profile:t,frame:e,flattenRecursion:n})=>{let r=t.getProfileForCalleesOf(e);return n?r.getProfileWithRecursionFlattened():r}),oA=ar(({calleeProfile:t,getColorBucketForFrame:e})=>new xl({getTotalWeight:t.getTotalNonIdleWeight.bind(t),forEachCall:t.forEachCallGrouped.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),sA=Sl(),lA=_t(t=>{const{activeProfileState:e}=t,{profile:n,sandwichViewState:r}=e,i=Ke(Pa),a=Ke(Ns),o=dt();if(!n)throw new Error("profile missing");if(!a)throw new Error("glCanvas missing");const{callerCallee:s}=r;if(!s)throw new Error("callerCallee missing");const{selectedFrame:l}=s,u=ao(n),f=no(u),d=ro({theme:o,frameToColorBucket:u}),p=io({theme:o,canvas:a}),x=oA({calleeProfile:aA({profile:n,frame:l,flattenRecursion:i}),getColorBucketForFrame:f}),R=sA({canvasContext:p,flamechart:x});return C(Kv,{theme:o,renderInverted:!1,flamechart:x,flamechartRenderer:R,canvasContext:p,getCSSColorForFrame:d,...Tl(eo.SANDWICH_CALLEES),...s.calleeFlamegraph,setSelectedNode:sf})}),cA=_t(()=>{const t=Yi(vf),e=t!=null?t.rowList:null,n=(t==null?void 0:t.selectedFrame)!=null?t.getIndexForFrame(t.selectedFrame):null,r=e!=null?e.length:null,{selectPrev:i,selectNext:a}=It(()=>e==null||r==null||r===0||t==null?{selectPrev:()=>{},selectNext:()=>{}}:{selectPrev:()=>{let o=n==null?r-1:n-1;o<0&&(o=r-1),t.setSelectedFrame(e[o])},selectNext:()=>{let o=n==null?0:n+1;o>=r&&(o=0),t.setSelectedFrame(e[o])}},[n,e,r,t]);return C(Fv,{resultIndex:n,numResults:r,selectPrev:i,selectNext:a})});class uA extends Ki{constructor(){super(...arguments),this.setSelectedFrame=e=>{this.props.setSelectedFrame(e)},this.onWindowKeyPress=e=>{e.key==="Escape"&&this.setSelectedFrame(null)}}componentDidMount(){window.addEventListener("keydown",this.onWindowKeyPress)}componentWillUnmount(){window.removeEventListener("keydown",this.onWindowKeyPress)}render(){const e=fA(this.props.theme),{selectedFrame:n}=this.props;let r=null;return n&&(r=C("div",{className:se(Tn.fillY,e.callersAndCallees,Tn.vbox),children:[C("div",{className:se(Tn.hbox,e.panZoomViewWraper),children:[C("div",{className:se(e.flamechartLabelParent),children:C("div",{className:se(e.flamechartLabel),children:"Callers"})}),C(iA,{glCanvas:this.props.glCanvas,activeProfileState:this.props.activeProfileState})]}),C("div",{className:se(e.divider)}),C("div",{className:se(Tn.hbox,e.panZoomViewWraper),children:[C("div",{className:se(e.flamechartLabelParent,e.flamechartLabelParentBottom),children:C("div",{className:se(e.flamechartLabel,e.flamechartLabelBottom),children:"Callees"})}),C(lA,{glCanvas:this.props.glCanvas,activeProfileState:this.props.activeProfileState})]})]})),C("div",{className:se(Tn.hbox,Tn.fillY),children:[C("div",{className:se(e.tableView),children:[C(Q2,{activeProfileState:this.props.activeProfileState}),C(cA,{})]}),r]})}}const fA=sr(t=>zn.create({tableView:{position:"relative",flex:1},panZoomViewWraper:{flex:1},flamechartLabelParent:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start",fontSize:Rt.TITLE,width:Rt.TITLE*1.2,borderRight:`1px solid ${t.fgSecondaryColor}`},flamechartLabelParentBottom:{justifyContent:"flex-start"},flamechartLabel:{transform:"rotate(-90deg)",transformOrigin:"50% 50% 0",width:Rt.TITLE*1.2,flexShrink:1},flamechartLabelBottom:{transform:"rotate(-90deg)",display:"flex",justifyContent:"flex-end"},callersAndCallees:{flex:1,borderLeft:`${ze.SEPARATOR_HEIGHT}px solid ${t.fgSecondaryColor}`},divider:{height:2,background:t.fgSecondaryColor}})),vf=gl(null),hA=_t(t=>{const{activeProfileState:e,glCanvas:n}=t,{sandwichViewState:r,index:i}=e,{callerCallee:a}=r,o=dt(),s=Qe(A=>{an.setSelectedFrame(A)},[]),l=e.profile,u=Ke(du),f=Yi(yl),d=a?a.selectedFrame:null,p=It(()=>{const A=[];switch(l.forEachFrame(P=>{f&&!f.getMatchForFrame(P)||A.push(P)}),u.field){case wn.SYMBOL_NAME:{ds(A,P=>P.name.toLowerCase());break}case wn.SELF:{ds(A,P=>P.getSelfWeight());break}case wn.TOTAL:{ds(A,P=>P.getTotalWeight());break}}return u.direction===jn.DESCENDING&&A.reverse(),A},[l,f,u]),x=It(()=>{const A=new Map;for(let P=0;P<p.length;P++)A.set(p[P],P);return P=>{const S=A.get(P);return S??null}},[p]),R=It(()=>A=>f==null?null:f.getMatchForFrame(A),[f]),O={rowList:p,selectedFrame:d,setSelectedFrame:s,getIndexForFrame:x,getSearchMatchForFrame:R};return C(vf.Provider,{value:O,children:C(uA,{theme:o,activeProfileState:e,glCanvas:n,setSelectedFrame:s,selectedFrame:d,profileIndex:i})})}),dA=""+new URL("perf-vertx-stacks-01-collapsed-all-1_MAgNGf.txt",import.meta.url).href,Zi=lo(()=>import("./index-o-qF_W1p.js"),[],import.meta.url);Zi.then(()=>{});lo(()=>import("./index-DA4yW5Kz.js"),[],import.meta.url).then(()=>{});lo(()=>import("./source-map-CcMSLTY7.js").then(t=>t.s),[],import.meta.url).then(()=>{});async function vm(t,e){return(await Zi).importProfileGroupFromText(t,e)}async function gA(t,e){return(await Zi).importProfileGroupFromBase64(t,e)}async function mA(t,e){return(await Zi).importProfilesFromArrayBuffer(t,e)}async function pA(t){return(await Zi).importProfilesFromFile(t)}async function vA(t){return(await Zi).importFromFileSystemDirectoryEntry(t)}function bA(t){return t!=null&&t.isDirectory}class _A extends Ki{constructor(){super(...arguments),this.canvas=null,this.ref=e=>{e instanceof HTMLCanvasElement?this.canvas=e:this.canvas=null,this.props.setGLCanvas(this.canvas)},this.container=null,this.containerRef=e=>{e instanceof HTMLElement?this.container=e:this.container=null},this.maybeResize=()=>{if(!this.container||!this.props.canvasContext)return;let{width:e,height:n}=this.container.getBoundingClientRect();const r=e,i=n,a=e*window.devicePixelRatio,o=n*window.devicePixelRatio;this.props.canvasContext.gl.resize(a,o,r,i)},this.onWindowResize=()=>{this.props.canvasContext&&this.props.canvasContext.requestFrame()}}componentWillReceiveProps(e){this.props.canvasContext!==e.canvasContext&&(this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.maybeResize),e.canvasContext&&(e.canvasContext.addBeforeFrameHandler(this.maybeResize),e.canvasContext.requestFrame()))}componentDidMount(){window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.maybeResize),window.removeEventListener("resize",this.onWindowResize)}render(){const e=Zv(this.props.theme);return C("div",{ref:this.containerRef,className:se(e.glCanvasView),children:C("canvas",{ref:this.ref,width:1,height:1})})}}class yA extends Ki{constructor(){super(...arguments),this.glCanvasRef=Jr(),this.loadExample=()=>{this.loadProfile(async()=>{const e="perf-vertx-stacks-01-collapsed-all.txt",n=await fetch(dA).then(r=>r.text());return await vm(e,n)})},this.checkDragImportEnabled=()=>cf.get().dragImport??!0,this.onDrop=e=>{this.checkDragImportEnabled()&&(this.props.setDragActive(!1),e.preventDefault(),this.loadDropFile(e))},this.loadDropFile=e=>{if(!e.dataTransfer)return;const n=e.dataTransfer.items[0];if(n&&"webkitGetAsEntry"in n){const i=n.webkitGetAsEntry();if(i&&bA(i)&&i.name.endsWith(".trace")){const a=i;this.loadProfile(async()=>await vA(a));return}}let r=e.dataTransfer.files.item(0);r&&this.loadFromFile(r)},this.onDragOver=e=>{this.checkDragImportEnabled()&&(this.props.setDragActive(!0),e.preventDefault())},this.onDragLeave=e=>{this.checkDragImportEnabled()&&(this.props.setDragActive(!1),e.preventDefault())},this.onWindowKeyPress=async e=>{if(e.key==="1")this.props.setViewMode(xt.CHRONO_FLAME_CHART);else if(e.key==="2")this.props.setViewMode(xt.LEFT_HEAVY_FLAME_GRAPH);else if(e.key==="3")this.props.setViewMode(xt.SANDWICH_VIEW);else if(e.key==="r"){const{flattenRecursion:n}=this.props;this.props.setFlattenRecursion(!n)}else if(e.key==="n"){const{activeProfileState:n}=this.props;n&&this.props.setProfileIndexToView(n.index+1)}else if(e.key==="p"){const{activeProfileState:n}=this.props;n&&this.props.setProfileIndexToView(n.index-1)}},this.saveFile=()=>{if(this.props.profileGroup){const{name:e,indexToView:n,profiles:r}=this.props.profileGroup,i={name:e,indexToView:n,profiles:r.map(a=>a.profile)};o2(i)}},this.browseForFile=()=>{const e=document.createElement("input");e.type="file",e.addEventListener("change",this.onFileSelect),e.click()},this.onWindowKeyDown=async e=>{e.key==="s"&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),this.saveFile()):e.key==="o"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.browseForFile())},this.onDocumentPaste=e=>{if(document.activeElement!=null&&document.activeElement.nodeName==="INPUT")return;e.preventDefault(),e.stopPropagation();const n=e.clipboardData;if(!n)return;const r=n.getData("text");this.loadProfile(async()=>await vm("From Clipboard",r))},this.onFileSelect=e=>{const n=e.target.files.item(0);n&&this.loadFromFile(n)}}async loadProfile(e){var r,i;if(this.props.setError(!1),this.props.setLoading(!0),await new Promise(a=>setTimeout(a,0)),!this.props.glCanvas)return;let n=null;try{n=await e()}catch{this.props.setError(!0);return}if(n==null){alert("Unrecognized format! See documentation about supported formats."),this.props.setLoading(!1);return}else if(n.profiles.length===0&&(((r=bn.get())==null?void 0:r.length)??0)===0){alert("Successfully imported profile, but it's empty!"),this.props.setLoading(!1);return}else if(n.profiles.length===0){const a=Math.max(...((i=bn.get())==null?void 0:i.map(l=>l.ts).filter(Boolean))??[1]);Ra.set(!0);const o=new df(a),s={key:"no_trace",name:""};o.enterFrame(s,0),o.leaveFrame(s,a),n.profiles.push(o.build())}else Ra.set(!1);this.props.hashParams.title&&(n={...n,name:this.props.hashParams.title}),document.title=`${n.name} - speedscope`,this.props.hashParams.viewMode&&this.props.setViewMode(this.props.hashParams.viewMode);for(let a of n.profiles)await a.demangle();n.profiles.forEach((a,o)=>{const s=this.props.hashParams.title||a.getName();a.setName(s),s.startsWith("main (")&&(n.indexToView=o)}),setTimeout(()=>{var a;this.glCanvasRef.current&&((a=this.glCanvasRef.current.props.canvasContext)==null||a.flamechartColorPassRenderer.updateMaterial(this.glCanvasRef.current.props.canvasContext.gl,this.props.theme))}),this.props.setProfileGroup(n),this.props.setLoading(!1)}getStyle(){return Zv(this.props.theme)}loadFromFile(e){this.loadProfile(async()=>{const n=await pA(e);if(n){for(let r of n.profiles)r.getName()||r.setName(e.name);return n}if(this.props.profileGroup&&this.props.activeProfileState){const r=new FileReader,i=new Promise(u=>{r.addEventListener("loadend",()=>{if(typeof r.result!="string")throw new Error("Expected reader.result to be a string");u(r.result)})});r.readAsText(e);const a=await i;let o=null;const s=t2(a);s&&(o=s);const l=await q2(a,e.name);if(!o&&l&&(o=l),o!=null)return{name:this.props.profileGroup.name||"profile",indexToView:this.props.profileGroup.indexToView,profiles:this.props.profileGroup.profiles.map(u=>{const f=u.profile.shallowClone();return f.remapSymbols(o),f})}}return null})}componentDidMount(){window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("keypress",this.onWindowKeyPress),document.addEventListener("paste",this.onDocumentPaste),this.maybeLoadHashParamProfile()}componentWillUnmount(){window.removeEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("keypress",this.onWindowKeyPress),document.removeEventListener("paste",this.onDocumentPaste)}async maybeLoadHashParamProfile(){const{profileURL:e}=this.props.hashParams;if(e){if(!fu){alert(`Cannot load a profile URL when loading from "${window.location.protocol}" URL protocol`);return}this.loadProfile(async()=>{const n=await fetch(e);let r=new URL(e,window.location.href).pathname;return r.includes("/")&&(r=r.slice(r.lastIndexOf("/")+1)),await mA(r,await n.arrayBuffer())})}else if(this.props.hashParams.localProfilePath){window.speedscope={loadFileFromBase64:(r,i)=>{this.loadProfile(()=>gA(r,i))}};const n=document.createElement("script");n.src=`file:///${this.props.hashParams.localProfilePath}`,document.head.appendChild(n)}}renderLanding(){const e=this.getStyle(),n=C("div",{className:se(e.browseButtonContainer),children:[C("input",{type:"file",name:"file",id:"file",onChange:this.onFileSelect,className:se(e.hide)}),C("label",{for:"file",className:se(e.browseButton),tabIndex:0,children:"Browse"})]});return C("div",{className:se(e.landingContainer),children:this.props.customWelcomeMessage.default?this.props.customWelcomeMessage.default(se(e.landingMessage),se(e.landingP),se(e.link),n):C("div",{className:se(e.landingMessage),children:[C("p",{className:se(e.landingP),children:["👋 Hi there! Welcome to 🔬speedscope, an interactive"," ",C("a",{className:se(e.link),href:"http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html",children:"flamegraph"})," ","visualizer. Use it to help you make your software faster."]}),fu?C("p",{className:se(e.landingP),children:["Drag and drop a profile file onto this window to get started, click the big blue button below to browse for a profile to explore, or"," ",C("a",{tabIndex:0,className:se(e.link),onClick:this.loadExample,children:"click here"})," ","to load an example profile."]}):C("p",{className:se(e.landingP),children:"Drag and drop a profile file onto this window to get started, or click the big blue button below to browse for a profile to explore."}),n,C("p",{className:se(e.landingP),children:["See the"," ",C("a",{className:se(e.link),href:"https://github.com/jlfwong/speedscope#usage",target:"_blank",children:"documentation"})," ","for information about supported file formats, keyboard shortcuts, and how to navigate around the profile."]}),C("p",{className:se(e.landingP),children:["speedscope is open source. Please"," ",C("a",{className:se(e.link),target:"_blank",href:"https://github.com/jlfwong/speedscope/issues",children:"report any issues on GitHub"}),"."]})]})})}renderError(){const e=this.getStyle();return C("div",{className:se(e.error),children:[C("div",{children:"😿 Something went wrong."}),C("div",{children:"Check the JS console for more details."})]})}renderLoadingBar(){const e=this.getStyle();return C("div",{className:se(e.loading)})}renderContent(){const{viewMode:e,activeProfileState:n,error:r,loading:i,glCanvas:a}=this.props;if(r)return this.renderError();if(i)return this.renderLoadingBar();if(!n||!a)return this.renderLanding();switch(e){case xt.CHRONO_FLAME_CHART:return C(w2,{activeProfileState:n,glCanvas:a});case xt.LEFT_HEAVY_FLAME_GRAPH:return C(S2,{activeProfileState:n,glCanvas:a});case xt.SANDWICH_VIEW:return C(hA,{activeProfileState:n,glCanvas:a})}}render(){const e=this.getStyle(),n=Ke(Ra);return C("div",{onDrop:this.onDrop,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,className:se(e.root,this.props.dragActive&&e.dragTargetRoot),children:[C(_A,{ref:this.glCanvasRef,setGLCanvas:this.props.setGLCanvas,canvasContext:this.props.canvasContext,theme:this.props.theme}),C(X2,{saveFile:this.saveFile,browseForFile:this.browseForFile,...this.props}),C("div",{className:se(e.contentContainer),children:this.renderContent()}),this.props.dragActive&&C("div",{className:se(e.dragTarget)}),n&&C("div",{className:se(e.noTraceWatermark),children:[C("h1",{className:se(e.watermarkH1),children:"NO TRACE"}),C("p",{className:se(e.watermarkP),children:"This TEF does not come with any trace"})]})]})}}const Zv=sr(t=>zn.create({glCanvasView:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,pointerEvents:"none"},error:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},loading:{height:3,marginBottom:-3,background:t.selectionPrimaryColor,transformOrigin:"0% 50%",animationName:[{from:{transform:"scaleX(0)"},to:{transform:"scaleX(1)"}}],animationTimingFunction:"cubic-bezier(0, 1, 0, 1)",animationDuration:"30s"},root:{width:"100%",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",fontFamily:ji.MONOSPACE,lineHeight:"20px",color:t.fgPrimaryColor},dragTargetRoot:{cursor:"copy"},dragTarget:{boxSizing:"border-box",position:"absolute",top:0,left:0,width:"100%",height:"100%",border:`5px dashed ${t.selectionPrimaryColor}`,pointerEvents:"none"},contentContainer:{position:"relative",display:"flex",overflow:"hidden",flexDirection:"column",flex:1},landingContainer:{display:"flex",alignItems:"center",justifyContent:"center",flex:1},landingMessage:{maxWidth:600},landingP:{marginBottom:16},hide:{display:"none"},browseButtonContainer:{display:"flex",alignItems:"center",justifyContent:"center"},browseButton:{marginBottom:16,height:72,flex:1,maxWidth:256,textAlign:"center",fontSize:Rt.BIG_BUTTON,lineHeight:"72px",background:t.selectionPrimaryColor,color:t.altFgPrimaryColor,transition:`all ${Us.HOVER_CHANGE} ease-in`,":hover":{background:t.selectionSecondaryColor}},link:{color:t.selectionPrimaryColor,cursor:"pointer",textDecoration:"none",transition:`all ${Us.HOVER_CHANGE} ease-in`,":hover":{color:t.selectionSecondaryColor}},noTraceWatermark:{backgroundColor:"transparent",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.5,display:"flex",flexDirection:"column",gap:"1.1rem",justifyContent:"center",alignItems:"center",textAlign:"center","user-select":"none","-webki-user-select":"none","-ms-user-select":"none"},watermarkH1:{fontSize:"7.5em",lineHeight:"6rem"},watermarkP:{fontSize:"1.4em"}})),wA=_t(()=>{const t=Ke(Ns),e=dt(),n=It(()=>t?io({theme:e,canvas:t}):null,[e,t]),r=Te();return Mt(()=>(r&&Os.set(r),()=>Os.set(null))),C(jE,{children:C(yA,{ref:r,activeProfileState:Nv(),canvasContext:n,setGLCanvas:Ns.set,setLoading:yg.set,setError:wg.set,setProfileGroup:an.setProfileGroup,setDragActive:bg.set,setViewMode:Qr.set,setFlattenRecursion:Pa.set,setProfileIndexToView:an.setProfileIndexToView,profileGroup:Ke(an),theme:e,flattenRecursion:Ke(Pa),viewMode:Ke(Qr),hashParams:Ke(zx),glCanvas:t,dragActive:Ke(bg),loading:Ke(yg),error:Ke(wg),customWelcomeMessage:Ke(hu)})})});function xA({pClass:t,children:e}){const r={backgroundColor:dt().selectionSecondaryColor};return C(St,{children:[C("p",{className:t,children:"Drag and drop a trace in TEF (Trace Event Format) onto this window to get started, or click the big blue button below to browse for a file to explore."}),e,C("p",{className:t,children:["To convert CTF (Common Trace Format) trace received from Zephyr, use"," ",C("span",{style:r,className:bt["welcome-message-code"],children:"west zpl-prepare-trace"})," ","command from the Zeppelin library."]})]})}function TA(t,e,n,r){return C("div",{className:t,children:[C("p",{className:e,children:["Hi there! Welcome to Zeppelin Trace Viewer, an interactive visualizer for"," ",C("a",{className:n,href:"https://docs.zephyrproject.org/latest/services/tracing/index.html",target:"_blank",children:"Zephyr traces"}),"."]}),C(xA,{pClass:e,aClass:n,children:r})]})}const SA=_t(()=>{cf.set({title:"",dragImport:!1}),Ls.selectionPrimaryColor="#7929d2",Ls.selectionSecondaryColor="#9454db",Ba.selectionPrimaryColor="#9454db",Ba.selectionSecondaryColor="#af7fe4",hu.get().default===void 0&&hu.set({default:TA}),ka.get()===Ti.SYSTEM&&ka.set(Ti.DARK);const e=Te(null),n=new ResizeObserver(r=>{window.dispatchEvent(new Event("resize"))});return Mt(()=>(e.current!==null&&n.observe(e.current),()=>n.disconnect()),[]),C("div",{id:bt["speedscope-container"],ref:e,children:C(uT,{children:C(wA,{})})})},(t,e)=>!0),Na=Xi(SA,"Flamegraph",{additionalProps:{minHeight:400,minWidth:540,enableClose:!1}}),Gs={"panel-element":"_panel-element_b00pc_82","section-content":"_section-content_b00pc_90","no-padding":"_no-padding_b00pc_100","generic-info":"_generic-info_b00pc_108"};function Qi({children:t,additionalContentClass:e}){return C("div",{className:Gs["panel-element"],children:C("div",{className:Gs["section-content"]+` ${e??""}`,children:t})})}const EA="_key_nag5n_95",AA="_major_nag5n_125",mr={"model-event-section":"_model-event-section_nag5n_82",key:EA,"model-layer-section":"_model-layer-section_nag5n_111",major:AA,"item-name":"_item-name_nag5n_132"},bf="MEMORY",CA=`${bf}::SYMBOLS`,RA=`${bf}::STATICALLY_ASSIGNED_MEM`,MA="thread_name",NA="CPU_LOAD",OA="DIE_TEMP",Qv="MODEL";function DA({frameArgs:t}){const e=["subgraph_idx","op_idx","tag","runtime","thread_id","tag_len"],n=Object.entries(t.begin).filter(([r,i])=>!e.includes(r));if(n.length!==0)return C("table",{children:[C("thead",{children:C("tr",{children:[C("th",{className:mr.key,children:"Param"}),C("th",{children:"Start"}),C("th",{children:"End"})]})}),C("tbody",{children:n.map(([r,i])=>C("tr",{children:[C("th",{className:mr.key,children:r}),C("th",{children:i}),C("th",{children:t.end[r]})]}))})]})}function LA({frameArgs:t}){var l;const[e,n]=Pt(bn.get());bn.subscribe(()=>{n(bn.get())});const r=(l=(e??[]).find(u=>u.name===Qv))==null?void 0:l.args,i=u=>{const f=r==null?void 0:r.tensors.find(p=>p.index===u&&p.subgraph_idx===t.begin.subgraph_idx);if(f===void 0)return;const d=f.name.split("/").map((p,x,R)=>x===R.length-1?p:C(St,{children:[p,"/",C("wbr",{})]}));return C("li",{children:[" ",d,": [",f.shape.join(", "),"] of ",f.dtype," "]})};if(r===void 0)return;const a=r.ops.find(u=>u.index===t.begin.op_idx);if(!a)return;const o=u=>C("span",{className:mr["item-name"],children:u.children}),s=Object.entries(a.parameters??{}).map(([u,f])=>typeof f=="string"?[u,f]:[u,JSON.stringify(f)]).map(([u,f])=>C("li",{children:[u,": ",f]}));return C("div",{className:mr["model-layer-section"],children:[C("h3",{children:" Layer info "}),C("ul",{children:[C("li",{className:mr.major,children:[" Operation type: ",a.op_name," "]}),C("li",{className:mr.major,children:[C(o,{children:"Inputs"}),":",C("ol",{children:a.inputs.map(i)})]}),C("li",{className:mr.major,children:[C(o,{children:"Outputs"}),":",C("ol",{children:a.outputs.map(i)})]}),s.length>0&&C("li",{className:mr.major,children:[C(o,{children:"Parameters"}),":",C("ol",{children:s})]})]})]})}function IA({frameArgs:t}){const e=DA({frameArgs:t}),n=LA({frameArgs:t});return C(Qi,{additionalContentClass:Gs["no-padding"],children:C("div",{className:mr["model-event-section"],children:[e,n,!e&&!n?C("div",{children:C("p",{children:"The event does not contain information to display"})}):""]})})}function PA(){const[t,e]=Pt(void 0);return an.subscribe(()=>{var a,o;const n=an.getActiveProfile();if(n===null){e(void 0);return}const r=Qr.get();let i;switch(r){case xt.CHRONO_FLAME_CHART:i=n.chronoViewState;break;case xt.LEFT_HEAVY_FLAME_GRAPH:i=n.leftHeavyViewState;break;case xt.SANDWICH_VIEW:i=n.sandwichViewState;break}r===xt.SANDWICH_VIEW?e((a=i==null?void 0:i.callerCallee)==null?void 0:a.selectedFrame):e((o=i==null?void 0:i.selectedNode)==null?void 0:o.frame)}),{frameSt:t}}function bm({info:t}){return C(Qi,{children:C("p",{className:Gs["generic-info"],children:t})})}function kA(){var e;const{frameSt:t}=PA();return typeof(t==null?void 0:t.key)=="string"&&((e=t==null?void 0:t.key)!=null&&e.startsWith(`${Qv}::`))?C(IA,{frameArgs:t.args}):t?C(bm,{info:"The chosen event does not contain additional information"}):C(bm,{info:"For more info, choose an event"})}const BA=Xi(kA,"Additional Info");function FA(){const e=(bn.get()??[]).filter(n=>n.name===NA).map(n=>({ts:+n.ts.toFixed(3),...n.args}));if(e.length!==0)return{fullData:e}}function gt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function e0(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function co(t){let e,n,r;t.length!==2?(e=gt,n=(s,l)=>gt(t(s),l),r=(s,l)=>t(s)-l):(e=t===gt||t===e0?t:VA,n=t,r=t);function i(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{const d=u+f>>>1;n(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function a(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{const d=u+f>>>1;n(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=i(s,l,u,f-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function VA(){return 0}function qs(t){return t===null?NaN:+t}function*WA(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const t0=co(gt),kr=t0.right,$A=t0.left,zA=co(qs).center;function HA(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=_f(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const UA=n0(_f),YA=n0(XA);function n0(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),l=r&&t(r),u=i.slice();return s&&l?(vi(s,u,i,a,o),vi(s,i,u,a,o),vi(s,u,i,a,o),bi(l,i,u,a,o),bi(l,u,i,a,o),bi(l,i,u,a,o)):s?(vi(s,i,u,a,o),vi(s,u,i,a,o),vi(s,i,u,a,o)):l&&(bi(l,i,u,a,o),bi(l,u,i,a,o),bi(l,i,u,a,o)),e}}function vi(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function bi(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function XA(t){const e=_f(t);return(n,r,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(n,r,i+0,a+0,o),e(n,r,i+1,a+1,o),e(n,r,i+2,a+2,o),e(n,r,i+3,a+3,o)}}function _f(t){const e=Math.floor(t);if(e===t)return GA(t);const n=t-e,r=2*t+1;return(i,a,o,s,l)=>{if(!((s-=l)>=o))return;let u=e*a[o];const f=l*e,d=f+l;for(let p=o,x=o+f;p<x;p+=l)u+=a[Math.min(s,p)];for(let p=o,x=s;p<=x;p+=l)u+=a[Math.min(s,p+f)],i[p]=(u+n*(a[Math.max(o,p-d)]+a[Math.min(s,p+d)]))/r,u-=a[Math.max(o,p-f)]}}function GA(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const l=o*t;for(let u=i,f=i+l;u<f;u+=o)s+=r[Math.min(a,u)];for(let u=i,f=a;u<=f;u+=o)s+=r[Math.min(a,u+l)],n[u]=s/e,s-=r[Math.max(i,u-l)]}}function Al(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function qA(t){return t.length|0}function jA(t){return!(t>0)}function JA(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function KA(t){return e=>t(...e)}function ZA(...t){const e=typeof t[t.length-1]=="function"&&KA(t.pop());t=t.map(JA);const n=t.map(qA),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(jA))return a;for(;;){a.push(i.map((s,l)=>t[l][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}function QA(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function r0(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function i0(t,e){const n=r0(t,e);return n&&Math.sqrt(n)}function bs(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class yf{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function eC(t,e){const n=new yf;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function tC(t,e){const n=new yf;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}class $a extends Map{constructor(e,n=s0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Ru(this,e))}has(e){return super.has(Ru(this,e))}set(e,n){return super.set(a0(this,e),n)}delete(e){return super.delete(o0(this,e))}}class ri extends Set{constructor(e,n=s0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Ru(this,e))}add(e){return super.add(a0(this,e))}delete(e){return super.delete(o0(this,e))}}function Ru({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function a0({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function o0({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function s0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Pi(t){return t}function l0(t,...e){return ea(t,Pi,Pi,e)}function c0(t,...e){return ea(t,Array.from,Pi,e)}function u0(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function nC(t,...e){return u0(c0(t,...e),e)}function rC(t,e,...n){return u0(h0(t,e,...n),n)}function f0(t,e,...n){return ea(t,Pi,e,n)}function h0(t,e,...n){return ea(t,Array.from,e,n)}function iC(t,...e){return ea(t,Pi,d0,e)}function aC(t,...e){return ea(t,Array.from,d0,e)}function d0(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function ea(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new $a,l=r[o++];let u=-1;for(const f of a){const d=l(f,++u,a),p=s.get(d);p?p.push(f):s.set(d,[f])}for(const[f,d]of s)s.set(f,i(d,o));return e(s)}(t,0)}function g0(t,e){return Array.from(e,n=>t[n])}function Mu(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=ki(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>ki(n[i],n[a]))),g0(t,r)}return t.sort(wf(n))}function wf(t=gt){if(t===gt)return ki;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ki(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function oC(t,e,n){return(e.length!==2?Mu(f0(t,e,n),([r,i],[a,o])=>gt(i,o)||gt(r,a)):Mu(l0(t,n),([r,i],[a,o])=>e(i,o)||gt(r,a))).map(([r])=>r)}var sC=Array.prototype,lC=sC.slice;function Wc(t){return()=>t}const cC=Math.sqrt(50),uC=Math.sqrt(10),fC=Math.sqrt(2);function js(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=cC?10:a>=uC?5:a>=fC?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?js(t,e,n*2):[s,l,u]}function za(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?js(e,t,n):js(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function ii(t,e,n){return e=+e,t=+t,n=+n,js(t,e,n)[2]}function Js(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ii(e,t,n):ii(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function m0(t,e,n){let r;for(;;){const i=ii(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function p0(t){return Math.max(1,Math.ceil(Math.log(Al(t))/Math.LN2)+1)}function _m(){var t=Pi,e=bs,n=p0;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var f=e(u),d=f[0],p=f[1],x=n(u,d,p);if(!Array.isArray(x)){const D=p,N=+x;if(e===bs&&([d,p]=m0(d,p,N)),x=za(d,p,N),x[0]<=d&&(l=ii(d,p,N)),x[x.length-1]>=p)if(D>=p&&e===bs){const k=ii(d,p,N);isFinite(k)&&(k>0?p=(Math.floor(p/k)+1)*k:k<0&&(p=(Math.ceil(p*-k)+1)/-k))}else x.pop()}for(var R=x.length,O=0,A=R;x[O]<=d;)++O;for(;x[A-1]>p;)--A;(O||A<R)&&(x=x.slice(O,A),R=A-O);var P=new Array(R+1),S;for(a=0;a<=R;++a)S=P[a]=[],S.x0=a>0?x[a-1]:d,S.x1=a<R?x[a]:p;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&d<=s&&s<=p&&P[Math.min(R,Math.floor((s-d)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&d<=s&&s<=p){const D=Math.floor((d-s)*l);P[Math.min(R,D+(x[D]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&d<=s&&s<=p&&P[kr(x,s,0,R)].push(i[a]);return P}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Wc(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Wc([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Wc(Array.isArray(i)?lC.call(i):i),r):n},r}function Nu(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function xf(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Ks(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Tf(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Cl(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?ki:wf(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),x=Math.max(n,Math.floor(e-u*d/l+p)),R=Math.min(r,Math.floor(e+(l-u)*d/l+p));Cl(t,e,x,R,i)}const a=t[e];let o=n,s=r;for(pa(t,n,e),i(t[r],a)>0&&pa(t,n,r);o<s;){for(pa(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?pa(t,n,s):(++s,pa(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function pa(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v0(t,e=gt){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?gt(o,i)>0:gt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Ha(t,e,n){if(t=Float64Array.from(WA(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ks(t);if(e>=1)return Nu(t);var r,i=(r-1)*e,a=Math.floor(i),o=Nu(Cl(t,a).subarray(0,a+1)),s=Ks(t.subarray(a+1));return o+(s-o)*(i-a)}}function b0(t,e,n=qs){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function _0(t,e,n=qs){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,l)=>qs(n(t[l],l,t))),e<=0)return Tf(r);if(e>=1)return xf(r);var r,i=Uint32Array.from(t,(s,l)=>l),a=r.length-1,o=Math.floor(a*e);return Cl(i,o,0,a,(s,l)=>ki(r[s],r[l])),o=v0(i.subarray(0,o+1),s=>r[s]),o>=0?o:-1}}function hC(t,e,n){const r=Al(t),i=Ha(t,.75)-Ha(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function dC(t,e,n){const r=Al(t),i=i0(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function gC(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function mC(t,e){return Ha(t,.5,e)}function pC(t,e){return _0(t,.5,e)}function*vC(t){for(const e of t)yield*e}function bC(t){return Array.from(vC(t))}function _C(t,e){const n=new $a;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function yC(t,e=wC){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function wC(t,e){return[t,e]}function y0(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function xC(t,e=gt){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=gt);const i=(s,l)=>e(n[s],n[l]);let a,o;return t=Uint32Array.from(n,(s,l)=>l),t.sort(e===gt?(s,l)=>ki(n[s],n[l]):wf(i)),t.forEach((s,l)=>{const u=i(s,a===void 0?s:a);u>=0?((a===void 0||u>0)&&(a=s,o=l),r[s]=o):r[s]=NaN}),r}function Ou(t,e=gt){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?gt(o,i)<0:gt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function w0(t,e=gt){if(e.length===1)return Tf(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)<0)&&(n=a,r=i);return r}function TC(t,e=gt){if(e.length===1)return xf(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)>0)&&(n=a,r=i);return r}function SC(t,e){const n=w0(t,e);return n<0?void 0:n}const EC=x0(Math.random);function x0(t){return function(n,r=0,i=n.length){let a=i-(r=+r);for(;a;){const o=t()*a--|0,s=n[a+r];n[a+r]=n[o+r],n[o+r]=s}return n}}function AC(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function T0(t){if(!(a=t.length))return[];for(var e=-1,n=Ks(t,CC),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r}function CC(t){return t.length}function RC(){return T0(arguments)}function MC(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function NC(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function OC(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function DC(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function LC(t,e,n){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)n=e(n,a,++o,t);return n}function IC(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function PC(t,...e){t=new ri(t);for(const n of e)for(const r of n)t.delete(r);return t}function kC(t,e){const n=e[Symbol.iterator](),r=new ri;for(const i of t){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0}function BC(t,...e){t=new ri(t),e=e.map(FC);e:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue e}return t}function FC(t){return t instanceof ri?t:new ri(t)}function S0(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){const a=ym(i);if(r.has(a))continue;let o,s;for(;{value:o,done:s}=n.next();){if(s)return!1;const l=ym(o);if(r.add(l),Object.is(a,l))break}}return!0}function ym(t){return t!==null&&typeof t=="object"?t.valueOf():t}function VC(t,e){return S0(e,t)}function WC(...t){const e=new ri;for(const n of t)for(const r of n)e.add(r);return e}const $C=Object.freeze(Object.defineProperty({__proto__:null,Adder:yf,InternMap:$a,InternSet:ri,ascending:gt,bin:_m,bisect:kr,bisectCenter:zA,bisectLeft:$A,bisectRight:kr,bisector:co,blur:HA,blur2:UA,blurImage:YA,count:Al,cross:ZA,cumsum:QA,descending:e0,deviation:i0,difference:PC,disjoint:kC,every:MC,extent:bs,fcumsum:tC,filter:OC,flatGroup:nC,flatRollup:rC,fsum:eC,greatest:v0,greatestIndex:TC,group:l0,groupSort:oC,groups:c0,histogram:_m,index:iC,indexes:aC,intersection:BC,least:Ou,leastIndex:w0,map:DC,max:Nu,maxIndex:xf,mean:gC,median:mC,medianIndex:pC,merge:bC,min:Ks,minIndex:Tf,mode:_C,nice:m0,pairs:yC,permute:g0,quantile:Ha,quantileIndex:_0,quantileSorted:b0,quickselect:Cl,range:y0,rank:xC,reduce:LC,reverse:IC,rollup:f0,rollups:h0,scan:SC,shuffle:EC,shuffler:x0,some:NC,sort:Mu,subset:VC,sum:AC,superset:S0,thresholdFreedmanDiaconis:hC,thresholdScott:dC,thresholdSturges:p0,tickIncrement:ii,tickStep:Js,ticks:za,transpose:T0,union:WC,variance:r0,zip:RC},Symbol.toStringTag,{value:"Module"}));var zC={value:()=>{}};function uo(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _s(n)}function _s(t){this._=t}function HC(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_s.prototype=uo.prototype={constructor:_s,on:function(t,e){var n=this._,r=HC(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=UC(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=wm(n[i],t.name,e);else if(e==null)for(i in n)n[i]=wm(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _s(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function UC(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function wm(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=zC,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const YC=Object.freeze(Object.defineProperty({__proto__:null,dispatch:uo},Symbol.toStringTag,{value:"Module"}));var Du="http://www.w3.org/1999/xhtml";const Lu={svg:"http://www.w3.org/2000/svg",xhtml:Du,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fo(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Lu.hasOwnProperty(e)?{space:Lu[e],local:t}:t}function XC(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Du&&e.documentElement.namespaceURI===Du?e.createElement(t):e.createElementNS(n,t)}}function GC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rl(t){var e=fo(t);return(e.local?GC:XC)(e)}function qC(){}function Ml(t){return t==null?qC:function(){return this.querySelector(t)}}function jC(t){typeof t!="function"&&(t=Ml(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,f=0;f<o;++f)(l=a[f])&&(u=t.call(l,l.__data__,f,a))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new ln(r,this._parents)}function E0(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function JC(){return[]}function Sf(t){return t==null?JC:function(){return this.querySelectorAll(t)}}function KC(t){return function(){return E0(t.apply(this,arguments))}}function ZC(t){typeof t=="function"?t=KC(t):t=Sf(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new ln(r,i)}function Ef(t){return function(){return this.matches(t)}}function A0(t){return function(e){return e.matches(t)}}var QC=Array.prototype.find;function eR(t){return function(){return QC.call(this.children,t)}}function tR(){return this.firstElementChild}function nR(t){return this.select(t==null?tR:eR(typeof t=="function"?t:A0(t)))}var rR=Array.prototype.filter;function iR(){return Array.from(this.children)}function aR(t){return function(){return rR.call(this.children,t)}}function oR(t){return this.selectAll(t==null?iR:aR(typeof t=="function"?t:A0(t)))}function sR(t){typeof t!="function"&&(t=Ef(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new ln(r,this._parents)}function C0(t){return new Array(t.length)}function lR(){return new ln(this._enter||this._groups.map(C0),this._parents)}function Zs(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zs.prototype={constructor:Zs,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function cR(t){return function(){return t}}function uR(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Zs(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function fR(t,e,n,r,i,a,o){var s,l,u=new Map,f=e.length,d=a.length,p=new Array(f),x;for(s=0;s<f;++s)(l=e[s])&&(p[s]=x=o.call(l,l.__data__,s,e)+"",u.has(x)?i[s]=l:u.set(x,l));for(s=0;s<d;++s)x=o.call(t,a[s],s,a)+"",(l=u.get(x))?(r[s]=l,l.__data__=a[s],u.delete(x)):n[s]=new Zs(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(p[s])===l&&(i[s]=l)}function hR(t){return t.__data__}function dR(t,e){if(!arguments.length)return Array.from(this,hR);var n=e?fR:uR,r=this._parents,i=this._groups;typeof t!="function"&&(t=cR(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var f=r[u],d=i[u],p=d.length,x=gR(t.call(f,f&&f.__data__,u,r)),R=x.length,O=s[u]=new Array(R),A=o[u]=new Array(R),P=l[u]=new Array(p);n(f,d,O,A,P,x,e);for(var S=0,D=0,N,k;S<R;++S)if(N=O[S]){for(S>=D&&(D=S+1);!(k=A[D])&&++D<R;);N._next=k||null}}return o=new ln(o,r),o._enter=s,o._exit=l,o}function gR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function mR(){return new ln(this._exit||this._groups.map(C0),this._parents)}function pR(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function vR(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],f=r[l],d=u.length,p=s[l]=new Array(d),x,R=0;R<d;++R)(x=u[R]||f[R])&&(p[R]=x);for(;l<i;++l)s[l]=n[l];return new ln(s,this._parents)}function bR(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function _R(t){t||(t=yR);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(l[f]=u);l.sort(e)}return new ln(i,this._parents).order()}function yR(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function wR(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xR(){return Array.from(this)}function TR(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function SR(){let t=0;for(const e of this)++t;return t}function ER(){return!this.node()}function AR(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function CR(t){return function(){this.removeAttribute(t)}}function RR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function MR(t,e){return function(){this.setAttribute(t,e)}}function NR(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function OR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function DR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function LR(t,e){var n=fo(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?RR:CR:typeof e=="function"?n.local?DR:OR:n.local?NR:MR)(n,e))}function Af(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function IR(t){return function(){this.style.removeProperty(t)}}function PR(t,e,n){return function(){this.style.setProperty(t,e,n)}}function kR(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function BR(t,e,n){return arguments.length>1?this.each((e==null?IR:typeof e=="function"?kR:PR)(t,e,n??"")):ai(this.node(),t)}function ai(t,e){return t.style.getPropertyValue(e)||Af(t).getComputedStyle(t,null).getPropertyValue(e)}function FR(t){return function(){delete this[t]}}function VR(t,e){return function(){this[t]=e}}function WR(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function $R(t,e){return arguments.length>1?this.each((e==null?FR:typeof e=="function"?WR:VR)(t,e)):this.node()[t]}function R0(t){return t.trim().split(/^|\s+/)}function Cf(t){return t.classList||new M0(t)}function M0(t){this._node=t,this._names=R0(t.getAttribute("class")||"")}M0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function N0(t,e){for(var n=Cf(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function O0(t,e){for(var n=Cf(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function zR(t){return function(){N0(this,t)}}function HR(t){return function(){O0(this,t)}}function UR(t,e){return function(){(e.apply(this,arguments)?N0:O0)(this,t)}}function YR(t,e){var n=R0(t+"");if(arguments.length<2){for(var r=Cf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?UR:e?zR:HR)(n,e))}function XR(){this.textContent=""}function GR(t){return function(){this.textContent=t}}function qR(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function jR(t){return arguments.length?this.each(t==null?XR:(typeof t=="function"?qR:GR)(t)):this.node().textContent}function JR(){this.innerHTML=""}function KR(t){return function(){this.innerHTML=t}}function ZR(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function QR(t){return arguments.length?this.each(t==null?JR:(typeof t=="function"?ZR:KR)(t)):this.node().innerHTML}function eM(){this.nextSibling&&this.parentNode.appendChild(this)}function tM(){return this.each(eM)}function nM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rM(){return this.each(nM)}function iM(t){var e=typeof t=="function"?t:Rl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function aM(){return null}function oM(t,e){var n=typeof t=="function"?t:Rl(t),r=e==null?aM:typeof e=="function"?e:Ml(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sM(){var t=this.parentNode;t&&t.removeChild(this)}function lM(){return this.each(sM)}function cM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function uM(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fM(t){return this.select(t?uM:cM)}function hM(t){return arguments.length?this.property("__data__",t):this.node().__data__}function dM(t){return function(e){t.call(this,e,this.__data__)}}function gM(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function mM(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function pM(t,e,n){return function(){var r=this.__on,i,a=dM(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function vM(t,e,n){var r=gM(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?pM:mM,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function D0(t,e,n){var r=Af(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function bM(t,e){return function(){return D0(this,t,e)}}function _M(t,e){return function(){return D0(this,t,e.apply(this,arguments))}}function yM(t,e){return this.each((typeof e=="function"?_M:bM)(t,e))}function*wM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Rf=[null];function ln(t,e){this._groups=t,this._parents=e}function ta(){return new ln([[document.documentElement]],Rf)}function xM(){return this}ln.prototype=ta.prototype={constructor:ln,select:jC,selectAll:ZC,selectChild:nR,selectChildren:oR,filter:sR,data:dR,enter:lR,exit:mR,join:pR,merge:vR,selection:xM,order:bR,sort:_R,call:wR,nodes:xR,node:TR,size:SR,empty:ER,each:AR,attr:LR,style:BR,property:$R,classed:YR,text:jR,html:QR,raise:tM,lower:rM,append:iM,insert:oM,remove:lM,clone:fM,datum:hM,on:vM,dispatch:yM,[Symbol.iterator]:wM};function Ht(t){return typeof t=="string"?new ln([[document.querySelector(t)]],[document.documentElement]):new ln([[t]],Rf)}function TM(t){return Ht(Rl(t).call(document.documentElement))}var SM=0;function L0(){return new Iu}function Iu(){this._="@"+(++SM).toString(36)}Iu.prototype=L0.prototype={constructor:Iu,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function I0(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Vn(t,e){if(t=I0(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function EM(t,e){return t.target&&(t=I0(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>Vn(n,e))}function AM(t){return typeof t=="string"?new ln([document.querySelectorAll(t)],[document.documentElement]):new ln([E0(t)],Rf)}const CM=Object.freeze(Object.defineProperty({__proto__:null,create:TM,creator:Rl,local:L0,matcher:Ef,namespace:fo,namespaces:Lu,pointer:Vn,pointers:EM,select:Ht,selectAll:AM,selection:ta,selector:Ml,selectorAll:Sf,style:ai,window:Af},Symbol.toStringTag,{value:"Module"})),Pu={capture:!0,passive:!1};function ku(t){t.preventDefault(),t.stopImmediatePropagation()}function P0(t){var e=t.document.documentElement,n=Ht(t).on("dragstart.drag",ku,Pu);"onselectstart"in e?n.on("selectstart.drag",ku,Pu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function k0(t,e){var n=t.document.documentElement,r=Ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",ku,Pu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Nl(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Mf(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function na(){}var oi=.7,Bi=1/oi,Si="\\s*([+-]?\\d+)\\s*",Ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RM=/^#([0-9a-f]{3,8})$/,MM=new RegExp(`^rgb\\(${Si},${Si},${Si}\\)$`),NM=new RegExp(`^rgb\\(${Qn},${Qn},${Qn}\\)$`),OM=new RegExp(`^rgba\\(${Si},${Si},${Si},${Ua}\\)$`),DM=new RegExp(`^rgba\\(${Qn},${Qn},${Qn},${Ua}\\)$`),LM=new RegExp(`^hsl\\(${Ua},${Qn},${Qn}\\)$`),IM=new RegExp(`^hsla\\(${Ua},${Qn},${Qn},${Ua}\\)$`),xm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nl(na,Br,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tm,formatHex:Tm,formatHex8:PM,formatHsl:kM,formatRgb:Sm,toString:Sm});function Tm(){return this.rgb().formatHex()}function PM(){return this.rgb().formatHex8()}function kM(){return F0(this).formatHsl()}function Sm(){return this.rgb().formatRgb()}function Br(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=RM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Em(e):n===3?new tn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rs(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=MM.exec(t))?new tn(e[1],e[2],e[3],1):(e=NM.exec(t))?new tn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=OM.exec(t))?rs(e[1],e[2],e[3],e[4]):(e=DM.exec(t))?rs(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LM.exec(t))?Rm(e[1],e[2]/100,e[3]/100,1):(e=IM.exec(t))?Rm(e[1],e[2]/100,e[3]/100,e[4]):xm.hasOwnProperty(t)?Em(xm[t]):t==="transparent"?new tn(NaN,NaN,NaN,0):null}function Em(t){return new tn(t>>16&255,t>>8&255,t&255,1)}function rs(t,e,n,r){return r<=0&&(t=e=n=NaN),new tn(t,e,n,r)}function B0(t){return t instanceof na||(t=Br(t)),t?(t=t.rgb(),new tn(t.r,t.g,t.b,t.opacity)):new tn}function si(t,e,n,r){return arguments.length===1?B0(t):new tn(t,e,n,r??1)}function tn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Nl(tn,si,Mf(na,{brighter(t){return t=t==null?Bi:Math.pow(Bi,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?oi:Math.pow(oi,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new tn(ei(this.r),ei(this.g),ei(this.b),Qs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Am,formatHex:Am,formatHex8:BM,formatRgb:Cm,toString:Cm}));function Am(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}`}function BM(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}${Zr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cm(){const t=Qs(this.opacity);return`${t===1?"rgb(":"rgba("}${ei(this.r)}, ${ei(this.g)}, ${ei(this.b)}${t===1?")":`, ${t})`}`}function Qs(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ei(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zr(t){return t=ei(t),(t<16?"0":"")+t.toString(16)}function Rm(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $n(t,e,n,r)}function F0(t){if(t instanceof $n)return new $n(t.h,t.s,t.l,t.opacity);if(t instanceof na||(t=Br(t)),!t)return new $n;if(t instanceof $n)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new $n(o,s,l,t.opacity)}function FM(t,e,n,r){return arguments.length===1?F0(t):new $n(t,e,n,r??1)}function $n(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Nl($n,FM,Mf(na,{brighter(t){return t=t==null?Bi:Math.pow(Bi,t),new $n(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oi:Math.pow(oi,t),new $n(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new tn($c(t>=240?t-240:t+120,i,r),$c(t,i,r),$c(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $n(Mm(this.h),is(this.s),is(this.l),Qs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qs(this.opacity);return`${t===1?"hsl(":"hsla("}${Mm(this.h)}, ${is(this.s)*100}%, ${is(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Mm(t){return t=(t||0)%360,t<0?t+360:t}function is(t){return Math.max(0,Math.min(1,t||0))}function $c(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const VM=Math.PI/180,WM=180/Math.PI;var V0=-.14861,Nf=1.78277,Of=-.29227,Ol=-.90649,Ya=1.97294,Nm=Ya*Ol,Om=Ya*Nf,Dm=Nf*Of-Ol*V0;function $M(t){if(t instanceof ti)return new ti(t.h,t.s,t.l,t.opacity);t instanceof tn||(t=B0(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Dm*r+Nm*e-Om*n)/(Dm+Nm-Om),a=r-i,o=(Ya*(n-i)-Of*a)/Ol,s=Math.sqrt(o*o+a*a)/(Ya*i*(1-i)),l=s?Math.atan2(o,a)*WM-120:NaN;return new ti(l<0?l+360:l,s,i,t.opacity)}function er(t,e,n,r){return arguments.length===1?$M(t):new ti(t,e,n,r??1)}function ti(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Nl(ti,er,Mf(na,{brighter(t){return t=t==null?Bi:Math.pow(Bi,t),new ti(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oi:Math.pow(oi,t),new ti(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*VM,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new tn(255*(e+n*(V0*r+Nf*i)),255*(e+n*(Of*r+Ol*i)),255*(e+n*(Ya*r)),this.opacity)}}));function zM(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function HM(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return zM((n-r/e)*e,o,i,a,s)}}const Dl=t=>()=>t;function W0(t,e){return function(n){return t+n*e}}function UM(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function YM(t,e){var n=e-t;return n?W0(t,n>180||n<-180?n-360*Math.round(n/360):n):Dl(isNaN(t)?e:t)}function XM(t){return(t=+t)==1?Ei:function(e,n){return n-e?UM(e,n,t):Dl(isNaN(e)?n:e)}}function Ei(t,e){var n=e-t;return n?W0(t,n):Dl(isNaN(t)?e:t)}const el=function t(e){var n=XM(e);function r(i,a){var o=n((i=si(i)).r,(a=si(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Ei(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function GM(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=si(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var qM=GM(HM);function jM(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function JM(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function KM(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=hi(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function ZM(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Wn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function QM(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=hi(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Bu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zc=new RegExp(Bu.source,"g");function eN(t){return function(){return t}}function tN(t){return function(e){return t(e)+""}}function $0(t,e){var n=Bu.lastIndex=zc.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Bu.exec(t))&&(i=zc.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Wn(r,i)})),n=zc.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?tN(l[0].x):eN(e):(e=l.length,function(u){for(var f=0,d;f<e;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function hi(t,e){var n=typeof e,r;return e==null||n==="boolean"?Dl(e):(n==="number"?Wn:n==="string"?(r=Br(e))?(e=r,el):$0:e instanceof Br?el:e instanceof Date?ZM:JM(e)?jM:Array.isArray(e)?KM:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?QM:Wn)(t,e)}function Df(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Lm=180/Math.PI,Fu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z0(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Lm,skewX:Math.atan(l)*Lm,scaleX:o,scaleY:s}}var as;function nN(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Fu:z0(e.a,e.b,e.c,e.d,e.e,e.f)}function rN(t){return t==null||(as||(as=document.createElementNS("http://www.w3.org/2000/svg","g")),as.setAttribute("transform",t),!(t=as.transform.baseVal.consolidate()))?Fu:(t=t.matrix,z0(t.a,t.b,t.c,t.d,t.e,t.f))}function H0(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,d,p,x,R){if(u!==d||f!==p){var O=x.push("translate(",null,e,null,n);R.push({i:O-4,x:Wn(u,d)},{i:O-2,x:Wn(f,p)})}else(d||p)&&x.push("translate("+d+e+p+n)}function o(u,f,d,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Wn(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function s(u,f,d,p){u!==f?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Wn(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,p,x,R){if(u!==d||f!==p){var O=x.push(i(x)+"scale(",null,",",null,")");R.push({i:O-4,x:Wn(u,d)},{i:O-2,x:Wn(f,p)})}else(d!==1||p!==1)&&x.push(i(x)+"scale("+d+","+p+")")}return function(u,f){var d=[],p=[];return u=t(u),f=t(f),a(u.translateX,u.translateY,f.translateX,f.translateY,d,p),o(u.rotate,f.rotate,d,p),s(u.skewX,f.skewX,d,p),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,p),u=f=null,function(x){for(var R=-1,O=p.length,A;++R<O;)d[(A=p[R]).i]=A.x(x);return d.join("")}}}var iN=H0(nN,"px, ","px)","deg)"),aN=H0(rN,", ",")",")"),oN=1e-12;function Im(t){return((t=Math.exp(t))+1/t)/2}function sN(t){return((t=Math.exp(t))-1/t)/2}function lN(t){return((t=Math.exp(2*t))-1)/(t+1)}const cN=function t(e,n,r){function i(a,o){var s=a[0],l=a[1],u=a[2],f=o[0],d=o[1],p=o[2],x=f-s,R=d-l,O=x*x+R*R,A,P;if(O<oN)P=Math.log(p/u)/e,A=function(Y){return[s+Y*x,l+Y*R,u*Math.exp(e*Y*P)]};else{var S=Math.sqrt(O),D=(p*p-u*u+r*O)/(2*u*n*S),N=(p*p-u*u-r*O)/(2*p*n*S),k=Math.log(Math.sqrt(D*D+1)-D),W=Math.log(Math.sqrt(N*N+1)-N);P=(W-k)/e,A=function(Y){var X=Y*P,K=Im(k),ie=u/(n*S)*(K*lN(e*X+k)-sN(k));return[s+ie*x,l+ie*R,u*K/Im(e*X+k)]}}return A.duration=P*1e3*e/Math.SQRT2,A}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},i}(Math.SQRT2,2,4);function U0(t){return function e(n){n=+n;function r(i,a){var o=t((i=er(i)).h,(a=er(a)).h),s=Ei(i.s,a.s),l=Ei(i.l,a.l),u=Ei(i.opacity,a.opacity);return function(f){return i.h=o(f),i.s=s(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=e,r}(1)}U0(YM);var Lf=U0(Ei);function uN(t,e){e===void 0&&(e=t,t=hi);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}var Fi=0,Ta=0,va=0,Y0=1e3,tl,Sa,nl=0,li=0,Ll=0,Xa=typeof performance=="object"&&performance.now?performance:Date,X0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function If(){return li||(X0(fN),li=Xa.now()+Ll)}function fN(){li=0}function rl(){this._call=this._time=this._next=null}rl.prototype=G0.prototype={constructor:rl,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?If():+n)+(e==null?0:+e),!this._next&&Sa!==this&&(Sa?Sa._next=this:tl=this,Sa=this),this._call=t,this._time=n,Vu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vu())}};function G0(t,e,n){var r=new rl;return r.restart(t,e,n),r}function hN(){If(),++Fi;for(var t=tl,e;t;)(e=li-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fi}function Pm(){li=(nl=Xa.now())+Ll,Fi=Ta=0;try{hN()}finally{Fi=0,gN(),li=0}}function dN(){var t=Xa.now(),e=t-nl;e>Y0&&(Ll-=e,nl=t)}function gN(){for(var t,e=tl,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:tl=n);Sa=t,Vu(r)}function Vu(t){if(!Fi){Ta&&(Ta=clearTimeout(Ta));var e=t-li;e>24?(t<1/0&&(Ta=setTimeout(Pm,t-Xa.now()-Ll)),va&&(va=clearInterval(va))):(va||(nl=Xa.now(),va=setInterval(dN,Y0)),Fi=1,X0(Pm))}}function km(t,e,n){var r=new rl;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var mN=uo("start","end","cancel","interrupt"),pN=[],q0=0,Bm=1,Wu=2,ys=3,Fm=4,$u=5,ws=6;function Il(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;vN(t,n,{name:e,index:r,group:i,on:mN,tween:pN,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:q0})}function Pf(t,e){var n=Hn(t,e);if(n.state>q0)throw new Error("too late; already scheduled");return n}function lr(t,e){var n=Hn(t,e);if(n.state>ys)throw new Error("too late; already running");return n}function Hn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vN(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=G0(a,0,n.time);function a(u){n.state=Bm,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,d,p,x;if(n.state!==Bm)return l();for(f in r)if(x=r[f],x.name===n.name){if(x.state===ys)return km(o);x.state===Fm?(x.state=ws,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[f]):+f<e&&(x.state=ws,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[f])}if(km(function(){n.state===ys&&(n.state=Fm,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Wu,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wu){for(n.state=ys,i=new Array(p=n.tween.length),f=0,d=-1;f<p;++f)(x=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=x);i.length=d+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=$u,1),d=-1,p=i.length;++d<p;)i[d].call(t,f);n.state===$u&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ws,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Ai(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Wu&&r.state<$u,r.state=ws,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function bN(t){return this.each(function(){Ai(this,t)})}function _N(t,e){var n,r;return function(){var i=lr(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function yN(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=lr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function wN(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Hn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?_N:yN)(n,t,e))}function kf(t,e,n){var r=t._id;return t.each(function(){var i=lr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Hn(i,r).value[e]}}function j0(t,e){var n;return(typeof e=="number"?Wn:e instanceof Br?el:(n=Br(e))?(e=n,el):$0)(t,e)}function xN(t){return function(){this.removeAttribute(t)}}function TN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function SN(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function EN(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function AN(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function CN(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function RN(t,e){var n=fo(t),r=n==="transform"?aN:j0;return this.attrTween(t,typeof e=="function"?(n.local?CN:AN)(n,r,kf(this,"attr."+t,e)):e==null?(n.local?TN:xN)(n):(n.local?EN:SN)(n,r,e))}function MN(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function NN(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ON(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&NN(t,a)),n}return i._value=e,i}function DN(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&MN(t,a)),n}return i._value=e,i}function LN(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=fo(t);return this.tween(n,(r.local?ON:DN)(r,e))}function IN(t,e){return function(){Pf(this,t).delay=+e.apply(this,arguments)}}function PN(t,e){return e=+e,function(){Pf(this,t).delay=e}}function kN(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?IN:PN)(e,t)):Hn(this.node(),e).delay}function BN(t,e){return function(){lr(this,t).duration=+e.apply(this,arguments)}}function FN(t,e){return e=+e,function(){lr(this,t).duration=e}}function VN(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?BN:FN)(e,t)):Hn(this.node(),e).duration}function WN(t,e){if(typeof e!="function")throw new Error;return function(){lr(this,t).ease=e}}function $N(t){var e=this._id;return arguments.length?this.each(WN(e,t)):Hn(this.node(),e).ease}function zN(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;lr(this,t).ease=n}}function HN(t){if(typeof t!="function")throw new Error;return this.each(zN(this._id,t))}function UN(t){typeof t!="function"&&(t=Ef(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new Tr(r,this._parents,this._name,this._id)}function YN(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],f=l.length,d=o[s]=new Array(f),p,x=0;x<f;++x)(p=l[x]||u[x])&&(d[x]=p);for(;s<r;++s)o[s]=e[s];return new Tr(o,this._parents,this._name,this._id)}function XN(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function GN(t,e,n){var r,i,a=XN(e)?Pf:lr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function qN(t,e){var n=this._id;return arguments.length<2?Hn(this.node(),n).on.on(t):this.each(GN(n,t,e))}function jN(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function JN(){return this.on("end.remove",jN(this._id))}function KN(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ml(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),f,d,p=0;p<l;++p)(f=s[p])&&(d=t.call(f,f.__data__,p,s))&&("__data__"in f&&(d.__data__=f.__data__),u[p]=d,Il(u[p],e,n,p,u,Hn(f,n)));return new Tr(a,this._parents,e,n)}function ZN(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sf(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,f,d=0;d<u;++d)if(f=l[d]){for(var p=t.call(f,f.__data__,d,l),x,R=Hn(f,n),O=0,A=p.length;O<A;++O)(x=p[O])&&Il(x,e,n,O,p,R);a.push(p),o.push(f)}return new Tr(a,o,e,n)}var QN=ta.prototype.constructor;function eO(){return new QN(this._groups,this._parents)}function tO(t,e){var n,r,i;return function(){var a=ai(this,t),o=(this.style.removeProperty(t),ai(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function J0(t){return function(){this.style.removeProperty(t)}}function nO(t,e,n){var r,i=n+"",a;return function(){var o=ai(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function rO(t,e,n){var r,i,a;return function(){var o=ai(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),ai(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function iO(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=lr(this,t),u=l.on,f=l.value[a]==null?s||(s=J0(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(o,i=f),l.on=r}}function aO(t,e,n){var r=(t+="")=="transform"?iN:j0;return e==null?this.styleTween(t,tO(t,r)).on("end.style."+t,J0(t)):typeof e=="function"?this.styleTween(t,rO(t,r,kf(this,"style."+t,e))).each(iO(this._id,t)):this.styleTween(t,nO(t,r,e),n).on("end.style."+t,null)}function oO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function sO(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&oO(t,o,n)),r}return a._value=e,a}function lO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,sO(t,e,n??""))}function cO(t){return function(){this.textContent=t}}function uO(t){return function(){var e=t(this);this.textContent=e??""}}function fO(t){return this.tween("text",typeof t=="function"?uO(kf(this,"text",t)):cO(t==null?"":t+""))}function hO(t){return function(e){this.textContent=t.call(this,e)}}function dO(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&hO(i)),e}return r._value=t,r}function gO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,dO(t))}function mO(){for(var t=this._name,e=this._id,n=K0(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var f=Hn(l,e);Il(l,t,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Tr(r,this._parents,t,n)}function pO(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=lr(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var vO=0;function Tr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function K0(){return++vO}var fr=ta.prototype;Tr.prototype={constructor:Tr,select:KN,selectAll:ZN,selectChild:fr.selectChild,selectChildren:fr.selectChildren,filter:UN,merge:YN,selection:eO,transition:mO,call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:qN,attr:RN,attrTween:LN,style:aO,styleTween:lO,text:fO,textTween:gO,remove:JN,tween:wN,delay:kN,duration:VN,ease:$N,easeVarying:HN,end:pO,[Symbol.iterator]:fr[Symbol.iterator]};function bO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _O={time:null,delay:0,duration:250,ease:bO};function yO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function wO(t){var e,n;t instanceof Tr?(e=t._id,t=t._name):(e=K0(),(n=_O).time=If(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&Il(l,t,e,u,o,n||yO(l,e));return new Tr(r,this._parents,t,e)}ta.prototype.interrupt=bN;ta.prototype.transition=wO;const Hc=t=>()=>t;function xO(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function TO(t){t.stopImmediatePropagation()}function Uc(t){t.preventDefault(),t.stopImmediatePropagation()}var Vm={name:"drag"},Yc={name:"space"},_i={name:"handle"},yi={name:"center"};const{abs:Wm,max:Jt,min:Kt}=Math;function $m(t){return[+t[0],+t[1]]}function zu(t){return[$m(t[0]),$m(t[1])]}var xs={name:"x",handles:["w","e"].map(Ga),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ts={name:"y",handles:["n","s"].map(Ga),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},SO={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ga),input:function(t){return t==null?null:zu(t)},output:function(t){return t}},hr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Hm={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},EO={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},AO={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ga(t){return{type:t}}function CO(t){return!t.ctrlKey&&!t.button}function RO(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function MO(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xc(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function NO(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function OO(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function DO(){return Bf(xs)}function LO(){return Bf(Ts)}function IO(){return Bf(SO)}function Bf(t){var e=RO,n=CO,r=MO,i=!0,a=uo("start","brush","end"),o=6,s;function l(A){var P=A.property("__brush",O).selectAll(".overlay").data([Ga("overlay")]);P.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",hr.overlay).merge(P).each(function(){var D=Xc(this).extent;Ht(this).attr("x",D[0][0]).attr("y",D[0][1]).attr("width",D[1][0]-D[0][0]).attr("height",D[1][1]-D[0][1])}),A.selectAll(".selection").data([Ga("selection")]).enter().append("rect").attr("class","selection").attr("cursor",hr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=A.selectAll(".handle").data(t.handles,function(D){return D.type});S.exit().remove(),S.enter().append("rect").attr("class",function(D){return"handle handle--"+D.type}).attr("cursor",function(D){return hr[D.type]}),A.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(r).on("touchstart.brush",p).on("touchmove.brush",x).on("touchend.brush touchcancel.brush",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(A,P,S){A.tween?A.on("start.brush",function(D){f(this,arguments).beforestart().start(D)}).on("interrupt.brush end.brush",function(D){f(this,arguments).end(D)}).tween("brush",function(){var D=this,N=D.__brush,k=f(D,arguments),W=N.selection,Y=t.input(typeof P=="function"?P.apply(this,arguments):P,N.extent),X=hi(W,Y);function K(ie){N.selection=ie===1&&Y===null?null:X(ie),u.call(D),k.brush()}return W!==null&&Y!==null?K:K(1)}):A.each(function(){var D=this,N=arguments,k=D.__brush,W=t.input(typeof P=="function"?P.apply(D,N):P,k.extent),Y=f(D,N).beforestart();Ai(D),k.selection=W===null?null:W,u.call(D),Y.start(S).brush(S).end(S)})},l.clear=function(A,P){l.move(A,null,P)};function u(){var A=Ht(this),P=Xc(this).selection;P?(A.selectAll(".selection").style("display",null).attr("x",P[0][0]).attr("y",P[0][1]).attr("width",P[1][0]-P[0][0]).attr("height",P[1][1]-P[0][1]),A.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?P[1][0]-o/2:P[0][0]-o/2}).attr("y",function(S){return S.type[0]==="s"?P[1][1]-o/2:P[0][1]-o/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?P[1][0]-P[0][0]+o:o}).attr("height",function(S){return S.type==="e"||S.type==="w"?P[1][1]-P[0][1]+o:o})):A.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(A,P,S){var D=A.__brush.emitter;return D&&(!S||!D.clean)?D:new d(A,P,S)}function d(A,P,S){this.that=A,this.args=P,this.state=A.__brush,this.active=0,this.clean=S}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(A,P){return this.starting?(this.starting=!1,this.emit("start",A,P)):this.emit("brush",A),this},brush:function(A,P){return this.emit("brush",A,P),this},end:function(A,P){return--this.active===0&&(delete this.state.emitter,this.emit("end",A,P)),this},emit:function(A,P,S){var D=Ht(this.that).datum();a.call(A,this.that,new xO(A,{sourceEvent:P,target:l,selection:t.output(this.state.selection),mode:S,dispatch:a}),D)}};function p(A){if(s&&!A.touches||!n.apply(this,arguments))return;var P=this,S=A.target.__data__.type,D=(i&&A.metaKey?S="overlay":S)==="selection"?Vm:i&&A.altKey?yi:_i,N=t===Ts?null:EO[S],k=t===xs?null:AO[S],W=Xc(P),Y=W.extent,X=W.selection,K=Y[0][0],ie,ne,J=Y[0][1],Z,$,te=Y[1][0],G,oe,ge=Y[1][1],he,pe,re=0,ue=0,de,ve=N&&k&&i&&A.shiftKey,Me,Oe,Ae=Array.from(A.touches||[A],_e=>{const ut=_e.identifier;return _e=Vn(_e,P),_e.point0=_e.slice(),_e.identifier=ut,_e});Ai(P);var Ie=f(P,arguments,!0).beforestart();if(S==="overlay"){X&&(de=!0);const _e=[Ae[0],Ae[1]||Ae[0]];W.selection=X=[[ie=t===Ts?K:Kt(_e[0][0],_e[1][0]),Z=t===xs?J:Kt(_e[0][1],_e[1][1])],[G=t===Ts?te:Jt(_e[0][0],_e[1][0]),he=t===xs?ge:Jt(_e[0][1],_e[1][1])]],Ae.length>1&&et(A)}else ie=X[0][0],Z=X[0][1],G=X[1][0],he=X[1][1];ne=ie,$=Z,oe=G,pe=he;var me=Ht(P).attr("pointer-events","none"),Ee=me.selectAll(".overlay").attr("cursor",hr[S]);if(A.touches)Ie.moved=ce,Ie.ended=fe;else{var De=Ht(A.view).on("mousemove.brush",ce,!0).on("mouseup.brush",fe,!0);i&&De.on("keydown.brush",tt,!0).on("keyup.brush",it,!0),P0(A.view)}u.call(P),Ie.start(A,D.name);function ce(_e){for(const ut of _e.changedTouches||[_e])for(const yt of Ae)yt.identifier===ut.identifier&&(yt.cur=Vn(ut,P));if(ve&&!Me&&!Oe&&Ae.length===1){const ut=Ae[0];Wm(ut.cur[0]-ut[0])>Wm(ut.cur[1]-ut[1])?Oe=!0:Me=!0}for(const ut of Ae)ut.cur&&(ut[0]=ut.cur[0],ut[1]=ut.cur[1]);de=!0,Uc(_e),et(_e)}function et(_e){const ut=Ae[0],yt=ut.point0;var Un;switch(re=ut[0]-yt[0],ue=ut[1]-yt[1],D){case Yc:case Vm:{N&&(re=Jt(K-ie,Kt(te-G,re)),ne=ie+re,oe=G+re),k&&(ue=Jt(J-Z,Kt(ge-he,ue)),$=Z+ue,pe=he+ue);break}case _i:{Ae[1]?(N&&(ne=Jt(K,Kt(te,Ae[0][0])),oe=Jt(K,Kt(te,Ae[1][0])),N=1),k&&($=Jt(J,Kt(ge,Ae[0][1])),pe=Jt(J,Kt(ge,Ae[1][1])),k=1)):(N<0?(re=Jt(K-ie,Kt(te-ie,re)),ne=ie+re,oe=G):N>0&&(re=Jt(K-G,Kt(te-G,re)),ne=ie,oe=G+re),k<0?(ue=Jt(J-Z,Kt(ge-Z,ue)),$=Z+ue,pe=he):k>0&&(ue=Jt(J-he,Kt(ge-he,ue)),$=Z,pe=he+ue));break}case yi:{N&&(ne=Jt(K,Kt(te,ie-re*N)),oe=Jt(K,Kt(te,G+re*N))),k&&($=Jt(J,Kt(ge,Z-ue*k)),pe=Jt(J,Kt(ge,he+ue*k)));break}}oe<ne&&(N*=-1,Un=ie,ie=G,G=Un,Un=ne,ne=oe,oe=Un,S in zm&&Ee.attr("cursor",hr[S=zm[S]])),pe<$&&(k*=-1,Un=Z,Z=he,he=Un,Un=$,$=pe,pe=Un,S in Hm&&Ee.attr("cursor",hr[S=Hm[S]])),W.selection&&(X=W.selection),Me&&(ne=X[0][0],oe=X[1][0]),Oe&&($=X[0][1],pe=X[1][1]),(X[0][0]!==ne||X[0][1]!==$||X[1][0]!==oe||X[1][1]!==pe)&&(W.selection=[[ne,$],[oe,pe]],u.call(P),Ie.brush(_e,D.name))}function fe(_e){if(TO(_e),_e.touches){if(_e.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else k0(_e.view,de),De.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);me.attr("pointer-events","all"),Ee.attr("cursor",hr.overlay),W.selection&&(X=W.selection),NO(X)&&(W.selection=null,u.call(P)),Ie.end(_e,D.name)}function tt(_e){switch(_e.keyCode){case 16:{ve=N&&k;break}case 18:{D===_i&&(N&&(G=oe-re*N,ie=ne+re*N),k&&(he=pe-ue*k,Z=$+ue*k),D=yi,et(_e));break}case 32:{(D===_i||D===yi)&&(N<0?G=oe-re:N>0&&(ie=ne-re),k<0?he=pe-ue:k>0&&(Z=$-ue),D=Yc,Ee.attr("cursor",hr.selection),et(_e));break}default:return}Uc(_e)}function it(_e){switch(_e.keyCode){case 16:{ve&&(Me=Oe=ve=!1,et(_e));break}case 18:{D===yi&&(N<0?G=oe:N>0&&(ie=ne),k<0?he=pe:k>0&&(Z=$),D=_i,et(_e));break}case 32:{D===Yc&&(_e.altKey?(N&&(G=oe-re*N,ie=ne+re*N),k&&(he=pe-ue*k,Z=$+ue*k),D=yi):(N<0?G=oe:N>0&&(ie=ne),k<0?he=pe:k>0&&(Z=$),D=_i),Ee.attr("cursor",hr[S]),et(_e));break}default:return}Uc(_e)}}function x(A){f(this,arguments).moved(A)}function R(A){f(this,arguments).ended(A)}function O(){var A=this.__brush||{selection:null};return A.extent=zu(e.apply(this,arguments)),A.dim=t,A}return l.extent=function(A){return arguments.length?(e=typeof A=="function"?A:Hc(zu(A)),l):e},l.filter=function(A){return arguments.length?(n=typeof A=="function"?A:Hc(!!A),l):n},l.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Hc(!!A),l):r},l.handleSize=function(A){return arguments.length?(o=+A,l):o},l.keyModifiers=function(A){return arguments.length?(i=!!A,l):i},l.on=function(){var A=a.on.apply(a,arguments);return A===a?l:A},l}const PO=Object.freeze(Object.defineProperty({__proto__:null,brush:IO,brushSelection:OO,brushX:DO,brushY:LO},Symbol.toStringTag,{value:"Module"})),Hu=Math.PI,Uu=2*Hu,Xr=1e-6,kO=Uu-Xr;function Z0(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function BO(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Z0;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Pl=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Z0:BO(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,f=o-e,d=s-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Xr)if(!(Math.abs(d*l-u*f)>Xr)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-o,R=i-s,O=l*l+u*u,A=x*x+R*R,P=Math.sqrt(O),S=Math.sqrt(p),D=a*Math.tan((Hu-Math.acos((O+p-A)/(2*P*S)))/2),N=D/S,k=D/P;Math.abs(N-1)>Xr&&this._append`L${e+N*f},${n+N*d}`,this._append`A${a},${a},0,0,${+(d*x>f*R)},${this._x1=e+k*l},${this._y1=n+k*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,f=n+l,d=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Xr||Math.abs(this._y1-f)>Xr)&&this._append`L${u},${f}`,r&&(p<0&&(p=p%Uu+Uu),p>kO?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:p>Xr&&this._append`A${r},${r},0,${+(p>=Hu)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Q0(){return new Pl}Q0.prototype=Pl.prototype;function FO(t=3){return new Pl(+t)}const VO=Object.freeze(Object.defineProperty({__proto__:null,Path:Pl,path:Q0,pathRound:FO},Symbol.toStringTag,{value:"Module"}));var Um={},Gc={},qc=34,ba=10,jc=13;function eb(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function WO(t,e){var n=eb(t);return function(r,i){return e(n(r),i,t)}}function Ym(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function gn(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function $O(t){return t<0?"-"+gn(-t,6):t>9999?"+"+gn(t,6):gn(t,4)}function zO(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":$O(t.getUTCFullYear())+"-"+gn(t.getUTCMonth()+1,2)+"-"+gn(t.getUTCDate(),2)+(i?"T"+gn(e,2)+":"+gn(n,2)+":"+gn(r,2)+"."+gn(i,3)+"Z":r?"T"+gn(e,2)+":"+gn(n,2)+":"+gn(r,2)+"Z":n||e?"T"+gn(e,2)+":"+gn(n,2)+"Z":"")}function Ff(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(d,p){var x,R,O=i(d,function(A,P){if(x)return x(A,P-1);R=A,x=p?WO(A,p):eb(A)});return O.columns=R||[],O}function i(d,p){var x=[],R=d.length,O=0,A=0,P,S=R<=0,D=!1;d.charCodeAt(R-1)===ba&&--R,d.charCodeAt(R-1)===jc&&--R;function N(){if(S)return Gc;if(D)return D=!1,Um;var W,Y=O,X;if(d.charCodeAt(Y)===qc){for(;O++<R&&d.charCodeAt(O)!==qc||d.charCodeAt(++O)===qc;);return(W=O)>=R?S=!0:(X=d.charCodeAt(O++))===ba?D=!0:X===jc&&(D=!0,d.charCodeAt(O)===ba&&++O),d.slice(Y+1,W-1).replace(/""/g,'"')}for(;O<R;){if((X=d.charCodeAt(W=O++))===ba)D=!0;else if(X===jc)D=!0,d.charCodeAt(O)===ba&&++O;else if(X!==n)continue;return d.slice(Y,W)}return S=!0,d.slice(Y,R)}for(;(P=N())!==Gc;){for(var k=[];P!==Um&&P!==Gc;)k.push(P),P=N();p&&(k=p(k,A++))==null||x.push(k)}return x}function a(d,p){return d.map(function(x){return p.map(function(R){return f(x[R])}).join(t)})}function o(d,p){return p==null&&(p=Ym(d)),[p.map(f).join(t)].concat(a(d,p)).join(`
`)}function s(d,p){return p==null&&(p=Ym(d)),a(d,p).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?zO(d):e.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}var HO=Ff(","),UO=HO.parse,YO=Ff("	"),XO=YO.parse;function GO(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function qO(t,e){return fetch(t,e).then(GO)}function jO(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function JO(t,e){return fetch(t,e).then(jO)}function KO(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function kl(t,e){return fetch(t,e).then(KO)}function tb(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),kl(e,n).then(function(i){return t(i,r)})}}function ZO(t,e,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=Ff(t);return kl(e,n).then(function(a){return i.parse(a,r)})}var QO=tb(UO),eD=tb(XO);function tD(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function nD(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function rD(t,e){return fetch(t,e).then(nD)}function Vf(t){return(e,n)=>kl(e,n).then(r=>new DOMParser().parseFromString(r,t))}const iD=Vf("application/xml");var aD=Vf("text/html"),oD=Vf("image/svg+xml");const sD=Object.freeze(Object.defineProperty({__proto__:null,blob:qO,buffer:JO,csv:QO,dsv:ZO,html:aD,image:tD,json:rD,svg:oD,text:kl,tsv:eD,xml:iD},Symbol.toStringTag,{value:"Module"}));function lD(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function il(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Vi(t){return t=il(Math.abs(t)),t?t[1]:NaN}function cD(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function uD(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var fD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qa(t){if(!(e=fD.exec(t)))throw new Error("invalid format: "+t);var e;return new Wf({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}qa.prototype=Wf.prototype;function Wf(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Wf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hD(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var nb;function dD(t,e){var n=il(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(nb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+il(t,Math.max(0,e+a-1))[0]}function Xm(t,e){var n=il(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Gm={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:lD,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Xm(t*100,e),r:Xm,s:dD,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qm(t){return t}var jm=Array.prototype.map,Jm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gD(t){var e=t.grouping===void 0||t.thousands===void 0?qm:cD(jm.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?qm:uD(jm.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=qa(d);var p=d.fill,x=d.align,R=d.sign,O=d.symbol,A=d.zero,P=d.width,S=d.comma,D=d.precision,N=d.trim,k=d.type;k==="n"?(S=!0,k="g"):Gm[k]||(D===void 0&&(D=12),N=!0,k="g"),(A||p==="0"&&x==="=")&&(A=!0,p="0",x="=");var W=O==="$"?n:O==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",Y=O==="$"?r:/[%p]/.test(k)?o:"",X=Gm[k],K=/[defgprs%]/.test(k);D=D===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function ie(ne){var J=W,Z=Y,$,te,G;if(k==="c")Z=X(ne)+Z,ne="";else{ne=+ne;var oe=ne<0||1/ne<0;if(ne=isNaN(ne)?l:X(Math.abs(ne),D),N&&(ne=hD(ne)),oe&&+ne==0&&R!=="+"&&(oe=!1),J=(oe?R==="("?R:s:R==="-"||R==="("?"":R)+J,Z=(k==="s"?Jm[8+nb/3]:"")+Z+(oe&&R==="("?")":""),K){for($=-1,te=ne.length;++$<te;)if(G=ne.charCodeAt($),48>G||G>57){Z=(G===46?i+ne.slice($+1):ne.slice($))+Z,ne=ne.slice(0,$);break}}}S&&!A&&(ne=e(ne,1/0));var ge=J.length+ne.length+Z.length,he=ge<P?new Array(P-ge+1).join(p):"";switch(S&&A&&(ne=e(he+ne,he.length?P-Z.length:1/0),he=""),x){case"<":ne=J+ne+Z+he;break;case"=":ne=J+he+ne+Z;break;case"^":ne=he.slice(0,ge=he.length>>1)+J+ne+Z+he.slice(ge);break;default:ne=he+J+ne+Z;break}return a(ne)}return ie.toString=function(){return d+""},ie}function f(d,p){var x=u((d=qa(d),d.type="f",d)),R=Math.max(-8,Math.min(8,Math.floor(Vi(p)/3)))*3,O=Math.pow(10,-R),A=Jm[8+R/3];return function(P){return x(O*P)+A}}return{format:u,formatPrefix:f}}var os,$f,rb;mD({thousands:",",grouping:[3],currency:["$",""]});function mD(t){return os=gD(t),$f=os.format,rb=os.formatPrefix,os}function pD(t){return Math.max(0,-Vi(Math.abs(t)))}function vD(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vi(e)/3)))*3-Vi(Math.abs(t)))}function bD(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vi(e)-Vi(t))+1}const Xt=Math.random,_D=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n}(Xt),yD=function t(e){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return n.source=t,n}(Xt),zf=function t(e){function n(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(a!=null)s=a,a=null;else do a=e()*2-1,s=e()*2-1,o=a*a+s*s;while(!o||o>1);return r+i*s*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(Xt),wD=function t(e){var n=zf.source(e);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=t,r}(Xt),ib=function t(e){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return n.source=t,n}(Xt),xD=function t(e){var n=ib.source(e);function r(i){if((i=+i)==0)return e;var a=n(i);return function(){return a()/i}}return r.source=t,r}(Xt),TD=function t(e){function n(r){return function(){return-Math.log1p(-e())/r}}return n.source=t,n}(Xt),SD=function t(e){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return n.source=t,n}(Xt),ED=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return n.source=t,n}(Xt),ab=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return n.source=t,n}(Xt),Hf=function t(e){var n=zf.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,s=1/(3*Math.sqrt(o)),l=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var u=n(),f=1+s*u;while(f<=0);f*=f*f;var d=1-e()}while(d>=1-.0331*u*u*u*u&&Math.log(d)>=.5*u*u+o*(1-f+Math.log(f)));return o*f*l()*a}}return r.source=t,r}(Xt),ob=function t(e){var n=Hf.source(e);function r(i,a){var o=n(i),s=n(a);return function(){var l=o();return l===0?0:l/(l+s())}}return r.source=t,r}(Xt),sb=function t(e){var n=ab.source(e),r=ob.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var s=0,l=a,u=o;l*u>16&&l*(1-u)>16;){var f=Math.floor((l+1)*u),d=r(f,l-f+1)();d<=u?(s+=f,l-=f,u=(u-d)/(1-d)):(l=f-1,u/=d)}for(var p=u<.5,x=p?u:1-u,R=n(x),O=R(),A=0;O<=l;++A)O+=R();return s+(p?A:l-A)}}return i.source=t,i}(Xt),AD=function t(e){function n(r,i,a){var o;return(r=+r)==0?o=s=>-Math.log(s):(r=1/r,o=s=>Math.pow(s,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return n.source=t,n}(Xt),CD=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return n.source=t,n}(Xt),RD=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return n.source=t,n}(Xt),MD=function t(e){var n=Hf.source(e),r=sb.source(e);function i(a){return function(){for(var o=0,s=a;s>16;){var l=Math.floor(.875*s),u=n(l)();if(u>s)return o+r(l-1,s/u)();o+=l,s-=u}for(var f=-Math.log1p(-e()),d=0;f<=s;++d)f-=Math.log1p(-e());return o+d}}return i.source=t,i}(Xt),ND=1664525,OD=1013904223,Km=1/4294967296;function DD(t=Math.random()){let e=(0<=t&&t<1?t/Km:Math.abs(t))|0;return()=>(e=ND*e+OD|0,Km*(e>>>0))}const LD=Object.freeze(Object.defineProperty({__proto__:null,randomBates:xD,randomBernoulli:ED,randomBeta:ob,randomBinomial:sb,randomCauchy:CD,randomExponential:TD,randomGamma:Hf,randomGeometric:ab,randomInt:yD,randomIrwinHall:ib,randomLcg:DD,randomLogNormal:wD,randomLogistic:RD,randomNormal:zf,randomPareto:SD,randomPoisson:MD,randomUniform:_D,randomWeibull:AD},Symbol.toStringTag,{value:"Module"}));function Fn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Er(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Yu=Symbol("implicit");function Uf(){var t=new $a,e=[],n=[],r=Yu;function i(a){let o=t.get(a);if(o===void 0){if(r!==Yu)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new $a;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Uf(e,n).unknown(r)},Fn.apply(i,arguments),i}function Yf(){var t=Uf().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,f=.5;delete t.unknown;function d(){var p=e().length,x=i<r,R=x?i:r,O=x?r:i;a=(O-R)/Math.max(1,p-l+u*2),s&&(a=Math.floor(a)),R+=(O-R-a*(p-l))*f,o=a*(1-l),s&&(R=Math.round(R),o=Math.round(o));var A=y0(p).map(function(P){return R+a*P});return n(x?A.reverse():A)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(p){return arguments.length?(s=!!p,d()):s},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},t.copy=function(){return Yf(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(f)},Fn.apply(d(),arguments)}function lb(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return lb(e())},t}function ID(){return lb(Yf.apply(null,arguments).paddingInner(1))}function PD(t){return function(){return t}}function al(t){return+t}var Zm=[0,1];function on(t){return t}function Xu(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:PD(isNaN(e)?NaN:.5)}function kD(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function BD(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Xu(i,r),a=n(o,a)):(r=Xu(r,i),a=n(a,o)),function(s){return a(r(s))}}function FD(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Xu(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=kr(t,s,1,r)-1;return a[l](i[l](s))}}function ho(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bl(){var t=Zm,e=Zm,n=hi,r,i,a,o=on,s,l,u;function f(){var p=Math.min(t.length,e.length);return o!==on&&(o=kD(t[0],t[p-1])),s=p>2?FD:BD,l=u=null,d}function d(p){return p==null||isNaN(p=+p)?a:(l||(l=s(t.map(r),e,n)))(r(o(p)))}return d.invert=function(p){return o(i((u||(u=s(e,t.map(r),Wn)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,al),f()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=Df,f()},d.clamp=function(p){return arguments.length?(o=p?!0:on,f()):o!==on},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(a=p,d):a},function(p,x){return r=p,i=x,f()}}function Xf(){return Bl()(on,on)}function cb(t,e,n,r){var i=Js(t,e,n),a;switch(r=qa(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=vD(i,o))&&(r.precision=a),rb(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=bD(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=pD(i))&&(r.precision=a-(r.type==="%")*2);break}}return $f(r)}function Vr(t){var e=t.domain;return t.ticks=function(n){var r=e();return za(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return cb(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);f-- >0;){if(u=ii(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function tr(){var t=Xf();return t.copy=function(){return ho(t,tr())},Fn.apply(t,arguments),Vr(t)}function ub(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,al),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return ub(t).unknown(e)},t=arguments.length?Array.from(t,al):[0,1],Vr(n)}function fb(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Qm(t){return Math.log(t)}function ep(t){return Math.exp(t)}function VD(t){return-Math.log(-t)}function WD(t){return-Math.exp(-t)}function $D(t){return isFinite(t)?+("1e"+t):t<0?0:t}function zD(t){return t===10?$D:t===Math.E?Math.exp:e=>Math.pow(t,e)}function HD(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function tp(t){return(e,n)=>-t(-e,n)}function Gf(t){const e=t(Qm,ep),n=e.domain;let r=10,i,a;function o(){return i=HD(r),a=zD(r),n()[0]<0?(i=tp(i),a=tp(a),t(VD,WD)):t(Qm,ep),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=i(u),x=i(f),R,O;const A=s==null?10:+s;let P=[];if(!(r%1)&&x-p<A){if(p=Math.floor(p),x=Math.ceil(x),u>0){for(;p<=x;++p)for(R=1;R<r;++R)if(O=p<0?R/a(-p):R*a(p),!(O<u)){if(O>f)break;P.push(O)}}else for(;p<=x;++p)for(R=r-1;R>=1;--R)if(O=p>0?R/a(-p):R*a(p),!(O<u)){if(O>f)break;P.push(O)}P.length*2<A&&(P=za(u,f,A))}else P=za(p,x,Math.min(x-p,A)).map(a);return d?P.reverse():P},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=qa(l)).precision==null&&(l.trim=!0),l=$f(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return f=>{let d=f/a(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=u?l(f):""}},e.nice=()=>n(fb(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function hb(){const t=Gf(Bl()).domain([1,10]);return t.copy=()=>ho(t,hb()).base(t.base()),Fn.apply(t,arguments),t}function np(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function rp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function qf(t){var e=1,n=t(np(e),rp(e));return n.constant=function(r){return arguments.length?t(np(e=+r),rp(e)):e},Vr(n)}function db(){var t=qf(Bl());return t.copy=function(){return ho(t,db()).constant(t.constant())},Fn.apply(t,arguments)}function ip(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function UD(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function YD(t){return t<0?-t*t:t*t}function jf(t){var e=t(on,on),n=1;function r(){return n===1?t(on,on):n===.5?t(UD,YD):t(ip(n),ip(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Vr(e)}function Jf(){var t=jf(Bl());return t.copy=function(){return ho(t,Jf()).exponent(t.exponent())},Fn.apply(t,arguments),t}function XD(){return Jf.apply(null,arguments).exponent(.5)}function ap(t){return Math.sign(t)*t*t}function GD(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function gb(){var t=Xf(),e=[0,1],n=!1,r;function i(a){var o=GD(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(ap(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,al)).map(ap)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gb(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Fn.apply(i,arguments),Vr(i)}function mb(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=b0(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[kr(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(gt),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return mb().domain(t).range(e).unknown(r)},Fn.apply(a,arguments)}function pb(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[kr(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return pb().domain([t,e]).range(i).unknown(a)},Fn.apply(Vr(o),arguments)}function vb(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[kr(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vb().domain(t).range(e).unknown(n)},Fn.apply(i,arguments)}const Jc=new Date,Kc=new Date;function At(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=a=>At(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Jc.setTime(+a),Kc.setTime(+o),t(Jc),t(Kc),Math.floor(n(Jc,Kc))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Wi=At(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Wi.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?At(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Wi);const op=Wi.range,_r=1e3,Dn=_r*60,yr=Dn*60,Sr=yr*24,Kf=Sr*7,sp=Sr*30,Zc=Sr*365,wr=At(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_r)},(t,e)=>(e-t)/_r,t=>t.getUTCSeconds()),lp=wr.range,Fl=At(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_r)},(t,e)=>{t.setTime(+t+e*Dn)},(t,e)=>(e-t)/Dn,t=>t.getMinutes()),qD=Fl.range,Vl=At(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Dn)},(t,e)=>(e-t)/Dn,t=>t.getUTCMinutes()),jD=Vl.range,Wl=At(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_r-t.getMinutes()*Dn)},(t,e)=>{t.setTime(+t+e*yr)},(t,e)=>(e-t)/yr,t=>t.getHours()),JD=Wl.range,$l=At(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*yr)},(t,e)=>(e-t)/yr,t=>t.getUTCHours()),KD=$l.range,ra=At(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Dn)/Sr,t=>t.getDate()-1),ZD=ra.range,go=At(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sr,t=>t.getUTCDate()-1),QD=go.range,Zf=At(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sr,t=>Math.floor(t/Sr)),eL=Zf.range;function di(t){return At(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Dn)/Kf)}const $i=di(0),ja=di(1),bb=di(2),_b=di(3),ci=di(4),yb=di(5),wb=di(6),cp=$i.range,tL=ja.range,nL=bb.range,rL=_b.range,iL=ci.range,aL=yb.range,oL=wb.range;function gi(t){return At(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Kf)}const zi=gi(0),Ja=gi(1),xb=gi(2),Tb=gi(3),ui=gi(4),Sb=gi(5),Eb=gi(6),up=zi.range,sL=Ja.range,lL=xb.range,cL=Tb.range,uL=ui.range,fL=Sb.range,hL=Eb.range,zl=At(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),dL=zl.range,Hl=At(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),gL=Hl.range,nr=At(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());nr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:At(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});const mL=nr.range,rr=At(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());rr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:At(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});const pL=rr.range;function Ab(t,e,n,r,i,a){const o=[[wr,1,_r],[wr,5,5*_r],[wr,15,15*_r],[wr,30,30*_r],[a,1,Dn],[a,5,5*Dn],[a,15,15*Dn],[a,30,30*Dn],[i,1,yr],[i,3,3*yr],[i,6,6*yr],[i,12,12*yr],[r,1,Sr],[r,2,2*Sr],[n,1,Kf],[e,1,sp],[e,3,3*sp],[t,1,Zc]];function s(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const x=d&&typeof d.range=="function"?d:l(u,f,d),R=x?x.range(u,+f+1):[];return p?R.reverse():R}function l(u,f,d){const p=Math.abs(f-u)/d,x=co(([,,A])=>A).right(o,p);if(x===o.length)return t.every(Js(u/Zc,f/Zc,d));if(x===0)return Wi.every(Math.max(Js(u,f,d),1));const[R,O]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return R.every(O)}return[s,l]}const[Cb,Rb]=Ab(rr,Hl,zi,Zf,$l,Vl),[Mb,Nb]=Ab(nr,zl,$i,ra,Wl,Fl),vL=Object.freeze(Object.defineProperty({__proto__:null,timeDay:ra,timeDays:ZD,timeFriday:yb,timeFridays:aL,timeHour:Wl,timeHours:JD,timeInterval:At,timeMillisecond:Wi,timeMilliseconds:op,timeMinute:Fl,timeMinutes:qD,timeMonday:ja,timeMondays:tL,timeMonth:zl,timeMonths:dL,timeSaturday:wb,timeSaturdays:oL,timeSecond:wr,timeSeconds:lp,timeSunday:$i,timeSundays:cp,timeThursday:ci,timeThursdays:iL,timeTickInterval:Nb,timeTicks:Mb,timeTuesday:bb,timeTuesdays:nL,timeWednesday:_b,timeWednesdays:rL,timeWeek:$i,timeWeeks:cp,timeYear:nr,timeYears:mL,unixDay:Zf,unixDays:eL,utcDay:go,utcDays:QD,utcFriday:Sb,utcFridays:fL,utcHour:$l,utcHours:KD,utcMillisecond:Wi,utcMilliseconds:op,utcMinute:Vl,utcMinutes:jD,utcMonday:Ja,utcMondays:sL,utcMonth:Hl,utcMonths:gL,utcSaturday:Eb,utcSaturdays:hL,utcSecond:wr,utcSeconds:lp,utcSunday:zi,utcSundays:up,utcThursday:ui,utcThursdays:uL,utcTickInterval:Rb,utcTicks:Cb,utcTuesday:xb,utcTuesdays:lL,utcWednesday:Tb,utcWednesdays:cL,utcWeek:zi,utcWeeks:up,utcYear:rr,utcYears:pL},Symbol.toStringTag,{value:"Module"}));function Qc(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function eu(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _a(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function bL(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=ya(i),f=wa(i),d=ya(a),p=wa(a),x=ya(o),R=wa(o),O=ya(s),A=wa(s),P=ya(l),S=wa(l),D={a:oe,A:ge,b:he,B:pe,c:null,d:pp,e:pp,f:$L,g:KL,G:QL,H:FL,I:VL,j:WL,L:Ob,m:zL,M:HL,p:re,q:ue,Q:_p,s:yp,S:UL,u:YL,U:XL,V:GL,w:qL,W:jL,x:null,X:null,y:JL,Y:ZL,Z:eI,"%":bp},N={a:de,A:ve,b:Me,B:Oe,c:null,d:vp,e:vp,f:iI,g:gI,G:pI,H:tI,I:nI,j:rI,L:Lb,m:aI,M:oI,p:Ae,q:Ie,Q:_p,s:yp,S:sI,u:lI,U:cI,V:uI,w:fI,W:hI,x:null,X:null,y:dI,Y:mI,Z:vI,"%":bp},k={a:ie,A:ne,b:J,B:Z,c:$,d:gp,e:gp,f:IL,g:dp,G:hp,H:mp,I:mp,j:NL,L:LL,m:ML,M:OL,p:K,q:RL,Q:kL,s:BL,S:DL,u:TL,U:SL,V:EL,w:xL,W:AL,x:te,X:G,y:dp,Y:hp,Z:CL,"%":PL};D.x=W(n,D),D.X=W(r,D),D.c=W(e,D),N.x=W(n,N),N.X=W(r,N),N.c=W(e,N);function W(me,Ee){return function(De){var ce=[],et=-1,fe=0,tt=me.length,it,_e,ut;for(De instanceof Date||(De=new Date(+De));++et<tt;)me.charCodeAt(et)===37&&(ce.push(me.slice(fe,et)),(_e=fp[it=me.charAt(++et)])!=null?it=me.charAt(++et):_e=it==="e"?" ":"0",(ut=Ee[it])&&(it=ut(De,_e)),ce.push(it),fe=et+1);return ce.push(me.slice(fe,et)),ce.join("")}}function Y(me,Ee){return function(De){var ce=_a(1900,void 0,1),et=X(ce,me,De+="",0),fe,tt;if(et!=De.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Ee&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(fe=eu(_a(ce.y,0,1)),tt=fe.getUTCDay(),fe=tt>4||tt===0?Ja.ceil(fe):Ja(fe),fe=go.offset(fe,(ce.V-1)*7),ce.y=fe.getUTCFullYear(),ce.m=fe.getUTCMonth(),ce.d=fe.getUTCDate()+(ce.w+6)%7):(fe=Qc(_a(ce.y,0,1)),tt=fe.getDay(),fe=tt>4||tt===0?ja.ceil(fe):ja(fe),fe=ra.offset(fe,(ce.V-1)*7),ce.y=fe.getFullYear(),ce.m=fe.getMonth(),ce.d=fe.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),tt="Z"in ce?eu(_a(ce.y,0,1)).getUTCDay():Qc(_a(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(tt+5)%7:ce.w+ce.U*7-(tt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,eu(ce)):Qc(ce)}}function X(me,Ee,De,ce){for(var et=0,fe=Ee.length,tt=De.length,it,_e;et<fe;){if(ce>=tt)return-1;if(it=Ee.charCodeAt(et++),it===37){if(it=Ee.charAt(et++),_e=k[it in fp?Ee.charAt(et++):it],!_e||(ce=_e(me,De,ce))<0)return-1}else if(it!=De.charCodeAt(ce++))return-1}return ce}function K(me,Ee,De){var ce=u.exec(Ee.slice(De));return ce?(me.p=f.get(ce[0].toLowerCase()),De+ce[0].length):-1}function ie(me,Ee,De){var ce=x.exec(Ee.slice(De));return ce?(me.w=R.get(ce[0].toLowerCase()),De+ce[0].length):-1}function ne(me,Ee,De){var ce=d.exec(Ee.slice(De));return ce?(me.w=p.get(ce[0].toLowerCase()),De+ce[0].length):-1}function J(me,Ee,De){var ce=P.exec(Ee.slice(De));return ce?(me.m=S.get(ce[0].toLowerCase()),De+ce[0].length):-1}function Z(me,Ee,De){var ce=O.exec(Ee.slice(De));return ce?(me.m=A.get(ce[0].toLowerCase()),De+ce[0].length):-1}function $(me,Ee,De){return X(me,e,Ee,De)}function te(me,Ee,De){return X(me,n,Ee,De)}function G(me,Ee,De){return X(me,r,Ee,De)}function oe(me){return o[me.getDay()]}function ge(me){return a[me.getDay()]}function he(me){return l[me.getMonth()]}function pe(me){return s[me.getMonth()]}function re(me){return i[+(me.getHours()>=12)]}function ue(me){return 1+~~(me.getMonth()/3)}function de(me){return o[me.getUTCDay()]}function ve(me){return a[me.getUTCDay()]}function Me(me){return l[me.getUTCMonth()]}function Oe(me){return s[me.getUTCMonth()]}function Ae(me){return i[+(me.getUTCHours()>=12)]}function Ie(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Ee=W(me+="",D);return Ee.toString=function(){return me},Ee},parse:function(me){var Ee=Y(me+="",!1);return Ee.toString=function(){return me},Ee},utcFormat:function(me){var Ee=W(me+="",N);return Ee.toString=function(){return me},Ee},utcParse:function(me){var Ee=Y(me+="",!0);return Ee.toString=function(){return me},Ee}}}var fp={"-":"",_:" ",0:"0"},kt=/^\s*\d+/,_L=/^%/,yL=/[\\^$*+?|[\]().{}]/g;function Je(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function wL(t){return t.replace(yL,"\\$&")}function ya(t){return new RegExp("^(?:"+t.map(wL).join("|")+")","i")}function wa(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function xL(t,e,n){var r=kt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function TL(t,e,n){var r=kt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function SL(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function EL(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function AL(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function hp(t,e,n){var r=kt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function dp(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function CL(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function RL(t,e,n){var r=kt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ML(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function gp(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function NL(t,e,n){var r=kt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function mp(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function OL(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function DL(t,e,n){var r=kt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function LL(t,e,n){var r=kt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function IL(t,e,n){var r=kt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PL(t,e,n){var r=_L.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function kL(t,e,n){var r=kt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function BL(t,e,n){var r=kt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function pp(t,e){return Je(t.getDate(),e,2)}function FL(t,e){return Je(t.getHours(),e,2)}function VL(t,e){return Je(t.getHours()%12||12,e,2)}function WL(t,e){return Je(1+ra.count(nr(t),t),e,3)}function Ob(t,e){return Je(t.getMilliseconds(),e,3)}function $L(t,e){return Ob(t,e)+"000"}function zL(t,e){return Je(t.getMonth()+1,e,2)}function HL(t,e){return Je(t.getMinutes(),e,2)}function UL(t,e){return Je(t.getSeconds(),e,2)}function YL(t){var e=t.getDay();return e===0?7:e}function XL(t,e){return Je($i.count(nr(t)-1,t),e,2)}function Db(t){var e=t.getDay();return e>=4||e===0?ci(t):ci.ceil(t)}function GL(t,e){return t=Db(t),Je(ci.count(nr(t),t)+(nr(t).getDay()===4),e,2)}function qL(t){return t.getDay()}function jL(t,e){return Je(ja.count(nr(t)-1,t),e,2)}function JL(t,e){return Je(t.getFullYear()%100,e,2)}function KL(t,e){return t=Db(t),Je(t.getFullYear()%100,e,2)}function ZL(t,e){return Je(t.getFullYear()%1e4,e,4)}function QL(t,e){var n=t.getDay();return t=n>=4||n===0?ci(t):ci.ceil(t),Je(t.getFullYear()%1e4,e,4)}function eI(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Je(e/60|0,"0",2)+Je(e%60,"0",2)}function vp(t,e){return Je(t.getUTCDate(),e,2)}function tI(t,e){return Je(t.getUTCHours(),e,2)}function nI(t,e){return Je(t.getUTCHours()%12||12,e,2)}function rI(t,e){return Je(1+go.count(rr(t),t),e,3)}function Lb(t,e){return Je(t.getUTCMilliseconds(),e,3)}function iI(t,e){return Lb(t,e)+"000"}function aI(t,e){return Je(t.getUTCMonth()+1,e,2)}function oI(t,e){return Je(t.getUTCMinutes(),e,2)}function sI(t,e){return Je(t.getUTCSeconds(),e,2)}function lI(t){var e=t.getUTCDay();return e===0?7:e}function cI(t,e){return Je(zi.count(rr(t)-1,t),e,2)}function Ib(t){var e=t.getUTCDay();return e>=4||e===0?ui(t):ui.ceil(t)}function uI(t,e){return t=Ib(t),Je(ui.count(rr(t),t)+(rr(t).getUTCDay()===4),e,2)}function fI(t){return t.getUTCDay()}function hI(t,e){return Je(Ja.count(rr(t)-1,t),e,2)}function dI(t,e){return Je(t.getUTCFullYear()%100,e,2)}function gI(t,e){return t=Ib(t),Je(t.getUTCFullYear()%100,e,2)}function mI(t,e){return Je(t.getUTCFullYear()%1e4,e,4)}function pI(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ui(t):ui.ceil(t),Je(t.getUTCFullYear()%1e4,e,4)}function vI(){return"+0000"}function bp(){return"%"}function _p(t){return+t}function yp(t){return Math.floor(+t/1e3)}var wi,Pb,kb;bI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bI(t){return wi=bL(t),Pb=wi.format,wi.parse,kb=wi.utcFormat,wi.utcParse,wi}function _I(t){return new Date(t)}function yI(t){return t instanceof Date?+t:+new Date(+t)}function Qf(t,e,n,r,i,a,o,s,l,u){var f=Xf(),d=f.invert,p=f.domain,x=u(".%L"),R=u(":%S"),O=u("%I:%M"),A=u("%I %p"),P=u("%a %d"),S=u("%b %d"),D=u("%B"),N=u("%Y");function k(W){return(l(W)<W?x:s(W)<W?R:o(W)<W?O:a(W)<W?A:r(W)<W?i(W)<W?P:S:n(W)<W?D:N)(W)}return f.invert=function(W){return new Date(d(W))},f.domain=function(W){return arguments.length?p(Array.from(W,yI)):p().map(_I)},f.ticks=function(W){var Y=p();return t(Y[0],Y[Y.length-1],W??10)},f.tickFormat=function(W,Y){return Y==null?k:u(Y)},f.nice=function(W){var Y=p();return(!W||typeof W.range!="function")&&(W=e(Y[0],Y[Y.length-1],W??10)),W?p(fb(Y,W)):f},f.copy=function(){return ho(f,Qf(t,e,n,r,i,a,o,s,l,u))},f}function wI(){return Fn.apply(Qf(Mb,Nb,nr,zl,$i,ra,Wl,Fl,wr,Pb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xI(){return Fn.apply(Qf(Cb,Rb,rr,Hl,zi,go,$l,Vl,wr,kb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ul(){var t=0,e=1,n,r,i,a,o=on,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(p){var x,R;return arguments.length?([x,R]=p,o=d(x,R),u):[o(0),o(1)]}}return u.range=f(hi),u.rangeRound=f(Df),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return a=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function Wr(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Bb(){var t=Vr(Ul()(on));return t.copy=function(){return Wr(t,Bb())},Er.apply(t,arguments)}function Fb(){var t=Gf(Ul()).domain([1,10]);return t.copy=function(){return Wr(t,Fb()).base(t.base())},Er.apply(t,arguments)}function Vb(){var t=qf(Ul());return t.copy=function(){return Wr(t,Vb()).constant(t.constant())},Er.apply(t,arguments)}function eh(){var t=jf(Ul());return t.copy=function(){return Wr(t,eh()).exponent(t.exponent())},Er.apply(t,arguments)}function TI(){return eh.apply(null,arguments).exponent(.5)}function Wb(){var t=[],e=on;function n(r){if(r!=null&&!isNaN(r=+r))return e((kr(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(gt),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Ha(t,a/r))},n.copy=function(){return Wb(e).domain(t)},Er.apply(n,arguments)}function Yl(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,u=on,f,d=!1,p;function x(O){return isNaN(O=+O)?p:(O=.5+((O=+f(O))-a)*(r*O<r*a?s:l),u(d?Math.max(0,Math.min(1,O)):O))}x.domain=function(O){return arguments.length?([t,e,n]=O,i=f(t=+t),a=f(e=+e),o=f(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,x):[t,e,n]},x.clamp=function(O){return arguments.length?(d=!!O,x):d},x.interpolator=function(O){return arguments.length?(u=O,x):u};function R(O){return function(A){var P,S,D;return arguments.length?([P,S,D]=A,u=uN(O,[P,S,D]),x):[u(0),u(.5),u(1)]}}return x.range=R(hi),x.rangeRound=R(Df),x.unknown=function(O){return arguments.length?(p=O,x):p},function(O){return f=O,i=O(t),a=O(e),o=O(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,x}}function $b(){var t=Vr(Yl()(on));return t.copy=function(){return Wr(t,$b())},Er.apply(t,arguments)}function zb(){var t=Gf(Yl()).domain([.1,1,10]);return t.copy=function(){return Wr(t,zb()).base(t.base())},Er.apply(t,arguments)}function Hb(){var t=qf(Yl());return t.copy=function(){return Wr(t,Hb()).constant(t.constant())},Er.apply(t,arguments)}function th(){var t=jf(Yl());return t.copy=function(){return Wr(t,th()).exponent(t.exponent())},Er.apply(t,arguments)}function SI(){return th.apply(null,arguments).exponent(.5)}const EI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yf,scaleDiverging:$b,scaleDivergingLog:zb,scaleDivergingPow:th,scaleDivergingSqrt:SI,scaleDivergingSymlog:Hb,scaleIdentity:ub,scaleImplicit:Yu,scaleLinear:tr,scaleLog:hb,scaleOrdinal:Uf,scalePoint:ID,scalePow:Jf,scaleQuantile:mb,scaleQuantize:pb,scaleRadial:gb,scaleSequential:Bb,scaleSequentialLog:Fb,scaleSequentialPow:eh,scaleSequentialQuantile:Wb,scaleSequentialSqrt:TI,scaleSequentialSymlog:Vb,scaleSqrt:XD,scaleSymlog:db,scaleThreshold:vb,scaleTime:wI,scaleUtc:xI,tickFormat:cb},Symbol.toStringTag,{value:"Module"}));function Be(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const AI=Be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),CI=Be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),RI=Be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),MI=Be("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),NI=Be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),OI=Be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),DI=Be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),LI=Be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),II=Be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),PI=Be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ub=Be("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ot=t=>qM(t[t.length-1]);var Yb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Be);const kI=ot(Yb);var Xb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Be);const BI=ot(Xb);var Gb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Be);const FI=ot(Gb);var qb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Be);const VI=ot(qb);var jb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Be);const WI=ot(jb);var Jb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Be);const $I=ot(Jb);var Kb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Be);const zI=ot(Kb);var Zb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Be);const HI=ot(Zb);var Qb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Be);const UI=ot(Qb);var e_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Be);const YI=ot(e_);var t_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Be);const XI=ot(t_);var n_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Be);const GI=ot(n_);var r_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Be);const qI=ot(r_);var i_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Be);const jI=ot(i_);var a_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Be);const JI=ot(a_);var o_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Be);const KI=ot(o_);var s_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Be);const ZI=ot(s_);var l_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Be);const QI=ot(l_);var c_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Be);const eP=ot(c_);var u_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Be);const tP=ot(u_);var f_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Be);const nP=ot(f_);var h_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Be);const rP=ot(h_);var d_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Be);const iP=ot(d_);var g_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Be);const aP=ot(g_);var m_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Be);const oP=ot(m_);var p_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Be);const sP=ot(p_);var v_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Be);const lP=ot(v_);function cP(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const uP=Lf(er(300,.5,0),er(-240,.5,1));var fP=Lf(er(-100,.75,.35),er(80,1.5,.8)),hP=Lf(er(260,.75,.35),er(80,1.5,.8)),ss=er();function dP(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ss.h=360*t-100,ss.s=1.5-1.5*e,ss.l=.8-.9*e,ss+""}var ls=si(),gP=Math.PI/3,mP=Math.PI*2/3;function pP(t){var e;return t=(.5-t)*Math.PI,ls.r=255*(e=Math.sin(t))*e,ls.g=255*(e=Math.sin(t+gP))*e,ls.b=255*(e=Math.sin(t+mP))*e,ls+""}function b_(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Xl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const vP=Xl(Be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var bP=Xl(Be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),_P=Xl(Be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),yP=Xl(Be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const wP=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:rP,interpolateBrBG:kI,interpolateBuGn:YI,interpolateBuPu:XI,interpolateCividis:cP,interpolateCool:hP,interpolateCubehelixDefault:uP,interpolateGnBu:GI,interpolateGreens:iP,interpolateGreys:aP,interpolateInferno:_P,interpolateMagma:bP,interpolateOrRd:qI,interpolateOranges:lP,interpolatePRGn:BI,interpolatePiYG:FI,interpolatePlasma:yP,interpolatePuBu:JI,interpolatePuBuGn:jI,interpolatePuOr:VI,interpolatePuRd:KI,interpolatePurples:oP,interpolateRainbow:dP,interpolateRdBu:WI,interpolateRdGy:$I,interpolateRdPu:ZI,interpolateRdYlBu:zI,interpolateRdYlGn:HI,interpolateReds:sP,interpolateSinebow:pP,interpolateSpectral:UI,interpolateTurbo:b_,interpolateViridis:vP,interpolateWarm:fP,interpolateYlGn:eP,interpolateYlGnBu:QI,interpolateYlOrBr:tP,interpolateYlOrRd:nP,schemeAccent:CI,schemeBlues:h_,schemeBrBG:Yb,schemeBuGn:e_,schemeBuPu:t_,schemeCategory10:AI,schemeDark2:RI,schemeGnBu:n_,schemeGreens:d_,schemeGreys:g_,schemeObservable10:MI,schemeOrRd:r_,schemeOranges:v_,schemePRGn:Xb,schemePaired:NI,schemePastel1:OI,schemePastel2:DI,schemePiYG:Gb,schemePuBu:a_,schemePuBuGn:i_,schemePuOr:qb,schemePuRd:o_,schemePurples:m_,schemeRdBu:jb,schemeRdGy:Jb,schemeRdPu:s_,schemeRdYlBu:Kb,schemeRdYlGn:Zb,schemeReds:p_,schemeSet1:LI,schemeSet2:II,schemeSet3:PI,schemeSpectral:Qb,schemeTableau10:Ub,schemeYlGn:c_,schemeYlGnBu:l_,schemeYlOrBr:u_,schemeYlOrRd:f_},Symbol.toStringTag,{value:"Module"})),cs=t=>()=>t;function xP(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ln(t,e,n){this.k=t,this.x=e,this.y=n}Ln.prototype={constructor:Ln,scale:function(t){return t===1?this:new Ln(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ln(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gl=new Ln(1,0,0);__.prototype=Ln.prototype;function __(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Gl;return t.__zoom}function tu(t){t.stopImmediatePropagation()}function xa(t){t.preventDefault(),t.stopImmediatePropagation()}function TP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function SP(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function wp(){return this.__zoom||Gl}function EP(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function AP(){return navigator.maxTouchPoints||"ontouchstart"in this}function CP(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function y_(){var t=TP,e=SP,n=CP,r=EP,i=AP,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=cN,u=uo("start","zoom","end"),f,d,p,x=500,R=150,O=0,A=10;function P($){$.property("__zoom",wp).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",ie).filter(i).on("touchstart.zoom",ne).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}P.transform=function($,te,G,oe){var ge=$.selection?$.selection():$;ge.property("__zoom",wp),$!==ge?k($,te,G,oe):ge.interrupt().each(function(){W(this,arguments).event(oe).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},P.scaleBy=function($,te,G,oe){P.scaleTo($,function(){var ge=this.__zoom.k,he=typeof te=="function"?te.apply(this,arguments):te;return ge*he},G,oe)},P.scaleTo=function($,te,G,oe){P.transform($,function(){var ge=e.apply(this,arguments),he=this.__zoom,pe=G==null?N(ge):typeof G=="function"?G.apply(this,arguments):G,re=he.invert(pe),ue=typeof te=="function"?te.apply(this,arguments):te;return n(D(S(he,ue),pe,re),ge,o)},G,oe)},P.translateBy=function($,te,G,oe){P.transform($,function(){return n(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof G=="function"?G.apply(this,arguments):G),e.apply(this,arguments),o)},null,oe)},P.translateTo=function($,te,G,oe,ge){P.transform($,function(){var he=e.apply(this,arguments),pe=this.__zoom,re=oe==null?N(he):typeof oe=="function"?oe.apply(this,arguments):oe;return n(Gl.translate(re[0],re[1]).scale(pe.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof G=="function"?-G.apply(this,arguments):-G),he,o)},oe,ge)};function S($,te){return te=Math.max(a[0],Math.min(a[1],te)),te===$.k?$:new Ln(te,$.x,$.y)}function D($,te,G){var oe=te[0]-G[0]*$.k,ge=te[1]-G[1]*$.k;return oe===$.x&&ge===$.y?$:new Ln($.k,oe,ge)}function N($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function k($,te,G,oe){$.on("start.zoom",function(){W(this,arguments).event(oe).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(oe).end()}).tween("zoom",function(){var ge=this,he=arguments,pe=W(ge,he).event(oe),re=e.apply(ge,he),ue=G==null?N(re):typeof G=="function"?G.apply(ge,he):G,de=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ve=ge.__zoom,Me=typeof te=="function"?te.apply(ge,he):te,Oe=l(ve.invert(ue).concat(de/ve.k),Me.invert(ue).concat(de/Me.k));return function(Ae){if(Ae===1)Ae=Me;else{var Ie=Oe(Ae),me=de/Ie[2];Ae=new Ln(me,ue[0]-Ie[0]*me,ue[1]-Ie[1]*me)}pe.zoom(null,Ae)}})}function W($,te,G){return!G&&$.__zooming||new Y($,te)}function Y($,te){this.that=$,this.args=te,this.active=0,this.sourceEvent=null,this.extent=e.apply($,te),this.taps=0}Y.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,te){return this.mouse&&$!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var te=Ht(this.that).datum();u.call($,this.that,new xP($,{sourceEvent:this.sourceEvent,target:P,transform:this.that.__zoom,dispatch:u}),te)}};function X($,...te){if(!t.apply(this,arguments))return;var G=W(this,te).event($),oe=this.__zoom,ge=Math.max(a[0],Math.min(a[1],oe.k*Math.pow(2,r.apply(this,arguments)))),he=Vn($);if(G.wheel)(G.mouse[0][0]!==he[0]||G.mouse[0][1]!==he[1])&&(G.mouse[1]=oe.invert(G.mouse[0]=he)),clearTimeout(G.wheel);else{if(oe.k===ge)return;G.mouse=[he,oe.invert(he)],Ai(this),G.start()}xa($),G.wheel=setTimeout(pe,R),G.zoom("mouse",n(D(S(oe,ge),G.mouse[0],G.mouse[1]),G.extent,o));function pe(){G.wheel=null,G.end()}}function K($,...te){if(p||!t.apply(this,arguments))return;var G=$.currentTarget,oe=W(this,te,!0).event($),ge=Ht($.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),he=Vn($,G),pe=$.clientX,re=$.clientY;P0($.view),tu($),oe.mouse=[he,this.__zoom.invert(he)],Ai(this),oe.start();function ue(ve){if(xa(ve),!oe.moved){var Me=ve.clientX-pe,Oe=ve.clientY-re;oe.moved=Me*Me+Oe*Oe>O}oe.event(ve).zoom("mouse",n(D(oe.that.__zoom,oe.mouse[0]=Vn(ve,G),oe.mouse[1]),oe.extent,o))}function de(ve){ge.on("mousemove.zoom mouseup.zoom",null),k0(ve.view,oe.moved),xa(ve),oe.event(ve).end()}}function ie($,...te){if(t.apply(this,arguments)){var G=this.__zoom,oe=Vn($.changedTouches?$.changedTouches[0]:$,this),ge=G.invert(oe),he=G.k*($.shiftKey?.5:2),pe=n(D(S(G,he),oe,ge),e.apply(this,te),o);xa($),s>0?Ht(this).transition().duration(s).call(k,pe,oe,$):Ht(this).call(P.transform,pe,oe,$)}}function ne($,...te){if(t.apply(this,arguments)){var G=$.touches,oe=G.length,ge=W(this,te,$.changedTouches.length===oe).event($),he,pe,re,ue;for(tu($),pe=0;pe<oe;++pe)re=G[pe],ue=Vn(re,this),ue=[ue,this.__zoom.invert(ue),re.identifier],ge.touch0?!ge.touch1&&ge.touch0[2]!==ue[2]&&(ge.touch1=ue,ge.taps=0):(ge.touch0=ue,he=!0,ge.taps=1+!!f);f&&(f=clearTimeout(f)),he&&(ge.taps<2&&(d=ue[0],f=setTimeout(function(){f=null},x)),Ai(this),ge.start())}}function J($,...te){if(this.__zooming){var G=W(this,te).event($),oe=$.changedTouches,ge=oe.length,he,pe,re,ue;for(xa($),he=0;he<ge;++he)pe=oe[he],re=Vn(pe,this),G.touch0&&G.touch0[2]===pe.identifier?G.touch0[0]=re:G.touch1&&G.touch1[2]===pe.identifier&&(G.touch1[0]=re);if(pe=G.that.__zoom,G.touch1){var de=G.touch0[0],ve=G.touch0[1],Me=G.touch1[0],Oe=G.touch1[1],Ae=(Ae=Me[0]-de[0])*Ae+(Ae=Me[1]-de[1])*Ae,Ie=(Ie=Oe[0]-ve[0])*Ie+(Ie=Oe[1]-ve[1])*Ie;pe=S(pe,Math.sqrt(Ae/Ie)),re=[(de[0]+Me[0])/2,(de[1]+Me[1])/2],ue=[(ve[0]+Oe[0])/2,(ve[1]+Oe[1])/2]}else if(G.touch0)re=G.touch0[0],ue=G.touch0[1];else return;G.zoom("touch",n(D(pe,re,ue),G.extent,o))}}function Z($,...te){if(this.__zooming){var G=W(this,te).event($),oe=$.changedTouches,ge=oe.length,he,pe;for(tu($),p&&clearTimeout(p),p=setTimeout(function(){p=null},x),he=0;he<ge;++he)pe=oe[he],G.touch0&&G.touch0[2]===pe.identifier?delete G.touch0:G.touch1&&G.touch1[2]===pe.identifier&&delete G.touch1;if(G.touch1&&!G.touch0&&(G.touch0=G.touch1,delete G.touch1),G.touch0)G.touch0[1]=this.__zoom.invert(G.touch0[0]);else if(G.end(),G.taps===2&&(pe=Vn(pe,this),Math.hypot(d[0]-pe[0],d[1]-pe[1])<A)){var re=Ht(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return P.wheelDelta=function($){return arguments.length?(r=typeof $=="function"?$:cs(+$),P):r},P.filter=function($){return arguments.length?(t=typeof $=="function"?$:cs(!!$),P):t},P.touchable=function($){return arguments.length?(i=typeof $=="function"?$:cs(!!$),P):i},P.extent=function($){return arguments.length?(e=typeof $=="function"?$:cs([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),P):e},P.scaleExtent=function($){return arguments.length?(a[0]=+$[0],a[1]=+$[1],P):[a[0],a[1]]},P.translateExtent=function($){return arguments.length?(o[0][0]=+$[0][0],o[1][0]=+$[1][0],o[0][1]=+$[0][1],o[1][1]=+$[1][1],P):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},P.constrain=function($){return arguments.length?(n=$,P):n},P.duration=function($){return arguments.length?(s=+$,P):s},P.interpolate=function($){return arguments.length?(l=$,P):l},P.on=function(){var $=u.on.apply(u,arguments);return $===u?P:$},P.clickDistance=function($){return arguments.length?(O=($=+$)*$,P):Math.sqrt(O)},P.tapDistance=function($){return arguments.length?(A=+$,P):A},P}const RP=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:Ln,zoom:y_,zoomIdentity:Gl,zoomTransform:__},Symbol.toStringTag,{value:"Module"}));var Ea={exports:{}};const MP=En($C),NP=En(EI),OP=En(vL),DP=En(LD),LP=En(sD),IP=En(VO),PP=En(CM);var Gu=Math.PI,qu=2*Gu,Gr=1e-6,kP=qu-Gr;function ju(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function mo(){return new ju}ju.prototype=mo.prototype={constructor:ju,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,u=a-t,f=o-e,d=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Gr)if(!(Math.abs(f*s-l*u)>Gr)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var p=n-a,x=r-o,R=s*s+l*l,O=p*p+x*x,A=Math.sqrt(R),P=Math.sqrt(d),S=i*Math.tan((Gu-Math.acos((R+d-O)/(2*A*P)))/2),D=S/P,N=S/A;Math.abs(D-1)>Gr&&(this._+="L"+(t+D*u)+","+(e+D*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>u*x)+","+(this._x1=t+N*s)+","+(this._y1=e+N*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,u=e+s,f=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Gr||Math.abs(this._y1-u)>Gr)&&(this._+="L"+l+","+u),n&&(d<0&&(d=d%qu+qu),d>kP?this._+="A"+n+","+n+",0,1,"+f+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=l)+","+(this._y1=u):d>Gr&&(this._+="A"+n+","+n+",0,"+ +(d>=Gu)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Ue(t){return function(){return t}}var Zt=1e-12,fi=Math.PI,ol=fi/2,Pr=2*fi;function BP(t){return t.innerRadius}function FP(t){return t.outerRadius}function VP(t){return t.startAngle}function WP(t){return t.endAngle}function $P(t){return t&&t.padAngle}function xp(t){return t>=1?ol:t<=-1?-ol:Math.asin(t)}function zP(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,f=o-i,d=s-a,p=(f*(e-a)-d*(t-i))/(d*l-f*u);return[t+p*l,e+p*u]}function us(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/Math.sqrt(s*s+l*l),f=u*l,d=-u*s,p=t+f,x=e+d,R=n+f,O=r+d,A=(p+R)/2,P=(x+O)/2,S=R-p,D=O-x,N=S*S+D*D,k=i-a,W=p*O-R*x,Y=(D<0?-1:1)*Math.sqrt(Math.max(0,k*k*N-W*W)),X=(W*D-S*Y)/N,K=(-W*S-D*Y)/N,ie=(W*D+S*Y)/N,ne=(-W*S+D*Y)/N,J=X-A,Z=K-P,$=ie-A,te=ne-P;return J*J+Z*Z>$*$+te*te&&(X=ie,K=ne),{cx:X,cy:K,x01:-f,y01:-d,x11:X*(i/k-1),y11:K*(i/k-1)}}function w_(){var t=BP,e=FP,n=Ue(0),r=null,i=VP,a=WP,o=$P,s=null;function l(){var u,f,d=+t.apply(this,arguments),p=+e.apply(this,arguments),x=i.apply(this,arguments)-ol,R=a.apply(this,arguments)-ol,O=Math.abs(R-x),A=R>x;if(s||(s=u=mo()),p<d&&(f=p,p=d,d=f),!(p>Zt))s.moveTo(0,0);else if(O>Pr-Zt)s.moveTo(p*Math.cos(x),p*Math.sin(x)),s.arc(0,0,p,x,R,!A),d>Zt&&(s.moveTo(d*Math.cos(R),d*Math.sin(R)),s.arc(0,0,d,R,x,A));else{var P=x,S=R,D=x,N=R,k=O,W=O,Y=o.apply(this,arguments)/2,X=Y>Zt&&(r?+r.apply(this,arguments):Math.sqrt(d*d+p*p)),K=Math.min(Math.abs(p-d)/2,+n.apply(this,arguments)),ie=K,ne=K,J,Z;if(X>Zt){var $=xp(X/d*Math.sin(Y)),te=xp(X/p*Math.sin(Y));(k-=$*2)>Zt?($*=A?1:-1,D+=$,N-=$):(k=0,D=N=(x+R)/2),(W-=te*2)>Zt?(te*=A?1:-1,P+=te,S-=te):(W=0,P=S=(x+R)/2)}var G=p*Math.cos(P),oe=p*Math.sin(P),ge=d*Math.cos(N),he=d*Math.sin(N);if(K>Zt){var pe=p*Math.cos(S),re=p*Math.sin(S),ue=d*Math.cos(D),de=d*Math.sin(D);if(O<fi){var ve=k>Zt?zP(G,oe,ue,de,pe,re,ge,he):[ge,he],Me=G-ve[0],Oe=oe-ve[1],Ae=pe-ve[0],Ie=re-ve[1],me=1/Math.sin(Math.acos((Me*Ae+Oe*Ie)/(Math.sqrt(Me*Me+Oe*Oe)*Math.sqrt(Ae*Ae+Ie*Ie)))/2),Ee=Math.sqrt(ve[0]*ve[0]+ve[1]*ve[1]);ie=Math.min(K,(d-Ee)/(me-1)),ne=Math.min(K,(p-Ee)/(me+1))}}W>Zt?ne>Zt?(J=us(ue,de,G,oe,p,ne,A),Z=us(pe,re,ge,he,p,ne,A),s.moveTo(J.cx+J.x01,J.cy+J.y01),ne<K?s.arc(J.cx,J.cy,ne,Math.atan2(J.y01,J.x01),Math.atan2(Z.y01,Z.x01),!A):(s.arc(J.cx,J.cy,ne,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!A),s.arc(0,0,p,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(Z.cy+Z.y11,Z.cx+Z.x11),!A),s.arc(Z.cx,Z.cy,ne,Math.atan2(Z.y11,Z.x11),Math.atan2(Z.y01,Z.x01),!A))):(s.moveTo(G,oe),s.arc(0,0,p,P,S,!A)):s.moveTo(G,oe),!(d>Zt)||!(k>Zt)?s.lineTo(ge,he):ie>Zt?(J=us(ge,he,pe,re,d,-ie,A),Z=us(G,oe,ue,de,d,-ie,A),s.lineTo(J.cx+J.x01,J.cy+J.y01),ie<K?s.arc(J.cx,J.cy,ie,Math.atan2(J.y01,J.x01),Math.atan2(Z.y01,Z.x01),!A):(s.arc(J.cx,J.cy,ie,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!A),s.arc(0,0,d,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(Z.cy+Z.y11,Z.cx+Z.x11),A),s.arc(Z.cx,Z.cy,ie,Math.atan2(Z.y11,Z.x11),Math.atan2(Z.y01,Z.x01),!A))):s.arc(0,0,d,N,D,A)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-fi/2;return[Math.cos(f)*u,Math.sin(f)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Ue(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Ue(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Ue(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Ue(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Ue(+u),l):i},l.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Ue(+u),l):a},l.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Ue(+u),l):o},l.context=function(u){return arguments.length?(s=u??null,l):s},l}function x_(t){this._context=t}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function po(t){return new x_(t)}function T_(t){return t[0]}function S_(t){return t[1]}function ql(){var t=T_,e=S_,n=Ue(!0),r=null,i=po,a=null;function o(s){var l,u=s.length,f,d=!1,p;for(r==null&&(a=i(p=mo())),l=0;l<=u;++l)!(l<u&&n(f=s[l],l,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,l,s),+e(f,l,s));if(p)return a=null,p+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:Ue(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Ue(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ue(!!s),o):n},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function E_(){var t=T_,e=null,n=Ue(0),r=S_,i=Ue(!0),a=null,o=po,s=null;function l(f){var d,p,x,R=f.length,O,A=!1,P,S=new Array(R),D=new Array(R);for(a==null&&(s=o(P=mo())),d=0;d<=R;++d){if(!(d<R&&i(O=f[d],d,f))===A)if(A=!A)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=d-1;x>=p;--x)s.point(S[x],D[x]);s.lineEnd(),s.areaEnd()}A&&(S[d]=+t(O,d,f),D[d]=+n(O,d,f),s.point(e?+e(O,d,f):S[d],r?+r(O,d,f):D[d]))}if(P)return s=null,P+""||null}function u(){return ql().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ue(+f),e=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ue(+f),l):t},l.x1=function(f){return arguments.length?(e=f==null?null:typeof f=="function"?f:Ue(+f),l):e},l.y=function(f){return arguments.length?(n=typeof f=="function"?f:Ue(+f),r=null,l):n},l.y0=function(f){return arguments.length?(n=typeof f=="function"?f:Ue(+f),l):n},l.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ue(+f),l):r},l.lineX0=l.lineY0=function(){return u().x(t).y(n)},l.lineY1=function(){return u().x(t).y(r)},l.lineX1=function(){return u().x(e).y(n)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ue(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),l):a},l}function HP(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function UP(t){return t}function YP(){var t=UP,e=HP,n=null,r=Ue(0),i=Ue(Pr),a=Ue(0);function o(s){var l,u=s.length,f,d,p=0,x=new Array(u),R=new Array(u),O=+r.apply(this,arguments),A=Math.min(Pr,Math.max(-Pr,i.apply(this,arguments)-O)),P,S=Math.min(Math.abs(A)/u,a.apply(this,arguments)),D=S*(A<0?-1:1),N;for(l=0;l<u;++l)(N=R[x[l]=l]=+t(s[l],l,s))>0&&(p+=N);for(e!=null?x.sort(function(k,W){return e(R[k],R[W])}):n!=null&&x.sort(function(k,W){return n(s[k],s[W])}),l=0,d=p?(A-u*D)/p:0;l<u;++l,O=P)f=x[l],N=R[f],P=O+(N>0?N*d:0)+D,R[f]={data:s[f],index:l,value:N,startAngle:O,endAngle:P,padAngle:S};return R}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:Ue(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:Ue(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:Ue(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:Ue(+s),o):a},o}var A_=nh(po);function C_(t){this._curve=t}C_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function nh(t){function e(n){return new C_(t(n))}return e._curve=t,e}function Aa(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(nh(n)):e()._curve},t}function XP(){return Aa(ql().curve(A_))}function GP(){var t=E_().curve(A_),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Aa(n())},delete t.lineX0,t.lineEndAngle=function(){return Aa(r())},delete t.lineX1,t.lineInnerRadius=function(){return Aa(i())},delete t.lineY0,t.lineOuterRadius=function(){return Aa(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(nh(o)):e()._curve},t}const rh={draw:function(t,e){var n=Math.sqrt(e/fi);t.moveTo(n,0),t.arc(0,0,n,0,Pr)}},R_={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var M_=Math.sqrt(1/3),qP=M_*2;const N_={draw:function(t,e){var n=Math.sqrt(e/qP),r=n*M_;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var jP=.8908130915292852,O_=Math.sin(fi/10)/Math.sin(7*fi/10),JP=Math.sin(Pr/10)*O_,KP=-Math.cos(Pr/10)*O_;const D_={draw:function(t,e){var n=Math.sqrt(e*jP),r=JP*n,i=KP*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Pr*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},L_={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var nu=Math.sqrt(3);const I_={draw:function(t,e){var n=-Math.sqrt(e/(nu*3));t.moveTo(0,n*2),t.lineTo(-nu*n,-n),t.lineTo(nu*n,-n),t.closePath()}};var Mn=-.5,Nn=Math.sqrt(3)/2,Ju=1/Math.sqrt(12),ZP=(Ju/2+1)*3;const P_={draw:function(t,e){var n=Math.sqrt(e/ZP),r=n/2,i=n*Ju,a=r,o=n*Ju+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Mn*r-Nn*i,Nn*r+Mn*i),t.lineTo(Mn*a-Nn*o,Nn*a+Mn*o),t.lineTo(Mn*s-Nn*l,Nn*s+Mn*l),t.lineTo(Mn*r+Nn*i,Mn*i-Nn*r),t.lineTo(Mn*a+Nn*o,Mn*o-Nn*a),t.lineTo(Mn*s+Nn*l,Mn*l-Nn*s),t.closePath()}};var QP=[rh,R_,N_,L_,D_,I_,P_];function ek(){var t=Ue(rh),e=Ue(64),n=null;function r(){var i;if(n||(n=i=mo()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:Ue(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:Ue(+i),r):e},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Fr(){}function sl(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function jl(t){this._context=t}jl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tk(t){return new jl(t)}function k_(t){this._context=t}k_.prototype={areaStart:Fr,areaEnd:Fr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nk(t){return new k_(t)}function B_(t){this._context=t}B_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:sl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rk(t){return new B_(t)}function F_(t,e){this._basis=new jl(t),this._beta=e}F_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*a),this._beta*e[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const ik=function t(e){function n(r){return e===1?new jl(r):new F_(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function ll(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ih(t,e){this._context=t,this._k=(1-e)/6}ih.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ll(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ll(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ak=function t(e){function n(r){return new ih(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ah(t,e){this._context=t,this._k=(1-e)/6}ah.prototype={areaStart:Fr,areaEnd:Fr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ll(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ok=function t(e){function n(r){return new ah(r,e)}return n.tension=function(r){return t(+r)},n}(0);function oh(t,e){this._context=t,this._k=(1-e)/6}oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ll(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const sk=function t(e){function n(r){return new oh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function sh(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Zt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Zt){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/f,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function V_(t,e){this._context=t,this._alpha=e}V_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:sh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const W_=function t(e){function n(r){return e?new V_(r,e):new ih(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function $_(t,e){this._context=t,this._alpha=e}$_.prototype={areaStart:Fr,areaEnd:Fr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:sh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const lk=function t(e){function n(r){return e?new $_(r,e):new ah(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function z_(t,e){this._context=t,this._alpha=e}z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ck=function t(e){function n(r){return e?new z_(r,e):new oh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function H_(t){this._context=t}H_.prototype={areaStart:Fr,areaEnd:Fr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function uk(t){return new H_(t)}function Tp(t){return t<0?-1:1}function Sp(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Tp(a)+Tp(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Ep(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ru(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function cl(t){this._context=t}cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ru(this,this._t0,Ep(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ru(this,Ep(this,n=Sp(this,t,e)),n);break;default:ru(this,this._t0,n=Sp(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function U_(t){this._context=new Y_(t)}(U_.prototype=Object.create(cl.prototype)).point=function(t,e){cl.prototype.point.call(this,e,t)};function Y_(t){this._context=t}Y_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function fk(t){return new cl(t)}function hk(t){return new U_(t)}function X_(t){this._context=t}X_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Ap(t),i=Ap(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Ap(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function dk(t){return new X_(t)}function Jl(t,e){this._context=t,this._t=e}Jl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function gk(t){return new Jl(t,.5)}function mk(t){return new Jl(t,0)}function pk(t){return new Jl(t,1)}var Cp=Array.prototype.slice;function Hi(t,e){if((a=t.length)>1)for(var n=1,r,i=t[e[0]],a,o=i.length;n<a;++n){r=i,i=t[e[n]];for(var s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}}function Ui(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function vk(t,e){return t[e]}function bk(){var t=Ue([]),e=Ui,n=Hi,r=vk;function i(a){var o=t.apply(this,arguments),s,l=a.length,u=o.length,f=new Array(u),d;for(s=0;s<u;++s){for(var p=o[s],x=f[s]=new Array(l),R=0,O;R<l;++R)x[R]=O=[0,+r(a[R],p,R,a)],O.data=a[R];x.key=p}for(s=0,d=e(f);s<u;++s)f[d[s]].index=s;return n(f,d),f}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Ue(Cp.call(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ue(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Ui:typeof a=="function"?a:Ue(Cp.call(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Hi,i):n},i}function _k(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Hi(t,e)}}function yk(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}Hi(t,e)}}function wk(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,u=0;s<o;++s){for(var f=t[e[s]],d=f[r][1]||0,p=f[r-1][1]||0,x=(d-p)/2,R=0;R<s;++R){var O=t[e[R]],A=O[r][1]||0,P=O[r-1][1]||0;x+=A-P}l+=d,u+=x*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Hi(t,e)}}function G_(t){var e=t.map(q_);return Ui(t).sort(function(n,r){return e[n]-e[r]})}function q_(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function xk(t){return G_(t).reverse()}function Tk(t){var e=t.length,n,r,i=t.map(q_),a=Ui(t).sort(function(f,d){return i[d]-i[f]}),o=0,s=0,l=[],u=[];for(n=0;n<e;++n)r=a[n],o<s?(o+=i[r],l.push(r)):(s+=i[r],u.push(r));return u.reverse().concat(l)}function Sk(t){return Ui(t).reverse()}const Ek=Object.freeze(Object.defineProperty({__proto__:null,arc:w_,area:E_,curveBasis:tk,curveBasisClosed:nk,curveBasisOpen:rk,curveBundle:ik,curveCardinal:ak,curveCardinalClosed:ok,curveCardinalOpen:sk,curveCatmullRom:W_,curveCatmullRomClosed:lk,curveCatmullRomOpen:ck,curveLinear:po,curveLinearClosed:uk,curveMonotoneX:fk,curveMonotoneY:hk,curveNatural:dk,curveStep:gk,curveStepAfter:pk,curveStepBefore:mk,line:ql,pie:YP,radialArea:GP,radialLine:XP,stack:bk,stackOffsetExpand:_k,stackOffsetNone:Hi,stackOffsetSilhouette:yk,stackOffsetWiggle:wk,stackOrderAscending:G_,stackOrderDescending:xk,stackOrderInsideOut:Tk,stackOrderNone:Ui,stackOrderReverse:Sk,symbol:ek,symbolCircle:rh,symbolCross:R_,symbolDiamond:N_,symbolSquare:L_,symbolStar:D_,symbolTriangle:I_,symbolWye:P_,symbols:QP},Symbol.toStringTag,{value:"Module"})),Ak=En(Ek),Ck=En(wP),Rk=En(YC),Mk=En(PO),Nk=En(RP);var Ok=Ea.exports,Rp;function Dk(){return Rp||(Rp=1,function(t,e){(function(n,r){r(e,MP,NP,OP,DP,LP,IP,PP,Ak,Ck,Rk,Mk,Nk)})(Ok,function(n,r,i,a,o,s,l,u,f,d,p,x,R){var O=function(c,h,g){var v=h[g];if(typeof v!="function")throw new Error("Attempt to rebind ".concat(g," which isn't a function on the source object"));return function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];var b=v.apply(h,w);return b===h?c:b}},A=function(c,h){for(var g=arguments.length,v=new Array(g>2?g-2:0),y=2;y<g;y++)v[y-2]=arguments[y];for(var w=0,m=v;w<m.length;w++){var b=m[w];c[b]=O(c,h,b)}return c},P=function(h){return function(g){return h.reduce(function(v,y){return v&&y(v)},g)}},S=function(c,h){for(var g=arguments.length,v=new Array(g>2?g-2:0),y=2;y<g;y++)v[y-2]=arguments[y];for(var w=P(v),m=0,b=Object.keys(h);m<b.length;m++){var _=b[m],T=w(_);T&&(c[T]=O(c,h,_))}return c},D=function(c){return c.map(function(h){return typeof h=="string"?new RegExp("^".concat(h,"$")):h})},N=function(){for(var c=arguments.length,h=new Array(c),g=0;g<c;g++)h[g]=arguments[g];return h=D(h),function(v){return h.every(function(y){return!y.test(v)})&&v}},k=function(){for(var c=arguments.length,h=new Array(c),g=0;g<c;g++)h[g]=arguments[g];return h=D(h),function(v){return h.some(function(y){return y.test(v)})&&v}},W=function(c){return function(h){return c[h]}},Y=function(h){return h[0].toUpperCase()+h.slice(1)},X=function(c){return function(h){return c+Y(h)}};function K(c){return c}function ie(c){}function ne(c){return typeof c=="function"?c:function(){return c}}function J(c){return typeof c=="number"&&isNaN(c)?void 0:c}function Z(){var c=function(){return 10},h=ie,g=K,v=function(m){return m!=null},y=function(m){var b=c.apply(this,arguments),_=m.slice(0,b).map(g);return m.map(function(T,E){return E>=b&&(_.shift(),_.push(g(T,E))),E<b-1||_.some(function(M){return!v(M)})?h(void 0,E):h(_,E)})};return y.period=function(){return arguments.length?(c=ne(arguments.length<=0?void 0:arguments[0]),y):c},y.accumulator=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y.defined=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],y):v},y.value=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},y}function $(){var c=2,h=Z().accumulator(function(v){var y=v&&r.deviation(v),w=v&&r.mean(v);return{average:w,upper:J(w+c*y),lower:J(w-c*y)}}),g=function(y){return h(y)};return g.multiplier=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},A(g,h,"period","value"),g}function te(){var c=K,h=function(){return 9},g=function(w){var m=[];return function(b){var _;return m.length<w&&(b!=null?m.push(b):m=[]),m.length>=w&&(_=r.mean(m)),_}},v=function(w){var m=h.apply(this,arguments),b=2/(m+1),_=g(m),T;return w.map(function(E,M){var L=c(E,M);return T===void 0?T=_(L):T=L*b+(1-b)*T,J(T)})};return v.period=function(){return arguments.length?(h=ne(arguments.length<=0?void 0:arguments[0]),v):h},v.value=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v}function G(){var c=K,h=te().period(12),g=te().period(26),v=te().period(9),y=function(m){h.value(c),g.value(c);var b=r.zip(h(m),g(m)).map(function(T){return T[0]!==void 0&&T[1]!==void 0?T[0]-T[1]:void 0}),_=v(b);return r.zip(b,_).map(function(T){return{macd:T[0],signal:T[1],divergence:T[0]!==void 0&&T[1]!==void 0?T[0]-T[1]:void 0}})};return y.value=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],y):c},S(y,h,W({period:"fastPeriod"})),S(y,g,W({period:"slowPeriod"})),S(y,v,W({period:"signalPeriod"})),y}function oe(c,h){(h==null||h>c.length)&&(h=c.length);for(var g=0,v=Array(h);g<h;g++)v[g]=c[g];return v}function ge(c){if(Array.isArray(c))return c}function he(c){if(Array.isArray(c))return oe(c)}function pe(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function re(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function ue(c,h,g){if(Ee())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,h);var y=new(c.bind.apply(c,v));return g&&it(y,g.prototype),y}function de(c,h){for(var g=0;g<h.length;g++){var v=h[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,Dy(v.key),v)}}function ve(c,h,g){return h&&de(c.prototype,h),g&&de(c,g),Object.defineProperty(c,"prototype",{writable:!1}),c}function Me(c,h){var g=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!g){if(Array.isArray(c)||(g=bo(c))||h){g&&(c=g);var v=0,y=function(){};return{s:y,n:function(){return v>=c.length?{done:!0}:{done:!1,value:c[v++]}},e:function(_){throw _},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w,m=!0,b=!1;return{s:function(){g=g.call(c)},n:function(){var _=g.next();return m=_.done,_},e:function(_){b=!0,w=_},f:function(){try{m||g.return==null||g.return()}finally{if(b)throw w}}}}function Oe(c){var h=Ee();return function(){var g,v=Ae(c);if(h){var y=Ae(this).constructor;g=Reflect.construct(v,arguments,y)}else g=v.apply(this,arguments);return tt(this,g)}}function Ae(c){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},Ae(c)}function Ie(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),h&&it(c,h)}function me(c){try{return Function.toString.call(c).indexOf("[native code]")!==-1}catch{return typeof c=="function"}}function Ee(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ee=function(){return!!c})()}function De(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function ce(c,h){var g=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(g!=null){var v,y,w,m,b=[],_=!0,T=!1;try{if(w=(g=g.call(c)).next,h===0){if(Object(g)!==g)return;_=!1}else for(;!(_=(v=w.call(g)).done)&&(b.push(v.value),b.length!==h);_=!0);}catch(E){T=!0,y=E}finally{try{if(!_&&g.return!=null&&(m=g.return(),Object(m)!==m))return}finally{if(T)throw y}}return b}}function et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tt(c,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(c)}function it(c,h){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},it(c,h)}function _e(c,h){return ge(c)||ce(c,h)||bo(c,h)||et()}function ut(c){return ge(c)||De(c)||bo(c)||et()}function yt(c){return he(c)||De(c)||bo(c)||fe()}function Un(c,h){if(typeof c!="object"||!c)return c;var g=c[Symbol.toPrimitive];if(g!==void 0){var v=g.call(c,h);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}function Dy(c){var h=Un(c,"string");return typeof h=="symbol"?h:h+""}function vo(c){"@babel/helpers - typeof";return vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},vo(c)}function bo(c,h){if(c){if(typeof c=="string")return oe(c,h);var g={}.toString.call(c).slice(8,-1);return g==="Object"&&c.constructor&&(g=c.constructor.name),g==="Map"||g==="Set"?Array.from(c):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?oe(c,h):void 0}}function _o(c){var h=typeof Map=="function"?new Map:void 0;return _o=function(g){if(g===null||!me(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(h!==void 0){if(h.has(g))return h.get(g);h.set(g,v)}function v(){return ue(g,arguments,Ae(this).constructor)}return v.prototype=Object.create(g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),it(v,g)},_o(c)}function Ly(){var c=Z().period(14),h=function(_,T){return T+(_[_.length-1]-T)/_.length},g=function(_){var T=_e(_,2),E=T[0],M=T[1];return E<M?0:E-M},v=function(_){var T=_e(_,2),E=T[0],M=T[1];return E>M?0:M-E},y=function(_,T){return T!==void 0?h(_,T):r.mean(_)},w=function(){var _,T,E;return function(M){if(!M){_!==void 0&&(_=NaN);return}if(_===void 0){_=M[0];return}var L=r.pairs([_].concat(yt(M)));T=y(L.map(g),T),E=y(L.map(v),E);var I=isNaN(_)?NaN:E/T;return J(100-100/(1+I))}},m=function(_){var T=w();return c.accumulator(T),c(_)};return A(m,c,"period","value"),m}function dh(){var c=Z().accumulator(function(g){return g&&r.mean(g)}),h=function(v){return c(v)};return A(h,c,"period","value"),h}function Iy(){var c=function(b,_){return b.close},h=function(b,_){return b.high},g=function(b,_){return b.low},v=Z().period(5).defined(function(m){return c(m)!=null&&h(m)!=null&&g(m)!=null}).accumulator(function(m){var b=m&&r.max(m,h),_=m&&r.min(m,g),T=m&&100*(c(m[m.length-1])-_)/(b-_);return J(T)}),y=dh().period(3),w=function(b){var _=v(b),T=y(_);return _.map(function(E,M){return{k:E,d:T[M]}})};return w.closeValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],w):c},w.highValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.lowValue=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},S(w,v,W({period:"kPeriod"})),S(w,y,W({period:"dPeriod"})),w}function Py(){var c=function(m,b){return m.volume},h=function(m,b){return m.close},g=te().period(13),v=Z().period(2).defined(function(w){return h(w)!=null&&c(w)!=null}).accumulator(function(w){return w&&J((h(w[1])-h(w[0]))*c(w[1]))}),y=function(m){var b=v(m);return g(b)};return y.volumeValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],y):c},y.closeValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},A(y,g,"period"),y}function ky(){var c=.1,h=K,g=function(y){return y.map(function(w){var m=J(h(w)*(1-c)),b=J(h(w)*(1+c));return{lower:m,upper:b}})};return g.factor=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},g.value=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],g):h},g}function By(){var c=function(m,b){return m.close},h=function(m,b){return m.high},g=function(m,b){return m.low},v=te().period(13),y=function(m){return v.value(c),r.zip(m,v(m)).map(function(b){var _=J(h(b[0])-b[1]),T=J(g(b[0])-b[1]);return{bullPower:_,bearPower:T}})};return y.closeValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],y):c},y.highValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y.lowValue=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},A(y,v,"period"),y}function gh(){var c={};return c.distance=function(h,g){return g-h},c.offset=function(h,g){return h instanceof Date?new Date(h.getTime()+g):h+g},c.clampUp=function(h){return h},c.clampDown=function(h){return h},c.copy=function(){return c},c}function Fy(c,h){var g=c.map(h.clampUp);return g.length,new Set(g.map(function(v){return v==null?void 0:v.valueOf()})).size,g}function mh(c){var h=this;arguments.length||(c=i.scaleIdentity());var g=gh(),v=function(w){var m=c.domain(),b=c.range(),_=g.distance(m[0],m[1]),T=g.distance(m[0],w),E=T/_,M=E*(b[1]-b[0])+b[0];return M};return v.invert=function(y){var w=c.domain(),m=c.range(),b=(y-m[0])/(m[1]-m[0]),_=g.distance(w[0],w[1]),T=b*_;return g.offset(w[0],T)},v.domain=function(){if(!arguments.length)return c.domain();var y=arguments.length<=0?void 0:arguments[0],w=g.clampUp(y[0]),m=g.clampDown(y[1]);return c.domain([w,m]),v},v.nice=function(){c.nice();var y=c.domain(),w=g.clampUp(y[0]),m=g.clampDown(y[1]);return c.domain([w,m]),v},v.ticks=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];var b=c.ticks.apply(h,w);return Fy(b,g)},v.copy=function(){return mh(c.copy()).discontinuityProvider(g.copy())},v.discontinuityProvider=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},S(v,c,k("range","rangeRound","interpolate","clamp","tickFormat")),v}var ph=function(h,g,v,y){var w={sunday:0,monday:1,saturday:6},m=24*3600*1e3,b=m*5,_=m*7,T={},E=function(L){return h(L)===0||h(L)===6};return T.clampDown=function(M){if(M&&E(M)){var L=g.ceil(M);return h(L)===w.sunday?g.offset(L,-1):h(L)===w.monday?g.offset(L,-2):L}else return M},T.clampUp=function(M){if(M&&E(M)){var L=g.floor(M);return h(L)===w.saturday?g.offset(L,2):h(L)===w.sunday?g.offset(L,1):L}else return M},T.distance=function(M,L){M=T.clampUp(M),L=T.clampDown(L);var I=v.ceil(M);if(L<I)return L.getTime()-M.getTime();var F=I.getTime()-M.getTime(),B=v.ceil(L),V=B.getTime()-L.getTime(),z=Math.round((B.getTime()-I.getTime())/_);return z*b+F-V},T.offset=function(M,L){var I=E(M)?T.clampUp(M):M;if(L===0)return I;var F=L<0,B=L>0,V=L,z=F?y.floor(I):v.ceil(I);if(V-=z.getTime()-I.getTime(),F&&V>0||B&&V<0)return new Date(I.getTime()+L);I=F?z:g.offset(z,2);var U=Math.floor(V/b);return I=g.offset(I,U*7),V-=U*b,I=new Date(I.getTime()+V),I},T.copy=function(){return T},T},Vy=function(){return ph(function(c){return c.getDay()},a.timeDay,a.timeSaturday,a.timeMonday)},Wy=function(){return ph(function(c){return c.getUTCDay()},a.utcDay,a.utcSaturday,a.utcMonday)},$y=function(){for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];var y=function(T,E){return T>E[0]&&T<E[1]},w=function(T,E){return T[0]>=E[0]&&T[1]<=E[1]},m={};m.distance=function(_,T){_=m.clampUp(_),T=m.clampDown(T);var E=g.filter(function(L){return w(L,[_,T])}),M=E.map(function(L){return L[1]-L[0]});return T-_-M.reduce(function(L,I){return L+I},0)};var b=function(T,E){return T instanceof Date?new Date(T.getTime()+E):T+E};return m.offset=function(_,T){if(T>0){for(var E=m.clampUp(_),M=T;M>0;){var L=g.filter(function(j){return j[0]>E}).sort(function(j,ae){return j[0]-ae[0]});if(L.length){var I=L[0],F=I[0]-E;F>M?(E=b(E,M),M=0):(E=I[1],M-=F)}else E=b(E,M),M=0}return E}else{for(var B=m.clampDown(_),V=T;V<0;){var z=g.filter(function(j){return j[1]<B}).sort(function(j,ae){return ae[0]-j[0]});if(z.length){var U=z[0],H=U[1]-B;H<V?(B=b(B,V),V=0):(B=U[0],V-=H)}else B=b(B,V),V=0}return B}},m.clampUp=function(_){return g.reduce(function(T,E){return y(T,E)?E[1]:T},_)},m.clampDown=function(_){return g.reduce(function(T,E){return y(T,E)?E[0]:T},_)},m.copy=function(){return m},m},yo=24*3600*1e3,An="00:00:00.000",zy="SOD",Hy="EOD";function vh(c){if(arguments.length!==1||typeof c!="string")throw"Expected single argument of type string";var h=function(m,b){return Number.isInteger(m)?m>=0&&m<=b:!1},g=[0,0,0,0],v=c.split(":");if(v.length<2||v.length>3)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(g[0]=h(parseInt(v[0],10),23)?parseInt(v[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(v[0],"'")}(),g[1]=h(parseInt(v[1],10),59)?parseInt(v[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(v[1],"'")}(),v.length===3){var y=v[2].split(".").map(function(w){return parseInt(w,10)});g[2]=h(y[0],59)?y[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(y[0],"'")}(),y.length===2&&(g[3]=h(y[1],999)?y[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(y[1],"'")}())}return"".concat(g[0].toString(10).padStart(2,"0"),":").concat(g[1].toString(10).padStart(2,"0"),":").concat(g[2].toString(10).padStart(2,"0"),".").concat(g[3].toString(10).padStart(3,"0"))}function Uy(c,h){if(arguments.length!=2||!Array.isArray(c)||c.length!==2||typeof c[0]!="string"||typeof c[1]!="string")throw"Expected argument is a single string[] of length 2.";c[0]===zy&&(c[0]=An),c[1]===Hy&&(c[1]=An);var g=vh(c[0]),v=vh(c[1]);if(v!==An&&g>v)throw"Time range start time '".concat(g,"' must be before end time '").concat(v,"' or both must equal ").concat(An);var y=h.setTime(new Date(v===An?yo:0),v)-h.setTime(new Date(0),g),w={startTime:g,endTime:v,lenghtInMs:y};return w.isInRange=function(m){var b=h.getTimeString(m);return w.startTime<=b&&(w.endTime===An||w.endTime>b)},w}var zr=function(h,g){var v=h.map(function(b){return Uy(b,g)}).sort(function(b,_){return b.startTime<_.startTime?-1:b.startTime>_.startTime?1:0}),y=yo-v.reduce(function(b,_){return b+_.lenghtInMs},0),w=function(_,T){if(_.getTime()===T.getTime())return 0;if(g.dayInterval(_).getTime()!==g.dayInterval(T).getTime()&&g.getStartOfNextDay(_).getTime()!==T.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(_,"'; intervalEnd: '").concat(T,"'");var E=0,M=v.filter(function(z){return z.endTime===An||g.setTime(_,z.endTime)>=_}),L=Me(M),I;try{for(L.s();!(I=L.n()).done;){var F=I.value,B=g.setTime(_,F.startTime),V=F.endTime===An?g.getStartOfNextDay(_):g.setTime(_,F.endTime);if(_<B&&T<B)return E+g.msInterval.count(_,T);if(_<B&&(E+=g.msInterval.count(_,B)),T<V)return E;_=V}}catch(z){L.e(z)}finally{L.f()}return E+g.msInterval.count(_,T)},m=function(_,T){if(T===0)return[_,T];var E=g.msInterval.offset(_,T),M=T>0?v.filter(function(j){return g.setTime(_,j.startTime)>=_}):v.filter(function(j){return g.setTime(_,j.startTime)<_}).reverse();if(M.length===0)return[g.msInterval.offset(_,T),0];if(T>0){var L=Me(M),I;try{for(L.s();!(I=L.n()).done;){var F=I.value,B=g.setTime(_,F.startTime);B<=E&&(T-=g.msInterval.count(_,B),_=F.endTime===An?g.getStartOfNextDay(_):g.setTime(_,F.endTime),E=g.msInterval.offset(_,T))}}catch(j){L.e(j)}finally{L.f()}T-=g.msInterval.count(_,E)}else{var V=Me(M),z;try{for(V.s();!(z=V.n()).done;){var U=z.value,H=U.endTime===An?g.getStartOfNextDay(_):g.setTime(_,U.endTime);E<H&&(T+=g.msInterval.count(H,_)+1,_=g.msInterval.offset(g.setTime(_,U.startTime),-1),E=g.msInterval.offset(_,T))}}catch(j){V.e(j)}finally{V.f()}T+=g.msInterval.count(E,_)}if(T!==0)throw"tradingDay.offset was called with an offset that spans more than a day";return[E,T]};return{totalTradingTimeInMiliseconds:y,nonTradingTimeRanges:v,totalTradingMillisecondsBetween:w,offset:m}},bh=function(h,g,v,y,w){var m={};return m.getTimeComponentArrayFromString=function(b){return[b.slice(0,2),b.slice(3,5),b.slice(6,8),b.slice(9,12)]},m.getTimeString=function(b){var _=v(b).map(function(F){return F.toString(10).padStart(2,"0")}),T=_e(_,4),E=T[0],M=T[1],L=T[2],I=T[3];return"".concat(E,":").concat(M,":").concat(L,".").concat(I.padStart(3,"0"))},m.setTime=function(b,_){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=m.getTimeComponentArrayFromString(_),M=_e(E,4),L=M[0],I=M[1],F=M[2],B=M[3];return w.offset(h(b,L,I,F,B),T)},m.getStartOfNextDay=function(b){return y.offset(y.floor(b),1)},m.getEndOfPreviousDay=function(b){return w.offset(y.floor(b),-1)},m.dayInterval=y,m.msInterval=w,m.getDay=g,m},Yy=bh(function(c,h,g,v,y){return new Date(c.getFullYear(),c.getMonth(),c.getDate(),h,g,v,y)},function(c){return c.getDay()},function(c){return[c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()]},a.timeDay,a.timeMillisecond),_h=function(h,g){var v=function(_){return h[_]===void 0?[]:h[_]},y=[zr(v("Sunday"),g),zr(v("Monday"),g),zr(v("Tuesday"),g),zr(v("Wednesday"),g),zr(v("Thursday"),g),zr(v("Friday"),g),zr(v("Saturday"),g)],w=y.reduce(function(b,_){return b+_.totalTradingTimeInMiliseconds},0);if(w===0)throw"Trading pattern must yield at least 1 ms of trading time";var m={tradingDays:y,totalTradingWeekMilliseconds:w};return m.clampUp=function(b){var _=y[g.getDay(b)],T=Me(_.nonTradingTimeRanges),E;try{for(T.s();!(E=T.n()).done;){var M=E.value;if(M.isInRange(b))return M.endTime===An?m.clampUp(g.getStartOfNextDay(b)):g.setTime(b,M.endTime)}}catch(L){T.e(L)}finally{T.f()}return b},m.clampDown=function(b){var _=y[g.getDay(b)],T=Me(_.nonTradingTimeRanges),E;try{for(T.s();!(E=T.n()).done;){var M=E.value;if(M.isInRange(b))return M.startTime===An?m.clampDown(g.getEndOfPreviousDay(b)):g.setTime(b,M.startTime,-1)}}catch(L){T.e(L)}finally{T.f()}return b},m.distance=function(b,_){if(b.getTime()===_.getTime())return 0;var T=b<=_?[b,_,1]:[_,b,-1],E=_e(T,3),M=E[0],L=E[1],I=E[2];if(g.dayInterval(M).getTime()===g.dayInterval(L).getTime())return m.tradingDays[g.getDay(M)].totalTradingMillisecondsBetween(M,L);var F=m.tradingDays[g.getDay(M)].totalTradingMillisecondsBetween(M,g.dayInterval.offset(g.dayInterval(M),1))+m.tradingDays[g.getDay(L)].totalTradingMillisecondsBetween(g.dayInterval(L),L);return g.dayInterval.count(M,L)===1?F:(M=g.dayInterval.offset(g.dayInterval(M),1),L=g.dayInterval(L),I*g.dayInterval.range(M,L).reduce(function(B,V,z,U){var H=z<U.length-1?U[z+1]:g.dayInterval.offset(V,1),j=H-V!==yo,ae=m.tradingDays[g.getDay(V)];return B+=j?ae.totalTradingMillisecondsBetween(V,H):ae.totalTradingTimeInMiliseconds},F))},m.offset=function(b,_){b=_>=0?m.clampUp(b):m.clampDown(b);var T=function(j){return g.dayInterval.offset(j)-g.dayInterval(j)!==yo},E=function(j,ae,we){if(we<0){var Se=g.dayInterval(ae),ye=j.totalTradingMillisecondsBetween(Se,ae);return Math.abs(we)<=ye?j.offset(ae,we):[m.clampDown(g.msInterval.offset(Se,-1)),we+ye+1]}else{var He=g.getStartOfNextDay(ae),Bt=j.totalTradingMillisecondsBetween(ae,He);return we<Bt?j.offset(ae,we):[m.clampUp(He),we-Bt]}};if(_===0)return b;var M=_<0?function(H,j,ae){return[m.clampDown(g.dayInterval.offset(H,-1)),j+ae]}:function(H,j,ae){return[m.clampUp(g.dayInterval.offset(H)),j-ae]},L=m.tradingDays[g.getDay(b)],I=E(L,b,_),F=_e(I,2);for(b=F[0],_=F[1];_!==0;)if(L=m.tradingDays[g.getDay(b)],T(b)){var B=E(L,b,_),V=_e(B,2);b=V[0],_=V[1]}else{var z=Math.abs(_)>=L.totalTradingTimeInMiliseconds?M(b,_,L.totalTradingTimeInMiliseconds):E(L,b,_),U=_e(z,2);b=U[0],_=U[1]}return b},m.copy=function(){return m},m},Xy=function(c){return _h(c,Yy)},Gy=bh(function(c,h,g,v,y){return new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),h,g,v,y))},function(c){return c.getUTCDay()},function(c){return[c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()]},a.utcDay,a.utcMillisecond),qy=function(c){return _h(c,Gy)};function yh(){var c=[function(m){return m}],h=[0,0],g="percent",v=null,y=[],w=function(b){var _=new Array(b.length),T=Me(c),E;try{for(T.s();!(E=T.n()).done;)for(var M=E.value,L=0;L<b.length;L++){var I=M(b[L],L);Array.isArray(I)?_.push.apply(_,yt(I)):_.push(I)}}catch(z){T.e(z)}finally{T.f()}var F=[r.min(_),r.max(_)];if(F[0]=F[0]==null?r.min(y):r.min([F[0]].concat(yt(y))),F[1]=F[1]==null?r.max(y):r.max([F[1]].concat(yt(y))),v!=null){var B=Math.max(Math.abs(F[1]-v),Math.abs(F[0]-v));F[0]=v-B,F[1]=v+B}switch(g){case"domain":{F[0]-=h[0],F[1]+=h[1];break}case"percent":{var V=F[1]-F[0];F[0]-=h[0]*V,F[1]+=h[1]*V;break}default:throw new Error("Unknown padUnit: ".concat(g))}return F};return w.accessors=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],w):c},w.pad=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.padUnit=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},w.include=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w.symmetricalAbout=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w}function wh(){var c=[],h=[0,0],g="percent",v=null,y=[],w=yh(),m=function(T){return T!=null?T.valueOf():null},b=function(T){var E=c.map(function(M){return function(){var L=M.apply(void 0,arguments);return Array.isArray(L)?L.map(m):m(L)}});return w.accessors(E).pad(h).padUnit(g).symmetricalAbout(v!=null?v.valueOf():null).include(y.map(function(M){return M.valueOf()})),w(T).map(function(M){return new Date(M)})};return b.accessors=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.pad=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.padUnit=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],b):g},b.include=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b.symmetricalAbout=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],b):v},b}function xh(){var c=1,h=20,g=.1,v=.1,y=o.randomNormal(),w=function(){for(var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,_=c/h,T=[],E=0;E<h+1;E++){T.push(b);var M=y()*Math.sqrt(_)*v+(g-v*v/2)*_;b=b*Math.exp(M)}return T};return w.period=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],w):c},w.steps=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.mu=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},w.sigma=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.random=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w}function jy(c){return typeof c=="function"?c:function(){return c}}function Jy(){var c=new Date,h=100,g=a.timeDay,v=1,y=a.timeYear,w=1,m=null,b=function(){var B=o.randomNormal(1,.1);return Math.ceil(B()*1e3)},_=xh(),T=function(B){var V=y.offset(B,w)-B;return(g.offset(B,v)-B)/V},E=function(B,V){var z=T(B),U=_.period(z)(V),H={date:B,open:U[0],high:Math.max.apply(Math,U),low:Math.min.apply(Math,U),close:U[_.steps()]};return H.volume=b(H),H},M=function(B){var V,z,U;do V=B?g.offset(B.date,v):new Date(c.getTime()),z=B?B.close:h,B=E(V,z),U=m&&!m(B);while(U);return B},L=function(){var B,V={};return V.next=function(){var z=M(B);return B=z,z},V.take=function(z){return V.until(function(U,H){return!z||z<0||H===z})},V.until=function(z){for(var U=[],H=0,j=M(B),ae=z&&!z(j,H);ae;)U.push(j),B=j,j=M(B),H+=1,ae=z&&!z(j,H);return U},V},I=function(B){return L().take(B)};if(I.stream=L,typeof Symbol!="function"||vo(Symbol.iterator)!=="symbol")throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return I[Symbol.iterator]=function(){var F=L();return{next:function(){return{value:F.next(),done:!1}}}},I.startDate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],I):c},I.startPrice=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],I):h},I.interval=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],I):g},I.intervalStep=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],I):v},I.unitInterval=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],I):y},I.unitIntervalStep=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],I):w},I.filter=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],I):m},I.volume=function(){return arguments.length?(b=jy(arguments.length<=0?void 0:arguments[0]),I):b},S(I,_),I}function Ky(c){var h=c.date.getDay();return!(h===0||h===6)}function Zy(){var c="BTC-USD",h=null,g=null,v=null,y=function(){var m=[];h!=null&&m.push("start="+h.toISOString()),g!=null&&m.push("end="+g.toISOString()),v!=null&&m.push("granularity="+v);var b="https://api.gdax.com/products/"+c+"/candles?"+m.join("&");return s.json(b).then(function(_){return _.map(function(T){return{date:new Date(T[0]*1e3),open:T[3],high:T[2],low:T[1],close:T[4],volume:T[5]}})})};return y.product=function(w){return arguments.length?(c=w,y):c},y.start=function(w){return arguments.length?(h=w,y):h},y.end=function(w){return arguments.length?(g=w,y):g},y.granularity=function(w){return arguments.length?(v=w,y):v},y}function wo(){var c=10,h=function(v){return c<=1?v.map(function(y){return[y]}):r.range(0,Math.ceil(v.length/c)).map(function(y){return v.slice(y*c,(y+1)*c)})};return h.bucketSize=function(g){return arguments.length?(c=g,h):c},h}function Qy(){var c=wo(),h=function(m){return m},g=function(m){return m},v=function(m){if(c.bucketSize()>=m.length)return m;var b=y(m),_=c(b),T=c(m.slice(1,m.length-1)),E=T.map(function(M,L){var I=_[L],F=r.max(I),B=I.indexOf(F);return M[B]});return[].concat([m[0]],E,[m[m.length-1]])};function y(w){var m=w.map(function(_){return[h(_),g(_)]}),b=r.range(1,m.length-1).map(function(_){var T=m[_-1],E=m[_],M=m[_+1];return .5*Math.abs((T[0]-M[0])*(E[1]-T[1])-(T[0]-E[0])*(M[1]-T[1]))});return b}return A(v,c,"bucketSize"),v.x=function(w){return arguments.length?(h=w,v):h},v.y=function(w){return arguments.length?(g=w,v):g},v}function ew(){var c=function(w){return w},h=function(w){return w},g=wo(),v=function(w){if(g.bucketSize()>=w.length)return w;var m=g(w.slice(1,w.length-1)),b=w[0],_=w[w.length-1],T=[].concat([b],m,[_]),E=c(b),M=h(b),L=m.map(function(I,F){var B=r.mean(T[F+1],c),V=r.mean(T[F+1],h),z=I.map(function(ae){return[c(ae),h(ae)]}),U=z.map(function(ae){return .5*Math.abs((E-B)*(ae[1]-M)-(E-ae[0])*(V-M))}),H=U.indexOf(r.max(U)),j=z[H];return E=j[0],M=j[1],I[H]});return[].concat([w[0]],L,[w[w.length-1]])};return A(v,g,"bucketSize"),v.x=function(y){return arguments.length?(c=y,v):c},v.y=function(y){return arguments.length?(h=y,v):h},v}function tw(){var c=wo(),h=function(y){return y},g=function(y){if(c.bucketSize()>y.length)return y;var w=r.extent(y,h),m=c(y.slice(1,y.length-1)),b=m.map(function(_,T){var E={},M,L,I=!0,F=_.map(h),B=F.filter(function(V){return V===w[0]||V===w[1]}).map(function(V){return F.indexOf(V)})[0];return B!==void 0?_[B]:(F.forEach(function(V,z){E[V]===void 0&&(E[V]=0),E[V]++,E[V]>E[M]||M===void 0?(M=V,L=z,I=!0):E[V]===E[M]&&(I=!1)}),I?_[L]:_[Math.floor(_.length/2)])});return[].concat([y[0]],b,[y[y.length-1]])};return A(g,c,"bucketSize"),g.value=function(v){return arguments.length?(h=v,g):h},g}var Xe=function(c){return typeof c=="function"?c:function(){return c}},ec=function(){var c=null,h=function(E){return E.date},g=function(E){return E.open},v=function(E){return E.high},y=function(E){return E.low},w=function(E){return E.close},m="vertical",b=Xe(3),_=function(E){var M=c||l.path();return E.forEach(function(L,I){var F=h(L,I),B=g(L,I),V=v(L,I),z=y(L,I),U=w(L,I),H=b(L,I)/2;m==="vertical"?(M.moveTo(F,z),M.lineTo(F,V),M.moveTo(F,B),M.lineTo(F-H,B),M.moveTo(F,U),M.lineTo(F+H,U)):(M.moveTo(z,F),M.lineTo(V,F),M.moveTo(B,F),M.lineTo(B,F+H),M.moveTo(U,F),M.lineTo(U,F-H))}),c?null:M.toString()};return _.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.x=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),_):h},_.open=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),_):g},_.high=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),_):v},_.low=function(){return arguments.length?(y=Xe(arguments.length<=0?void 0:arguments[0]),_):y},_.close=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),_):w},_.width=function(){return arguments.length?(b=Xe(arguments.length<=0?void 0:arguments[0]),_):b},_.orient=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_},mi=function(){var c=null,h=function(T){return T.x},g=function(T){return T.y},v="center",y="center",w=function(T){return T.height},m=Xe(3),b=function(T,E){var M=c||l.path();return T.forEach(function(L,I){var F=h.call(this,L,E||I),B=g.call(this,L,E||I),V=w.call(this,L,E||I),z=m.call(this,L,E||I),U;switch(v){case"left":U=z;break;case"right":U=0;break;case"center":U=z/2;break;default:throw new Error("Invalid horizontal alignment "+v)}var H;switch(y){case"bottom":H=-V;break;case"top":H=0;break;case"center":H=V/2;break;default:throw new Error("Invalid vertical alignment "+y)}M.rect(F-U,B-H,z,V)},this),c?null:M.toString()};return b.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.x=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),b):h},b.y=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),b):g},b.width=function(){return arguments.length?(m=Xe(arguments.length<=0?void 0:arguments[0]),b):m},b.horizontalAlign=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],b):v},b.height=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),b):w},b.verticalAlign=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b},tc=function(){var c=null,h=function(T){return T.date},g=function(T){return T.open},v=function(T){return T.high},y=function(T){return T.low},w=function(T){return T.close},m=Xe(3),b=function(T){var E=c||l.path();return T.forEach(function(M,L){var I=h(M,L),F=g(M,L),B=v(M,L),V=y(M,L),z=w(M,L),U=m(M,L),H=U/2;E.rect(I-H,F,U,z-F),E.moveTo(I,Math.min(z,F)),E.lineTo(I,B),E.moveTo(I,Math.max(z,F)),E.lineTo(I,V)}),c?null:E.toString()};return b.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.x=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),b):h},b.open=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),b):g},b.high=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),b):v},b.low=function(){return arguments.length?(y=Xe(arguments.length<=0?void 0:arguments[0]),b):y},b.close=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),b):w},b.width=function(){return arguments.length?(m=Xe(arguments.length<=0?void 0:arguments[0]),b):m},b},nc=function(){var c=null,h=function(L){return L.value},g=function(L){return L.median},v=function(L){return L.upperQuartile},y=function(L){return L.lowerQuartile},w=function(L){return L.high},m=function(L){return L.low},b="vertical",_=Xe(5),T=Xe(.5),E=function(L){var I=c||l.path();return L.forEach(function(F,B){var V=h(F,B),z=_(F,B),U=z/2,H=z*T(F,B),j=H/2,ae=w(F,B),we=v(F,B),Se=g(F,B),ye=y(F,B),He=m(F,B),Bt=ye-we;b==="vertical"?(I.moveTo(V-j,ae),I.lineTo(V+j,ae),I.moveTo(V,ae),I.lineTo(V,we),I.rect(V-U,we,z,Bt),I.moveTo(V-U,Se),I.lineTo(V+U,Se),I.moveTo(V,ye),I.lineTo(V,He),I.moveTo(V-j,He),I.lineTo(V+j,He)):(I.moveTo(He,V-j),I.lineTo(He,V+j),I.moveTo(He,V),I.lineTo(ye,V),I.rect(ye,V-U,-Bt,z),I.moveTo(Se,V-U),I.lineTo(Se,V+U),I.moveTo(we,V),I.lineTo(ae,V),I.moveTo(ae,V-j),I.lineTo(ae,V+j))}),c?null:I.toString()};return E.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],E):c},E.value=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),E):h},E.median=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),E):g},E.upperQuartile=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),E):v},E.lowerQuartile=function(){return arguments.length?(y=Xe(arguments.length<=0?void 0:arguments[0]),E):y},E.high=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),E):w},E.low=function(){return arguments.length?(m=Xe(arguments.length<=0?void 0:arguments[0]),E):m},E.width=function(){return arguments.length?(_=Xe(arguments.length<=0?void 0:arguments[0]),E):_},E.orient=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],E):b},E.cap=function(){return arguments.length?(T=Xe(arguments.length<=0?void 0:arguments[0]),E):T},E},rc=function(){var c=null,h=function(_){return _.x},g=function(_){return _.high},v=function(_){return _.low},y="vertical",w=Xe(5),m=function(_){var T=c||l.path();return _.forEach(function(E,M){var L=h(E,M),I=w(E,M),F=I/2,B=g(E,M),V=v(E,M);y==="vertical"?(T.moveTo(L-F,B),T.lineTo(L+F,B),T.moveTo(L,B),T.lineTo(L,V),T.moveTo(L-F,V),T.lineTo(L+F,V)):(T.moveTo(V,L-F),T.lineTo(V,L+F),T.moveTo(V,L),T.lineTo(B,L),T.moveTo(B,L-F),T.lineTo(B,L+F))}),c?null:T.toString()};return m.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.value=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),m):h},m.high=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),m):g},m.low=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),m):v},m.width=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),m):w},m.orient=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m},ic=function(c){return typeof c=="function"?c:function(){return c}},ac=1e-6,Tt=function(h){return h.selection()!==h},qe=function(c,h){c=c||"g";var g=function(m,b){return b},v=null,y=function(m,b){b=b||function(B){return B};var _=m.selection(),T=Tt(m)?m:null,E=_.selectChildren(h==null?c:"".concat(c,".").concat(h)),M=E.data(b,g),L=M.enter().append(c).attr("class",h),I=M.exit();M=M.merge(L);var F=T||v;return F&&(M=M.transition(F).style("opacity",1),L.style("opacity",ac),I=I.transition(F).style("opacity",ac)),I.remove(),M.enter=function(){return L},M.exit=function(){return I},M};return y.element=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],y):c},y.className=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y.key=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},y.transition=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],y):v},y},nw=function(c){var h=function(){},g=function(){return[0,0]},v=function(M,L){return[M.x,M.y]},y=c||function(E){return E},w=function(){},m=i.scaleIdentity(),b=i.scaleIdentity(),_=qe("g","label"),T=function(M){M.each(function(L,I,F){var B=_(u.select(F[I]),L).call(w),V=B.nodes(),z=V.map(function(H,j){var ae=u.select(H).datum(),we=v(ae,j,V),Se=[m(we[0]),b(we[1])],ye=g(ae,j,V);return{hidden:!1,x:Se[0],y:Se[1],width:ye[0],height:ye[1]}}),U=y(z);B.attr("style",function(H,j){return"display:"+(U[j].hidden?"none":"inherit")}).attr("transform",function(H,j){return"translate("+U[j].x+", "+U[j].y+")"}).attr("layout-width",function(H,j){return U[j].width}).attr("layout-height",function(H,j){return U[j].height}).attr("anchor-x",function(H,j,ae){return z[j].x-U[j].x}).attr("anchor-y",function(H,j,ae){return z[j].y-U[j].y}),B.call(w),h(B,L,I)})};return S(T,_,k("key")),S(T,y),T.size=function(){return arguments.length?(g=ic(arguments.length<=0?void 0:arguments[0]),T):g},T.position=function(){return arguments.length?(v=ic(arguments.length<=0?void 0:arguments[0]),T):v},T.component=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],T):w},T.decorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],T):h},T.xScale=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],T):m},T.yScale=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],T):b},T},rw=function(c){var h=2,g=function(_){return _},v=qe("text"),y=qe("rect"),w=qe("circle"),m=function(_){_.each(function(T,E,M){var L=M[E],I=u.select(L),F=Number(L.getAttribute("layout-width")),B=Number(L.getAttribute("layout-height")),V=y(I,[T]);V.attr("width",F).attr("height",B);var z=Number(L.getAttribute("anchor-x")),U=Number(L.getAttribute("anchor-y")),H=w(I,[T]);H.attr("r",2).attr("cx",z).attr("cy",U);var j=v(I,[T]);j.enter().attr("dy","0.9em").attr("transform","translate(".concat(h,", ").concat(h,")")),j.text(g)})};return m.padding=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.value=function(){return arguments.length?(g=ic(arguments.length<=0?void 0:arguments[0]),m):g},m},iw=function(h,g){return!(h.x>=g.x+g.width||h.x+h.width<=g.x||h.y>=g.y+g.height||h.y+h.height<=g.y)},oc=function(c,h){if(iw(c,h)){var g=Math.max(c.x,h.x),v=Math.min(c.x+c.width,h.x+h.width),y=Math.max(c.y,h.y),w=Math.min(c.y+c.height,h.y+h.height);return(v-g)*(w-y)}else return 0},sc=function(h,g){return r.sum(h.map(function(v,y){return g===y?0:oc(h[g],v)}))},Ar=function(h,g,v,y,w){return{x:h,y:g,width:v,height:y,location:w}},Th=function(c){var h=c.x,g=c.y,v=c.width,y=c.height;return[Ar(h,g,v,y,"bottom-right"),Ar(h-v,g,v,y,"bottom-left"),Ar(h-v,g-y,v,y,"top-left"),Ar(h,g-y,v,y,"top-right"),Ar(h,g-y/2,v,y,"middle-right"),Ar(h-v/2,g,v,y,"bottom-center"),Ar(h-v,g-y/2,v,y,"middle-left"),Ar(h-v/2,g-y,v,y,"top-center")]},Sh=function(h,g,v){return[].concat(yt(h.slice(0,g)),[v],yt(h.slice(g+1)))},aw=function(h,g){return h<g},Eh=function c(){var h=null,g=aw,v=function(){return 0},y,w=function(_,T){return h-v(y[T],T,y)+v(_,T,Sh(y,T,_))},m=function b(_,T){h||(h=r.sum(y.map(function(M,L){return v(M,L,y)})));var E=w(_,T);return g(E,h)?c().locationScore(v).winningScore(g).score(E).rectangles(Sh(y,T,_)):b};return m.rectangles=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m.score=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.winningScore=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},m.locationScore=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m},ow=function(){var c,h=function(w){return c?w.width*w.height-oc(w,c):0},g=function(w,m,b){return sc(b,m)+h(w)},v=function(w){var m=Eh().locationScore(g).rectangles(w);return w.forEach(function(b,_){Th(b).forEach(function(T,E){m=m(T,_)})}),m.rectangles()};return v.bounds=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v},sw=function(h){return h[Ah(h)]},Ah=function(h){return Math.floor(Math.random()*h.length)},lw=function(){var c=1e3,h=1,g,v=function(_){switch(_.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return _.width*_.height/8}return _.width*_.height/4},y=function(_){return g?_.width*_.height-oc(_,g):0},w=function(_,T,E){return sc(E,T)+y(_)+v(_)},m=function(_){for(var T=c,E=function(B,V){return Math.exp((V-B)/T)>Math.random()},M=Eh().locationScore(w).winningScore(E).rectangles(_);T>0;){var L=Ah(_),I=sw(Th(_[L]));M=M(I,L),T-=h}return M.rectangles()};return m.temperature=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},m.cooling=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.bounds=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},m},cw=function(h,g){return h[r.scan(h,g)]},uw=function(c){c=c||function(g){return g};var h=function(v){v=c(v);for(var y=function(){var b=v.filter(function(E){return!E.hidden}),_=b.map(function(E,M){return[E,sc(b,M)]}),T=cw(_,function(E,M){return M[1]-E[1]});if(T[1]>0)T[0].hidden=!0;else return"break"};;){var w=y();if(w==="break")break}return v};return S(h,c),h},fw=function(){var c=[0,0],h=function(v){return v.map(function(y,w){var m=y.x,b=y.y;return m+y.width>c[0]&&(m-=y.width),b+y.height>c[1]&&(b-=y.height),{height:y.height,width:y.width,x:m,y:b}})};return h.bounds=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h},st=function(c){return typeof c=="function"?c:function(){return c}};function oa(){var c=arguments;return function(h,g){for(var v=0,y=c.length;v<y;v++)if(c[v](h,g)==null)return!1;return!0}}var sa=function(c,h){switch(c){case"left":return h/2;case"right":return-h/2;default:return 0}},Hr=function(c){var h=Object.assign({},c),g=function(){};return Object.keys(h).forEach(function(v){g[v]=function(){return arguments.length?(h[v]=arguments.length<=0?void 0:arguments[0],g):h[v]}}),g},Cn=function(){var c=function(){return 0},h=function(_){return _.x},g=function(_){return _.y},v="center",y=function(){return 5},w="vertical",m=Hr({decorate:function(){},defined:function(_,T){return oa(c,h,g)(_,T)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.values=function(b,_){var T=y(b,_),E=sa(v,T),M=m.xScale(),L=m.yScale();if(w==="vertical"){var I=L(g(b,_),_),F=L(c(b,_),_),B=M(h(b,_),_)+E;return{d:b,x:B,y:I,y0:F,width:T,height:I-F,origin:[B,I],baseOrigin:[B,F],transposedX:B,transposedY:I}}else{var V=M(g(b,_),_),z=M(c(b,_),_),U=L(h(b,_),_)+E;return{d:b,x:U,y:V,y0:z,width:T,height:V-z,origin:[V,U],baseOrigin:[z,U],transposedX:V,transposedY:U}}},m.xValues=function(){return w==="vertical"?[h]:[c,g]},m.yValues=function(){return w!=="vertical"?[h]:[c,g]},m.baseValue=function(){return arguments.length?(c=st(arguments.length<=0?void 0:arguments[0]),m):c},m.crossValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),m):h},m.mainValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),m):g},m.bandwidth=function(){return arguments.length?(y=st(arguments.length<=0?void 0:arguments[0]),m):y},m.align=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.orient=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],m):w},m},hw="#c60",dw="#6c0",gw="#000",mw="#ddd",pw="#999",mt={red:hw,green:dw,black:gw,gray:mw,darkGray:pw},lc=function(){var c=Cn(),h=f.line().x(function(y,w){return c.values(y,w).transposedX}).y(function(y,w){return c.values(y,w).transposedY}),g=qe("path","line"),v=function(w){Tt(w)&&g.transition(w),h.defined(c.defined()),w.each(function(m,b,_){var T=g(u.select(_[b]),[m]);T.enter().attr("fill","none").attr("stroke",mt.black),T.attr("d",h),c.decorate()(T,m,b)})};return S(v,c,N("baseValue","bandwidth","align")),A(v,g,"key"),A(v,h,"curve"),v},cc=function(){var c=Cn(),h=f.line().x(function(v,y){return c.values(v,y).transposedX}).y(function(v,y){return c.values(v,y).transposedY}),g=function(y){var w=h.context();w.beginPath(),w.strokeStyle=mt.black,w.fillStyle="transparent",c.decorate()(w,y),h.defined(c.defined())(y),w.fill(),w.stroke(),w.closePath()};return S(g,c,N("baseValue","bandwidth","align")),A(g,h,"curve","context"),g},Ct=function(){var c=[0,1],h=[-1,1],g=function(){};return g.domain=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},g.range=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],g):h},g},Ch=function(){var c={},h={},g=null,v=function(w,m){var b=w.context();Object.keys(c).forEach(function(_){var T=c[_];if(typeof T!="function")throw new Error("Expected an attribute for ".concat(_,", found ").concat(T));var E=b.getAttribLocation(m,_);T.location(E)(w)}),Object.keys(h).forEach(function(_){var T=h[_];if(typeof T!="function")throw new Error("Expected a uniform for ".concat(_,", found ").concat(T));var E=b.getUniformLocation(m,_);T.location(E)(w)}),g!==null&&g(w)};return v.flush=function(){Object.values(c).forEach(function(y){return y.clear()}),Object.values(h).forEach(function(y){return y.clear()}),g!==null&&g.clear()},v.attribute=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];return w.length===1?c[w[0]]:(c[w[0]]=w[1],v)},v.uniform=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];return w.length===1?h[w[0]]:(h[w[0]]=w[1],v)},v.elementIndices=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},v},_n=function(c){var h=-1,g=c,v=!0,y=function(m){if(v){var b=m.context();if(Array.isArray(g))switch(g.length){case 1:b.uniform1fv(h,g);break;case 2:b.uniform2fv(h,g);break;case 3:b.uniform3fv(h,g);break;case 4:b.uniform4fv(h,g);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(g.length," provided."))}else b.uniform1f(h,g);v=!1}};return y.clear=function(){v=!0},y.location=function(){return arguments.length?(h!==(arguments.length<=0?void 0:arguments[0])&&(h=arguments.length<=0?void 0:arguments[0],v=!0),y):h},y.data=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v=!0,y):g},y},cr={POINTS:0,TRIANGLES:4},ur=function(){var c=null,h=null,g=null,v=null,y=null,w=null,m=cr.TRIANGLES,b=0,_=Ch(),T=!1,E=null,M=!0,L=1,I=function z(U){if(c!=null){var H=g(),j=v();if(F(h,H,j)&&(h=B(H,j),y=H,w=j,M=!1),c.useProgram(h),_.uniform("uScreen",_n([c.canvas.width/L,c.canvas.height/L])),_(z,h),b===0)_.elementIndices()==null?c.drawArrays(m,0,U):c.drawElements(m,U,c.UNSIGNED_SHORT,0);else if(_.elementIndices()==null)E.drawArraysInstancedANGLE(m,0,b,U);else{var ae=_.elementIndices().data().length;if(b!==ae)throw new Error("Expected elementIndices length ".concat(ae)+" to match subInstanceCount ".concat(b,"."));E.drawElementsInstancedANGLE(m,b,c.UNSIGNED_SHORT,0,U)}}};return I.extInstancedArrays=function(){return E},I.context=function(){for(var z=arguments.length,U=new Array(z),H=0;H<z;H++)U[H]=arguments[H];return U.length?((U[0]==null||U[0]!==c)&&(_.flush(),M=!0),U[0]!=null&&U[0]!==c&&(E=U[0].getExtension("ANGLE_instanced_arrays")),c=U[0],I):c},I.buffers=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],I):_},I.vertexShader=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],I):g},I.fragmentShader=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],I):v},I.mode=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],I):m},I.subInstanceCount=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],I):b},I.debug=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],I):T},I.pixelRatio=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],I):L},I;function F(z,U,H){return!z||M?!0:U!==y||H!==w}function B(z,U){var H=V(z,c.VERTEX_SHADER),j=V(U,c.FRAGMENT_SHADER),ae=c.createProgram();if(c.attachShader(ae,H),c.attachShader(ae,j),c.linkProgram(ae),T&&!c.getProgramParameter(ae,c.LINK_STATUS)){var we=c.getProgramInfoLog(ae);throw c.deleteProgram(ae),new Error("Failed to link program : ".concat(we,`
            Vertex Shader : `).concat(z,`
            Fragment Shader : `).concat(U))}return ae}function V(z,U){var H=c.createShader(U);if(c.shaderSource(H,z),c.compileShader(H),T&&!c.getShaderParameter(H,c.COMPILE_STATUS)){var j=c.getShaderInfoLog(H);throw c.deleteShader(H),new Error("Failed to compile shader : ".concat(j,`
            Shader : `).concat(z))}return H}},nt=function(c){var h=[],g=[],v=function(){return c(h.join(`
`),g.join(`
`))};function y(b,_){b.push(_)}function w(b,_,T){var E=b.indexOf(T);b.splice(E>=0?E:b.length,0,_)}function m(b,_){var T=b.indexOf(_);T===-1&&b.push(_)}return v.appendHeader=function(b){return y(h,b),v},v.insertHeader=function(b,_){return w(h,b,_),v},v.appendHeaderIfNotExists=function(b){return m(h,b),v},v.appendBody=function(b){return y(g,b),v},v.insertBody=function(b,_){return w(g,b,_),v},v.appendBodyIfNotExists=function(b){return m(g,b),v},v},un=function(h,g){return`
precision mediump float;
float inf = 1.0 / 0.0;
`.concat(h,`
void main() {
    `).concat(g,`
}`)},fn=function(h,g){return`
precision mediump float;
`.concat(h,`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    `).concat(g,`
}`)},Rh={header:`attribute vec4 aFillColor;
             varying vec4 vFillColor;`,body:"vFillColor = aFillColor;"},Mh={header:`attribute vec4 aStrokeColor;
             varying vec4 vStrokeColor;`,body:"vStrokeColor = aStrokeColor;"},Nh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 2.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Oh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 4.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Dh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Lh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Ih={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Ph={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},kh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 5.0);
        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Bh={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
         (isPositiveY * isExtremeY * aLowValue) +
         (isPositiveY * isNotExtremeY * aCloseValue) +
         (isNotPositiveY * isNotExtremeY * aOpenValue) +
         (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);

        float bodyThickness = (aOpenValue == aCloseValue ? 1.0 : sign(aCloseValue - aOpenValue));
        float lineWidthYDirection = (isNotExtremeY * bodyThickness * aCorner.y);

        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Fh={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
            (isPositiveY * isExtremeY * aLowValue) +
            (isPositiveY * isNotExtremeY * aCloseValue) +
            (isNotPositiveY * isNotExtremeY * aOpenValue) +
            (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = isExtremeY * aCorner.z;
        float lineWidthYDirection = isNotExtremeY * aCorner.z;

        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Vh={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aMainValue;
        attribute float aBaseValue;
        attribute vec2 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isBaseline = (1.0 - aCorner.y) / 2.0;
        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);

        float xModifier = aCorner.x * (aBandwidth) / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Wh={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isLow = (aCorner.y + 1.0) / 2.0;
        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;

        float isEdgeCorner = abs(aCorner.x);
        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;
        float lineWidthYDirection = isEdgeCorner * aCorner.z;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);
        float yModifier = (uStrokeWidth * lineWidthYDirection);`},$h={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aCrossNextValue;
        attribute float aMainNextValue;
        attribute float aBaseValue;
        attribute float aBaseNextValue;
        attribute float aDefined;
        attribute float aDefinedNext;

        varying float vDefined;

        float when_lt(float a, float b) {
            return max(sign(b - a), 0.0);
        }

        float and(float a, float b) {
            return a * b;
        }`,body:`
        vDefined = aDefined * aDefinedNext;
        gl_Position = vec4(0, 0, 0, 1);

        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);
        float useIntercept = and(aCorner.z, hasIntercepted);

        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);
        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);

        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);
        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);

        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);
        float interceptXValue = (y0Constant - yConstant) / denominator;
        float interceptYValue = (yGradient * interceptXValue) + yConstant;

        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);

        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));
        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));
        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));`},zh={header:`
        attribute vec4 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aCapWidth;
        attribute float aHighValue;
        attribute float aUpperQuartileValue;
        attribute float aMedianValue;
        attribute float aLowerQuartileValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;
    `,body:`
        vDefined = aDefined;
        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;

        float isNonZeroY = abs(sign(aCorner.y));
        float isZeroY = 1.0 - isNonZeroY;

        float isQuartileY = isNotExtremeY * isNonZeroY;

        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;
        float isNegativeY = 1.0 - isPositiveY;

        float yValue =
          (isExtremeY * isNegativeY) * aHighValue +
          (isQuartileY * isNegativeY) * aUpperQuartileValue +
          isZeroY * aMedianValue +
          (isQuartileY * isPositiveY) * aLowerQuartileValue +
          (isExtremeY * isPositiveY) * aLowValue;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float isHorizontal = aCorner.w;
        float isVertical = 1.0 - isHorizontal;

        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;

        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;
        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;`},Hh={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float distance = length(2.0 * gl_PointCoord - 1.0);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Uh={header:`
        varying float vSize;
        varying float vDefined;

        // anterior, exterior angles
        float an = 0.628319;
        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)
        float en = 0.952000;
        vec2 ecs = vec2(0.580055, 0.814577);
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        p -= acs;
        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);
        float d = length(p) * sign(p.x);

        float distance = 1.0 + d;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Yh={header:`
        varying float vSize;
        varying float vDefined;
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float an = 3.141593 / 3.0;
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        // box
        vec2 d = abs(p) - vec2(0.9, 0.35);
        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);

        float distance = 1.0 + sdf;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Xh={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);`},Gh={header:`
        varying float vSize;
        varying float vDefined;
        float a = 0.6;
        float b = 1.0;
    `,body:`
        if (vDefined < 0.5) {
            discard;
        }

        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;

        float x = abs(pointCoordTransform.x);
        float y = abs(pointCoordTransform.y);

        float X = (a * b * x) / (a * y + b * x);
        float Y = (a * b * y) / (a * y + b * x);

        float distance = length(vec2(x, y)) / length(vec2(X, Y));

        if (distance > 1.0) {
            discard;
        }
    `},qh={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));
        float bottomEdgeDistance = pointCoordTransform.y + 0.5;
        float distance = max(topEdgesDistance, bottomEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},jh={header:`
        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;
        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float distance = max(innerCornerDistance, outerEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},Jh={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},Kh={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},Zh={header:`
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);`},Qh={header:`
        varying float vDefined;
    `,body:`
        float canFill = 0.0;
        float canStroke = 1.0;

        if (vDefined < 0.5) {
            discard;
        }`},ed={header:"varying float vDefined;",body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }`},td={header:"varying float vDefined;",body:`
        float canFill = 1.0;
        float canStroke = 0.0;

        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);

        if (vDefined < 0.5) {
            discard;
        }`},nd={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},rd={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},vw=function(){var c=nt(un),h=nt(fn);return c.appendHeader($h.header).appendBody($h.body),h.appendHeader(Zh.header).appendBody(Zh.body),{vertex:function(){return c},fragment:function(){return h}}},Ge={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126};function uc(c){switch(c){case Ge.BYTE:case Ge.UNSIGNED_BYTE:return 1;case Ge.SHORT:case Ge.UNSIGNED_SHORT:return 2;case Ge.FLOAT:return 4;default:throw new Error("Unknown type ".concat(c))}}function id(c){switch(c){case Ge.BYTE:return Int8Array;case Ge.UNSIGNED_BYTE:return Uint8Array;case Ge.SHORT:return Int16Array;case Ge.UNSIGNED_SHORT:return Uint16Array;case Ge.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(c))}}var xo=function(){var c=-1,h=null,g=1,v=Ge.FLOAT,y=!1,w=0,m=0,b=null,_=function(E){var M=E.context();h==null&&(h=M.createBuffer()),M.bindBuffer(M.ARRAY_BUFFER,h),M.vertexAttribPointer(c,g,v,y,w,m),M.enableVertexAttribArray(c);var L=E.extInstancedArrays();L.vertexAttribDivisorANGLE(c,b??(E.subInstanceCount()>0?1:0))};return _.location=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.buffer=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],_):h},_.size=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],_):g},_.type=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],_):v},_.normalized=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],_):y},_.stride=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],_):w},_.offset=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_.divisor=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],_):b},_},bw=function(){var c=Ge.FLOAT,h=new Float32Array(0),g=function(y){var w=id(c);return h.length>y?h=new w(h.buffer,0,y):h.length!==y&&(h=new w(y)),h};return g.type=function(){if(!arguments.length)return c;if(c!==(arguments.length<=0?void 0:arguments[0])){c=arguments.length<=0?void 0:arguments[0];var v=id(c);h=new v(0)}return g},g},ad=function(){var c=!0,h=1,g=Ge.FLOAT,v=bw(),y=function(_,T){return _},w=null,m=function(){var _=w.length,T=v.type(g)(_*h);if(h>1)for(var E=0;E<_;E++){var M=y(w[E],E);if(M.length!==h)throw new Error("Expected components array of size ".concat(h,", recieved array with length ").concat(M.length,"."));for(var L=0;L<h;L++)T[E*h+L]=M[L]}else for(var I=0;I<_;I++){var F=y(w[I],I);if(Array.isArray(F))throw new Error("Expected a single component value, recieved array with length ".concat(F.length,"."));T[I]=F}return c=!1,T};return m.dirty=function(){return c},m.clear=function(){c=!0},m.size=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],c=!0,m):h},m.type=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],c=!0,m):g},m.arrayViewFactory=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],c=!0,m):v},m.value=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],c=!0,m):y},m.data=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],c=!0,m):w},m},We=function(){var c=xo(),h=ad(),g=function v(y){if(c.size(v.size()).type(v.type()),c(y),!!h.dirty()){var w=h(),m=y.context();m.bindBuffer(m.ARRAY_BUFFER,c.buffer()),m.bufferData(m.ARRAY_BUFFER,w,m.DYNAMIC_DRAW)}};return g.clear=function(){c.buffer(null),h.clear()},A(g,c,"normalized","location","divisor"),A(g,h,"data","value","size","type"),g},Ce=function(c,h,g,v){for(var y=arguments.length,w=new Array(y>4?y-4:0),m=4;m<y;m++)w[m-4]=arguments[m];c[h]=function(){for(var b=arguments.length,_=new Array(b),T=0;T<b;T++)_[T]=arguments[T];var E=g[v].apply(g,w.concat(_));return E===g?c:E}},od=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(6),h=Ct(),g=Ct(),v=function(){},y=We().divisor(0).size(3).type(Ge.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);c.buffers().attribute("aCorner",y);var w=function(b){var _=vw();c.vertexShader(_.vertex()).fragmentShader(_.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),v(c),c(b-1)};return w.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},A(w,c,"context","pixelRatio"),Ce(w,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(w,"crossNextValueAttribute",c.buffers(),"attribute","aCrossNextValue"),Ce(w,"mainValueAttribute",c.buffers(),"attribute","aMainValue"),Ce(w,"mainNextValueAttribute",c.buffers(),"attribute","aMainNextValue"),Ce(w,"baseValueAttribute",c.buffers(),"attribute","aBaseValue"),Ce(w,"baseNextValueAttribute",c.buffers(),"attribute","aBaseNextValue"),Ce(w,"definedAttribute",c.buffers(),"attribute","aDefined"),Ce(w,"definedNextAttribute",c.buffers(),"attribute","aDefinedNext"),w},sd=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Nh.header).appendBody(Nh.body),h.appendHeader(Hh.header).appendBody(Hh.body),{vertex:function(){return c},fragment:function(){return h}}},ld=function(){var c=ur().mode(cr.POINTS),h=Ct(),g=Ct(),v=sd(),y=function(){},w=function(b){c.vertexShader(v.vertex()).fragmentShader(v.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),y(c),c(b)};return w.type=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},A(w,c,"context","pixelRatio"),Ce(w,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(w,"mainValueAttribute",c.buffers(),"attribute","aMainValue"),Ce(w,"sizeAttribute",c.buffers(),"attribute","aSize"),Ce(w,"definedAttribute",c.buffers(),"attribute","aDefined"),w},la=function(){var c=1,h=function(v){v.buffers().uniform("uStrokeWidth",_n(c))};return h.lineWidth=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h},Ur=function(c){var h=null,g=c,v=!0,y=function(m){var b=m.context();h==null&&(h=b.createBuffer()),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,h),v&&(b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),b.STATIC_DRAW),v=!1)};return y.clear=function(){h=null,v=!0},y.data=function(){return arguments.length?(v=!0,g=arguments.length<=0?void 0:arguments[0],y):g},y},cd=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(6),h=Ct(),g=Ct(),v=function(){},y=la(),w=We().divisor(0).size(4).type(Ge.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);c.buffers().elementIndices(Ur([0,1,2,2,3,0])).attribute("aCorner",w);var m=function(_){var T=nt(un),E=nt(fn);c.vertexShader(T).fragmentShader(E),T.appendHeader(`
            attribute vec4 aCorner;
            attribute float aCrossValue;
            attribute float aCrossNextValue;
            attribute float aMainValue;
            attribute float aMainNextValue;
            attribute float aDefined;
            attribute float aDefinedNext;

            uniform float uStrokeWidth;
            uniform vec2 uScreen;

            varying float vLength;
            varying vec2 vPosition;
        `),T.appendBody(`
            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);
            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);
        `),h(c,"value",0),h(c,"nextValue",0),g(c,"value",1),g(c,"nextValue",1),T.appendBody(`
            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;

            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);
            vec2 normal = vec2(direction.y, -direction.x);
            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));
            
            padding *= aDefined * aDefinedNext;
            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;

            gl_Position = vec4(position.x, position.y, 0.0, 1.0);

            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));
            vPosition = aCorner.xy * (uStrokeWidth / 2.0);
            vPosition.x += aCorner[3] * vLength;
        `),E.appendHeader(`
            uniform float uStrokeWidth;
            varying float vLength;
            varying vec2 vPosition;

            float canFill = 0.0;
            float canStroke = 1.0;
        `),E.appendBody(`
            vec2 position = vPosition;
            position.x -= clamp(position.x, 0.0, vLength);
            float sdf = length(position) - uStrokeWidth / 2.0;
            if (sdf > 0.5) {
                discard;
            }
        `),y(c),v(c),c(_-1)};return m.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,c,"context","pixelRatio"),A(m,y,"lineWidth"),Ce(m,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(m,"crossNextValueAttribute",c.buffers(),"attribute","aCrossNextValue"),Ce(m,"mainValueAttribute",c.buffers(),"attribute","aMainValue"),Ce(m,"mainNextValueAttribute",c.buffers(),"attribute","aMainNextValue"),Ce(m,"definedAttribute",c.buffers(),"attribute","aDefined"),Ce(m,"definedNextAttribute",c.buffers(),"attribute","aDefinedNext"),m},_w=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Fh.header).appendBody(Fh.body),h.appendHeader(Kh.header).appendBody(Kh.body),{vertex:function(){return c},fragment:function(){return h}}},ud=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(18),h=Ct(),g=Ct(),v=la(),y=function(){},w=We().divisor(0).size(3).type(Ge.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);c.buffers().elementIndices(Ur([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",w);var m=function(_){var T=_w();c.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),v(c),c.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),y(c),c(_)};return m.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,c,"context","pixelRatio"),A(m,v,"lineWidth"),Ce(m,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(m,"openValueAttribute",c.buffers(),"attribute","aOpenValue"),Ce(m,"highValueAttribute",c.buffers(),"attribute","aHighValue"),Ce(m,"lowValueAttribute",c.buffers(),"attribute","aLowValue"),Ce(m,"closeValueAttribute",c.buffers(),"attribute","aCloseValue"),Ce(m,"bandwidthAttribute",c.buffers(),"attribute","aBandwidth"),Ce(m,"definedAttribute",c.buffers(),"attribute","aDefined"),m},yw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Vh.header).appendBody(Vh.body),h.appendHeader(td.header).appendBody(td.body),{vertex:function(){return c},fragment:function(){return h}}},fd=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(6),h=Ct(),g=Ct(),v=function(){},y=We().divisor(0).size(2).type(Ge.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);c.buffers().elementIndices(Ur([0,1,2,0,1,3])).attribute("aCorner",y);var w=function(b){var _=yw();c.vertexShader(_.vertex()).fragmentShader(_.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),c.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
        `),v(c),c(b)};return w.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},A(w,c,"context","pixelRatio"),Ce(w,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(w,"mainValueAttribute",c.buffers(),"attribute","aMainValue"),Ce(w,"baseValueAttribute",c.buffers(),"attribute","aBaseValue"),Ce(w,"bandwidthAttribute",c.buffers(),"attribute","aBandwidth"),Ce(w,"definedAttribute",c.buffers(),"attribute","aDefined"),w},ww=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Wh.header).appendBody(Wh.body),h.appendHeader(ed.header).appendBody(ed.body),{vertex:function(){return c},fragment:function(){return h}}},hd=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(18),h=Ct(),g=Ct(),v=function(){},y=la(),w=We().divisor(0).size(3).type(Ge.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);c.buffers().elementIndices(Ur([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",w);var m=function(_){var T=ww();c.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),y(c),c.vertexShader().appendBody(`
                gl_Position.x += xModifier / uScreen.x * 2.0;
                gl_Position.y += yModifier / uScreen.y * 2.0;
            `),v(c),c(_)};return m.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,c,"context","pixelRatio"),A(m,y,"lineWidth"),Ce(m,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(m,"highValueAttribute",c.buffers(),"attribute","aHighValue"),Ce(m,"lowValueAttribute",c.buffers(),"attribute","aLowValue"),Ce(m,"bandwidthAttribute",c.buffers(),"attribute","aBandwidth"),Ce(m,"definedAttribute",c.buffers(),"attribute","aDefined"),m},xw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Bh.header).appendBody(Bh.body),h.appendHeader(Jh.header).appendBody(Jh.body),{vertex:function(){return c},fragment:function(){return h}}},dd=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(12),h=Ct(),g=Ct(),v=la(),y=function(){},w=We().divisor(0).size(3).type(Ge.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);c.buffers().elementIndices(Ur([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",w);var m=function(_){var T=xw();c.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),v(c),c.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),y(c),c(_)};return m.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,c,"context","pixelRatio"),A(m,v,"lineWidth"),Ce(m,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(m,"openValueAttribute",c.buffers(),"attribute","aOpenValue"),Ce(m,"highValueAttribute",c.buffers(),"attribute","aHighValue"),Ce(m,"lowValueAttribute",c.buffers(),"attribute","aLowValue"),Ce(m,"closeValueAttribute",c.buffers(),"attribute","aCloseValue"),Ce(m,"bandwidthAttribute",c.buffers(),"attribute","aBandwidth"),Ce(m,"definedAttribute",c.buffers(),"attribute","aDefined"),m},Tw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(zh.header).appendBody(zh.body),h.appendHeader(Qh.header).appendBody(Qh.body),{vertex:function(){return c},fragment:function(){return h}}},gd=function(){var c=ur().mode(cr.TRIANGLES).subInstanceCount(54),h=Ct(),g=Ct(),v=function(){},y=la(),w=We().divisor(0).size(4).type(Ge.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);c.buffers().elementIndices(Ur([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",w);var m=function(_){var T=Tw();c.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(c,"gl_Position",0),g(c,"gl_Position",1),y(c),c.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
            gl_Position.y += yModifier / uScreen.y * 2.0;
        `),v(c),c(_)};return m.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,c,"context","pixelRatio"),A(m,y,"lineWidth"),Ce(m,"crossValueAttribute",c.buffers(),"attribute","aCrossValue"),Ce(m,"highValueAttribute",c.buffers(),"attribute","aHighValue"),Ce(m,"upperQuartileValueAttribute",c.buffers(),"attribute","aUpperQuartileValue"),Ce(m,"medianValueAttribute",c.buffers(),"attribute","aMedianValue"),Ce(m,"lowerQuartileValueAttribute",c.buffers(),"attribute","aLowerQuartileValue"),Ce(m,"lowValueAttribute",c.buffers(),"attribute","aLowValue"),Ce(m,"bandwidthAttribute",c.buffers(),"attribute","aBandwidth"),Ce(m,"capAttribute",c.buffers(),"attribute","aCapWidth"),Ce(m,"definedAttribute",c.buffers(),"attribute","aDefined"),m},Cr=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(c>0||h<0)throw new Error("Offset values (".concat(c," & ").concat(h,") must straddle 0 "));var g=xo(),v=ad(),y=function w(m){var b=w.size()*uc(w.type()),_=Math.abs(c)*b;if(g.offset(_).size(w.size()).type(w.type()),g(m),!!v.dirty()){var T=v(),E=h*b,M=_+T.length*uc(w.type())+E,L=m.context();L.bindBuffer(L.ARRAY_BUFFER,g.buffer()),L.bufferData(L.ARRAY_BUFFER,M,L.DYNAMIC_DRAW),L.bufferSubData(L.ARRAY_BUFFER,_,T)}};return y.offset=function(w){if(c>w||w>h)throw new Error("Requested offset ".concat(w," exceeds bounds (").concat(c," & ").concat(h,") "));var m=function(_){g.offset((w-c)*y.size()*uc(y.type())),g(_)};return A(m,y,"clear","location"),m},y.clear=function(){g.buffer(null),v.clear()},A(y,g,"normalized","location","divisor"),A(y,v,"data","value","size","type"),y},To=function(){var c=Ct(),h=function(y){return"linear".concat(y)},g=function(y,w,m){y.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(h(m),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(h(m),"Scale;")).appendBody("".concat(w," = ").concat(w," + ").concat(h(m),"Offset;")).appendBody("".concat(w," = ").concat(w," * ").concat(h(m),"Scale;"));var b=c.domain()[1]-c.domain()[0],_=c.range()[1]-c.range()[0],T=c.range()[0]*(b/_)-c.domain()[0],E=_/b,M=[0,0,0,0],L=[1,1,1,1];M[m]=T,L[m]=E,y.buffers().uniform("".concat(h(m),"Offset"),_n(M)).uniform("".concat(h(m),"Scale"),_n(L))};return S(g,c),g},md=function(){var c=Ct(),h=10;function g(w,m){return Math.log10(w)/Math.log10(m)}var v=function(m){return"log".concat(m)},y=function(m,b,_){var T="".concat(v(_),"Offset + (").concat(v(_),"Scale * clamp(log(").concat(b,") / log(").concat(v(_),"Base), -inf, inf))");m.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Include;")).appendHeaderIfNotExists("uniform float ".concat(v(_),"Base;")).appendBody("".concat(b," = (").concat(v(_),"Include * (").concat(T,")) + ((1.0 - ").concat(v(_),"Include) * ").concat(b,");"));var E=g(c.domain()[1],h)-g(c.domain()[0],h),M=c.range()[1]-c.range()[0],L=M/E,I=c.range()[0]-L*g(c.domain()[0],h),F=[0,0,0,0],B=[0,0,0,0],V=[0,0,0,0];F[_]=I,B[_]=L,V[_]=1,m.buffers().uniform("".concat(v(_),"Offset"),_n(F)).uniform("".concat(v(_),"Scale"),_n(B)).uniform("".concat(v(_),"Include"),_n(V)).uniform("".concat(v(_),"Base"),_n(h))};return y.base=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},S(y,c),y},pd=function(){var c=Ct(),h=1;function g(w,m){return Math.sign(w)*Math.pow(Math.abs(w),m)}var v=function(m){return"pow".concat(m)},y=function(m,b,_){var T="".concat(v(_),"Offset + (").concat(v(_),"Scale * sign(").concat(b,") * pow(abs(").concat(b,"), vec4(").concat(v(_),"Exp)))");m.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Include;")).appendHeaderIfNotExists("uniform float ".concat(v(_),"Exp;")).appendBody("".concat(b," = (").concat(v(_),"Include * (").concat(T,")) + ((1.0 - ").concat(v(_),"Include) * ").concat(b,");"));var E=g(c.domain()[1],h)-g(c.domain()[0],h),M=c.range()[1]-c.range()[0],L=M/E,I=c.range()[0]-L*g(c.domain()[0],h),F=[0,0,0,0],B=[0,0,0,0],V=[0,0,0,0];F[_]=I,B[_]=L,V[_]=1,m.buffers().uniform("".concat(v(_),"Offset"),_n(F)).uniform("".concat(v(_),"Scale"),_n(B)).uniform("".concat(v(_),"Include"),_n(V)).uniform("".concat(v(_),"Exp"),_n(h))};return y.exponent=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},S(y,c),y},Sw=i.scaleLinear().copy.toString(),Ew=i.scaleLog().copy.toString(),Aw=i.scalePow().copy.toString(),Cw=i.scaleTime().copy.toString(),fc=i.scaleIdentity(),Rw=Date.now(),vd=function(h){return h-Rw},Rr=function(c){switch(c.copy.toString()){case Sw:return{scale:fc,webglScale:To().domain(c.domain())};case Cw:return{scale:vd,webglScale:To().domain(c.domain().map(vd))};case Ew:return{scale:fc,webglScale:md().domain(c.domain()).base(c.base())};case Aw:return{scale:fc,webglScale:pd().domain(c.domain()).exponent(c.exponent())};default:return{scale:c.copy(),webglScale:To().domain(c.range())}}},Mw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Lh.header).appendBody(Lh.body),h.appendHeader(Xh.header).appendBody(Xh.body),{vertex:function(){return c},fragment:function(){return h}}},Nw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Ph.header).appendBody(Ph.body),h.appendHeader(qh.header).appendBody(qh.body),{vertex:function(){return c},fragment:function(){return h}}},Ow=function(){var c=nt(un),h=nt(fn);return c.appendHeader(kh.header).appendBody(kh.body),h.appendHeader(jh.header).appendBody(jh.body),{vertex:function(){return c},fragment:function(){return h}}},Dw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Ih.header).appendBody(Ih.body),h.appendHeader(Gh.header).appendBody(Gh.body),{vertex:function(){return c},fragment:function(){return h}}},Lw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Oh.header).appendBody(Oh.body),h.appendHeader(Uh.header).appendBody(Uh.body),{vertex:function(){return c},fragment:function(){return h}}},Iw=function(){var c=nt(un),h=nt(fn);return c.appendHeader(Dh.header).appendBody(Dh.body),h.appendHeader(Yh.header).appendBody(Yh.body),{vertex:function(){return c},fragment:function(){return h}}},bd=function(c){switch(c){case f.symbolCircle:return sd();case f.symbolSquare:return Mw();case f.symbolTriangle:return Nw();case f.symbolCross:return Ow();case f.symbolDiamond:return Dw();case f.symbolStar:return Lw();case f.symbolWye:return Iw();default:throw new Error("Unrecognised symbol: ".concat(c))}},_d=function(c){var h=xo().divisor(1),g=c,v=!0,y=function(m){if(h(m),!!v){if(!Array.isArray(g))throw new Error("Expected an array, received: ".concat(g));if(g.length!==h.size())throw new Error("Expected array of length: ".concat(h.size(),", recieved array of length: ").concat(g.length));var b=m.context();b["vertexAttrib".concat(g.length,"fv")](h.location(),g),b.disableVertexAttribArray(h.location()),v=!1}};return y.clear=function(){v=!0},y.value=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v=!0,y):g},A(y,h,"normalized","size","location"),y},Pw=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],h=We().size(4),g=c,v=!0,y=function(m){if(m.vertexShader().appendHeaderIfNotExists(Rh.header).appendBodyIfNotExists(Rh.body),m.fragmentShader().appendHeaderIfNotExists(nd.header).appendBodyIfNotExists(nd.body),Array.isArray(g))m.buffers().attribute("aFillColor",_d(g).size(4));else if(typeof g=="function"){if(!v)return;h.value(g),m.buffers().attribute("aFillColor",h)}else throw new Error("Expected value to be an array or function, received ".concat(g));v=!1};return y.value=function(){return arguments.length?(g!==(arguments.length<=0?void 0:arguments[0])&&(g=arguments.length<=0?void 0:arguments[0],v=!0),y):g},A(y,h,"data"),y},kw=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],h=We().size(4),g=c,v=!0,y=function(m){if(m.vertexShader().appendHeaderIfNotExists(Mh.header).appendBodyIfNotExists(Mh.body),m.fragmentShader().appendHeaderIfNotExists(rd.header).appendBodyIfNotExists(rd.body),Array.isArray(g))m.buffers().attribute("aStrokeColor",_d(g).size(4));else if(typeof g=="function"){if(!v)return;h.value(g),m.buffers().attribute("aStrokeColor",h)}else throw new Error("Expected value to be an array or function, received ".concat(g));v=!1};return y.value=function(){return arguments.length?(g!==(arguments.length<=0?void 0:arguments[0])&&(g=arguments.length<=0?void 0:arguments[0],v=!0),y):g},A(y,h,"data"),y},yd=function(){var c=Cn(),h=Cr(0,1),g=h.offset(1),v=Cr(0,1),y=v.offset(1),w=Cr(0,1).type(Ge.UNSIGNED_BYTE),m=w.offset(1),b=cd().crossValueAttribute(h).crossNextValueAttribute(g).mainValueAttribute(v).mainNextValueAttribute(y).definedAttribute(w).definedNextAttribute(m),_=function(B,V){return!1},T=Rr,E=[],M=null,L=null,I=function(B){var V=T(c.xScale()),z=T(c.yScale()),U=!_(E,B);U&&(E=B,w.value(function(H,j){return c.defined()(H,j)}).data(B)),(U||V.scale!==M)&&(M=V.scale,c.orient()==="vertical"?h.value(function(H,j){return V.scale(c.crossValue()(H,j))}).data(B):h.value(function(H,j){return V.scale(c.mainValue()(H,j))}).data(B)),(U||z.scale!==L)&&(L=z.scale,c.orient()==="vertical"?v.value(function(H,j){return z.scale(c.mainValue()(H,j))}).data(B):v.value(function(H,j){return z.scale(c.crossValue()(H,j))}).data(B)),b.xScale(V.webglScale).yScale(z.webglScale).decorate(function(H){return c.decorate()(H,B,0)}),b(B.length)};return I.equals=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],I):_},I.scaleMapper=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],I):T},S(I,c,N("baseValue","bandwidth","align")),A(I,b,"context","lineWidth","pixelRatio"),I},wd=function(){var c=f.symbol(),h=Cn(),g=qe("g","point"),v=function(m){return"translate("+m[0]+", "+m[1]+")"},y=function(m){Tt(m)&&g.transition(m),m.each(function(b,_,T){var E=b.filter(h.defined()),M=g(u.select(T[_]),E);M.enter().attr("transform",function(L,I){return v(h.values(L,I).origin)}).attr("fill",mt.gray).attr("stroke",mt.black).append("path"),M.attr("transform",function(L,I){return v(h.values(L,I).origin)}).select("path").attr("d",c),h.decorate()(M,b,_)})};return S(y,h,N("baseValue","bandwidth","align")),A(y,g,"key"),A(y,c,"type","size"),y},xd=function(){var c=f.symbol(),h=Cn(),g=function(y){var w=y.filter(h.defined()),m=c.context();w.forEach(function(b,_){m.save();var T=h.values(b,_);m.translate(T.origin[0],T.origin[1]),m.beginPath(),m.strokeStyle=mt.black,m.fillStyle=mt.gray,h.decorate()(m,b,_),c(b,_),m.fill(),m.stroke(),m.closePath(),m.restore()})};return S(g,h,N("baseValue","bandwidth","align")),A(g,c,"size","type","context"),g},Bw=function(){var c=Cn(),h=st(64),g=f.symbolCircle,v=We(),y=We(),w=We().type(Ge.UNSIGNED_SHORT),m=We().type(Ge.UNSIGNED_BYTE),b=ld().crossValueAttribute(v).mainValueAttribute(y).sizeAttribute(w).definedAttribute(m),_=function(B,V){return!1},T=Rr,E=[],M=null,L=null,I=function(B){var V=T(c.xScale()),z=T(c.yScale()),U=!_(E,B);U&&(E=B,w.value(function(H,j){return h(H,j)}).data(B),m.value(function(H,j){return c.defined()(H,j)}).data(B)),(U||V.scale!==M)&&(M=V.scale,c.orient()==="vertical"?v.value(function(H,j){return V.scale(c.crossValue()(H,j))}).data(B):v.value(function(H,j){return V.scale(c.mainValue()(H,j))}).data(B)),(U||z.scale!==L)&&(L=z.scale,c.orient()==="vertical"?y.value(function(H,j){return z.scale(c.mainValue()(H,j))}).data(B):y.value(function(H,j){return z.scale(c.crossValue()(H,j))}).data(B)),b.xScale(V.webglScale).yScale(z.webglScale).type(bd(g)).decorate(function(H){return c.decorate()(H,B,0)}),b(B.length)};return I.size=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),I):h},I.type=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],I):g},I.equals=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],I):_},I.scaleMapper=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],I):T},S(I,c,N("baseValue","bandwidth","align")),A(I,b,"context","pixelRatio"),I},Fw=function(){var c=mi().x(0).y(0),h=Cn(),g=qe("g","bar"),v=function(_){return h.orient()==="vertical"?_.height:_.width},y=function(_){return h.orient()==="vertical"?_.width:_.height},w=function(_){return"translate("+_[0]+", "+_[1]+")"},m=function(_){Tt(_)&&g.transition(_),_.each(function(T,E,M){var L=h.orient();if(L!=="vertical"&&L!=="horizontal")throw new Error("The bar series does not support an orientation of "+L);var I=T.filter(h.defined()),F=I.map(h.values);c.width(0).height(0),h.orient()==="vertical"?(c.verticalAlign("top"),c.horizontalAlign("center")):(c.horizontalAlign("right"),c.verticalAlign("center"));var B=g(u.select(M[E]),I);B.enter().attr("transform",function(V,z){return w(F[z].baseOrigin)}).attr("class","bar "+h.orient()).attr("fill",mt.darkGray).append("path").attr("d",function(V,z){return y(c)(F[z].width),c([V])}),B.attr("transform",function(V,z){return w(F[z].origin)}).select("path").attr("d",function(V,z){return y(c)(F[z].width),v(c)(-F[z].height),c([V])}),h.decorate()(B,I,E)})};return S(m,h),A(m,g,"key"),m},Vw=function(){var c=Cn(),h=mi().x(0).y(0),g=function(m){return c.orient()==="vertical"?m.height:m.width},v=function(m){return c.orient()==="vertical"?m.width:m.height},y=function(m){var b=h.context(),_=m.filter(c.defined()),T=_.map(c.values);c.orient()==="vertical"?(h.verticalAlign("top"),h.horizontalAlign("center")):(h.horizontalAlign("right"),h.verticalAlign("center")),T.forEach(function(E,M){b.save(),b.beginPath(),b.translate(E.origin[0],E.origin[1]),b.fillStyle=mt.darkGray,b.strokeStyle="transparent",c.decorate()(b,E.d,M),g(h)(-E.height),v(h)(E.width),h([E]),b.fill(),b.stroke(),b.closePath(),b.restore()})};return S(y,c),A(y,h,"context"),y},Ww=function(){var c=Cn(),h=We(),g=We(),v=We(),y=We().type(Ge.UNSIGNED_SHORT),w=We().type(Ge.UNSIGNED_BYTE),m=fd().crossValueAttribute(h).mainValueAttribute(g).baseValueAttribute(v).bandwidthAttribute(y).definedAttribute(w),b=function(F,B){return!1},_=Rr,T=[],E=null,M=null,L=function(F){if(c.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(c.orient()));var B=_(c.xScale()),V=_(c.yScale()),z=!b(T,F);z&&(T=F,y.value(function(U,H){return c.bandwidth()(U,H)}).data(F),w.value(function(U,H){return c.defined()(U,H)}).data(F)),(z||B.scale!==E)&&(E=B.scale,h.value(function(U,H){return B.scale(c.crossValue()(U,H))}).data(F)),(z||V.scale!==M)&&(M=V.scale,v.value(function(U,H){return V.scale(c.baseValue()(U,H))}).data(F),g.value(function(U,H){return V.scale(c.mainValue()(U,H))}).data(F)),m.xScale(B.webglScale).yScale(V.webglScale).decorate(function(U){return c.decorate()(U,F,0)}),m(F.length)};return L.equals=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],L):b},L.scaleMapper=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],L):_},S(L,c,N("align")),A(L,m,"context","pixelRatio"),L},hc=function(){var c=function(_){return _.high},h=function(_){return _.low},g=function(_){return _.cross},v="vertical",y="center",w=function(){return 5},m=Hr({decorate:function(){},defined:function(_,T){return oa(h,c,g)(_,T)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.values=function(b,_){var T=w(b,_),E=sa(y,T),M=m.xScale(),L=m.yScale();if(v==="vertical"){var I=L(c(b,_));return{origin:[M(g(b,_))+E,I],high:0,low:L(h(b,_))-I,width:T}}else{var F=M(h(b,_));return{origin:[F,L(g(b,_))+E],high:M(c(b,_))-F,low:0,width:T}}},m.xValues=function(){return v==="vertical"?[g]:[c,h]},m.yValues=function(){return v!=="vertical"?[g]:[c,h]},m.orient=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.lowValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),m):h},m.highValue=function(){return arguments.length?(c=st(arguments.length<=0?void 0:arguments[0]),m):c},m.crossValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),m):g},m.bandwidth=function(){return arguments.length?(w=st(arguments.length<=0?void 0:arguments[0]),m):w},m.align=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m},$w=function(){var c=hc(),h=qe("g","error-bar"),g=rc().value(0),v=function(b){return function(_){return Tt(b)?_.transition(b):_}},y=function(b){return"translate("+b.origin[0]+", "+b.origin[1]+")"},w=function(b){Tt(b)&&h.transition(b);var _=v(b);b.each(function(T,E,M){var L=T.filter(c.defined()),I=L.map(c.values),F=h(u.select(M[E]),L);F.enter().attr("stroke",mt.black).attr("fill",mt.gray).attr("transform",function(B,V){return y(c.values(B,V))+" scale(1e-6, 1)"}).append("path"),g.orient(c.orient()),F.each(function(B,V,z){var U=I[V];g.high(U.high).low(U.low).width(U.width),_(u.select(z[V])).attr("transform",y(U)+" scale(1)").select("path").attr("d",g([B]))}),c.decorate()(F,T,E)})};return S(w,c),A(w,h,"key"),w},zw=function(){var c=hc(),h=rc().value(0),g=function(y){var w=y.filter(c.defined()),m=h.context();h.orient(c.orient()),w.forEach(function(b,_){m.save();var T=c.values(b,_);m.translate(T.origin[0],T.origin[1]),m.beginPath(),m.strokeStyle=mt.black,m.fillStyle=mt.gray,c.decorate()(m,b,_),h.high(T.high).width(T.width).low(T.low)([b]),m.fill(),m.stroke(),m.closePath(),m.restore()})};return S(g,c),A(g,h,"context"),g},Hw=function(){var c=hc(),h=We(),g=We(),v=We(),y=We().type(Ge.UNSIGNED_SHORT),w=We().type(Ge.UNSIGNED_BYTE),m=hd().crossValueAttribute(h).highValueAttribute(g).lowValueAttribute(v).bandwidthAttribute(y).definedAttribute(w),b=function(F,B){return!1},_=Rr,T=[],E=null,M=null,L=function(F){if(c.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(c.orient()));var B=_(c.xScale()),V=_(c.yScale()),z=!b(T,F);z&&(T=F,y.value(function(U,H){return c.bandwidth()(U,H)}).data(F),w.value(function(U,H){return c.defined()(U,H)}).data(F)),(z||B.scale!==E)&&(E=B.scale,h.value(function(U,H){return B.scale(c.crossValue()(U,H))}).data(F)),(z||V.scale!==M)&&(M=V.scale,g.value(function(U,H){return V.scale(c.highValue()(U,H))}).data(F),v.value(function(U,H){return V.scale(c.lowValue()(U,H))}).data(F)),m.xScale(B.webglScale).yScale(V.webglScale).decorate(function(U){return c.decorate()(U,F,0)}),m(F.length)};return L.equals=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],L):b},L.scaleMapper=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],L):_},S(L,c,N("align")),A(L,m,"context","lineWidth","pixelRatio"),L},Uw=function(){var c=Cn(),h=f.area(),g=qe("path","area"),v=function(w){Tt(w)&&g.transition(w),h.defined(c.defined()),w.each(function(m,b,_){var T=m.map(c.values);h.x(function(L,I){return T[I].transposedX}).y(function(L,I){return T[I].transposedY});var E=c.orient()==="vertical"?"y":"x";h[E+"0"](function(L,I){return T[I].y0}),h[E+"1"](function(L,I){return T[I].y});var M=g(u.select(_[b]),[m]);M.enter().attr("fill",mt.gray),M.attr("d",h),c.decorate()(M,m,b)})};return S(v,c,N("bandwidth","align")),A(v,g,"key"),A(v,h,"curve"),v},Yw=function(){var c=Cn(),h=f.area(),g=function(y){var w=h.context();h.defined(c.defined());var m=y.map(c.values);h.x(function(_,T){return m[T].transposedX}).y(function(_,T){return m[T].transposedY});var b=c.orient()==="vertical"?"y":"x";h[b+"0"](function(_,T){return m[T].y0}),h[b+"1"](function(_,T){return m[T].y}),w.beginPath(),w.fillStyle=mt.gray,w.strokeStyle="transparent",c.decorate()(w,y),h(y),w.fill(),w.stroke(),w.closePath()};return S(g,c,N("bandwidth","align")),A(g,h,"curve","context"),g},Xw=function(){var c=Cn(),h=Cr(0,1),g=h.offset(1),v=Cr(0,1),y=v.offset(1),w=Cr(0,1),m=w.offset(1),b=Cr(0,1).type(Ge.UNSIGNED_BYTE),_=b.offset(1),T=od().crossValueAttribute(h).crossNextValueAttribute(g).mainValueAttribute(v).mainNextValueAttribute(y).baseValueAttribute(w).baseNextValueAttribute(m).definedAttribute(b).definedNextAttribute(_),E=function(z,U){return!1},M=Rr,L=[],I=null,F=null,B=function(z){if(c.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(c.orient()));var U=M(c.xScale()),H=M(c.yScale()),j=!E(L,z);j&&(L=z,b.value(function(ae,we){return c.defined()(ae,we)}).data(z)),(j||U.scale!==I)&&(I=U.scale,h.value(function(ae,we){return U.scale(c.crossValue()(ae,we))}).data(z)),(j||H.scale!==F)&&(F=H.scale,w.value(function(ae,we){return H.scale(c.baseValue()(ae,we))}).data(z),v.value(function(ae,we){return H.scale(c.mainValue()(ae,we))}).data(z)),T.xScale(U.webglScale).yScale(H.webglScale).decorate(function(ae){return c.decorate()(ae,z,0)}),T(z.length)};return B.equals=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],B):E},B.scaleMapper=function(){return arguments.length?(M=arguments.length<=0?void 0:arguments[0],B):M},S(B,c,N("bandwidth","align")),A(B,T,"context","pixelRatio"),B},dc=function(){var c,h=function(E){return E.date},g=function(E){return E.open},v=function(E){return E.high},y=function(E){return E.low},w=function(E){return E.close},m=function(){return 5},b="center",_=function(E,M){return c.xScale()(h(E,M))};return c=Hr({decorate:function(){},defined:function(E,M){return oa(h,g,y,v,w)(E,M)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()}),c.values=function(T,E){var M=w(T,E),L=g(T,E),I=m(T,E),F=sa(b,I),B="";return M>L?B="up":M<L&&(B="down"),{cross:_(T,E)+F,open:c.yScale()(L),high:c.yScale()(v(T,E)),low:c.yScale()(y(T,E)),close:c.yScale()(M),width:I,direction:B}},c.xValues=function(){return[h]},c.yValues=function(){return[g,v,y,w]},c.crossValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],c):h},c.openValue=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],c):g},c.highValue=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],c):v},c.lowValue=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],c):y},c.yValue=c.closeValue=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],c):w},c.bandwidth=function(){return arguments.length?(m=st(arguments.length<=0?void 0:arguments[0]),c):m},c.align=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],c):b},c},Td=function(c,h){var g=dc(),v=qe("g",h),y=function(_){return"translate("+_.cross+", "+_.high+")"},w=function(_){return function(T){return Tt(_)?T.transition(_):T}},m=function(_){Tt(_)&&v.transition(_);var T=w(_);_.each(function(E,M,L){var I=E.filter(g.defined()),F=v(u.select(L[M]),I);F.enter().attr("transform",function(B,V){return y(g.values(B,V))+" scale(1e-6, 1)"}).append("path"),F.each(function(B,V,z){var U=g.values(B,V),H=U.direction==="up"?mt.green:mt.red,j=T(u.select(z[V])).attr("class",h+" "+U.direction).attr("stroke",H).attr("fill",H).attr("transform",function(){return y(U)+" scale(1)"});c.x(0).width(U.width).open(function(){return U.open-U.high}).high(0).low(function(){return U.low-U.high}).close(function(){return U.close-U.high}),j.select("path").attr("d",c([B]))}),g.decorate()(F,E,M)})};return A(m,v,"key"),S(m,g),m},Gw=function(){return Td(tc(),"candlestick")},Sd=function(c){var h=dc(),g=function(y){var w=y.filter(h.defined()),m=c.context();w.forEach(function(b,_){m.save();var T=h.values(b,_);m.translate(T.cross,T.high),m.beginPath(),c.x(0).open(function(){return T.open-T.high}).width(T.width).high(0).low(function(){return T.low-T.high}).close(function(){return T.close-T.high})([b]);var E=T.direction==="up"?mt.green:mt.red;m.strokeStyle=E,m.fillStyle=E,h.decorate()(m,b,_),m.fill(),m.stroke(),m.closePath(),m.restore()})};return A(g,c,"context"),S(g,h),g},qw=function(){return Sd(tc())},Ed=function(c){var h=dc(),g=We(),v=We(),y=We(),w=We(),m=We(),b=We().type(Ge.UNSIGNED_SHORT),_=We().type(Ge.UNSIGNED_BYTE);c.crossValueAttribute(g).openValueAttribute(v).highValueAttribute(y).lowValueAttribute(w).closeValueAttribute(m).bandwidthAttribute(b).definedAttribute(_);var T=function(V,z){return!1},E=Rr,M=[],L=null,I=null,F=function(V){var z=E(h.xScale()),U=E(h.yScale()),H=!T(M,V);H&&(M=V,b.value(function(j,ae){return h.bandwidth()(j,ae)}).data(V),_.value(function(j,ae){return h.defined()(j,ae)}).data(V)),(H||z.scale!==L)&&(L=z.scale,g.value(function(j,ae){return z.scale(h.crossValue()(j,ae))}).data(V)),(H||U.scale!==I)&&(I=U.scale,v.value(function(j,ae){return U.scale(h.openValue()(j,ae))}).data(V),y.value(function(j,ae){return U.scale(h.highValue()(j,ae))}).data(V),w.value(function(j,ae){return U.scale(h.lowValue()(j,ae))}).data(V),m.value(function(j,ae){return U.scale(h.closeValue()(j,ae))}).data(V)),c.xScale(z.webglScale).yScale(U.webglScale).decorate(function(j){return h.decorate()(j,V,0)}),c(V.length)};return F.equals=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],F):T},F.scaleMapper=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],F):E},S(F,h,N("align")),A(F,c,"context","lineWidth","pixelRatio"),F},jw=function(){return Ed(dd())},gc=function(){var c=function(M){return M.upperQuartile},h=function(M){return M.lowerQuartile},g=function(M){return M.high},v=function(M){return M.low},y=function(M){return M.value},w=function(M){return M.median},m="vertical",b="center",_=function(){return 5},T=Hr({decorate:function(){},defined:function(M,L){return oa(v,g,h,c,y,w)(M,L)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return T.values=function(E,M){var L=_(E,M),I=sa(b,L),F=T.xScale(),B=T.yScale();if(m==="vertical"){var V=B(g(E,M));return{origin:[F(y(E,M))+I,V],high:0,upperQuartile:B(c(E,M))-V,median:B(w(E,M))-V,lowerQuartile:B(h(E,M))-V,low:B(v(E,M))-V,width:L}}else{var z=F(v(E,M));return{origin:[z,B(y(E,M))+I],high:F(g(E,M))-z,upperQuartile:F(c(E,M))-z,median:F(w(E,M))-z,lowerQuartile:F(h(E,M))-z,low:0,width:L}}},T.xValues=function(){return m==="vertical"?[y]:[c,h,g,v,w]},T.yValues=function(){return m!=="vertical"?[y]:[c,h,g,v,w]},T.orient=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],T):m},T.lowerQuartileValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),T):h},T.upperQuartileValue=function(){return arguments.length?(c=st(arguments.length<=0?void 0:arguments[0]),T):c},T.lowValue=function(){return arguments.length?(v=st(arguments.length<=0?void 0:arguments[0]),T):v},T.highValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),T):g},T.crossValue=function(){return arguments.length?(y=st(arguments.length<=0?void 0:arguments[0]),T):y},T.medianValue=function(){return arguments.length?(w=st(arguments.length<=0?void 0:arguments[0]),T):w},T.bandwidth=function(){return arguments.length?(_=st(arguments.length<=0?void 0:arguments[0]),T):_},T.align=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],T):b},T},Jw=function(){var c=gc(),h=qe("g","box-plot"),g=nc().value(0),v=function(b){return function(_){return Tt(b)?_.transition(b):_}},y=function(b){return"translate("+b.origin[0]+", "+b.origin[1]+")"},w=function(b){Tt(b)&&h.transition(b);var _=v(b);b.each(function(T,E,M){var L=T.filter(c.defined()),I=h(u.select(M[E]),L);I.enter().attr("stroke",mt.black).attr("fill",mt.gray).attr("transform",function(F,B){return y(c.values(F,B))+" scale(1e-6, 1)"}).append("path"),g.orient(c.orient()),I.each(function(F,B,V){var z=c.values(F,B);g.median(z.median).upperQuartile(z.upperQuartile).lowerQuartile(z.lowerQuartile).width(z.width).high(z.high).low(z.low),_(u.select(V[B])).attr("transform",y(z)).select("path").attr("d",g([F]))}),c.decorate()(I,T,E)})};return S(w,c),A(w,h,"key"),A(w,g,"cap"),w},Kw=function(){var c=gc(),h=nc().value(0),g=function(y){var w=y.filter(c.defined()),m=h.context();h.orient(c.orient()),w.forEach(function(b,_){m.save();var T=c.values(b,_);m.translate(T.origin[0],T.origin[1]),m.beginPath(),m.fillStyle=mt.gray,m.strokeStyle=mt.black,c.decorate()(m,b,_),h.median(T.median).upperQuartile(T.upperQuartile).lowerQuartile(T.lowerQuartile).high(T.high).width(T.width).low(T.low)([b]),m.fill(),m.stroke(),m.closePath(),m.restore()})};return S(g,c),A(g,h,"cap","context"),g},Zw=function(){var c=gc(),h=We(),g=We(),v=We(),y=We(),w=We(),m=We(),b=We().type(Ge.UNSIGNED_SHORT),_=We().type(Ge.UNSIGNED_SHORT),T=We().type(Ge.UNSIGNED_BYTE),E=gd().crossValueAttribute(h).highValueAttribute(g).upperQuartileValueAttribute(v).medianValueAttribute(y).lowerQuartileValueAttribute(w).lowValueAttribute(m).bandwidthAttribute(b).capAttribute(_).definedAttribute(T),M=function(H,j){return!1},L=Rr,I=[],F=null,B=null,V=st(20),z=function(H){if(c.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(c.orient()));var j=L(c.xScale()),ae=L(c.yScale()),we=!M(I,H);we&&(I=H,b.value(function(Se,ye){return c.bandwidth()(Se,ye)}).data(H),_.value(function(Se,ye){return V(Se,ye)}).data(H),T.value(function(Se,ye){return c.defined()(Se,ye)}).data(H)),(we||j.scale!==F)&&(F=j.scale,h.value(function(Se,ye){return j.scale(c.crossValue()(Se,ye))}).data(H)),(we||ae.scale!==B)&&(B=ae.scale,g.value(function(Se,ye){return ae.scale(c.highValue()(Se,ye))}).data(H),v.value(function(Se,ye){return ae.scale(c.upperQuartileValue()(Se,ye))}).data(H),y.value(function(Se,ye){return ae.scale(c.medianValue()(Se,ye))}).data(H),w.value(function(Se,ye){return ae.scale(c.lowerQuartileValue()(Se,ye))}).data(H),m.value(function(Se,ye){return ae.scale(c.lowValue()(Se,ye))}).data(H)),E.xScale(j.webglScale).yScale(ae.webglScale).decorate(function(Se){return c.decorate()(Se,H,0)}),E(H.length)};return z.cap=function(){return arguments.length?(V=st(arguments.length<=0?void 0:arguments[0]),z):V},z.equals=function(){return arguments.length?(M=arguments.length<=0?void 0:arguments[0],z):M},z.scaleMapper=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],z):L},S(z,c,N("align")),A(z,E,"context","lineWidth","pixelRatio"),z},Qw=function(){return Td(ec(),"ohlc")},e1=function(){return Sd(ec())},t1=function(){return Ed(ud())},mc=function(){var c=[],h=function(w){return w},g=function(w,m){return m},v=Hr({decorate:function(){},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return v.xValues=function(){return c.map(function(y){return y.xValues()}).reduce(function(y,w){return y.concat(w)})},v.yValues=function(){return c.map(function(y){return y.yValues()}).reduce(function(y,w){return y.concat(w)})},v.mapping=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.key=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},v.series=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v},pc=function(){var c=mc(),h=qe("g"),g=qe("g","multi"),v=function(w){Tt(w)&&(g.transition(w),h.transition(w));var m=c.mapping(),b=c.series(),_=c.xScale(),T=c.yScale();w.each(function(E,M,L){var I=g(u.select(L[M]),b);I.each(function(F,B,V){F.xScale(_).yScale(T);var z=m(E,B,b),U=h(u.select(V[B]),[z]);U.call(F)}),I.selection().order(),c.decorate()(I,E,M)})};return S(v,c),A(v,g,"key"),v},vc=function(){var c=null,h=mc(),g=function(y){var w=h.mapping(),m=h.series(),b=h.xScale(),_=h.yScale();m.forEach(function(T,E){var M=w(y,E,m);T.context(c).xScale(b).yScale(_);var L;T.decorate?(L=T.decorate(),T.decorate(function(I,F,B){h.decorate()(I,y,E),L(I,F,B)})):h.decorate()(c,y,E),T(M),L&&T.decorate(L)})};return g.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},S(g,h),g},Ad=function(){var c=null,h=1,g=mc(),v=function(w){var m=g.mapping(),b=g.series(),_=g.xScale(),T=g.yScale();b.forEach(function(E,M){var L=m(w,M,b);E.context(c).pixelRatio(h).xScale(_).yScale(T);var I;E.decorate?(I=E.decorate(),E.decorate(function(F,B,V){g.decorate()(F,w,M),I(F,B,V)})):g.decorate()(c,w,M),E(L),I&&E.decorate(I)})};return v.context=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.pixelRatio=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},S(v,g),v},Cd=function(c){var h=function(){return 50},g="center",v=i.scaleBand(),y=Hr({decorate:function(){},xScale:i.scaleLinear(),yScale:i.scaleLinear()});return y.offsetScaleForDatum=function(w,m,b){var _=h(m,b),T=sa(g,_),E=_/2;return v.domain(r.range(0,w.length)).range([-E+T,E+T])},y.bandwidth=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),y):h},y.align=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},S(y,v,W({paddingInner:"paddingOuter"})),y},n1=function(c){var h=Cd(),g=qe("g","grouped"),v=function(w){Tt(w)&&g.transition(w),w.each(function(m,b,_){var T=g(u.select(_[b]),m);T.enter().append("g"),T.select("g").each(function(E,M,L){var I=u.select(L[M]),F=c.orient()!=="horizontal",B=function(z,U){var H=h.offsetScaleForDatum(m,z,U),j=F?h.xScale():h.yScale();return j(z)+H(M)+H.bandwidth()/2};F?(c.xScale(B),c.yScale(h.yScale())):(c.yScale(B),c.xScale(h.xScale())),c.bandwidth&&c.bandwidth(function(V,z){return h.offsetScaleForDatum(m,V,z).bandwidth()}),c.decorate(function(V,z){return h.decorate()(V,z,M)}),I.call(c)})})};return S(v,c,N("decorate","xScale","yScale")),S(v,h,N("offsetScaleForDatum")),v};function r1(c){var h=Cd(),g=function(y){y.forEach(function(w,m){var b=c.orient()!=="horizontal",_=function(E,M){var L=h.offsetScaleForDatum(y,E,M),I=b?h.xScale():h.yScale();return I(E)+L(m)+L.bandwidth()/2};b?(c.xScale(_),c.yScale(h.yScale())):(c.yScale(_),c.xScale(h.xScale())),c.bandwidth&&c.bandwidth(function(T,E){return h.offsetScaleForDatum(y,T,E).bandwidth()}),c.decorate(function(T,E){return h.decorate()(T,E,m)}),c(w)})};return S(g,c,N("decorate","xScale","yScale")),S(g,h,N("offsetScaleForDatum")),g}var i1=function(){var c="vertical",h=lc(),g=pc(),v=function(w){return w.each(function(m,b,_){c==="vertical"?g.series(m[0].map(function(T){return h})).mapping(function(T,E){return T.map(function(M){return M[E]})}):g.series(m.map(function(T){return h})).mapping(function(T,E){return T[E]}),u.select(_[b]).call(g)})};return v.series=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},S(v,g,N("series","mapping")),v},a1=function(){var c="vertical",h=cc(),g=vc(),v=function(w){c==="vertical"?g.series(w[0].map(function(m){return h})).mapping(function(m,b){return m.map(function(_){return _[b]})}):g.series(w.map(function(m){return h})).mapping(function(m,b){return m[b]}),g(w)};return v.series=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},S(v,g,N("series","mapping")),v},o1=function(){var c="vertical",h=function(){return yd()},g=Ad(),v=[],y=function(m){if(c==="vertical"){var b=v;v=m[0].map(function(T,E){return E<b.length?b[E]:h()}),g.series(v).mapping(function(T,E){return T.map(function(M){return M[E]})})}else{var _=v;v=m.map(function(T,E){return E<_.length?_[E]:h()}),g.series(v).mapping(function(T,E){return T[E]})}g(m)};return y.series=function(){for(var w=arguments.length,m=new Array(w),b=0;b<w;b++)m[b]=arguments[b];return m.length?(typeof m[0].xScale=="function"&&typeof m[0].yScale=="function"?h=function(){return m[0]}:h=m[0],v=[],y):h},y.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v=[],y):c},S(y,g,N("series","mapping")),y},s1=function(h){return h.sort(r.ascending).filter(function(g,v,y){return y.indexOf(g,v+1)===-1})},l1=function(c){var h=.75,g=function(m){if(m.length<=1)return 10;m=s1(m);var b=r.pairs(m).map(function(T){return Math.abs(T[0]-T[1])}),_=r.min(b);return h*_},v=function(m,b,_){if(m.bandwidth)return m.bandwidth();var T,E=Array.isArray(b)?(T=[]).concat.apply(T,yt(b)):b,M=E.filter(c.defined()).map(_()).map(m),L=g(M);return L},y=function(m){var b=function(T){if(c.xBandwidth&&c.yBandwidth)c.xBandwidth(v(c.xScale(),T,c.xValue)),c.yBandwidth(v(c.yScale(),T,c.yValue));else{var E=c.orient&&c.orient()==="horizontal"?c.yScale():c.xScale();c.bandwidth(v(E,T,c.crossValue))}};m instanceof u.selection?m.each(function(_,T,E){b(_),c(u.select(E[T]))}):(b(m),c(m))};return S(y,c),y.widthFraction=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y},Rd=function(){var c=function(_){return _.x},h=function(_){return _.y},g=function(_){return _.color},v=function(){return 5},y=function(){return 5},w=d.interpolateViridis,m=Hr({decorate:function(){},defined:function(_,T){return oa(c,h,g)(_,T)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.pathGenerator=mi().x(0).y(0),m.colorScale=function(b){var _=b.map(g);return i.scaleLinear().domain([r.min(_),r.max(_)])},m.values=function(b,_){return{x:m.xScale()(c(b,_)),y:m.yScale()(h(b,_)),colorValue:g(b,_),width:y(b,_),height:v(b,_)}},m.xValues=function(){return[c]},m.yValues=function(){return[h]},m.xValue=function(){return arguments.length?(c=st(arguments.length<=0?void 0:arguments[0]),m):c},m.yValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),m):h},m.colorValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),m):g},m.colorInterpolate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],m):w},m.xBandwidth=function(){return arguments.length?(y=st(arguments.length<=0?void 0:arguments[0]),m):y},m.yBandwidth=function(){return arguments.length?(v=st(arguments.length<=0?void 0:arguments[0]),m):v},S(m,m.pathGenerator,W({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),m},c1=function(){var c=Rd(),h=qe("g","box"),g=function(w){return"translate("+w.x+", "+w.y+")"},v=function(w){w.each(function(m,b,_){var T=m.filter(c.defined()),E=c.colorValue(),M=c.colorInterpolate(),L=c.colorScale(T),I=h(u.select(_[b]),T);I.enter().append("path").attr("stroke","transparent"),I.attr("transform",function(F,B){return g(c.values(F,B))}).select("path").attr("d",function(F,B){return c.pathGenerator.width(c.values(F,B).width).height(c.values(F,B).height)([F])}).attr("fill",function(F,B){return M(L(E(F,B)))}),c.decorate()(I,m,b)})};return S(v,c),v},u1=function(){var c=Rd(),h=function(v){var y=v.filter(c.defined()),w=c.colorInterpolate(),m=c.colorScale(y),b=c.pathGenerator.context();y.forEach(function(_,T){b.save(),b.beginPath();var E=c.values(_,T);b.translate(E.x,E.y),b.fillStyle=w(m(E.colorValue)),b.strokeStyle="transparent",c.decorate()(b,_,T),c.pathGenerator.height(E.height).width(E.width)([_]),b.fill(),b.stroke(),b.closePath(),b.restore()})};return A(h,c.pathGenerator,"context"),S(h,c),h},Mr=function(c){return typeof c=="function"?c:function(){return c}},f1=function(){var c=i.scaleIdentity(),h=i.scaleIdentity(),g="horizontal",v=function(E){return E.from},y=function(E){return E.to},w=function(){},m=qe("g","annotation-band"),b=mi().horizontalAlign("center").verticalAlign("center").x(0).y(0),_=function(E){if(Tt(E)&&m.transition(E),g!=="horizontal"&&g!=="vertical")throw new Error("Invalid orientation");var M=g==="horizontal",L=M?function(j,ae){return"translate(".concat(j,", ").concat(ae,")")}:function(j,ae){return"translate(".concat(ae,", ").concat(j,")")},I=M?c:h,F=M?h:c,B=I.range(),V=B[1]-B[0],z=M?"height":"width",U=M?"width":"height",H=function(){return L((B[1]+B[0])/2,(F(y.apply(void 0,arguments))+F(v.apply(void 0,arguments)))/2)};b[U](V),b[z](function(){return F(y.apply(void 0,arguments))-F(v.apply(void 0,arguments))}),E.each(function(j,ae,we){var Se=m(u.select(we[ae]),j);Se.enter().attr("transform",H).append("path").classed("band",!0),Se.attr("class","annotation-band ".concat(g)).attr("transform",H).select("path").attr("d",function(ye,He){return b([ye],He)}),w(Se,j,ae)})};return _.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],_):h},_.orient=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],_):g},_.decorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],_):w},_.fromValue=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),_):v},_.toValue=function(){return arguments.length?(y=Mr(arguments.length<=0?void 0:arguments[0]),_):y},_},h1=function(){var c=i.scaleIdentity(),h=i.scaleIdentity(),g="horizontal",v=function(T){return T.from},y=function(T){return T.to},w=function(){},m=mi().horizontalAlign("right").verticalAlign("top"),b=function(T){if(g!=="horizontal"&&g!=="vertical")throw new Error("Invalid orientation");var E=m.context(),M=g==="horizontal",L=M?c:h,I=M?h:c,F=L.range(),B=F[1]-F[0],V=M?"x":"y",z=M?"y":"x",U=M?"height":"width",H=M?"width":"height";T.forEach(function(j,ae){E.save(),E.beginPath(),E.strokeStyle="transparent",m[z](I(v(j))),m[V](F[0]),m[H](B),m[U](I(y(j))-I(v(j))),w(E,j,ae),m.context(E)([j],ae),E.fill(),E.stroke(),E.closePath(),E.restore()})};return b.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.orient=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],b):g},b.decorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],b):w},b.fromValue=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),b):v},b.toValue=function(){return arguments.length?(y=Mr(arguments.length<=0?void 0:arguments[0]),b):y},A(b,m,"context"),b},bc=function(){var c=i.scaleIdentity(),h=i.scaleIdentity(),g=function(T){return T},v=g,y=function(){},w="horizontal",m=qe("g","annotation-line"),b=function(T){if(Tt(T)&&m.transition(T),w!=="horizontal"&&w!=="vertical")throw new Error("Invalid orientation");var E=w==="horizontal",M=E?function(ye,He){return"translate(".concat(ye,", ").concat(He,")")}:function(ye,He){return"translate(".concat(He,", ").concat(ye,")")},L=E?"x2":"y2",I=E?c:h,F=E?h:c,B=E?"left-handle":"bottom-handle",V=E?"right-handle":"top-handle",z=E?"9":"0",U=E?"0":"9",H=E?"0.32em":"0.71em",j=E?"start":"middle",ae=I.range(),we=function(){return M(ae[0],F(g.apply(void 0,arguments)))},Se=ae[1]-ae[0];T.each(function(ye,He,Bt){var yn=m(u.select(Bt[He]),ye),Yn=yn.enter().attr("transform",we).style("stroke","#bbb");Yn.append("line").attr(L,Se),Yn.append("g").classed(B,!0).style("stroke","none"),Yn.append("g").classed(V,!0).style("stroke","none").attr("transform",M(Se,0)).append("text").attr("text-anchor",j).attr("x",z).attr("y",U).attr("dy",H),yn.attr("class","annotation-line ".concat(w)),yn.attr("transform",we),yn.select("line").attr(L,Se),yn.select("g."+V).attr("transform",M(Se,0)),yn.select("text").text(v),y(yn,ye,He)})};return b.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.value=function(){return arguments.length?(g=Mr(arguments.length<=0?void 0:arguments[0]),b):g},b.label=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),b):v},b.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b.orient=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],b):w},b};function d1(){var c=function(B){return B.x},h=function(B){return B.y},g=i.scaleIdentity(),v=i.scaleIdentity(),y=function(){},w=qe("g","annotation-crosshair"),m=wd(),b=bc(),_=bc().orient("vertical"),T=i.scaleIdentity(),E=i.scaleIdentity(),M=pc().series([b,_,m]).xScale(T).yScale(E).mapping(function(F){return[F]}),L=function(B){Tt(B)&&w.transition(B),B.each(function(V,z,U){var H=w(u.select(U[z]),V);H.enter().style("pointer-events","none"),T.range(g.range()),E.range(v.range()),m.crossValue(c).mainValue(h),b.value(h),_.value(c),H.call(M),y(H,V,z)})};L.x=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],L):c},L.y=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],L):h},L.xScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],L):g},L.yScale=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],L):v},L.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],L):y};var I=k("label");return S(L,b,I,X("y")),S(L,_,I,X("x")),L}var _c=function(){var c=i.scaleIdentity(),h=i.scaleIdentity(),g=function(T){return T},v=g,y=function(){},w="horizontal",m=f.line(),b=function(T){if(w!=="horizontal"&&w!=="vertical")throw new Error("Invalid orientation");var E=w==="horizontal",M=m.context(),L=E?c:h,I=E?h:c,F=L.domain(),B=E?9:0,V=E?0:9,z=E?"left":"center",U=E?"middle":"hanging";T.forEach(function(H,j){M.save(),M.beginPath(),M.strokeStyle="#bbb",M.fillStyle="#000",M.textAlign=z,M.textBaseline=U,y(M,H,j),m.context(M)(F.map(function(Se){var ye=[L(Se),I(g(H))];return E?ye:ye.reverse()}));var ae=E?L(F[1]):I(g(H)),we=E?I(g(H)):L(F[1]);M.fillText(v(H),ae+B,we+V),M.fill(),M.stroke(),M.closePath(),M.restore()})};return b.xScale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.value=function(){return arguments.length?(g=Mr(arguments.length<=0?void 0:arguments[0]),b):g},b.label=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),b):v},b.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b.orient=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],b):w},A(b,m,"context"),b},g1=function(){var c=function(I){return I.x},h=function(I){return I.y},g=i.scaleIdentity(),v=i.scaleIdentity(),y=xd(),w=_c(),m=_c().orient("vertical"),b=i.scaleIdentity(),_=i.scaleIdentity(),T=vc().series([w,m,y]).xScale(b).yScale(_).mapping(function(L){return[L]}),E=function(I){I.forEach(function(F){b.range(g.range()),_.range(v.range()),y.crossValue(c).mainValue(h),w.value(h),m.value(c),T(F)})};E.x=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],E):c},E.y=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],E):h},E.xScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],E):g},E.yScale=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],E):v};var M=k("label","decorate");return S(E,w,M,X("y")),S(E,m,M,X("x")),A(E,y,"decorate"),A(E,T,"context"),E},So=function(){var c=i.scaleIdentity(),h=[10],g=null,v=function(){var w;return g??(c.ticks?(w=c).ticks.apply(w,yt(h)):c.domain())};return v.scale=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.ticks=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];return h=w,v},v.tickArguments=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.tickValues=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},v},Md=function(h){return h},m1=function(){var c=function(){},h=function(){},g=So(),v=So(),y=qe("line","gridline-y").key(Md),w=qe("line","gridline-x").key(Md),m=function(_){Tt(_)&&(y.transition(_),w.transition(_)),_.each(function(T,E,M){var L=M[E],I=u.select(M[E]),F=g.scale(),B=v.scale(),V=L.__x_scale__||F;L.__x_scale__=F.copy();var z=g(),U=y(I,z);U.enter().attr("x1",V).attr("x2",V).attr("y1",B.range()[0]).attr("y2",B.range()[1]).attr("stroke","#bbb"),U.attr("x1",F).attr("x2",F).attr("y1",B.range()[0]).attr("y2",B.range()[1]),U.exit().attr("x1",F).attr("x2",F),c(U,z,E);var H=L.__y_scale__||B;L.__y_scale__=B.copy();var j=v(),ae=w(I,j);ae.enter().attr("y1",H).attr("y2",H).attr("x1",F.range()[0]).attr("x2",F.range()[1]).attr("stroke","#bbb"),ae.attr("y1",B).attr("y2",B).attr("x1",F.range()[0]).attr("x2",F.range()[1]),ae.exit().attr("y1",B).attr("y2",B),h(ae,j,E)})};return m.yDecorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.xDecorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],m):c},S(m,y,W({key:"xKey"})),S(m,w,W({key:"yKey"})),S(m,g,X("x")),S(m,v,X("y")),m},p1=function(){var c=function(){},h=function(){},g=So(),v=So(),y=f.line(),w=function(){var b=y.context(),_=g.scale(),T=v.scale();g().forEach(function(E,M){b.save(),b.beginPath(),b.strokeStyle="#bbb",b.fillStyle="transparent",c(b,E,M),y.context(b)(T.domain().map(function(L){return[_(E),T(L)]})),b.fill(),b.stroke(),b.closePath(),b.restore()}),v().forEach(function(E,M){b.save(),b.beginPath(),b.strokeStyle="#bbb",b.fillStyle="transparent",h(b,E,M),y.context(b)(_.domain().map(function(L){return[_(L),T(E)]})),b.fill(),b.stroke(),b.closePath(),b.restore()})};return w.yDecorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.xDecorate=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],w):c},S(w,g,X("x")),S(w,v,X("y")),A(w,y,"context"),w},v1=function(h){return h},Nd=function(h,g,v,y){return h[g]?h[g].apply(h,v):y},Od=function(h){var g;return(g=h.tickValues())!==null&&g!==void 0?g:Nd(h.scale(),"ticks",h.tickArguments(),h.scale().domain())},Dd=function(h){var g;return(g=h.tickFormat())!==null&&g!==void 0?g:Nd(h.scale(),"tickFormat",h.tickArguments(),v1)},b1=function(h){return h},Ld=function(h,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=[10],w=null,m=function(){},b=null,_=6,T=6,E=3,M=f.line(),L=qe("g","tick").key(b1),I=qe("path","domain"),F=function(){return{offset:[0,T+E]}},B=function(){return{path:[[0,0],[0,T]]}},V=v.labelOffset||F,z=v.tickPath||B,U=function(ye,He){var Bt=0;return ye.bandwidth&&(Bt=ye.bandwidth()/2,ye.round()&&(Bt=Math.round(Bt))),function(yn){return He(ye(yn)+Bt,0)}},H=function(ye,He){return ae()?"translate(".concat(He,", ").concat(ye,")"):"translate(".concat(ye,", ").concat(He,")")},j=function(ye){return ae()?ye.map(function(He){return[He[1],He[0]]}):ye},ae=function(){return h==="left"||h==="right"},we=function Se(ye){Tt(ye)&&(L.transition(ye),I.transition(ye)),ye.each(function(He,Bt,yn){var Yn=yn[Bt],ha=u.select(Yn);Yn.__scale__||ha.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",h==="right"?"start":h==="left"?"end":"middle");var Ac=Yn.__scale__||g;Yn.__scale__=g.copy();var Yr=Od(Se),Ye=Dd(Se),pi=h==="bottom"||h==="right"?1:-1,Gt=function(je){var ft=_e(je,2),Vt=ft[0],Rn=ft[1];return[Vt,pi*Rn]},Xn=g.range(),Nr=j([[Xn[0],pi*_],[Xn[0],0],[Xn[1],0],[Xn[1],pi*_]]),Nt=I(ha,[He]);Nt.enter().attr("stroke","#000"),Nt.attr("d",M(Nr));var Gn=L(ha,Yr),da=Yr.map(function(Le,je){return V(Le,je,Yr)}),Ft=Yr.map(function(Le,je){return z(Le,je,Yr)});Gn.enter().attr("transform",U(Ac,H)).append("path").attr("stroke","#000"),Gn.enter().append("text").attr("transform",function(Le,je){return H.apply(void 0,yt(Gt(da[je].offset)))}).attr("fill","#000"),Gn.exit().attr("transform",U(g,H)),Gn.select("path").attr("visibility",function(Le,je){return Ft[je].hidden&&"hidden"}).attr("d",function(Le,je){return M(j(Ft[je].path.map(Gt)))}),Gn.select("text").attr("visibility",function(Le,je){return da[je].hidden&&"hidden"}).attr("transform",function(Le,je){return H.apply(void 0,yt(Gt(da[je].offset)))}).attr("dy",function(){var Le="0em";return ae()?Le="0.32em":h==="bottom"&&(Le="0.71em"),Le}).text(Ye),Gn.attr("transform",U(g,H)),m(Gn,He,Bt)})};return we.tickFormat=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],we):b},we.tickSize=function(){return arguments.length?(T=_=Number(arguments.length<=0?void 0:arguments[0]),we):T},we.tickSizeInner=function(){return arguments.length?(T=Number(arguments.length<=0?void 0:arguments[0]),we):T},we.tickSizeOuter=function(){return arguments.length?(_=Number(arguments.length<=0?void 0:arguments[0]),we):_},we.tickPadding=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],we):E},we.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],we):m},we.scale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],we):g},we.ticks=function(){for(var Se=arguments.length,ye=new Array(Se),He=0;He<Se;He++)ye[He]=arguments[He];return y=[].concat(ye),we},we.tickArguments=function(){return arguments.length?(y=(arguments.length<=0?void 0:arguments[0])==null?[]:yt(arguments.length<=0?void 0:arguments[0]),we):y!==null?y.slice():null},we.tickValues=function(){return arguments.length?(w=(arguments.length<=0?void 0:arguments[0])==null?[]:yt(arguments.length<=0?void 0:arguments[0]),we):w!==null?w.slice():null},we.orient=function(){return h},we},Eo=function(h,g){var v=!1,y=function(_,T,E){var M=0,L=w.tickSizeInner()+w.tickPadding(),I=!1;if(v){var F=g(_),B=T<E.length-1?g(E[T+1]):g.range()[1];M=(B-F)/2,L=w.tickPadding(),I=T===E.length-1&&F===B}return{offset:[M,L],hidden:I}},w=Ld(h,g,{labelOffset:y}),m=function(_){return w(_)};return m.tickCenterLabel=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},S(m,w),m},Id=function(h){return Eo("top",h)},Pd=function(h){return Eo("bottom",h)},kd=function(h){return Eo("left",h)},Bd=function(h){return Eo("right",h)},Ao=function(h,g){var v=null,y=function(E,M,L){if(g.step)return g.step();var I=g(E);return M<L.length-1?g(L[M+1])/I:(g.range()[1]-I)*2},w=function(E,M,L){var I=0;return v?I=v(E,M):I=y(E,M,L)/2,{path:[[I,0],[I,b.tickSizeInner()]],hidden:M===L.length-1}},m=function(){return{offset:[0,b.tickPadding()]}},b=Ld(h,g,{labelOffset:m,tickPath:w}),_=function(E){b(E)};return _.tickOffset=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],_):v},S(_,b),_},_1=function(h){return Ao("top",h)},y1=function(h){return Ao("bottom",h)},w1=function(h){return Ao("left",h)},x1=function(h){return Ao("right",h)},Fd=function(c){var h=function(v){var y=Od(c),w=Dd(c),m=y.map(w),b=v.append("text"),_=m.map(function(M){return b.text(M).node().getBBox()}),T=Math.max.apply(Math,yt(_.map(function(M){return M.height}))),E=Math.max.apply(Math,yt(_.map(function(M){return M.width})));return b.remove(),{maxHeight:T,maxWidth:E,labelCount:m.length}};return h},T1=function(c){var h="auto",g=function(){},v=function(){return c.orient()==="left"||c.orient()==="right"},y=function(){return c.orient()==="top"||c.orient()==="left"?-1:1},w=function(){switch(c.orient()){case"top":case"right":return"start";default:return"end"}},m=function(E){var M=Fd(c)(E),L=M.maxHeight,I=M.maxWidth,F=M.labelCount,B=F*I,V;if(h==="auto"){var z=c.scale().range()[1];V=z<B?90*Math.min(1,(B/z-.8)/2):0}else V=h;return{rotate:v()?Math.floor(y()*(90-V)):Math.floor(-V),maxHeight:L,maxWidth:I,anchor:V?w():"middle"}},b=function(E){var M=m(E),L=M.rotate,I=M.maxHeight,F=M.anchor,B=E.select("text"),V=B.attr("transform"),z=y()*Math.floor(I/2),U=v()?"translate(".concat(z,", 0)"):"translate(0, ".concat(z,")");B.style("text-anchor",F).attr("transform","".concat(V," ").concat(U," rotate(").concat(L," 0 0)"))},_=function(E){c(E)};return c.decorate(function(T){b(T),g(T)}),_.decorate=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],_):g},_.labelRotate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],_):h},S(_,c,N("decorate")),_},S1=function(c){var h="auto",g=function(){},v=function(){return c.orient()==="left"||c.orient()==="right"},y=function(){return c.orient()==="top"||c.orient()==="left"?-1:1},w=function(_){var T=Fd(c)(_),E=T.maxHeight,M=T.maxWidth,L=T.labelCount,I=c.scale().range()[1],F=h==="auto"?Math.floor((v()?E:M)*L/I)+1:h,B=_.select("text"),V=B.attr("transform"),z=function(H){return v()?"translate(".concat(H%F*M*y(),", 0)"):"translate(0, ".concat(H%F*E*y(),")")};B.attr("transform",function(U,H){return"".concat(V," ").concat(z(H))})},m=function(_){return c(_)};return c.decorate(function(b){w(b),g(b)}),m.decorate=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},m.labelOffsetDepth=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},S(m,c,N("decorate")),m},yc="__d3fc-elements__",ca=function(h){return h[yc]||{}},Vd=function(h,g){return void(h[yc]=g)},E1=function(h){return delete h[yc]},A1=function(h){return h.tagName==="D3FC-GROUP"?[h].concat(yt(h.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[h]},C1=function(h){var g=ca(h),v=g.width,y=g.height,w=h.useDevicePixelRatio&&window.devicePixelRatio!=null?window.devicePixelRatio:1,m=h.clientWidth*w,b=h.clientHeight*w,_=m!==v||b!==y,T=h.children[0];Vd(h,{pixelRatio:w,width:m,height:b,resized:_,child:T})};if(typeof CustomEvent!="function")throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var R1=function(h){var g=ca(h),v=new CustomEvent("measure",{detail:g});h.dispatchEvent(v)},M1=function(h){var g=ca(h),v=new CustomEvent("draw",{detail:g});h.dispatchEvent(v)},N1=function(c){var h=c.map(A1).reduce(function(g,v){return g.concat(v)});h.forEach(C1),h.forEach(R1),h.forEach(M1)},Wd=function(h){return ca(h.ownerDocument).queue||[]},O1=function(h,g){var v=ca(h.ownerDocument),y=v.requestId;y==null&&(y=requestAnimationFrame(function(){var w=Wd(h);N1(w),D1(h)})),Vd(h.ownerDocument,{queue:g,requestId:y})},D1=function(h){return E1(h.ownerDocument)},$d=function(h,g){var v=h;do if(v.parentNode===g)return!0;while(v=v.parentNode);return!1},wc=function(c){var h=Wd(c),g=h.indexOf(c)>-1;if(!g){var v=h.some(function(w){return $d(c,w)});if(!v){var y=h.filter(function(w){return!$d(w,c)});y.push(c),O1(c,y)}}};if(typeof HTMLElement!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var L1=function(h){h.__measureListener__==null&&(h.__measureListener__=function(g){return h.setMeasurements(g.detail)},h.addEventListener("measure",h.__measureListener__))},I1=function(h){h.__measureListener__!=null&&(h.removeEventListener("measure",h.__measureListener__),h.__measureListener__=null)},zd=function(c,h){return function(g){Ie(y,g);var v=Oe(y);function y(){return re(this,y),v.apply(this,arguments)}return ve(y,[{key:"attributeChangedCallback",value:function(m){switch(m){case"use-device-pixel-ratio":this.requestRedraw();break}}},{key:"connectedCallback",value:function(){this.childNodes.length===0&&this.appendChild(c()),L1(this)}},{key:"disconnectedCallback",value:function(){I1(this)}},{key:"setMeasurements",value:function(m){var b=m.width,_=m.height,T=ut(this.childNodes),E=T[0],M=T.slice(1);if(M.length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");h(this,E,{width:b,height:_})}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&this.getAttribute("use-device-pixel-ratio")!=="false"},set:function(m){m&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!m&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}},{key:"requestRedraw",value:function(){wc(this)}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),y}(_o(HTMLElement))},P1=function(c){Ie(g,c);var h=Oe(g);function g(){return re(this,g),h.apply(this,arguments)}return ve(g,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&this.getAttribute("set-webgl-viewport")!=="false"},set:function(y){y&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!y&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),g}(zd(function(){return document.createElement("canvas")},function(c,h,g){var v=g.width,y=g.height;if(h.setAttribute("width",v),h.setAttribute("height",y),c.setWebglViewport){var w=h.getContext("webgl");w.viewport(0,0,v,y)}})),xc=function(h){h.autoResize?k1(h):Hd(h)},k1=function(h){h.__autoResizeListener__==null&&(h.__autoResizeListener__=function(){return wc(h)},addEventListener("resize",h.__autoResizeListener__))},Hd=function(h){h.__autoResizeListener__!=null&&(removeEventListener("resize",h.__autoResizeListener__),h.__autoResizeListener__=null)},B1=function(c){Ie(g,c);var h=Oe(g);function g(){return re(this,g),h.apply(this,arguments)}return ve(g,[{key:"connectedCallback",value:function(){xc(this)}},{key:"disconnectedCallback",value:function(){Hd(this)}},{key:"requestRedraw",value:function(){wc(this)}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&this.getAttribute("auto-resize")!=="false"},set:function(y){y&&!this.autoResize?this.setAttribute("auto-resize",""):!y&&this.autoResize&&this.removeAttribute("auto-resize"),xc(this)}},{key:"attributeChangedCallback",value:function(y){switch(y){case"auto-resize":xc(this);break}}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),g}(_o(HTMLElement)),F1=zd(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(c,h,g){var v=g.width,y=g.height;h.setAttribute("viewBox","0 0 ".concat(v," ").concat(y))}),Ud="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",ua=document.createElement("style");if(ua.setAttribute("type","text/css"),document.querySelector("head").appendChild(ua),ua.styleSheet?ua.styleSheet.cssText+=Ud:ua.textContent+=Ud,(typeof customElements>"u"?"undefined":vo(customElements))!=="object"||typeof customElements.define!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Yd=[],Tc=function(h,g){customElements.get(h)?Yd.push(h):customElements.define(h,g)};Tc("d3fc-canvas",P1),Tc("d3fc-group",B1),Tc("d3fc-svg",F1),Yd.length>0;var V1=function(){var c=p.dispatch("point");function h(y){var w=u.pointer(y);c.call("point",this,[{x:w[0],y:w[1]}])}function g(){c.call("point",this,[])}var v=function(w){w.on("mouseenter.pointer",h).on("mousemove.pointer",h).on("mouseleave.pointer",g)};return A(v,c,"on"),v},W1=function(){var c="",h="vertical",g=function(b,_){return Number(b[_])},v=function(b){return Object.keys(b[0]).filter(function(_){return _!==c}).map(function(_){var T=b.filter(function(E){return E[_]}).map(function(E){var M=[E[c],g(E,_)];return M.data=E,M});return T.key=_,T})},y=function(b){return b.map(function(_){var T=Object.keys(_).filter(function(E){return E!==c}).map(function(E){var M=[E,g(_,E)];return M.data=_,M});return T.key=_[c],T})},w=function(b){return h==="vertical"?v(b):y(b)};return w.key=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],w):c},w.value=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},w.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w},Xd=function(){for(var c={},h=function(T){for(var E=0,M=Object.keys(c);E<M.length;E++){var L=M[E];T[L].apply(null,c[L])}return T},g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];for(var w=function(){var T=b[m];h[T]=function(){for(var E=arguments.length,M=new Array(E),L=0;L<E;L++)M[L]=arguments[L];return M.length?(c[T]=M,h):c[T]}},m=0,b=v;m<b.length;m++)w();return h},Gd=`d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}
d3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}
d3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}
d3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}
d3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}
d3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`,fa=document.createElement("style");fa.setAttribute("type","text/css"),document.querySelector("head").appendChild(fa),fa.styleSheet?fa.styleSheet.cssText+=Gd:fa.textContent+=Gd;var hn=function(h){return typeof h=="function"?h:function(){return h}},qd=function(){var c=$1.apply(void 0,arguments),h=c.xScale,g=c.yScale,v=c.xAxis,y=c.yAxis,w=hn(""),m=hn(""),b=hn(""),_=hn(null),T=hn(null),E=hn("right"),M=hn("bottom"),L=null,I=null,F=null,B=!1,V=!0,z=Xd("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),U=function(){},H=Xd("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),j=function(){},ae=function(){},we=qe("d3fc-group","cartesian-chart"),Se=qe("d3fc-canvas","webgl-plot-area"),ye=qe("d3fc-canvas","canvas-plot-area"),He=qe("d3fc-svg","svg-plot-area"),Bt=qe("d3fc-svg","x-axis").key(function(Gt){return Gt}),yn=qe("d3fc-svg","y-axis").key(function(Gt){return Gt}),Yn=qe("div","chart-label"),ha=qe("div","x-label").key(function(Gt){return Gt}),Ac=qe("div","y-label").key(function(Gt){return Gt}),Yr=function(Xn){return function(Nr){return Tt(Xn)?Nr.transition(Xn):Nr}},Ye=function(Xn){var Nr=Yr(Xn);Xn.each(function(Nt,Gn,da){var Ft=we(u.select(da[Gn]),[Nt]);Ft.enter().attr("auto-resize",""),Yn(Ft,[M(Nt)]).attr("class",function(Le){return Le==="top"?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(Le){return Le==="top"?0:"1em"}).style("margin-top",function(Le){return Le==="top"?"1em":0}).text(w(Nt)),ha(Ft,[M(Nt)]).attr("class",function(Le){return"x-label ".concat(Le,"-label")}).text(m(Nt)),Ac(Ft,[E(Nt)]).attr("class",function(Le){return"y-label ".concat(Le,"-label")}).text(b(Nt)),Se(Ft,L?[Nt]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",V).on("draw",function(Le,je){var ft=Le.detail,Vt=ft.child,Rn=ft.pixelRatio;L.context(B?null:Vt.getContext("webgl")).pixelRatio(Rn).xScale(h).yScale(g),L(je)}),Ft.select(".webgl-plot-area>canvas").on("webglcontextlost",function(Le){Le.preventDefault(),B=!0,Ft.node().requestRedraw()}).on("webglcontextrestored",function(){B=!1,Ft.node().requestRedraw()}),ye(Ft,I?[Nt]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",V).on("draw",function(Le,je){var ft=Le.detail,Vt=ft.child,Rn=ft.pixelRatio,Or=Vt.getContext("2d");Or.save(),V&&Or.scale(Rn,Rn),I.context(Or).xScale(h).yScale(g),I(je),Or.restore()}),He(Ft,F?[Nt]:[]).classed("plot-area",!0).on("draw",function(Le,je){var ft=Le.detail.child;F.xScale(h).yScale(g),Nr(u.select(ft).datum(je)).call(F)}),Bt(Ft,[M(Nt)]).attr("class",function(Le){return"x-axis ".concat(Le,"-axis")}).style("height",_(Nt)).on("measure",function(Le,je){var ft=Le.detail,Vt=ft.width,Rn=ft.height,Or=ft.child;je==="top"&&u.select(Or).attr("viewBox","0 ".concat(-Rn," ").concat(Vt," ").concat(Rn)),h.range([0,Vt])}).on("draw",function(Le,je){var ft=Le.detail.child,Vt=je==="top"?v.top(h):v.bottom(h);Vt.decorate(U),Nr(u.select(ft).datum(je)).call(z(Vt))}),yn(Ft,[E(Nt)]).attr("class",function(Le){return"y-axis ".concat(Le,"-axis")}).style("width",T(Nt)).on("measure",function(Le,je){var ft=Le.detail,Vt=ft.width,Rn=ft.height,Or=ft.child;je==="left"&&u.select(Or).attr("viewBox","".concat(-Vt," 0 ").concat(Vt," ").concat(Rn)),g.range([Rn,0])}).on("draw",function(Le,je){var ft=Le.detail.child,Vt=je==="left"?y.left(g):y.right(g);Vt.decorate(j),Nr(u.select(ft).datum(je)).call(H(Vt))}),Ft.each(function(Le,je,ft){return ft[je].requestRedraw()}),ae(Ft,Nt,Gn)})},pi=N(/range\w*/,/tickFormat/);return S(Ye,h,pi,X("x")),S(Ye,g,pi,X("y")),S(Ye,z,X("x")),S(Ye,H,X("y")),Ye.xOrient=function(){return arguments.length?(M=hn(arguments.length<=0?void 0:arguments[0]),Ye):M},Ye.yOrient=function(){return arguments.length?(E=hn(arguments.length<=0?void 0:arguments[0]),Ye):E},Ye.xDecorate=function(){return arguments.length?(U=arguments.length<=0?void 0:arguments[0],Ye):U},Ye.yDecorate=function(){return arguments.length?(j=arguments.length<=0?void 0:arguments[0],Ye):j},Ye.chartLabel=function(){return arguments.length?(w=hn(arguments.length<=0?void 0:arguments[0]),Ye):w},Ye.xLabel=function(){return arguments.length?(m=hn(arguments.length<=0?void 0:arguments[0]),Ye):m},Ye.yLabel=function(){return arguments.length?(b=hn(arguments.length<=0?void 0:arguments[0]),Ye):b},Ye.xAxisHeight=function(){return arguments.length?(_=hn(arguments.length<=0?void 0:arguments[0]),Ye):_},Ye.yAxisWidth=function(){return arguments.length?(T=hn(arguments.length<=0?void 0:arguments[0]),Ye):T},Ye.webglPlotArea=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],Ye):L},Ye.canvasPlotArea=function(){return arguments.length?(I=arguments.length<=0?void 0:arguments[0],Ye):I},Ye.svgPlotArea=function(){return arguments.length?(F=arguments.length<=0?void 0:arguments[0],Ye):F},Ye.decorate=function(){return arguments.length?(ae=arguments.length<=0?void 0:arguments[0],Ye):ae},Ye.useDevicePixelRatio=function(){return arguments.length?(V=arguments.length<=0?void 0:arguments[0],Ye):V},Ye},$1=function(){for(var h={xScale:i.scaleIdentity(),yScale:i.scaleIdentity(),xAxis:{bottom:Pd,top:Id},yAxis:{right:Bd,left:kd}},g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];return v.length===1&&!v[0].domain&&!v[0].range?Object.assign(h,v[0]):Object.assign(h,{xScale:v[0]||h.xScale,yScale:v[1]||h.yScale})},jd=function(h){return typeof h=="function"?h:function(){return h}},Jd=function(c,h){return function(){var g=jd(""),v=h,y=function(){},w=qd.apply(void 0,arguments),m=function(_){c(w,v),w.decorate(function(T,E,M){T.enter().select(".x-label").style("height","1em").style("line-height","1em");var L=w.yOrient()(E);T.enter().append("div").attr("class","y-label-container").style("grid-column",L==="left"?1:5).style("-ms-grid-column",L==="left"?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),T.select(".y-label-container>.y-label").text(g),y(T,E,M)}),_.call(w)};return S(m,w,k(/^x/,/^y/,"chartLabel")),m.yLabel=function(){return arguments.length?(g=jd(arguments.length<=0?void 0:arguments[0]),m):g},m.plotArea=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m}},z1=Jd(function(c,h){return c.svgPlotArea(h)},lc),H1=Jd(function(c,h){return c.canvasPlotArea(h)},cc),U1=function(h){switch(h){case"x":return x.brushX();case"y":return x.brushY();case"xy":return x.brush()}},Sc=function(h){return[h[1],h[0]]},Ec=function(h){var g=U1(h),v=p.dispatch("brush","start","end"),y=i.scaleIdentity(),w=i.scaleIdentity(),m=qe("g","brush"),b=function(B,V,z){switch(h){case"x":return B.map(V);case"y":return B.map(z);case"xy":return[[V(B[0][0]),z(B[0][1])],[V(B[1][0]),z(B[1][1])]]}},_=function(B){return b(B,i.scaleLinear().domain(y.range()).invert,i.scaleLinear().domain(Sc(w.range())).invert)},T=function(B){return b(B,i.scaleLinear().domain(y.range()),i.scaleLinear().domain(Sc(w.range())))},E=function(B){var V=i.scaleLinear().domain(y.domain());if(h==="x")return B.map(V.invert);if(h==="xy")return[V.invert(B[0][0]),V.invert(B[1][0])]},M=function(B){var V=i.scaleLinear().domain(Sc(w.domain()));if(h==="y")return[B[1],B[0]].map(V.invert);if(h==="xy")return[V.invert(B[1][1]),V.invert(B[0][1])]},L=function(B){if(!(B.sourceEvent&&B.sourceEvent.type==="draw"))if(B.selection){var V=T(B.selection);v.call(B.type,{},{selection:V,xDomain:E(V),yDomain:M(V)})}else v.call(B.type,{},{})},I=function(B){B.each(function(V,z,U){g.extent([[y.range()[0],w.range()[1]],[y.range()[1],w.range()[0]]]),g.on("end",function(j){return L(j)}).on("brush",function(j){return L(j)}).on("start",function(j){return L(j)});var H=m(u.select(U[z]),[V]);H.call(g).call(g.move,V?_(V):null)})};return I.xScale=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],I):y},I.yScale=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],I):w},A(I,v,"on"),A(I,g,"filter","handleSize"),I},Y1=function(){return Ec("x")},X1=function(){return Ec("y")},G1=function(){return Ec("xy")},Kd=function(h,g){if(h==null&&g==null)return!0;var v=h.domain(),y=g.domain();return v.length===y.length&&v.every(function(w,m){var b;return(w==null?void 0:w.valueOf())===((b=y[m])===null||b===void 0?void 0:b.valueOf())})},q1=function(h,g){return R.zoomIdentity.scale(h.k/g.k).translate(h.x-g.x,h.y-g.y)},Co=Symbol("d3fc-domain-zoom"),j1=function(){var c=p.dispatch("zoom"),h=R.zoom().on("zoom",function(v){var y=v.transform,w=this,m=y,b=w[Co],_=b.originalXScale,T=b.previousXScale,E=b.xScale,M=b.originalYScale,L=b.previousYScale,I=b.yScale,F=b.previousTransform;(!Kd(T,E)||!Kd(L,I))&&(_=E==null?void 0:E.copy(),M=I==null?void 0:I.copy(),m=q1(y,F)),E!=null&&(T=m.rescaleX(_.range(E.range())),E.domain(T.domain())),I!=null&&(L=m.rescaleY(M.range(I.range())),I.domain(L.domain())),F=m,w[Co]={originalXScale:_,previousXScale:T,xScale:E,originalYScale:M,previousYScale:L,yScale:I,previousTransform:F},m!==y&&h.transform(u.select(w),m),c.call("zoom",this,v)}),g=function(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;w==null&&m==null,y.each(function(b,_,T){var E=T[_][Co];E!=null&&E.xScale===w&&E.yScale;var M=w==null?void 0:w.copy(),L=m==null?void 0:m.copy();T[_][Co]={originalXScale:M,previousXScale:M,xScale:w,originalYScale:L,previousYScale:L,yScale:m,previousTransform:R.zoomIdentity}}).call(h)};return A(g,c,"on"),A(g,h,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate","scaleExtent","translateExtent"),g};n.annotationCanvasBand=h1,n.annotationCanvasCrosshair=g1,n.annotationCanvasGridline=p1,n.annotationCanvasLine=_c,n.annotationSvgBand=f1,n.annotationSvgCrosshair=d1,n.annotationSvgGridline=m1,n.annotationSvgLine=bc,n.autoBandwidth=l1,n.axisBottom=Pd,n.axisLabelOffset=S1,n.axisLabelRotate=T1,n.axisLeft=kd,n.axisOrdinalBottom=y1,n.axisOrdinalLeft=w1,n.axisOrdinalRight=x1,n.axisOrdinalTop=_1,n.axisRight=Bd,n.axisTop=Id,n.brush=G1,n.brushX=Y1,n.brushY=X1,n.bucket=wo,n.chartCanvasCartesian=H1,n.chartCartesian=qd,n.chartSvgCartesian=z1,n.dataJoin=qe,n.discontinuityIdentity=gh,n.discontinuityRange=$y,n.discontinuitySkipUtcWeekends=Wy,n.discontinuitySkipUtcWeeklyPattern=qy,n.discontinuitySkipWeekends=Vy,n.discontinuitySkipWeeklyPattern=Xy,n.effectivelyZero=ac,n.exclude=N,n.extentDate=wh,n.extentLinear=yh,n.extentTime=wh,n.feedGdax=Zy,n.group=W1,n.include=k,n.includeMap=W,n.indicatorBollingerBands=$,n.indicatorElderRay=By,n.indicatorEnvelope=ky,n.indicatorExponentialMovingAverage=te,n.indicatorForceIndex=Py,n.indicatorMacd=G,n.indicatorMovingAverage=dh,n.indicatorRelativeStrengthIndex=Ly,n.indicatorStochasticOscillator=Iy,n.isTransition=Tt,n.largestTriangleOneBucket=Qy,n.largestTriangleThreeBucket=ew,n.layoutAnnealing=lw,n.layoutBoundingBox=fw,n.layoutGreedy=ow,n.layoutLabel=nw,n.layoutRemoveOverlaps=uw,n.layoutTextLabel=rw,n.modeMedian=tw,n.pointer=V1,n.prefix=X,n.randomFinancial=Jy,n.randomGeometricBrownianMotion=xh,n.randomSkipWeekends=Ky,n.rebind=A,n.rebindAll=S,n.scaleDiscontinuous=mh,n.seriesCanvasArea=Yw,n.seriesCanvasBar=Vw,n.seriesCanvasBoxPlot=Kw,n.seriesCanvasCandlestick=qw,n.seriesCanvasErrorBar=zw,n.seriesCanvasGrouped=r1,n.seriesCanvasHeatmap=u1,n.seriesCanvasLine=cc,n.seriesCanvasMulti=vc,n.seriesCanvasOhlc=e1,n.seriesCanvasPoint=xd,n.seriesCanvasRepeat=a1,n.seriesSvgArea=Uw,n.seriesSvgBar=Fw,n.seriesSvgBoxPlot=Jw,n.seriesSvgCandlestick=Gw,n.seriesSvgErrorBar=$w,n.seriesSvgGrouped=n1,n.seriesSvgHeatmap=c1,n.seriesSvgLine=lc,n.seriesSvgMulti=pc,n.seriesSvgOhlc=Qw,n.seriesSvgPoint=wd,n.seriesSvgRepeat=i1,n.seriesWebglArea=Xw,n.seriesWebglBar=Ww,n.seriesWebglBoxPlot=Zw,n.seriesWebglCandlestick=jw,n.seriesWebglErrorBar=Hw,n.seriesWebglLine=yd,n.seriesWebglMulti=Ad,n.seriesWebglOhlc=t1,n.seriesWebglPoint=Bw,n.seriesWebglRepeat=o1,n.shapeBar=mi,n.shapeBoxPlot=nc,n.shapeCandlestick=tc,n.shapeErrorBar=rc,n.shapeOhlc=ec,n.webglAdjacentAttribute=Cr,n.webglAttribute=We,n.webglBaseAttribute=xo,n.webglBufferBuilder=Ch,n.webglElementIndices=Ur,n.webglFillColor=Pw,n.webglProgramBuilder=ur,n.webglScaleLinear=To,n.webglScaleLog=md,n.webglScaleMapper=Rr,n.webglScalePow=pd,n.webglSeriesArea=od,n.webglSeriesBar=fd,n.webglSeriesBoxPlot=gd,n.webglSeriesCandlestick=dd,n.webglSeriesErrorBar=hd,n.webglSeriesLine=cd,n.webglSeriesOhlc=ud,n.webglSeriesPoint=ld,n.webglShaderBuilder=nt,n.webglStrokeColor=kw,n.webglSymbolMapper=bd,n.webglTypes=Ge,n.webglUniform=_n,n.zoom=j1,Object.defineProperty(n,"__esModule",{value:!0})})}(Ea,Ea.exports)),Ea.exports}var Lt=Dk(),Ku="http://www.w3.org/1999/xhtml";const Mp={svg:"http://www.w3.org/2000/svg",xhtml:Ku,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j_(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Mp.hasOwnProperty(e)?{space:Mp[e],local:t}:t}function Lk(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ku&&e.documentElement.namespaceURI===Ku?e.createElement(t):e.createElementNS(n,t)}}function Ik(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function J_(t){var e=j_(t);return(e.local?Ik:Lk)(e)}function Pk(){}function K_(t){return t==null?Pk:function(){return this.querySelector(t)}}function kk(t){typeof t!="function"&&(t=K_(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,f=0;f<o;++f)(l=a[f])&&(u=t.call(l,l.__data__,f,a))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new kn(r,this._parents)}function Bk(){return[]}function Fk(t){return t==null?Bk:function(){return this.querySelectorAll(t)}}function Vk(t){typeof t!="function"&&(t=Fk(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new kn(r,i)}function Wk(t){return function(){return this.matches(t)}}function $k(t){typeof t!="function"&&(t=Wk(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new kn(r,this._parents)}function Z_(t){return new Array(t.length)}function zk(){return new kn(this._enter||this._groups.map(Z_),this._parents)}function ul(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ul.prototype={constructor:ul,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Hk(t){return function(){return t}}var Np="$";function Uk(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new ul(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function Yk(t,e,n,r,i,a,o){var s,l,u={},f=e.length,d=a.length,p=new Array(f),x;for(s=0;s<f;++s)(l=e[s])&&(p[s]=x=Np+o.call(l,l.__data__,s,e),x in u?i[s]=l:u[x]=l);for(s=0;s<d;++s)x=Np+o.call(t,a[s],s,a),(l=u[x])?(r[s]=l,l.__data__=a[s],u[x]=null):n[s]=new ul(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&u[p[s]]===l&&(i[s]=l)}function Xk(t,e){if(!t)return x=new Array(this.size()),u=-1,this.each(function(W){x[++u]=W}),x;var n=e?Yk:Uk,r=this._parents,i=this._groups;typeof t!="function"&&(t=Hk(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var f=r[u],d=i[u],p=d.length,x=t.call(f,f&&f.__data__,u,r),R=x.length,O=s[u]=new Array(R),A=o[u]=new Array(R),P=l[u]=new Array(p);n(f,d,O,A,P,x,e);for(var S=0,D=0,N,k;S<R;++S)if(N=O[S]){for(S>=D&&(D=S+1);!(k=A[D])&&++D<R;);N._next=k||null}}return o=new kn(o,r),o._enter=s,o._exit=l,o}function Gk(){return new kn(this._exit||this._groups.map(Z_),this._parents)}function qk(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function jk(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],f=l.length,d=o[s]=new Array(f),p,x=0;x<f;++x)(p=l[x]||u[x])&&(d[x]=p);for(;s<r;++s)o[s]=e[s];return new kn(o,this._parents)}function Jk(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Kk(t){t||(t=Zk);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(l[f]=u);l.sort(e)}return new kn(i,this._parents).order()}function Zk(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qk(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function e6(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function t6(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function n6(){var t=0;return this.each(function(){++t}),t}function r6(){return!this.node()}function i6(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function a6(t){return function(){this.removeAttribute(t)}}function o6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s6(t,e){return function(){this.setAttribute(t,e)}}function l6(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function c6(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function u6(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function f6(t,e){var n=j_(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?o6:a6:typeof e=="function"?n.local?u6:c6:n.local?l6:s6)(n,e))}function Q_(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function h6(t){return function(){this.style.removeProperty(t)}}function d6(t,e,n){return function(){this.style.setProperty(t,e,n)}}function g6(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function m6(t,e,n){return arguments.length>1?this.each((e==null?h6:typeof e=="function"?g6:d6)(t,e,n??"")):p6(this.node(),t)}function p6(t,e){return t.style.getPropertyValue(e)||Q_(t).getComputedStyle(t,null).getPropertyValue(e)}function v6(t){return function(){delete this[t]}}function b6(t,e){return function(){this[t]=e}}function _6(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function y6(t,e){return arguments.length>1?this.each((e==null?v6:typeof e=="function"?_6:b6)(t,e)):this.node()[t]}function ey(t){return t.trim().split(/^|\s+/)}function lh(t){return t.classList||new ty(t)}function ty(t){this._node=t,this._names=ey(t.getAttribute("class")||"")}ty.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ny(t,e){for(var n=lh(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ry(t,e){for(var n=lh(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function w6(t){return function(){ny(this,t)}}function x6(t){return function(){ry(this,t)}}function T6(t,e){return function(){(e.apply(this,arguments)?ny:ry)(this,t)}}function S6(t,e){var n=ey(t+"");if(arguments.length<2){for(var r=lh(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?T6:e?w6:x6)(n,e))}function E6(){this.textContent=""}function A6(t){return function(){this.textContent=t}}function C6(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function R6(t){return arguments.length?this.each(t==null?E6:(typeof t=="function"?C6:A6)(t)):this.node().textContent}function M6(){this.innerHTML=""}function N6(t){return function(){this.innerHTML=t}}function O6(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function D6(t){return arguments.length?this.each(t==null?M6:(typeof t=="function"?O6:N6)(t)):this.node().innerHTML}function L6(){this.nextSibling&&this.parentNode.appendChild(this)}function I6(){return this.each(L6)}function P6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function k6(){return this.each(P6)}function B6(t){var e=typeof t=="function"?t:J_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function F6(){return null}function V6(t,e){var n=typeof t=="function"?t:J_(t),r=e==null?F6:typeof e=="function"?e:K_(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function W6(){var t=this.parentNode;t&&t.removeChild(this)}function $6(){return this.each(W6)}function z6(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function H6(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function U6(t){return this.select(t?H6:z6)}function Y6(t){return arguments.length?this.property("__data__",t):this.node().__data__}var iy={},Ut=null;if(typeof document<"u"){var X6=document.documentElement;"onmouseenter"in X6||(iy={mouseenter:"mouseover",mouseleave:"mouseout"})}function G6(t,e,n){return t=ay(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function ay(t,e,n){return function(r){var i=Ut;Ut=r;try{t.call(this,this.__data__,e,n)}finally{Ut=i}}}function q6(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function j6(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function J6(t,e,n){var r=iy.hasOwnProperty(t.type)?G6:ay;return function(i,a,o){var s=this.__on,l,u=r(e,a,o);if(s){for(var f=0,d=s.length;f<d;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),l.value=e;return}}this.addEventListener(t.type,u,n),l={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(l):this.__on=[l]}}function K6(t,e,n){var r=q6(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?J6:j6,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function oy(t,e,n){var r=Q_(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Z6(t,e){return function(){return oy(this,t,e)}}function Q6(t,e){return function(){return oy(this,t,e.apply(this,arguments))}}function e3(t,e){return this.each((typeof e=="function"?Q6:Z6)(t,e))}var t3=[null];function kn(t,e){this._groups=t,this._parents=e}kn.prototype={constructor:kn,select:kk,selectAll:Vk,filter:$k,data:Xk,enter:zk,exit:Gk,join:qk,merge:jk,order:Jk,sort:Kk,call:Qk,nodes:e6,node:t6,size:n6,empty:r6,each:i6,attr:f6,style:m6,property:y6,classed:S6,text:R6,html:D6,raise:I6,lower:k6,append:B6,insert:V6,remove:$6,clone:U6,datum:Y6,on:K6,dispatch:e3};function Kl(t){return typeof t=="string"?new kn([[document.querySelector(t)]],[document.documentElement]):new kn([[t]],t3)}var n3=0;function Op(){this._="@"+(++n3).toString(36)}Op.prototype={constructor:Op,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var r3={value:function(){}};function sy(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ss(n)}function Ss(t){this._=t}function i3(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ss.prototype=sy.prototype={constructor:Ss,on:function(t,e){var n=this._,r=i3(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=a3(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Dp(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Dp(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ss(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function a3(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Dp(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=r3,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Zu="http://www.w3.org/1999/xhtml";const Lp={svg:"http://www.w3.org/2000/svg",xhtml:Zu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ly(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Lp.hasOwnProperty(e)?{space:Lp[e],local:t}:t}function o3(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Zu&&e.documentElement.namespaceURI===Zu?e.createElement(t):e.createElementNS(n,t)}}function s3(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function cy(t){var e=ly(t);return(e.local?s3:o3)(e)}function l3(){}function uy(t){return t==null?l3:function(){return this.querySelector(t)}}function c3(t){typeof t!="function"&&(t=uy(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,f=0;f<o;++f)(l=a[f])&&(u=t.call(l,l.__data__,f,a))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new Bn(r,this._parents)}function u3(){return[]}function f3(t){return t==null?u3:function(){return this.querySelectorAll(t)}}function h3(t){typeof t!="function"&&(t=f3(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new Bn(r,i)}function d3(t){return function(){return this.matches(t)}}function g3(t){typeof t!="function"&&(t=d3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new Bn(r,this._parents)}function fy(t){return new Array(t.length)}function m3(){return new Bn(this._enter||this._groups.map(fy),this._parents)}function fl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}fl.prototype={constructor:fl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function p3(t){return function(){return t}}var Ip="$";function v3(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new fl(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function b3(t,e,n,r,i,a,o){var s,l,u={},f=e.length,d=a.length,p=new Array(f),x;for(s=0;s<f;++s)(l=e[s])&&(p[s]=x=Ip+o.call(l,l.__data__,s,e),x in u?i[s]=l:u[x]=l);for(s=0;s<d;++s)x=Ip+o.call(t,a[s],s,a),(l=u[x])?(r[s]=l,l.__data__=a[s],u[x]=null):n[s]=new fl(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&u[p[s]]===l&&(i[s]=l)}function _3(t,e){if(!t)return x=new Array(this.size()),u=-1,this.each(function(W){x[++u]=W}),x;var n=e?b3:v3,r=this._parents,i=this._groups;typeof t!="function"&&(t=p3(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var f=r[u],d=i[u],p=d.length,x=t.call(f,f&&f.__data__,u,r),R=x.length,O=s[u]=new Array(R),A=o[u]=new Array(R),P=l[u]=new Array(p);n(f,d,O,A,P,x,e);for(var S=0,D=0,N,k;S<R;++S)if(N=O[S]){for(S>=D&&(D=S+1);!(k=A[D])&&++D<R;);N._next=k||null}}return o=new Bn(o,r),o._enter=s,o._exit=l,o}function y3(){return new Bn(this._exit||this._groups.map(fy),this._parents)}function w3(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function x3(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],f=l.length,d=o[s]=new Array(f),p,x=0;x<f;++x)(p=l[x]||u[x])&&(d[x]=p);for(;s<r;++s)o[s]=e[s];return new Bn(o,this._parents)}function T3(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function S3(t){t||(t=E3);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(l[f]=u);l.sort(e)}return new Bn(i,this._parents).order()}function E3(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function A3(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function C3(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function R3(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function M3(){var t=0;return this.each(function(){++t}),t}function N3(){return!this.node()}function O3(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function D3(t){return function(){this.removeAttribute(t)}}function L3(t){return function(){this.removeAttributeNS(t.space,t.local)}}function I3(t,e){return function(){this.setAttribute(t,e)}}function P3(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function k3(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function B3(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function F3(t,e){var n=ly(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?L3:D3:typeof e=="function"?n.local?B3:k3:n.local?P3:I3)(n,e))}function hy(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function V3(t){return function(){this.style.removeProperty(t)}}function W3(t,e,n){return function(){this.style.setProperty(t,e,n)}}function $3(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function z3(t,e,n){return arguments.length>1?this.each((e==null?V3:typeof e=="function"?$3:W3)(t,e,n??"")):H3(this.node(),t)}function H3(t,e){return t.style.getPropertyValue(e)||hy(t).getComputedStyle(t,null).getPropertyValue(e)}function U3(t){return function(){delete this[t]}}function Y3(t,e){return function(){this[t]=e}}function X3(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function G3(t,e){return arguments.length>1?this.each((e==null?U3:typeof e=="function"?X3:Y3)(t,e)):this.node()[t]}function dy(t){return t.trim().split(/^|\s+/)}function ch(t){return t.classList||new gy(t)}function gy(t){this._node=t,this._names=dy(t.getAttribute("class")||"")}gy.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function my(t,e){for(var n=ch(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function py(t,e){for(var n=ch(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function q3(t){return function(){my(this,t)}}function j3(t){return function(){py(this,t)}}function J3(t,e){return function(){(e.apply(this,arguments)?my:py)(this,t)}}function K3(t,e){var n=dy(t+"");if(arguments.length<2){for(var r=ch(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?J3:e?q3:j3)(n,e))}function Z3(){this.textContent=""}function Q3(t){return function(){this.textContent=t}}function eB(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function tB(t){return arguments.length?this.each(t==null?Z3:(typeof t=="function"?eB:Q3)(t)):this.node().textContent}function nB(){this.innerHTML=""}function rB(t){return function(){this.innerHTML=t}}function iB(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function aB(t){return arguments.length?this.each(t==null?nB:(typeof t=="function"?iB:rB)(t)):this.node().innerHTML}function oB(){this.nextSibling&&this.parentNode.appendChild(this)}function sB(){return this.each(oB)}function lB(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cB(){return this.each(lB)}function uB(t){var e=typeof t=="function"?t:cy(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function fB(){return null}function hB(t,e){var n=typeof t=="function"?t:cy(t),r=e==null?fB:typeof e=="function"?e:uy(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dB(){var t=this.parentNode;t&&t.removeChild(this)}function gB(){return this.each(dB)}function mB(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pB(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vB(t){return this.select(t?pB:mB)}function bB(t){return arguments.length?this.property("__data__",t):this.node().__data__}var vy={},lt=null;if(typeof document<"u"){var _B=document.documentElement;"onmouseenter"in _B||(vy={mouseenter:"mouseover",mouseleave:"mouseout"})}function yB(t,e,n){return t=by(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function by(t,e,n){return function(r){var i=lt;lt=r;try{t.call(this,this.__data__,e,n)}finally{lt=i}}}function wB(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function xB(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function TB(t,e,n){var r=vy.hasOwnProperty(t.type)?yB:by;return function(i,a,o){var s=this.__on,l,u=r(e,a,o);if(s){for(var f=0,d=s.length;f<d;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),l.value=e;return}}this.addEventListener(t.type,u,n),l={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(l):this.__on=[l]}}function SB(t,e,n){var r=wB(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?TB:xB,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Pp(t,e,n,r){var i=lt;t.sourceEvent=lt,lt=t;try{return e.apply(n,r)}finally{lt=i}}function _y(t,e,n){var r=hy(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function EB(t,e){return function(){return _y(this,t,e)}}function AB(t,e){return function(){return _y(this,t,e.apply(this,arguments))}}function CB(t,e){return this.each((typeof e=="function"?AB:EB)(t,e))}var RB=[null];function Bn(t,e){this._groups=t,this._parents=e}Bn.prototype={constructor:Bn,select:c3,selectAll:h3,filter:g3,data:_3,enter:m3,exit:y3,join:w3,merge:x3,order:T3,sort:S3,call:A3,nodes:C3,node:R3,size:M3,empty:N3,each:O3,attr:F3,style:z3,property:G3,classed:K3,text:tB,html:aB,raise:sB,lower:cB,append:uB,insert:hB,remove:gB,clone:vB,datum:bB,on:SB,dispatch:CB};function hl(t){return typeof t=="string"?new Bn([[document.querySelector(t)]],[document.documentElement]):new Bn([[t]],RB)}function yy(){for(var t=lt,e;e=t.sourceEvent;)t=e;return t}function wy(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function MB(t){var e=yy();return e.changedTouches&&(e=e.changedTouches[0]),wy(t,e)}function NB(t,e,n){arguments.length<3&&(n=e,e=yy().changedTouches);for(var r=0,i=e?e.length:0,a;r<i;++r)if((a=e[r]).identifier===n)return wy(t,a);return null}function iu(){lt.stopImmediatePropagation()}function Ci(){lt.preventDefault(),lt.stopImmediatePropagation()}function OB(t){var e=t.document.documentElement,n=hl(t).on("dragstart.drag",Ci,!0);"onselectstart"in e?n.on("selectstart.drag",Ci,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function DB(t,e){var n=t.document.documentElement,r=hl(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ci,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function fs(t){return function(){return t}}function Qu(t,e,n,r,i,a,o,s,l,u){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}Qu.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function LB(){return!lt.button}function IB(){return this.parentNode}function PB(t){return t??{x:lt.x,y:lt.y}}function kB(){return"ontouchstart"in this}function xy(){var t=LB,e=IB,n=PB,r=kB,i={},a=sy("start","drag","end"),o=0,s,l,u,f,d=0;function p(N){N.on("mousedown.drag",x).filter(r).on("touchstart.drag",A).on("touchmove.drag",P).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(){if(!(f||!t.apply(this,arguments))){var N=D("mouse",e.apply(this,arguments),MB,this,arguments);N&&(hl(lt.view).on("mousemove.drag",R,!0).on("mouseup.drag",O,!0),OB(lt.view),iu(),u=!1,s=lt.clientX,l=lt.clientY,N("start"))}}function R(){if(Ci(),!u){var N=lt.clientX-s,k=lt.clientY-l;u=N*N+k*k>d}i.mouse("drag")}function O(){hl(lt.view).on("mousemove.drag mouseup.drag",null),DB(lt.view,u),Ci(),i.mouse("end")}function A(){if(t.apply(this,arguments)){var N=lt.changedTouches,k=e.apply(this,arguments),W=N.length,Y,X;for(Y=0;Y<W;++Y)(X=D(N[Y].identifier,k,NB,this,arguments))&&(iu(),X("start"))}}function P(){var N=lt.changedTouches,k=N.length,W,Y;for(W=0;W<k;++W)(Y=i[N[W].identifier])&&(Ci(),Y("drag"))}function S(){var N=lt.changedTouches,k=N.length,W,Y;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),W=0;W<k;++W)(Y=i[N[W].identifier])&&(iu(),Y("end"))}function D(N,k,W,Y,X){var K=W(k,N),ie,ne,J,Z=a.copy();if(Pp(new Qu(p,"beforestart",ie,N,o,K[0],K[1],0,0,Z),function(){return(lt.subject=ie=n.apply(Y,X))==null?!1:(ne=ie.x-K[0]||0,J=ie.y-K[1]||0,!0)}))return function $(te){var G=K,oe;switch(te){case"start":i[N]=$,oe=o++;break;case"end":delete i[N],--o;case"drag":K=W(k,N),oe=o;break}Pp(new Qu(p,te,ie,N,oe,K[0]+ne,K[1]+J,K[0]-G[0],K[1]-G[1],Z),Z.apply,Z,[te,Y,X])}}return p.filter=function(N){return arguments.length?(t=typeof N=="function"?N:fs(!!N),p):t},p.container=function(N){return arguments.length?(e=typeof N=="function"?N:fs(N),p):e},p.subject=function(N){return arguments.length?(n=typeof N=="function"?N:fs(N),p):n},p.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:fs(!!N),p):r},p.on=function(){var N=a.on.apply(a,arguments);return N===a?p:N},p.clickDistance=function(N){return arguments.length?(d=(N=+N)*N,p):Math.sqrt(d)},p}var BB={value:function(){}};function Ty(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Es(n)}function Es(t){this._=t}function FB(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Es.prototype=Ty.prototype={constructor:Es,on:function(t,e){var n=this._,r=FB(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=VB(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=kp(n[i],t.name,e);else if(e==null)for(i in n)n[i]=kp(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Es(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function VB(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function kp(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=BB,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var WB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ia=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},aa=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gr=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},uh=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},fh=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},$B=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)},zB=function(){function t(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.nx,s=e.ny,l=e.dy,u=l===void 0?0:l,f=e.dx,d=f===void 0?0:f,p=e.color,x=p===void 0?"grey":p,R=e.data,O=e.type,A=e.subject,P=e.connector,S=e.note,D=e.disable,N=e.id,k=e.className;ia(this,t),this._dx=o!==void 0?o-r:d,this._dy=s!==void 0?s-a:u,this._x=r,this._y=a,this._color=x,this.id=N,this._className=k||"",this._type=O||"",this.data=R,this.note=S||{},this.connector=P||{},this.subject=A||{},this.disable=D||[]}return aa(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(n){this._className=n,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(n){this._type=n,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(n){this._x=n,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(n){this._color=n,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(n){this._dx=n,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(n){this._dy=n,this.updateOffset()}},{key:"nx",set:function(n){this._dx=n-this._x,this.updateOffset()}},{key:"ny",set:function(n){this._dy=n-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(n){var r=n.x,i=n.y;this._dx=r,this._dy=i,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(n){var r=n.x,i=n.y;this._x=r,this._y=i,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(n.data=this.data),this.type&&(n.type=this.type),this._className&&(n.className=this._className),Object.keys(this.connector).length>0&&(n.connector=this.connector),Object.keys(this.subject).length>0&&(n.subject=this.subject),Object.keys(this.note).length>0&&(n.note=this.note),n}}]),t}(),HB=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;ia(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return aa(t,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(r){r.type=void 0,r.subject=n&&n.subject||r.subject,r.connector=n&&n.connector||r.connector,r.note=n&&n.note||r.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(r){r.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.editMode=n,r.type.updateEditMode())})}},{key:"updateDisable",value:function(n){this.annotations.forEach(function(r){r.disable=n,r.type&&n.forEach(function(i){r.type[i]&&(r.type[i].remove&&r.type[i].remove(),r.type[i]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(r){r.type&&r.type.updateTextWrap&&r.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(n){n.type&&n.type.drawText&&n.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.notePadding=n)})}},{key:"json",get:function(){var n=this;return this.annotations.map(function(r){var i=r.json;return n.accessorsInverse&&r.data&&(i.data={},Object.keys(n.accessorsInverse).forEach(function(a){i.data[a]=n.accessorsInverse[a]({x:r.x,y:r.y})})),i})}},{key:"noteNodes",get:function(){return this.annotations.map(function(n){return vn({},n.type.getNoteBBoxOffset(),{positionX:n.x,positionY:n.y})})}}]),t}(),UB=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i;return{move:{x:r,y:a}}},YB=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r1,s=e.r2,l=e.padding,u={move:{x:r,y:a}};return o!==void 0&&(u.r1={x:r+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}),s!==void 0&&(u.r2={x:r+s/Math.sqrt(2),y:a+s/Math.sqrt(2)}),l!==void 0&&(u.padding={x:r+o+l,y:a}),u},XB=function(e){var n=e.group,r=e.handles,i=e.r,a=i===void 0?10:i,o=n.selectAll("circle.handle").data(r);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(xy().container(Kl("g.annotations").node()).on("start",function(s){return s.start&&s.start(s)}).on("drag",function(s){return s.drag&&s.drag(s)}).on("end",function(s){return s.end&&s.end(s)})),n.selectAll("circle.handle").attr("cx",function(s){return s.x}).attr("cy",function(s){return s.y}).attr("r",function(s){return s.r||a}).attr("class",function(s){return"handle "+(s.className||"")}),o.exit().remove()},Sy=function(e,n){return(e==="dynamic"||e==="left"||e==="right")&&(n<0?e="top":e="bottom"),e},Ey=function(e,n){return(e==="dynamic"||e==="top"||e==="bottom")&&(n<0?e="right":e="left"),e},GB=["topBottom","top","bottom"],qB=["leftRight","left","right"],jB=function(t){var e=t.padding,n=e===void 0?0:e,r=t.bbox,i=r===void 0?{x:0,width:0,height:0}:r,a=t.align,o=t.orientation,s=t.offset,l=s===void 0?{x:0,y:0}:s,u=-i.x,f=0;return GB.indexOf(o)!==-1?(a=Ey(a,l.x),l.y<0&&o==="topBottom"||o==="top"?f-=i.height+n:f+=n,a==="middle"?u-=i.width/2:a==="right"&&(u-=i.width)):qB.indexOf(o)!==-1&&(a=Sy(a,l.y),l.x<0&&o==="leftRight"||o==="left"?u-=i.width+n:u+=n,a==="middle"?f-=i.height/2:a==="top"&&(f-=i.height)),{x:u,y:f}},ir=function(e){var n=e.data,r=e.curve,i=r===void 0?po:r,a=e.canvasContext,o=e.className,s=e.classID,l=ql().curve(i),u={type:"path",className:o,classID:s,data:n};return a?(l.context(a),u.pathMethods=l):u.attrs={d:l(n)},u},dl=function(e){var n=e.data,r=e.canvasContext,i=e.className,a=e.classID,o={type:"path",className:i,classID:a,data:n},s=w_().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return r?(s.context(r),o.pathMethods=lineGen):o.attrs={d:s()},o},JB=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.bbox,s=t.offset;e=Sy(e,s.y),e==="top"?a-=o.height:e==="middle"&&(a-=o.height/2);var l=[[r,a],[r,a+o.height]];return{components:[ir({data:l,className:"note-line"})]}},KB=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.offset,s=t.bbox;e=Ey(e,o.x),e==="right"?r-=s.width:e==="middle"&&(r-=s.width/2);var l=[[r,a],[r+s.width,a]];return{components:[ir({data:l,className:"note-line"})]}},Ay=function(e){var n=e.type,r=e.subjectType,i=n.annotation,a=i.position,o=i.x-a.x,s=o+i.dx,l=i.y-a.y,u=l+i.dy,f=i.subject;if(r==="circle"&&(f.outerRadius||f.radius)){var d=Math.sqrt((o-s)*(o-s)+(l-u)*(l-u)),p=Math.asin(-u/d),x=f.outerRadius||f.radius+(f.radiusPadding||0);o=Math.abs(Math.cos(p)*x)*(s<0?-1:1),l=Math.abs(Math.sin(p)*x)*(u<0?-1:1)}if(r==="rect"){var R=f.width,O=f.height;(R>0&&i.dx>0||R<0&&i.dx<0)&&(Math.abs(R)>Math.abs(i.dx)?o=R/2:o=R),(O>0&&i.dy>0||O<0&&i.dy<0)&&(Math.abs(O)>Math.abs(i.dy)?l=O/2:l=O),o===R/2&&l===O/2&&(o=s,l=u)}return[[o,l],[s,u]]},ZB=function(t){var e=Ay(t);return{components:[ir({data:e,className:"connector"})]}},QB=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,s=r.y-i.y,l=s+r.dy,u=r.subject;if(n==="rect"){var f=u.width,d=u.height;(f>0&&r.dx>0||f<0&&r.dx<0)&&(Math.abs(f)>Math.abs(r.dx)?a=f/2:a=f),(d>0&&r.dy>0||d<0&&r.dy<0)&&(Math.abs(d)>Math.abs(r.dy)?s=d/2:s=d),a===f/2&&s===d/2&&(a=o,s=l)}var p=[[a,s],[o,l]],x=l-s,R=o-a,O=o,A=l,P=l<s&&o>a||o<a&&l>s?-1:1;if(Math.abs(R)<Math.abs(x)?(O=o,A=s+R*P):(A=l,O=a+x*P),n==="circle"&&(u.outerRadius||u.radius)){var S=(u.outerRadius||u.radius)+(u.radiusPadding||0),D=S/Math.sqrt(2);if(Math.abs(R)>D&&Math.abs(x)>D)a=D*(o<0?-1:1),s=D*(l<0?-1:1),p=[[a,s],[O,A],[o,l]];else if(Math.abs(R)>Math.abs(x)){var N=Math.asin(-l/S);a=Math.abs(Math.cos(N)*S)*(o<0?-1:1),p=[[a,l],[o,l]]}else{var k=Math.acos(o/S);s=Math.abs(Math.sin(k)*S)*(l<0?-1:1),p=[[o,s],[o,l]]}}else p=[[a,s],[O,A],[o,l]];return{components:[ir({data:p,className:"connector"})]}},e4=function(t){var e=t.type,n=t.connectorData,r=t.subjectType;n||(n={}),(!n.points||typeof n.points=="number")&&(n.points=t4(e.annotation.offset,n.points)),n.curve||(n.curve=W_);var i=[];if(e.editMode){var a=n.points.map(function(u,f){return vn({},UB({cx:u[0],cy:u[1]}),{index:f})}),o=function(f){n.points[f][0]+=Ut.dx,n.points[f][1]+=Ut.dy,e.redrawConnector()};i=e.mapHandles(a.map(function(u){return vn({},u.move,{drag:o.bind(e,u.index)})}))}var s=Ay({type:e,subjectType:r});s=[s[0]].concat($B(n.points),[s[1]]);var l=[ir({data:s,curve:n.curve,className:"connector"})];return{components:l,handles:i}},t4=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r={x:e.x/(n+1),y:e.y/(n+1)},i=[],a=1;a<=n;a++)i.push([r.x*a+a%2*20,r.y*a-a%2*20]);return i},n4=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,a=i===void 0?1:i,o=e.position;n?n=[-r[0]+n[0],-r[1]+n[1]]:n=[e.dx,e.dy],r||(r=[e.x-o.x,e.y-o.y]);var s=r[0],l=r[1],u=n[0],f=n[1],d=10*a,p=16/180*Math.PI,x=Math.atan(f/u);u<0&&(x+=Math.PI);var R=[[s,l],[Math.cos(x+p)*d+s,Math.sin(x+p)*d+l],[Math.cos(x-p)*d+s,Math.sin(x-p)*d+l],[s,l]];return{components:[ir({data:R,className:"connector-end connector-arrow",classID:"connector-end"})]}},r4=function(t){var e=t.line,n=t.scale,r=n===void 0?1:n,i=dl({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}},i4=function(t){var e=t.subjectData,n=t.type;!e.radius&&!e.outerRadius&&(e.radius=20);var r=[],i=dl({data:e,className:"subject"});if(n.editMode){var a=YB({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:e.radiusPadding}),o=function(u){var f=e[u]+Ut.dx*Math.sqrt(2);e[u]=f,n.redrawSubject(),n.redrawConnector()},s=[vn({},a.r1,{drag:o.bind(n,e.outerRadius!==void 0?"outerRadius":"radius")})];e.innerRadius&&s.push(vn({},a.r2,{drag:o.bind(n,"innerRadius")})),r=n.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},a4=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var r=[],i=e.width,a=e.height,o=[[0,0],[i,0],[i,a],[0,a],[0,0]],s=ir({data:o,className:"subject"});if(n.editMode){var l=function(){e.width=Ut.x,n.redrawSubject(),n.redrawConnector()},u=function(){e.height=Ut.y,n.redrawSubject(),n.redrawConnector()},f=[{x:i,y:a/2,drag:l.bind(n)},{x:i/2,y:a,drag:u.bind(n)}];r=n.mapHandles(f)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:r}},o4=function(t){var e=t.subjectData,n=t.type,r=n.annotation.position,i=(e.x1!==void 0?e.x1:r.x)-r.x,a=(e.x2!==void 0?e.x2:r.x)-r.x,o=(e.y1!==void 0?e.y1:r.y)-r.y,s=(e.y2!==void 0?e.y2:r.y)-r.y,l=[[i,o],[a,s]];return{components:[ir({data:l,className:"subject"})]}},s4=function(t){var e=t.subjectData,n=e===void 0?{}:e,r=t.type,i=r===void 0?{}:r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.typeSettings&&i.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var s=[],l=[],u=n.radius,f=u*.7,d=0,p=0,x=Math.sqrt(2)*u,R={xleftcorner:-u,xrightcorner:u,ytopcorner:-u,ybottomcorner:u,xleft:-x,xright:x,ytop:-x,ybottom:x};n.x&&!n.y?d=R["x"+n.x]:n.y&&!n.x?p=R["y"+n.y]:n.x&&n.y&&(d=R["x"+n.x+"corner"],p=R["y"+n.y+"corner"]);var O="translate("+d+", "+p+")",A=dl({className:"subject",data:{radius:u}});A.attrs.transform=O,A.attrs.fill=a.color,A.attrs["stroke-linecap"]="round",A.attrs["stroke-width"]="3px";var P=dl({className:"subject-ring",data:{outerRadius:u,innerRadius:f}});P.attrs.transform=O,P.attrs["stroke-width"]="3px",P.attrs.fill="white";var S=void 0;if(d&&p||!d&&!p)S=ir({className:"subject-pointer",data:[[0,0],[d||0,0],[0,p||0],[0,0]]});else if(d||p){var D=function(X){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return X&&X/Math.sqrt(2)/Math.sqrt(2)||K*u/Math.sqrt(2)};S=ir({className:"subject-pointer",data:[[0,0],[D(d),D(p)],[D(d,-1),D(p,-1)],[0,0]]})}if(S&&(S.attrs.fill=a.color,S.attrs["stroke-linecap"]="round",S.attrs["stroke-width"]="3px",l.push(S)),i.editMode){var N=function(){n.x=Ut.x<-u*2?"left":Ut.x>u*2?"right":void 0,n.y=Ut.y<-u*2?"top":Ut.y>u*2?"bottom":void 0,i.redrawSubject()},k={x:d*2,y:p*2,drag:N.bind(i)};!k.x&&!k.y&&(k.y=-u),s=i.mapHandles([k])}var W=void 0;return n.text&&(W={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:d,y:p}}),l.push(A),l.push(P),l.push(W),{components:l,handles:s}},Cy=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,a=e.dispatcher,o=e.notePadding,s=e.accessors;if(ia(this,t),this.a=n,this.note=r.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=a,a){var l=u4.bind(null,a,r);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=o!==void 0?o:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return aa(t,[{key:"init",value:function(n){this.annotation.x||this.mapX(n),this.annotation.y||this.mapY(n)}},{key:"mapY",value:function(n){n.y&&(this.annotation.y=n.y(this.annotation.data))}},{key:"mapX",value:function(n){n.x&&(this.annotation.x=n.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(n,r){var i=this;Array.isArray(r)||(r=[r]),r.filter(function(a){return a}).forEach(function(a){var o=a.type,s=a.className,l=a.attrs,u=a.handles,f=a.classID;if(o==="handle")XB({group:n,r:l&&l.r,handles:u});else{Kn(n,[i.annotation],o,s,f);for(var d=n.select(o+"."+(f||s)),p=Object.keys(l),x=[],R=d.node().attributes,O=R.length-1;O>=0;O--){var A=R[O].name;p.indexOf(A)===-1&&A!=="class"&&x.push(A)}p.forEach(function(P){P==="text"?d.text(l[P]):d.attr(P,l[P])}),x.forEach(function(P){return d.attr(P,null)})}})}},{key:"getNoteBBox",value:function(){return Fp(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var n=Fp(this.note,".annotation-note-content"),r=this.noteContent.attr("transform").split(/\(|\,|\)/g);return n.offsetCornerX=parseFloat(r[1])+this.annotation.dx,n.offsetCornerY=parseFloat(r[2])+this.annotation.dy,n.offsetX=this.annotation.dx,n.offsetY=this.annotation.dy,n}},{key:"drawSubject",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.subject,a=r.type,o={type:this,subjectData:i},s={};a==="circle"?s=i4(o):a==="rect"?s=a4(o):a==="threshold"?s=o4(o):a==="badge"&&(s=s4(o,this.annotation));var l=s,u=l.components,f=u===void 0?[]:u,d=l.handles,p=d===void 0?[]:d;return f.forEach(function(x){x&&x.attrs&&!x.attrs.stroke&&(x.attrs.stroke=n.annotation.color)}),this.editMode&&(p=p.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),f.push({type:"handle",handles:p})),f}},{key:"drawConnector",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.connector,a=i.type||r.type,o={type:this,connectorData:i};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var s={};a==="curve"?s=e4(o):a==="elbow"?s=QB(o):s=ZB(o);var l=s,u=l.components,f=u===void 0?[]:u,d=l.handles,p=d===void 0?[]:d,x=f[0];x&&(x.attrs.stroke=this.annotation.color,x.attrs.fill="none");var R=i.end||r.end,O={};if(R==="arrow"){var A=x.data[1],P=x.data[0],S=Math.sqrt(Math.pow(A[0]-P[0],2)+Math.pow(A[1]-P[1],2));S<5&&x.data[2]&&(A=x.data[2]),O=n4({annotation:this.annotation,start:A,end:P,scale:i.endScale})}else R==="dot"?O=r4({line:x,scale:i.endScale}):(!R||R==="none")&&this.connector&&this.connector.select(".connector-end").remove();return O.components&&(O.components.forEach(function(D){D.attrs.fill=n.annotation.color,D.attrs.stroke=n.annotation.color}),f=f.concat(O.components)),this.editMode&&p.length!==0&&f.push({type:"handle",handles:p}),f}},{key:"drawNote",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.note,a=i.align||r.align||"dynamic",o={bbox:r.bbox,align:a,offset:this.annotation.offset},s=i.lineType||r.lineType,l={};s==="vertical"?l=JB(o):s==="horizontal"&&(l=KB(o));var u=l,f=u.components,d=f===void 0?[]:f,p=u.handles,x=p===void 0?[]:p;if(d.forEach(function(P){P.attrs.stroke=n.annotation.color}),this.editMode){x=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),d.push({type:"handle",handles:x});var R=this.dragNote.bind(this),O=this.dragstarted.bind(this),A=this.dragended.bind(this);this.note.call(xy().container(Kl("g.annotations").node()).on("start",function(P){return O(P)}).on("drag",function(P){return R(P)}).on("end",function(P){return A(P)}))}else this.note.on("mousedown.drag",null);return d}},{key:"drawNoteContent",value:function(n){var r=this.annotation.note,i=r.padding!==void 0?r.padding:this.notePadding,a=r.orientation||n.orientation||"topBottom",o=r.lineType||n.lineType,s=r.align||n.align||"dynamic";o==="vertical"?a="leftRight":o==="horizontal"&&(a="topBottom");var l={padding:i,bbox:n.bbox,offset:this.annotation.offset,orientation:a,align:s},u=jB(l),f=u.x,d=u.y;return this.offsetCornerX=f+this.annotation.dx,this.offsetCornerY=d+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+f+", "+d+")"),[]}},{key:"drawOnScreen",value:function(n,r){return this.drawOnSVG(n,r)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function(n){n&&this.annotation.data&&(this.mapX(n),this.mapY(n)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){Ut.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var n=this.annotation.position;n.x+=Ut.dx,n.y+=Ut.dy,this.annotation.position=n}},{key:"dragNote",value:function(){var n=this.annotation.offset;n.x+=Ut.dx,n.y+=Ut.dy,this.annotation.offset=n}},{key:"mapHandles",value:function(n){var r=this;return n.map(function(i){return vn({},i,{start:r.dragstarted.bind(r),end:r.dragended.bind(r)})})}}]),t}(),$r=function(e,n,r){return function(i){uh(a,i);function a(o){ia(this,a);var s=fh(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return s.typeSettings=n,n.disable&&n.disable.forEach(function(l){s[l]&&s[l].remove(),s[l]=void 0,l==="note"&&(s.noteContent=void 0)}),s}return aa(a,[{key:"className",value:function(){return""+(n.className||gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this)&&gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(s){return this.typeSettings.subject=vn({},n.subject,this.typeSettings.subject),gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawSubject",this).call(this,vn({},s,this.typeSettings.subject))}},{key:"drawConnector",value:function(s){return this.typeSettings.connector=vn({},n.connector,this.typeSettings.connector),gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawConnector",this).call(this,vn({},s,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(s){return this.typeSettings.note=vn({},n.note,this.typeSettings.note),gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNote",this).call(this,vn({},s,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(s){return gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNoteContent",this).call(this,vn({},s,n.note,this.typeSettings.note))}}],[{key:"init",value:function(s,l){return gr(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,s,l),r&&(s=r(s,l)),s}}]),a}(e)},Zl=function(t){uh(e,t);function e(n){ia(this,e);var r=fh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.textWrap=n.textWrap||120,r.drawText(),r}return aa(e,[{key:"updateTextWrap",value:function(r){this.textWrap=r,this.drawText()}},{key:"drawText",value:function(){if(this.note){Kn(this.note,[this.annotation],"g","annotation-note-content");var r=this.note.select("g.annotation-note-content");Kn(r,[this.annotation],"rect","annotation-note-bg"),Kn(r,[this.annotation],"text","annotation-note-label"),Kn(r,[this.annotation],"text","annotation-note-title");var i={height:0},a=this.a.select("text.annotation-note-label"),o=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,s=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,l=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,u={top:0,bottom:0,left:0,right:0};if(typeof l=="number"?u={top:l,bottom:l,left:l,right:l}:l&&(typeof l>"u"?"undefined":WB(l))==="object"&&(u=vn(u,l)),this.annotation.note.title){var f=this.a.select("text.annotation-note-title");f.text(this.annotation.note.title),f.attr("fill",this.annotation.color),f.attr("font-weight","bold"),f.call(Bp,o,s),i=f.node().getBBox()}a.text(this.annotation.note.label).attr("dx","0"),a.call(Bp,o,s),a.attr("y",i.height*1.1||0),a.attr("fill",this.annotation.color);var d=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",d.width+u.left+u.right).attr("height",d.height+u.top+u.bottom).attr("x",d.x-u.left).attr("y",-u.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(Cy);$r(Zl,{className:"label",note:{align:"middle"}});var Ql=$r(Zl,{className:"callout",note:{lineType:"horizontal"}});$r(Ql,{className:"callout elbow",connector:{type:"elbow"}});$r(Ql,{className:"callout curve",connector:{type:"curve"}});$r(Cy,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});$r(Zl,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});$r(Zl,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var l4=function(t){uh(e,t);function e(){return ia(this,e),fh(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return aa(e,[{key:"mapY",value:function(r){gr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,r);var i=this.annotation;(i.subject.x1||i.subject.x2)&&i.data&&r.y&&(i.y=r.y(i.data)),(i.subject.x1||i.subject.x2)&&!i.x&&(i.x=i.subject.x1||i.subject.x2)}},{key:"mapX",value:function(r){gr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,r);var i=this.annotation;(i.subject.y1||i.subject.y2)&&i.data&&r.x&&(i.x=r.x(i.data)),(i.subject.y1||i.subject.y2)&&!i.y&&(i.y=i.subject.y1||i.subject.y2)}}]),e}(Ql),c4=$r(l4,{className:"callout xythreshold",subject:{type:"threshold"}}),Kn=function(e,n,r,i,a){var o=e.selectAll(r+"."+(a||i)).data(n);return o.enter().append(r).merge(o).attr("class",i),o.exit().remove(),e},u4=function(e,n,r){var i=r.component,a=r.name;i&&i.on("mouseover.annotations",function(){e.call(a+"over",i,n)}).on("mouseout.annotations",function(){return e.call(a+"out",i,n)}).on("click.annotations",function(){return e.call(a+"click",i,n)})},Bp=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;e.each(function(){for(var a=Kl(this),o=a.text().split(r||/[ \t\r\n]+/).reverse().filter(function(f){return f!==""}),s=void 0,l=[],u=a.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");s=o.pop();)l.push(s),u.text(l.join(" ")),u.node().getComputedTextLength()>n&&l.length>1&&(l.pop(),u.text(l.join(" ")),l=[s],u=a.append("tspan").attr("x",0).attr("dy",i+"em").text(s))})},Fp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return e?e.selectAll(n).nodes().reduce(function(r,i){var a=i.getBBox();r.x=Math.min(r.x,a.x),r.y=Math.min(r.y,a.y),r.width=Math.max(r.width,a.width);var o=i&&i.attributes&&i.attributes.y;return r.height=Math.max(r.height,(o&&parseFloat(o.value)||0)+a.height),r},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function f4(){var t=[],e=void 0,n=void 0,r=[],i={},a={},o=!1,s=void 0,l=Ql,u=void 0,f=void 0,d=Ty("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),p=void 0,x=function(O){p=O,o||O.selectAll("circle.handle").remove();var A=t.map(function(N){return N.type||(N.type=l),N.disable||(N.disable=r),new zB(N)});e=e||new HB({annotations:A,accessors:i,accessorsInverse:a,ids:s});var P=O.selectAll("g").data([e]);P.enter().append("g").attr("class","annotations");var S=O.select("g.annotations");Kn(S,e.annotations,"g","annotation");var D=S.selectAll("g.annotation");D.each(function(N){var k=Kl(this);k.attr("class","annotation"),Kn(k,[N],"g","annotation-connector"),Kn(k,[N],"g","annotation-subject"),Kn(k,[N],"g","annotation-note"),Kn(k.select("g.annotation-note"),[N],"g","annotation-note-content"),N.type=N.type.toString()==="[object Object]"?N.type:new N.type({a:k,annotation:N,textWrap:u,notePadding:f,editMode:o,dispatcher:d,accessors:i}),N.type.draw(),N.type.drawText&&N.type.drawText()})};return x.json=function(){return window.copy(JSON.stringify(e.json.map(function(R){return delete R.type,R}))),x},x.update=function(){return t&&e&&(t=e.annotations.map(function(R){return R.type.draw(),R})),x},x.updateText=function(){return e&&(e.updateText(u),t=e.annotations),x},x.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,x},x.disable=function(R){return arguments.length?(r=R,e&&(e.updateDisable(r),t=e.annotations),x):r},x.textWrap=function(R){return arguments.length?(u=R,e&&(e.updateTextWrap(u),t=e.annotations),x):u},x.notePadding=function(R){return arguments.length?(f=R,e&&(e.updateNotePadding(f),t=e.annotations),x):f},x.type=function(R,O){return arguments.length?(l=R,e&&(e.annotations.map(function(A){A.type.note&&A.type.note.selectAll("*:not(.annotation-note-content)").remove(),A.type.noteContent&&A.type.noteContent.selectAll("*").remove(),A.type.subject&&A.type.subject.selectAll("*").remove(),A.type.connector&&A.type.connector.selectAll("*").remove(),A.type.typeSettings={},A.type=l,A.subject=O&&O.subject||A.subject,A.connector=O&&O.connector||A.connector,A.note=O&&O.note||A.note}),t=e.annotations),x):l},x.annotations=function(R){if(!arguments.length)return e&&e.annotations||t;if(t=R,e&&e.annotations){var O=t.some(function(A){return!A.type||A.type.toString()!=="[object Object]"});O?(e=null,x(p)):e.annotations=t}return x},x.context=function(R){return arguments.length?(n=R,x):n},x.accessors=function(R){return arguments.length?(i=R,x):i},x.accessorsInverse=function(R){return arguments.length?(a=R,x):a},x.ids=function(R){return arguments.length?(s=R,x):s},x.editMode=function(R){return arguments.length?(o=R,p&&p.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),x):o},x.collection=function(R){return arguments.length?(e=R,x):e},x.on=function(){var R=d.on.apply(d,arguments);return R===d?x:R},x}function h4(){const t=f4();let e=tr(),n=tr();const r=Lt.dataJoin("g","annotation"),i=a=>{a.each((o,s,l)=>{const u=o.map(f=>({...f,x:e(f.x),y:n(f.y)}));t.annotations(u),r(Ht(l[s]),u).call(t)})};return i.xScale=(...a)=>a.length?(e=a[0],i):e,i.yScale=(...a)=>a.length?(n=a[0],i):n,Lt.rebindAll(i,t),i}const d4=(t,e,n)=>{const r=e[n];if(typeof r!="function")throw new Error(`Attempt to rebind ${n} which isn't a function on the source object`);return(...i)=>{var a=r.apply(e,i);return a===e?t:a}},g4=t=>e=>t.reduce((n,r)=>n&&r(n),e),m4=(t,e,...n)=>{const r=g4(n);for(const i of Object.keys(e)){const a=r(i);a&&(t[a]=d4(t,e,i))}return t},p4=t=>t.map(e=>typeof e=="string"?new RegExp(`^${e}$`):e),v4=(...t)=>(t=p4(t),e=>t.every(n=>!n.test(e))&&e),b4=t=>t,Ry=(t,e,n,r)=>t[e]?t[e].apply(t,n):r,_4=t=>t.tickValues()??Ry(t.scale(),"ticks",t.tickArguments(),t.scale().domain()),y4=t=>t.tickFormat()??Ry(t.scale(),"tickFormat",t.tickArguments(),b4),w4=t=>n=>{const r=_4(t),i=y4(t),a=r.map(i),o=n.append("text"),s=a.map(f=>o.text(f).node().getBBox()),l=Math.max(...s.map(f=>f.height)),u=Math.max(...s.map(f=>f.width));return o.remove(),{maxHeight:l,maxWidth:u,labelCount:a.length}},Vp=t=>{let e=o=>{},n=null;const r=()=>t.orient()==="left"||t.orient()==="right",i=o=>{const{maxHeight:s,maxWidth:l,labelCount:u}=w4(t)(o),f=r(),d=t.scale().range()[f?0:1],p=Math.floor((f?s:l)*u/d)+1;o.select("text").attr("visibility",(x,R)=>R%p===0?"visible":"hidden"),n&&f&&n.yAxisWidth(`max(${Math.ceil(l)+10+2}px, 3rem)`)},a=o=>t(o);return t.decorate(o=>{i(o),e(o)}),a.decorate=(...o)=>o.length?(e=o[0],a):e,a.series=(...o)=>o.length?(n=o[0],a):n,m4(a,t,v4("decorate","series")),a},Lr=class Lr extends Ki{constructor(){super(...arguments),this.containerRef=Jr(),this.annotations=[],this.resizeOserver=new ResizeObserver(e=>{this.redraw()})}getCSSColor(e){var n;if(Lr.cssColors!==void 0)return((n=Br(Lr.cssColors.getPropertyValue(e)))==null?void 0:n.rgb())??void 0}getWebGLColor(e){const n=typeof e=="string"?this.getCSSColor(e):e;if(n!==void 0)return[n.r/255,n.g/255,n.b/255,n.opacity]}getColor(e){const n=[1,0,0,1];if(this.props.plotData===void 0)return n;const r=this.props.plotData.length;let i;if(r<=8)i=["#00E58D","#0093E5","#E56000","#007F8C","#159500","#DE1135","#9E1FDA","#E59700"][e];else if(r<=10)i=Ub[e];else{const a=e/(r-1)*.96+.04;i=b_(a)}return this.getWebGLColor(si(i))??n}redraw(){Ht(this.containerRef.current).datum({annotations:this.annotations,data:this.props.plotData}).call(this.series),Ht(this.containerRef.current).select("rect.annotation-note-bg").attr("rx",2).attr("ry",2)}_webglMapping(e,n,r){return e.data[n]}_svgMapping(e,n,r){return e.annotations}_createSvgSeries(){return[]}_findClosestPoint(e,n){return null}_annotationData(e){return null}_addAnnotation(e){if(!e){this.redraw();return}const n=this._annotationData(e);if(!n){this.redraw();return}const r=this.xScale.domain(),i=this.yScale.domain(),a=this.yScale.range(),o=Math.max(Math.min(n.x,r[1]),r[0]),s=o<(r[1]+r[0])/2?1:-1,l=Math.max(Math.min(n.y,i[1]),i[0]);this.annotations.push({x:o,y:l,dx:s*20,dy:(l-i[0])/(i[1]-i[0])>=.5?15:-15,note:{title:n.title,label:n.note,wrapSplitter:`
`,bgPadding:5},subject:{y1:a[0],y2:a[1]}}),this.redraw()}_createPointer(){return Lt.pointer().on("point",([e])=>{if(this.annotations.pop(),!e){this.redraw();return}const n=this.xScale.invert(e.x),r=this.yScale.invert(e.y),i=this._findClosestPoint(n,r);this._addAnnotation(i)})}_createZoom(){let e=!1,n=1,r,i;return y_().on("zoom",a=>{r=a.transform.rescaleX(this.xScaleBase).domain(),i=a.transform.rescaleY(this.yScaleBase).domain();const o=a.transform.k,s=this.xScale.domain(),l=this.yScale.domain();r[0]<this._xScaleInitial.domain()[0]&&(r[0]=this._xScaleInitial.domain()[0],e=!0,n===o&&(r[1]=r[0]+(s[1]-s[0]))),i[0]<this._yScaleInitial.domain()[0]&&(i[0]=this._yScaleInitial.domain()[0],e=!0,n===o&&(i[1]=i[0]+(l[1]-l[0]))),i[1]>this._yScaleInitial.domain()[1]&&(i[1]=this._yScaleInitial.domain()[1],e=!0,n===o&&(i[0]=i[1]-(l[1]-l[0]))),this.xScale.domain(r),this.yScale.domain(i),n=o,this.redraw()}).on("end",a=>{e&&(this.xScaleBase.domain(r),this.yScaleBase.domain(i),this.d3fcSvgNode.__zoom=new Ln(1,0,0)),this.redraw(),this.props.onZoomEnd&&this.props.onZoomEnd()})}setScale({xDomain:e,yDomain:n}){e&&this.xScale.domain(e),n&&this.yScale.domain(n),(e||n)&&(this.xScaleBase.domain(this.xScale.domain()),this.yScaleBase.domain(this.yScale.domain()),this.d3fcSvgNode.__zoom=new Ln(1,0,0),this.redraw())}_createAnnotations(){return h4().notePadding(15).type(c4)}_xLabel(){return null}_yLabel(){return null}_createSeries(){const e=this._createZoom(),n=this._createPointer();this.series=Lt.chartCartesian({xScale:this.xScale,yScale:this.yScale,xAxis:{bottom:s=>Vp(Lt.axisBottom(s))},yAxis:{left:s=>Vp(Lt.axisLeft(s)).series(this.series)}}).yOrient("left").xTickFormat(s=>s).decorate(s=>{const l=s.enter().select("d3fc-svg.plot-area").on("measure.range",u=>{this.xScaleBase.range([0,u.detail.width]),this.yScaleBase.range([u.detail.height,0])});e&&l.call(e),n&&l.call(n)});const r=this._xLabel();r&&this.series.xLabel(r);const i=this._yLabel();i&&this.series.yLabel(i);const a=this._createWebglSeries();a.length>0&&this.series.webglPlotArea(Lt.seriesWebglMulti().series(a).mapping(this._webglMapping.bind(this)));const o=this._createSvgSeries().concat(this._createAnnotations());o.length>0&&this.series.svgPlotArea(Lt.seriesSvgMulti().series(o).mapping(this._svgMapping.bind(this)))}createChart(){this.containerRef.current!==void 0&&(this.xScale=this._createXScale(),this.yScale=this._createYScale(),this.xScaleBase=this.xScale.copy(),this.yScaleBase=this.yScale.copy(),this._xScaleInitial=this.xScale.copy(),this._yScaleInitial=this.yScale.copy(),this._createSeries(),this.redraw())}originalDomain(){return{xDomain:this._xScaleInitial.domain(),yDomain:this._yScaleInitial.domain()}}componentDidMount(){var e;Lr.cssColors??(Lr.cssColors=window.getComputedStyle(document.documentElement)),this.createChart();for(const n of((e=this.containerRef.current)==null?void 0:e.getElementsByClassName("svg-plot-area"))??[])if(n.tagName==="D3FC-SVG"){this.d3fcSvgNode=n;break}}componentDidUpdate(){this.createChart()}componentWillUnmount(){var e;(e=this.containerRef.current)==null||e.remove()}render(){Mt(()=>(this.containerRef.current!==null&&this.resizeOserver.observe(this.containerRef.current),()=>this.resizeOserver.disconnect()),[]);const e={width:"100%",height:"100%"};return C("div",{ref:this.containerRef,style:e})}};Lr.cssColors=void 0;let ef=Lr;class My extends ef{_createPointer(){return Lt.pointer().on("point",([e])=>{if(!e){Jn.set(null);return}const n=this.xScale.invert(e.x),r=this.yScale.invert(e.y),[i,a]=this.yScale.domain();Jn.set({x:n,yProc:(r-i)/(a-i)})})}render(){return Jn.subscribe(()=>{this.annotations.pop();const e=Jn.get();if(!e){this.redraw();return}const{x:n,yProc:r}=e,[i,a]=this.yScale.domain(),o=this._findClosestPoint(n,i+(a-i)*r);this._addAnnotation(o)}),super.render()}}class hh extends My{_annotationNote(e){return{title:"Data",note:`X ${this._xAccess(e).toFixed(2)}
Y ${this._yAccess(e).toFixed(2)}
`}}_createXScale(){return tr().domain(Lt.extentLinear().include([0]).accessors([e=>this._xAccess(e)])(this.props.plotData.flat()))}_createYScale(){return tr().domain(Lt.extentLinear().accessors([e=>this._yAccess(e)])(this.props.plotData.flat()))}_findClosestPoint(e,n){const r=this.props.plotData.map(f=>Ou(f,d=>Math.abs(this._xAccess(d)-e))).filter(Boolean),[i,a]=this._xScaleInitial.domain(),o=f=>(f-i)/(a-i),[s,l]=this._yScaleInitial.domain(),u=f=>(f-s)/(l-s);return Ou(r,f=>{const[d,p]=[this._xAccess(f),this._yAccess(f)];return(o(d)-o(e))**2+(u(p)-u(n))**2})}_annotationData(e){const n=this._xAccess(e),r=this._yAccess(e);return{x:n,y:r,...this._annotationNote(e)}}_createWebglSeries(){const e=n=>Lt.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(r=>this._xAccess(r)).mainValue(r=>this._yAccess(r)).lineWidth(1.5).defined(()=>!0).decorate((r,i)=>{Lt.webglStrokeColor().value(a=>n).data(i)(r)});return this.props.plotData.map((n,r)=>e(this.getColor(r)))}}class x4 extends hh{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.cpu_load/10}_createYScale(){return tr().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Load [%]"}_annotationNote(e){return{title:"CPU Load",note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Load ${this._yAccess(e).toFixed(2)}%
`}}}const T4=_t(({fullData:t})=>C(Qi,{children:C(x4,{plotData:[t]})}));Xi(T4,"CPU Load",{dataProvider:FA,additionalProps:{contentClassName:vl,minWidth:150,minHeight:150}});function S4(){const t=bn.get(),e=new Map;if((t??[]).filter(n=>n.name===OA).forEach(n=>{n.args.die_temp.forEach((r,i)=>{var a;e.get(i)===void 0&&e.set(i,[]),(a=e.get(i))==null||a.push({ts:+n.ts.toFixed(3),temp:r,sensor:`die-temp${i}`})})}),e.size!==0)return e.forEach((n,r)=>{const i=new Set(n.map(a=>a.temp));i.size===1&&i.values().next().value===null&&e.delete(r)}),{fullData:Array.from(e.values())}}class E4 extends hh{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.temp}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Temperature [℃]"}_annotationNote(e){const n=this._yAccess(e),r=n?`${n.toFixed(2)}℃`:"not provided";return{title:e.sensor,note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Temp ${r}
`}}}const A4=_t(({fullData:t})=>C(Qi,{children:C(E4,{plotData:t})}));Xi(A4,"DIE temperature",{dataProvider:S4,additionalProps:{contentClassName:vl,minHeight:150,minWidth:150}});const C4="_title_1nq10_115",R4="_selected_1nq10_122",M4="_legend_1nq10_128",N4="_square_1nq10_140",O4="_divider_1nq10_172",mn={"ram-overview-content":"_ram-overview-content_1nq10_82","ram-overview-selectors":"_ram-overview-selectors_1nq10_91","range-selector":"_range-selector_1nq10_101",title:C4,selected:R4,legend:M4,square:N4,"memory-usage-content":"_memory-usage-content_1nq10_145","memory-usage-legend":"_memory-usage-legend_1nq10_152",divider:O4};class D4 extends hh{_xAccess(e){return e.ts}_yAccess(e){return e.percentage}_createYScale(){return tr().domain([0,100])}_annotationNote(e){return{title:this.props.memoryNameFunc(e.address,!1,!1),note:`Timestamp: ${e.ts.toFixed(2)} ms
Used: ${e.used} B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused} B
Size: ${e.used+e.unused} B`}}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Usage [%]"}constructor(e){super(e)}}class L4 extends My{_createXScale(){return tr().domain(Lt.extentLinear().include([0]).accessors([e=>e.ts])(this.props.plotData.flat()))}_createYScale(){return tr().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return`Usage [%] (${this.props.totalMemory} B total)`}_webglMapping(e,n){if(n>=e.data.length){const r=Object.values(this.props.addrToRange)[n%e.data.length][0];return[{ts:this._xScaleInitial.domain()[0],base:r},{ts:this._xScaleInitial.domain()[1],base:r}]}return e.data[n]}_createWebglSeries(){const e=i=>Lt.seriesWebglArea().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).baseValue(a=>a.base/this.props.totalMemory*100).mainValue(a=>(a.base+a.used)/this.props.totalMemory*100).defined(()=>!0).decorate((a,o)=>{Lt.webglFillColor().value(s=>typeof i=="string"?this.getWebGLColor(i)??[1,0,0,1]:i).data(o)(a)}),n=i=>Lt.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).mainValue(a=>a.base).lineWidth(1.5).defined(()=>!0).decorate((a,o)=>{Lt.webglStrokeColor().value(s=>this.getWebGLColor(i)??[1,0,0,1]).data(o)(a)}),r={0:"--colors-lime",1:"--colors-orange"};return this.props.plotData.map((i,a)=>e(a in r?r[a]:"--colors-red")).concat(Object.values(this.props.addrToRange).map(i=>n("--colors-black")))}_findClosestPoint(e,n){let r=-1;if(n<this.props.assignedMemory/this.props.totalMemory*100?r=1:n>=this._yScaleInitial.domain()[1]?r=this.props.plotData.length-1:(r=Object.values(this.props.addrToRange).findIndex(l=>l[0]<=n&&n<l[1]),r+=2),r===-1)return null;const i=this.props.plotData[r],a=co(l=>l.ts).left(i,e),o=i[a===0?a:a-1],s=i[a>=i.length?i.length-1:a];return e-o.ts>s.ts-e?s:o}_annotationData(e){return{x:e.ts,y:(e.base+e.used)/this.props.totalMemory*100,title:e.address!==-1?this.props.memoryNameFunc(e.address,!1,!1):"Statically allocated memory",note:(e.address!==-1?`Timestamp: ${e.ts.toFixed(2)} ms
Used: ${e.used} B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused} B
`:"")+`Size: ${e.used+e.unused} B`}}}function Ny(t){return`0x${t.toString(16)}`}const Wp=_t(t=>{const e=Te(null),n=[];return t.percent&&n.push(`${t.percent.toFixed(2)}%`),t.addr&&n.push(Ny(t.addr)),C("button",{ref:e,className:mn["range-selector"]+" "+(t.additionalClass??""),onClick:r=>{t.onClick(r),t.selectButton(e)},children:[C("span",{className:mn.title,children:t.name}),n.length>0?C("span",{children:n.join(", ")}):void 0]})}),I4=_t(({assignedMemory:t,addrToRange:e,addrToProps:n,plotData:r,totalMemory:i,memoryRegionName:a})=>{const o=Te(),s=Te(null),l=d=>{const p=o.current;p!==void 0&&p.setScale({yDomain:e[d]})},u=d=>{var p;f(),(p=d.current)==null||p.classList.add(mn.selected)},f=()=>{var p;const d=mn.selected;for(const x of((p=s.current)==null?void 0:p.getElementsByClassName(d))??[])x.classList.remove(d)};return C(Qi,{children:[C("div",{className:mn["ram-overview-content"],children:[C(L4,{ref:o,plotData:r,addrToRange:e,assignedMemory:t,totalMemory:i,memoryNameFunc:a,onZoomEnd:()=>f()}),C("div",{ref:s,className:mn["ram-overview-selectors"],children:[C(Wp,{name:"whole graph",percent:100,onClick:()=>{var d,p;(p=o.current)==null||p.setScale(((d=o.current)==null?void 0:d.originalDomain())??{})},selectButton:u,additionalClass:mn.selected}),C("div",{className:mn.divider}),Object.keys(n).map(d=>Number.parseInt(d)).sort().reverse().map(d=>C(Wp,{name:n[d].threadName?`${n[d].threadName} thread`:n[d].symbol??n[d].region??Ny(d),addr:d,percent:n[d].ramPercent,onClick:()=>l(d),selectButton:u}))]})]}),C("div",{className:mn.legend,children:[C("span",{children:[C("div",{className:mn.square,style:{backgroundColor:"var(--colors-lime)"}})," free"]}),C("span",{children:[C("div",{className:mn.square,style:{backgroundColor:"var(--colors-red)"}})," allocated"]}),C("span",{children:[C("div",{className:mn.square,style:{backgroundColor:"var(--colors-orange)"}})," statically allocated"]})]})]})});Xi(I4,"RAM Overview",{dataProvider:Oy,additionalProps:{contentClassName:vl,minHeight:460,minWidth:350}});function P4({color:t,strokeWidth:e="1rem",width:n="1rem"}){return C("svg",{width:n,height:"1rem",viewBox:"0 0 100 10",children:C("line",{x1:"0",x2:"100",y1:"5",y2:"5",style:{stroke:t,"stroke-width":e}})})}function k4({data:t,assignedMemory:e,addrToRange:n,plotData:r,memoryRegionName:i}){const a=Te(),o=Te(null),[s,l]=Pt(),u=d=>{const p=a.current,x="#FFFFFF";if(p===void 0)return x;const[R,O,A,P]=p.getColor(d);return si(R*255,O*255,A*255,1).formatHex()};if(e===-1)return;const f=Array.from(new Set(t.map(d=>d.memory_addr)).values()).sort();return Mt(()=>{l(f.map((d,p)=>C("p",{children:[C(P4,{color:u(p),strokeWidth:"1.5rem"})," ",i(d,!0,!1)," "]})))},[a]),C(Qi,{children:C("div",{className:mn["memory-usage-content"],children:[C(D4,{ref:a,plotData:r.slice(2),addrToRange:n,assignedMemory:e,memoryNameFunc:i}),C("div",{ref:o,className:mn["memory-usage-legend"],children:s})]})})}Xi(k4,"Memory usage",{dataProvider:Oy,additionalProps:{contentClassName:vl,minHeight:200,minWidth:300}});function B4(t,e){const n=t.sort((f,d)=>{const p=f.memory_addr-d.memory_addr;return p===0?f.ts-d.ts:p}),r=new Set;let i=e;n.forEach(f=>{r.has(f.memory_addr)||(i+=f.used+f.unused,r.add(f.memory_addr))});const a={},o=Math.max(...n.map(f=>f.ts))/1e3,s=[[{ts:0,used:i-e,unused:0,base:e,percentage:100,address:-1},{ts:o,used:i-e,unused:0,base:e,percentage:100,address:-1}],[{ts:0,used:e,unused:0,base:0,percentage:100,address:-1},{ts:o,used:e,unused:0,base:0,percentage:100,address:-1}]];let l=[],u=s[1];return n.forEach((f,d,p)=>{l.push({ts:f.ts/1e3,base:u[0].base+u[0].used+u[0].unused,used:f.used,unused:f.unused,percentage:f.used/(f.used+f.unused)*100,address:f.memory_addr}),(d+1>=p.length||f.memory_addr!==p[d+1].memory_addr)&&(a[f.memory_addr]=[l[0].base/i*100,(l[0].base+l[0].used+l[0].unused)/i*100],s.push(l),l=[],u=s[s.length-1])}),{data:s,totalMemory:i,addrToRange:a}}function F4(t,e,n,r,i,a=!0,o=!0){const s=[];o&&s.push(`${(i[t][1]-i[t][0]).toFixed(2)}% of RAM`),a&&s.push(`0x${t.toString(16)}`);let l="";s.length>0&&(l=` (${s.join(", ")})`);const u=e.find(f=>f.memory_addr===t);return u!=null&&u.for_thread_id&&u.for_thread_id in n?`${n[u.for_thread_id]} thread${l}`:t in r?`${r[t]}${l}`:`${u==null?void 0:u.memory_region}${l}`}function V4(){var f,d,p;const t=bn.get(),e=(t??[]).filter(x=>x.name===bf).map(x=>({name:x.name,ts:+x.ts.toFixed(3),...x.args})),n=new Set;e.forEach(x=>n.add(`${x.memory_region};${x.memory_addr};${x.for_thread_id}`));let r=Array.from(n).map(x=>{const[R,O,A]=x.split(";");return{memory_region:R,memory_addr:+O,for_thread_id:+A}});const i=((f=t==null?void 0:t.find(x=>x.name===CA))==null?void 0:f.args)??{},a=((d=t==null?void 0:t.find(x=>x.name===RA))==null?void 0:d.args)??0,o=t==null?void 0:t.filter(x=>x.name===MA).reduce((x,R,O,A)=>(x[R.tid]=R.args.name,x),{});if(o){const x=(p=Object.entries(o).find(([O,A])=>A==="main"))==null?void 0:p[0],R=r.findIndex(O=>O.for_thread_id===+(x??-1));R!==-1&&(r=[r[R]].concat(r.filter((O,A)=>A!==R)))}if(!e||e.length===0)return;const{data:s,addrToRange:l,totalMemory:u}=B4(e,a);return{fullData:e,plotData:s,threadNameData:o,memorySymbols:i,addrToRange:l,staticallyAssignedMem:a,totalMemory:u}}let au=null,xi=null;function Oy(){if(xi!==null&&au!==null&&bn.get()===au)return xi;au=bn.get();const t=V4();if(!t)return xi=void 0,xi;const{fullData:e,plotData:n,threadNameData:r,memorySymbols:i,addrToRange:a,staticallyAssignedMem:o,totalMemory:s}=t,l=(d,p=!0,x=!0)=>F4(d,e,r??{},i,a,p,x),u=Array.from(new Set(e.map(d=>d.memory_addr))).sort().reverse(),f={};return u.forEach(d=>{const p=e.find(R=>R.memory_addr===d),x=p==null?void 0:p.for_thread_id;f[d]={range:d in a?a[d]:void 0,threadName:r&&x?r[x]:void 0,symbol:i[d],ramPercent:d in a?a[d][1]-a[d][0]:void 0,region:p==null?void 0:p.memory_region}}),xi={data:e,plotData:n,assignedMemory:o,addrToProps:f,totalMemory:s,addrToRange:a,memoryRegionName:l},xi}function W4({color:t="#9E9EA4"}){return C(pl,{children:C("div",{className:"panel-icon",children:C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M2.66666 8H13.3333M2.66666 4H13.3333M2.66666 12H13.3333",stroke:t,"stroke-width":"0.666667","stroke-linecap":"round","stroke-linejoin":"round"})})})})}const Oa=BA,$4={global:{},borders:[],layout:{type:"row",children:[{type:"row",children:[{type:"tabset",children:[Na.createJSONNode()]},{type:"tabset",children:[Oa.createJSONNode()]}]}]}};[Na,Oa].forEach(t=>t.instances.set(1));const z4=3,H4=_t(({tilingRef:t})=>{hx(t,()=>({addNode:i,removeNode:a}),[]);const e=xn.fromJson($4);let n,r;e.visitNodes((f,d)=>{if(!(f instanceof ct))return;const p=f.getAttr("component");p===Oa.title?n=f:p===Na.title&&(r=f)});function i(f){let d=e.getNodeById(n.getId())&&r.getWindowId()===n.getWindowId()?n:r;for(;d&&(d.getType()==="tab"||(d==null?void 0:d.getOrientation())!==Fe.HORZ);)d=d==null?void 0:d.getParent();if(e.getRoot().getId()===(d==null?void 0:d.getId())&&(d=n.getParent()),!d)return;const p=d.getChildren(),x=(p.length??0)>=z4;f.incrInstances(),e.doAction(Pe.addNode(f.createJSONNode(),x?p[p.length-1].getId():d.getId(),x?be.CENTER:be.RIGHT,-1,!0))}function a(f){e.visitNodes(d=>{d.getAttr("component")===f.title&&(f.decrInstances(),e.doAction(Pe.deleteTab(d.getId())))})}const o=f=>{const d=f.getComponent();if(d===void 0)return;const p=Do(d),x=p==null?void 0:p.component;if(x)return C(x,{...f.getConfig()??{}})};bn.subscribe(()=>{mu().filter(f=>![Na,Oa].includes(f)).forEach(a),mu().filter(f=>![Na,Oa].includes(f)&&f.available.get()).forEach(i)});const s=f=>{var x;const d=Ux();if(!d)return;const p=(x=Do(d))==null?void 0:x.createJSONNode();if(p)return{json:p}},l=f=>{if(f.type===Pe.ADD_NODE&&"component"in f.data.json){const d=Do(f.data.json.component);d&&d.incrInstances()}else if(f.type===Pe.DELETE_TAB){const d=e.getNodeById(f.data.node),p=Do(d==null?void 0:d.getAttr("component"));p&&p.decrInstances()}return f},u=(f,d)=>{d.leading=C(W4,{})};return C("div",{id:bt["tiling-layout"],children:C(BT,{model:e,factory:o,popoutWindowName:"Zeppelin Trace Viewer",realtimeResize:!0,onExternalDrag:s,onAction:l,onRenderTab:u})})},(t,e)=>!0),U4=_t(({tilingRef:t})=>{const e=Te(null),n=Te(null),r=dt();let i=[];const a=()=>{i.length>0&&(i.forEach(f=>clearTimeout(f)),i=[]),e.current&&e.current.classList.add(bt["on-drag"],bt["block-pointer-events"]),n.current&&(n.current.classList.add(bt["on-drag"]),n.current.style.borderColor=r.selectionPrimaryColor)},o=()=>{e.current&&e.current.classList.remove(bt["on-drag"],bt["block-pointer-events"]),n.current&&n.current.classList.remove(bt["on-drag"])},s=f=>{var d,p;f.preventDefault(),!(((d=f.dataTransfer)==null?void 0:d.dropEffect)!=="copy"&&((p=f.dataTransfer)==null?void 0:p.effectAllowed)!=="copy")&&a()},l=f=>{i.push(setTimeout(o,150)),f.preventDefault(),f.stopImmediatePropagation()},u=f=>{o(),f.preventDefault(),f.stopPropagation();const d=Os.get();d!=null&&d.current&&d.current.loadDropFile(f)};return C("div",{id:bt["layout-container"],ref:e,onDragOver:s,onDrop:u,onDragLeave:l,children:[C(H4,{tilingRef:t}),C("div",{ref:n,style:{pointerEvents:"none",zIndex:11}})]})},(t,e)=>!0);function Y4(){const t=Te(null);return C("div",{id:bt.app,children:[C(eT,{tilingRef:t}),C(U4,{tilingRef:t})]})}Ia(C(Y4,{}),document.getElementById("mountpoint"));export{e2 as B,df as C,Qt as F,ov as K,hf as R,Eu as S,QE as T,q4 as a,G4 as b,j4 as c,Og as d,cn as e,K4 as f,X4 as g,Z4 as h,J4 as i,Ir as l,bn as m,ds as s,Px as z};
